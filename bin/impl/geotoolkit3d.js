/* eslint-disable */
import {L,te,D,hb,G,Ud,$a,rb,Fb,Xb,Wb,ho,og,N,Aj,U,Xo,To,Mo,Lo,Ai,zi,Fi,wc,xd,sg,qg,W,Po,vd,up,tp,Cg,Pd,bc,xb,Y,Ko,bp,jc,oc,rf,ug,xc,Hb,Kl,ve,Xg,Fh,ni,Yn,go,Um,Ro,ic,pc,ef,af,vg,Oo,hi,ki,ro,Kd,Hg,Eo,ta} from './geotoolkit.base.js';import {LH} from './geotoolkit.data.js';import {LI,TJ,UJ,WJ} from './geotoolkit.seismic.js';var ca,ha=ha||{};ha.scope={};ha.WDc=function(d){var a=0;return function(){return a<d.length?{done:!1,value:d[a++]}:{done:!0}}};ha.uJe=function(d){return{next:ha.WDc(d)}};ha.obd=!1;ha.N9d=!1;ha.O9d=!1;ha.jAe=!1;ha.noc=!1;ha.defineProperty=ha.obd||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,b){if(d==Array.prototype||d==Object.prototype)return d;d[a]=b.value;return d};
ha.I1=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<d.length;++a){var b=d[a];if(b&&b.Math==Math)return b}return function(){throw Error("Cannot find global object");}()};ha.global=ha.I1(this);ha.TMb="function"===typeof Symbol&&"symbol"===typeof Symbol("x");ha.FDe=!ha.noc||ha.TMb;ha.$cc={};ha.wdc={};ha.Chd="$jscp$";
function aaa(d,a){var b=ha.wdc[a];if(null==b)return d[a];b=d[b];return void 0!==b?b:d[a]}ha.LYc=function(d,a,b,c){a&&(ha.noc?ha.aWd(d,a,b,c):ha.bWd(d,a,b,c))};ha.bWd=function(d,a,b,c){b=ha.global;d=d.split(".");for(c=0;c<d.length-1;c++){var e=d[c];if(!(e in b))return;b=b[e]}d=d[d.length-1];c=b[d];a=a(c);a!=c&&null!=a&&ha.defineProperty(b,d,{configurable:!0,writable:!0,value:a})};
ha.aWd=function(d,a,b,c){var e=d.split(".");d=1===e.length;c=e[0];c=!d&&c in ha.$cc?ha.$cc:ha.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in c))return;c=c[g]}e=e[e.length-1];b=ha.TMb&&"es6"===b?c[e]:null;a=a(b);null!=a&&(d?ha.defineProperty(ha.$cc,e,{configurable:!0,writable:!0,value:a}):a!==b&&(ha.wdc[e]=ha.TMb?ha.global.Symbol(e):ha.Chd+e,e=ha.wdc[e],ha.defineProperty(c,e,{configurable:!0,writable:!0,value:a})))};ha.oNe=function(){};
ha.LYc("Symbol",function(d){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+e++,f)}function b(f,g){this.lbd=f;ha.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})}if(d)return d;b.prototype.toString=function(){return this.lbd};var c="jscomp_symbol_",e=0;return a},"es6","es3");ha.qNe=function(){};
ha.LYc("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<a.length;b++){var c=ha.global[a[b]];"function"===typeof c&&"function"!=typeof c.prototype[d]&&ha.defineProperty(c.prototype,d,{configurable:!0,writable:!0,value:function(){return ha.NQd(ha.WDc(this))}})}return d},"es6","es3");ha.pNe=function(){};
ha.NQd=function(d){d={next:d};d[Symbol.iterator]=function(){return this};return d};import * as _$$THREE from './externs/THREE.js';var Ep=_$$THREE,Fp=Ep.ImageUtils,Gp=Ep.Object3D,Hp=Ep.Vector3,Ip=Ep.Vector4,Jp=Ep.Scene,Kp=Ep.ACESFilmicToneMapping,Lp=Ep.AddEquation,Mp=Ep.AddOperation,Np=Ep.AdditiveAnimationBlendMode,Op=Ep.AdditiveBlending,Pp=Ep.AlphaFormat,Qp=Ep.AlwaysDepth,Rp=Ep.AlwaysStencilFunc,Sp=Ep.AmbientLight,Tp=Ep.AmbientLightProbe,Up=Ep.AnimationClip,Zp=Ep.AnimationLoader,$p=Ep.AnimationMixer,aq=Ep.AnimationObjectGroup,bq=Ep.AnimationUtils,cq=Ep.ArcCurve,dq=Ep.ArrayCamera,eq=Ep.ArrowHelper,fq=Ep.Audio,gq=Ep.AudioAnalyser,
hq=Ep.AudioContext,iq=Ep.AudioListener,jq=Ep.AudioLoader,kq=Ep.AxesHelper,lq=Ep.Ibd,mq=Ep.BackSide,nq=Ep.BasicDepthPacking,oq=Ep.BasicShadowMap,pq=Ep.Mbd,qq=Ep.Bone,rq=Ep.BooleanKeyframeTrack,sq=Ep.Zbd,tq=Ep.Box2,uq=Ep.Box3,vq=Ep.Box3Helper,wq=Ep.BoxBufferGeometry,xq=Ep.BoxGeometry,yq=Ep.BoxHelper,zq=Ep.BufferAttribute,Aq=Ep.BufferGeometry,Bq=Ep.BufferGeometryLoader,Cq=Ep.ByteType,Dq=Ep.Cache,Eq=Ep.Camera,Fq=Ep.CameraHelper,Gq=Ep.ncd,Hq=Ep.CanvasTexture,Iq=Ep.CatmullRomCurve3,Jq=Ep.CineonToneMapping,
Kq=Ep.CircleBufferGeometry,Lq=Ep.CircleGeometry,Mq=Ep.ClampToEdgeWrapping,Nq=Ep.Clock,Oq=Ep.Ecd,Pq=Ep.Color,Qq=Ep.ColorKeyframeTrack,Rq=Ep.CompressedTexture,Sq=Ep.CompressedTextureLoader,Tq=Ep.ConeBufferGeometry,Uq=Ep.ConeGeometry,Vq=Ep.CubeCamera,Wq=Ep.CubeReflectionMapping,Xq=Ep.CubeRefractionMapping,Yq=Ep.CubeTexture,Zq=Ep.CubeTextureLoader,$q=Ep.CubeUVReflectionMapping,ar=Ep.CubeUVRefractionMapping,br=Ep.CubicBezierCurve,cr=Ep.CubicBezierCurve3,dr=Ep.CubicInterpolant,er=Ep.CullFaceBack,fr=Ep.CullFaceFront,
gr=Ep.CullFaceFrontBack,hr=Ep.CullFaceNone,ir=Ep.Curve,jr=Ep.CurvePath,kr=Ep.CustomBlending,lr=Ep.Pcd,mr=Ep.CylinderBufferGeometry,nr=Ep.CylinderGeometry,or=Ep.Cylindrical,pr=Ep.DataTexture,qr=Ep.DataTexture2DArray,rr=Ep.DataTexture3D,sr=Ep.DataTextureLoader,tr=Ep.DecrementStencilOp,ur=Ep.DecrementWrapStencilOp,vr=Ep.DefaultLoadingManager,wr=Ep.DepthFormat,xr=Ep.DepthStencilFormat,yr=Ep.DepthTexture,zr=Ep.DirectionalLight,Ar=Ep.DirectionalLightHelper,Br=Ep.DiscreteInterpolant,Cr=Ep.DodecahedronBufferGeometry,
Dr=Ep.DodecahedronGeometry,Fr=Ep.DoubleSide,Gr=Ep.DstAlphaFactor,Hr=Ep.DstColorFactor,Ir=Ep.ydd,Jr=Ep.DynamicCopyUsage,Kr=Ep.DynamicDrawUsage,Lr=Ep.DynamicReadUsage,Mr=Ep.EdgesGeometry,Nr=Ep.Udd,Pr=Ep.EllipseCurve,Qr=Ep.EqualDepth,Rr=Ep.EqualStencilFunc,Sr=Ep.EquirectangularReflectionMapping,Tr=Ep.EquirectangularRefractionMapping,Ur=Ep.Euler,Vr=Ep.EventDispatcher,Wr=Ep.ExtrudeBufferGeometry,Xr=Ep.ExtrudeGeometry,Yr=Ep.Ced,Zr=Ep.Ded,$r=Ep.FaceColors,as=Ep.FileLoader,bs=Ep.FlatShading,cs=Ep.Float32Attribute,
ds=Ep.Float32BufferAttribute,es=Ep.Float64Attribute,fs=Ep.Float64BufferAttribute,gs=Ep.FloatType,hs=Ep.Fog,is=Ep.FogExp2,js=Ep.Font,ks=Ep.FontLoader,ls=Ep.FrontSide,ms=Ep.Frustum,ns=Ep.GLBufferAttribute,os=Ep.GLSL1,ps=Ep.GLSL3,qs=Ep.GammaEncoding,rs=Ep.Rnc,ss=Ep.GeometryUtils,ts=Ep.GreaterDepth,us=Ep.GreaterEqualDepth,vs=Ep.GreaterEqualStencilFunc,xs=Ep.GreaterStencilFunc,ys=Ep.GridHelper,zs=Ep.Group,As=Ep.HalfFloatType,Bs=Ep.HemisphereLight,Cs=Ep.HemisphereLightHelper,Ds=Ep.HemisphereLightProbe,
Es=Ep.IcosahedronBufferGeometry,Fs=Ep.IcosahedronGeometry,Gs=Ep.ImageBitmapLoader,Hs=Ep.ImageLoader,Is=Ep.ImmediateRenderObject,Js=Ep.IncrementStencilOp,Ks=Ep.IncrementWrapStencilOp,Ls=Ep.InstancedBufferAttribute,Ms=Ep.InstancedBufferGeometry,Ns=Ep.InstancedInterleavedBuffer,Os=Ep.InstancedMesh,Ps=Ep.Int16Attribute,Qs=Ep.Int16BufferAttribute,Rs=Ep.Int32Attribute,Ss=Ep.Int32BufferAttribute,Ts=Ep.Int8Attribute,Us=Ep.Int8BufferAttribute,Vs=Ep.IntType,Ws=Ep.InterleavedBuffer,Xs=Ep.InterleavedBufferAttribute,
Ys=Ep.Interpolant,Zs=Ep.InterpolateDiscrete,$s=Ep.InterpolateLinear,at=Ep.InterpolateSmooth,bt=Ep.InvertStencilOp,ct=Ep.Wfd,dt=Ep.KeepStencilOp,et=Ep.KeyframeTrack,ft=Ep.LOD,gt=Ep.LatheBufferGeometry,ht=Ep.LatheGeometry,it=Ep.Layers,jt=Ep.sgd,kt=Ep.LessDepth,lt=Ep.LessEqualDepth,mt=Ep.LessEqualStencilFunc,nt=Ep.LessStencilFunc,ot=Ep.Light,pt=Ep.LightProbe,qt=Ep.LightShadow,rt=Ep.Line,st=Ep.Line3,tt=Ep.LineBasicMaterial,ut=Ep.LineCurve,vt=Ep.LineCurve3,wt=Ep.LineDashedMaterial,xt=Ep.LineLoop,yt=Ep.LinePieces,
zt=Ep.LineSegments,At=Ep.LineStrip,Bt=Ep.LinearEncoding,Ct=Ep.LinearFilter,Dt=Ep.LinearInterpolant,Et=Ep.LinearMipMapLinearFilter,Ft=Ep.LinearMipMapNearestFilter,Gt=Ep.LinearMipmapLinearFilter,Ht=Ep.LinearMipmapNearestFilter,It=Ep.LinearToneMapping,Jt=Ep.Loader,Kt=Ep.LoaderUtils,Lt=Ep.LoadingManager,Mt=Ep.LogLuvEncoding,Nt=Ep.LoopOnce,Ot=Ep.LoopPingPong,Pt=Ep.LoopRepeat,Qt=Ep.LuminanceAlphaFormat,Rt=Ep.LuminanceFormat,St=Ep.MOUSE,Tt=Ep.Material,Ut=Ep.MaterialLoader,Vt=Ep.MathUtils,Wt=Ep.Matrix3,Xt=
Ep.Matrix4,Yt=Ep.MaxEquation,Zt=Ep.Mesh,$t=Ep.MeshBasicMaterial,au=Ep.MeshDepthMaterial,bu=Ep.MeshDistanceMaterial,cu=Ep.Sgd,du=Ep.MeshLambertMaterial,eu=Ep.MeshMatcapMaterial,fu=Ep.MeshNormalMaterial,gu=Ep.MeshPhongMaterial,hu=Ep.MeshPhysicalMaterial,iu=Ep.MeshStandardMaterial,ju=Ep.MeshToonMaterial,ku=Ep.MinEquation,lu=Ep.MirroredRepeatWrapping,mu=Ep.MixOperation,ou=Ep.$gd,pu=Ep.MultiplyBlending,qu=Ep.MultiplyOperation,ru=Ep.NearestFilter,su=Ep.NearestMipMapLinearFilter,tu=Ep.NearestMipMapNearestFilter,
uu=Ep.NearestMipmapLinearFilter,vu=Ep.NearestMipmapNearestFilter,wu=Ep.NeverDepth,xu=Ep.NeverStencilFunc,yu=Ep.NoBlending,zu=Ep.NoColors,Au=Ep.NoToneMapping,Bu=Ep.NormalAnimationBlendMode,Cu=Ep.NormalBlending,Du=Ep.NotEqualDepth,Eu=Ep.NotEqualStencilFunc,Fu=Ep.NumberKeyframeTrack,Gu=Ep.ObjectLoader,Hu=Ep.ObjectSpaceNormalMap,Iu=Ep.OctahedronBufferGeometry,Ju=Ep.OctahedronGeometry,Ku=Ep.OneFactor,Lu=Ep.OneMinusDstAlphaFactor,Mu=Ep.OneMinusDstColorFactor,Nu=Ep.OneMinusSrcAlphaFactor,Ou=Ep.OneMinusSrcColorFactor,
Pu=Ep.OrthographicCamera,Qu=Ep.PCFShadowMap,Ru=Ep.PCFSoftShadowMap,Su=Ep.PMREMGenerator,Tu=Ep.ParametricBufferGeometry,Uu=Ep.ParametricGeometry,Vu=Ep.Fhd,Wu=Ep.Ghd,Xu=Ep.Hhd,Yu=Ep.Ihd,Zu=Ep.Path,$u=Ep.PerspectiveCamera,av=Ep.Plane,bv=Ep.PlaneBufferGeometry,cv=Ep.PlaneGeometry,dv=Ep.PlaneHelper,ev=Ep.$Nb,fv=Ep.rpc,gv=Ep.PointLight,hv=Ep.PointLightHelper,iv=Ep.Points,jv=Ep.PointsMaterial,kv=Ep.PolarGridHelper,lv=Ep.PolyhedronBufferGeometry,mv=Ep.PolyhedronGeometry,nv=Ep.PositionalAudio,ov=Ep.PropertyBinding,
pv=Ep.PropertyMixer,qv=Ep.QuadraticBezierCurve,rv=Ep.QuadraticBezierCurve3,sv=Ep.Quaternion,uv=Ep.QuaternionKeyframeTrack,vv=Ep.QuaternionLinearInterpolant,wv=Ep.REVISION,xv=Ep.RGBADepthPacking,yv=Ep.RGBAFormat,zv=Ep.RGBAIntegerFormat,Av=Ep.RGBA_ASTC_10x10_Format,Bv=Ep.RGBA_ASTC_10x5_Format,Cv=Ep.RGBA_ASTC_10x6_Format,Dv=Ep.RGBA_ASTC_10x8_Format,Ev=Ep.RGBA_ASTC_12x10_Format,Fv=Ep.RGBA_ASTC_12x12_Format,Gv=Ep.RGBA_ASTC_4x4_Format,Hv=Ep.RGBA_ASTC_5x4_Format,Iv=Ep.RGBA_ASTC_5x5_Format,Jv=Ep.RGBA_ASTC_6x5_Format,
Kv=Ep.RGBA_ASTC_6x6_Format,Lv=Ep.RGBA_ASTC_8x5_Format,Mv=Ep.RGBA_ASTC_8x6_Format,Nv=Ep.RGBA_ASTC_8x8_Format,Ov=Ep.RGBA_BPTC_Format,Pv=Ep.RGBA_ETC2_EAC_Format,Qv=Ep.RGBA_PVRTC_2BPPV1_Format,Rv=Ep.RGBA_PVRTC_4BPPV1_Format,Sv=Ep.RGBA_S3TC_DXT1_Format,Tv=Ep.RGBA_S3TC_DXT3_Format,Uv=Ep.RGBA_S3TC_DXT5_Format,Vv=Ep.RGBDEncoding,Wv=Ep.RGBEEncoding,Xv=Ep.RGBEFormat,Yv=Ep.RGBFormat,Zv=Ep.RGBIntegerFormat,$v=Ep.RGBM16Encoding,aw=Ep.RGBM7Encoding,bw=Ep.RGB_ETC1_Format,cw=Ep.RGB_ETC2_Format,dw=Ep.RGB_PVRTC_2BPPV1_Format,
ew=Ep.RGB_PVRTC_4BPPV1_Format,fw=Ep.RGB_S3TC_DXT1_Format,gw=Ep.RGFormat,hw=Ep.RGIntegerFormat,iw=Ep.RawShaderMaterial,jw=Ep.Ray,kw=Ep.Raycaster,lw=Ep.RectAreaLight,mw=Ep.RedFormat,nw=Ep.RedIntegerFormat,ow=Ep.ReinhardToneMapping,pw=Ep.RepeatWrapping,qw=Ep.ReplaceStencilOp,rw=Ep.ReverseSubtractEquation,sw=Ep.RingBufferGeometry,tw=Ep.RingGeometry,uw=Ep.SRGB8_ALPHA8_ASTC_10x10_Format,vw=Ep.SRGB8_ALPHA8_ASTC_10x5_Format,ww=Ep.SRGB8_ALPHA8_ASTC_10x6_Format,xw=Ep.SRGB8_ALPHA8_ASTC_10x8_Format,yw=Ep.SRGB8_ALPHA8_ASTC_12x10_Format,
zw=Ep.SRGB8_ALPHA8_ASTC_12x12_Format,Aw=Ep.SRGB8_ALPHA8_ASTC_4x4_Format,Bw=Ep.SRGB8_ALPHA8_ASTC_5x4_Format,Cw=Ep.SRGB8_ALPHA8_ASTC_5x5_Format,Dw=Ep.SRGB8_ALPHA8_ASTC_6x5_Format,Ew=Ep.SRGB8_ALPHA8_ASTC_6x6_Format,Fw=Ep.SRGB8_ALPHA8_ASTC_8x5_Format,Gw=Ep.SRGB8_ALPHA8_ASTC_8x6_Format,Hw=Ep.SRGB8_ALPHA8_ASTC_8x8_Format,Iw=Ep.Mid,Jw=Ep.ShaderChunk,Kw=Ep.ShaderLib,Lw=Ep.ShaderMaterial,Mw=Ep.ShadowMaterial,Nw=Ep.Shape,Ow=Ep.ShapeBufferGeometry,Pw=Ep.ShapeGeometry,Qw=Ep.ShapePath,Rw=Ep.ShapeUtils,Sw=Ep.ShortType,
Tw=Ep.Skeleton,Uw=Ep.SkeletonHelper,Vw=Ep.SkinnedMesh,Ww=Ep.SmoothShading,Xw=Ep.Sphere,Yw=Ep.SphereBufferGeometry,Zw=Ep.SphereGeometry,$w=Ep.Spherical,ax=Ep.SphericalHarmonics3,bx=Ep.TV,cx=Ep.SplineCurve,dx=Ep.fjd,ex=Ep.SpotLight,fx=Ep.SpotLightHelper,gx=Ep.Sprite,hx=Ep.SpriteMaterial,ix=Ep.SrcAlphaFactor,jx=Ep.SrcAlphaSaturateFactor,kx=Ep.SrcColorFactor,lx=Ep.StaticCopyUsage,mx=Ep.StaticDrawUsage,nx=Ep.StaticReadUsage,ox=Ep.StereoCamera,px=Ep.StreamCopyUsage,qx=Ep.StreamDrawUsage,rx=Ep.StreamReadUsage,
sx=Ep.StringKeyframeTrack,tx=Ep.SubtractEquation,ux=Ep.SubtractiveBlending,vx=Ep.TOUCH,wx=Ep.TangentSpaceNormalMap,xx=Ep.TetrahedronBufferGeometry,yx=Ep.TetrahedronGeometry,zx=Ep.TextBufferGeometry,Ax=Ep.TextGeometry,Bx=Ep.Texture,Cx=Ep.TextureLoader,Dx=Ep.TorusBufferGeometry,Ex=Ep.TorusGeometry,Fx=Ep.TorusKnotBufferGeometry,Gx=Ep.TorusKnotGeometry,Hx=Ep.Triangle,Ix=Ep.TriangleFanDrawMode,Jx=Ep.TriangleStripDrawMode,Kx=Ep.TrianglesDrawMode,Lx=Ep.TubeBufferGeometry,Mx=Ep.TubeGeometry,Nx=Ep.UVMapping,
Ox=Ep.Uint16Attribute,Px=Ep.Uint16BufferAttribute,Qx=Ep.Uint32Attribute,Rx=Ep.Uint32BufferAttribute,Sx=Ep.Uint8Attribute,Tx=Ep.Uint8BufferAttribute,Ux=Ep.Uint8ClampedAttribute,Vx=Ep.Uint8ClampedBufferAttribute,Wx=Ep.Uniform,Xx=Ep.UniformsLib,Yx=Ep.UniformsUtils,Zx=Ep.UnsignedByteType,$x=Ep.UnsignedInt248Type,ay=Ep.UnsignedIntType,by=Ep.UnsignedShort4444Type,cy=Ep.UnsignedShort5551Type,dy=Ep.UnsignedShort565Type,ey=Ep.UnsignedShortType,fy=Ep.VSMShadowMap,gy=Ep.Vector2,hy=Ep.VectorKeyframeTrack,iy=
Ep.akd,jy=Ep.VertexColors,ky=Ep.VideoTexture,ly=Ep.WebGL1Renderer,my=Ep.WebGLCubeRenderTarget,ny=Ep.WebGLMultisampleRenderTarget,oy=Ep.WebGLRenderTarget,py=Ep.ikd,qy=Ep.WebGLRenderer,ry=Ep.WebGLUtils,sy=Ep.WireframeGeometry,ty=Ep.lkd,uy=Ep.WrapAroundEnding,vy=Ep.nkd,wy=Ep.ZeroCurvatureEnding,xy=Ep.ZeroFactor,lha=Ep.ZeroSlopeEnding,mha=Ep.ZeroStencilOp,nha=Ep.sRGBEncoding,oha=_$$THREE.Math;var yy=/*#__PURE__*/ta(/*#__PURE__*/{M$b:"IJ",N$b:"IJFLIPPED",Gg:"XY"},2,"eyJpaiI6Ik0kYiIsImlqZmxpcHBlZCI6Ik4kYiIsInh5IjoiR2cifSAg"),zy=/*#__PURE__*/ta(/*#__PURE__*/{qLb:0,Rqc:1,kC:2},2,"eyJCbGFja0FuZFdoaXRlIjoicUxiIiwiVGVycmFyaXVtIjoiUnFjIiwiTm9ybWFsIjoia0MifSAg"),Ay=/*#__PURE__*/ta(/*#__PURE__*/{Dmb:0,Aa:10,Ca:20,$f:30},2,"eyJJZCI6IkRtYiIsIlgiOiJBYSIsIlkiOiJDYSIsIloiOiIkZiJ9"),By=/*#__PURE__*/{NoColors:zu,FaceColors:$r,VertexColors:jy},Cy=/*#__PURE__*/{FrontSide:ls,BackSide:mq,DoubleSide:Fr},Dy=/*#__PURE__*/{start:"start",end:"end"},Ey=/*#__PURE__*/ta(/*#__PURE__*/{bqc:"ssaa",yMb:"fxaa",nOb:"sraa"},2,"eyJTU0FBIjoiYnFjIiwiRlhBQSI6InlNYiIsIlNSQUEiOiJuT2IifSAg"),Fy=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.Constants");d.Oid=yy;d.efd=zy;d.Khd=Ay;d.lI=By;d.Side=Cy;d.xbd=Dy;d.Bbd=Ey;return d}();var Hy=/*#__PURE__*/ta(/*#__PURE__*/{onContext:"onContext",onMouseDown:"onMouseDown",onMouseMove:"onMouseMove",onMouseUp:"onMouseUp",onMouseWheel:"onMouseWheel",onTouchStart:"onTouchStart",onTouchEnd:"onTouchEnd",onTouchMove:"onTouchMove",onDoubleClick:"onDoubleClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onPointerStart:"onPointerStart",onPointerMove:"onPointerMove",onPointerEnd:"onPointerEnd"},2,"eyJvbkNvbnRleHQiOiJETGEiLCJvbk1vdXNlRG93biI6ImdkIiwib25Nb3VzZU1vdmUiOiJJYyIsIm9uTW91c2VVcCI6IlljIiwib25Nb3VzZVdoZWVsIjoia3EiLCJvblRvdWNoU3RhcnQiOiJJTGEiLCJvblRvdWNoRW5kIjoiR0xhIiwib25Ub3VjaE1vdmUiOiJITGEiLCJvbkRvdWJsZUNsaWNrIjoienIiLCJvbktleURvd24iOiJVeCIsIm9uS2V5VXAiOiJaVSIsIm9uUG9pbnRlclN0YXJ0IjoiSFRkIiwib25Qb2ludGVyTW92ZSI6IkdUZCIsIm9uUG9pbnRlckVuZCI6IkZUZCJ9"),Iy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){te.call(this,b);this.FK=this.Ud=this.bh=this.uc=null;this.setOptions(b)}D(d,te);L(d,"geotoolkit3d.tool.devicesupport.AbstractDeviceSupport");
d.Ka=Hy;d.prototype.setup=function(b,c,e){var f=this;f.Cla=function(g){f.notify("onContext",f,g);f.FK=g};f.pT=function(g){f.notify("onMouseWheel",f,g);f.FK=g};f.Tma=function(g){f.notify("onKeyDown",f,g)};f.Uma=function(g){f.notify("onKeyUp",f,g)};f.YSa=function(g){f.k6(g);f.notify("onMouseUp",f,g);f.FK=g};f.kXb=function(g){f.k6(g);f.notify("onMouseOut",f,g);f.FK=g};f.WSa=function(g){f.k6(g);f.notify("onMouseDown",f,g);f.FK=g};f.USa=function(g){f.k6(g);f.notify("onDoubleClick",f,g);f.FK=g};f.XSa=function(g){if(null==
f.FK||f.FK.clientX!==g.clientX||f.FK.clientY!==g.clientY)f.k6(g),f.notify("onMouseMove",f,g)}};d.Iq=function(){hb("AbstractDeviceSupport.isSupported() has to be overriden");return!1};d.prototype.setOptions=function(b){b=G(b,{domelement:this.Ud,plot:this.uc,target:this.bh});this.uc=b.plot;this.bh=b.target;this.Ud!==b.domelement&&(null!=this.Ud&&this.dispose(),this.Ud=b.domelement,this.setup(this.uc,this.Ud,this.bh));return this};d.prototype.ta=function(){return{plot:this.uc,target:this.bh,domelement:this.Ud}};
var a=new Ud;d.prototype.Fbb=function(b,c){var e=this.Ud.getBoundingClientRect(),f=this.uc.getSize(a);return b={x:(b-e.left)/(e.right-e.left)*f.ca(),y:(c-e.top)/(e.bottom-e.top)*f.da()}};d.prototype.dispose=function(){this.Ud=this.bh=this.uc=null;te.prototype.dispose.call(this)};return d}(),2,"eyJpc1N1cHBvcnRlZCI6IklxIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var Jy=/*#__PURE__*/function(){function d(e){Iy.call(this,e)}function a(e){e.Ud.addEventListener(c.contextmenu,e.Cla,!1);e.Ud.addEventListener(c.mousedown,e.WSa,!1);e.Ud.addEventListener(c.mousemove,e.XSa,!1);e.Ud.addEventListener(c.mouseup,e.YSa,!1);e.Ud.addEventListener(c.wheel,e.pT,!1);e.Ud.addEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.addEventListener(c.touchstart,e.n_b,!1);e.Ud.addEventListener(c.touchend,e.l_b,!1);e.Ud.addEventListener(c.touchmove,e.m_b,!1);e.Ud.addEventListener(c.dblclick,e.USa,!1);$a.addEventListener("keydown",
e.Tma,!1);$a.addEventListener("keyup",e.Uma,!1)}function b(e){e.Ud.removeEventListener(c.contextmenu,e.Cla,!1);e.Ud.removeEventListener(c.mousedown,e.WSa,!1);e.Ud.removeEventListener(c.mousemove,e.XSa,!1);e.Ud.removeEventListener(c.mouseup,e.YSa,!1);e.Ud.removeEventListener(c.wheel,e.pT,!1);e.Ud.removeEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.removeEventListener(c.touchstart,e.n_b,!1);e.Ud.removeEventListener(c.touchend,e.l_b,!1);e.Ud.removeEventListener(c.touchmove,e.m_b,!1);e.Ud.removeEventListener(c.dblclick,
e.USa,!1);$a.removeEventListener("keydown",e.Tma,!1);$a.removeEventListener("keyup",e.Uma,!1);e.Cla=null;e.WSa=null;e.XSa=null;e.YSa=null;e.pT=null;e.n_b=null;e.l_b=null;e.m_b=null;e.USa=null;e.Tma=null;e.Uma=null}var c={contextmenu:"contextmenu",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",wheel:"wheel",DOMMouseScroll:"DOMMouseScroll",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",dblclick:"dblclick"};D(d,Iy);L(d,"geotoolkit3d.tool.devicesupport.TouchDeviceSupport");
d.Iq=function(){return"ontouchstart"in $a};d.prototype.k6=function(e){var f=this.Fbb(e.clientX,e.clientY);e.plotX=f.x;e.plotY=f.y;e.plotXs=[e.plotX];e.plotYs=[e.plotY]};d.prototype.setup=function(e,f,g){function h(m){m.plotXs=[];m.plotYs=[];for(var n=0;n<m.touches.length;n++){var p=k.Fbb(m.touches[n].clientX,m.touches[n].clientY);m.plotXs.push(p.x);m.plotYs.push(p.y)}0===m.touches.length&&(n=k.Fbb(l.touches[n].clientX,l.touches[n].clientY),m.plotXs.push(n.x),m.plotYs.push(n.y));m.plotX=m.plotXs[0];
m.plotY=m.plotYs[0]}var k=this,l=null;k.n_b=function(m){l=m;h(m);k.notify("onTouchStart",k,m)};k.l_b=function(m){h(m);k.notify("onTouchEnd",k,m);0<m.touches.length&&k.notify("onTouchStart",k,m)};k.m_b=function(m){l=m;h(m);k.notify("onTouchMove",k,m)};Iy.prototype.setup.call(this,e,f,g);a(this)};d.prototype.dispose=function(){b(this);Iy.prototype.dispose.call(this)};return d}();var Ky=/*#__PURE__*/function(){function d(e){Iy.call(this,e);this.nd={dU:[],running:!1,visible:!1}}function a(e){e.Ud.addEventListener(c.contextmenu,e.Cla,!1);e.Ud.addEventListener(c.wheel,e.pT,!1);e.Ud.addEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.addEventListener(c.touchstart,e.qub,!1);e.Ud.addEventListener(c.touchend,e.pub,!1);e.Ud.addEventListener(c.touchmove,e.OXb,!1);e.Ud.addEventListener(c.touchout,e.PXb,!1);$a.addEventListener("keydown",e.Tma,!1);$a.addEventListener("keyup",e.Uma,!1)}function b(e){e.Ud.removeEventListener(c.contextmenu,
e.Cla,!1);e.Ud.removeEventListener(c.wheel,e.pT,!1);e.Ud.removeEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.removeEventListener(c.touchstart,e.qub,!1);e.Ud.removeEventListener(c.touchend,e.pub,!1);e.Ud.removeEventListener(c.touchmove,e.OXb,!1);e.Ud.removeEventListener(c.touchout,e.PXb,!1);$a.removeEventListener("keydown",e.Tma,!1);$a.removeEventListener("keyup",e.Uma,!1);e.Cla=null;e.pT=null;e.qub=null;e.pub=null;e.OXb=null;e.PXb=null;e.Tma=null;e.Uma=null}var c={contextmenu:"contextmenu",wheel:"wheel",
DOMMouseScroll:"DOMMouseScroll",touchstart:"pointerdown",touchend:"pointerup",touchout:"pointerout",touchmove:"pointermove"};D(d,Iy);L(d,"geotoolkit3d.tool.devicesupport.PointerDeviceSupport");d.Iq=function(){return null!=$a.PointerEvent};d.prototype.k6=function(e,f){var g=this.Fbb(e.clientX,e.clientY);e.plotX=Math.floor(g.x);e.plotY=Math.floor(g.y);e.plotXs=[];e.plotYs=[];g=!1;for(var h=0;h<f.length;h++)f[h].pointerId===e.pointerId?(e.plotXs.push(e.plotX),e.plotYs.push(e.plotY),f[h]=e,g=!0):(e.plotXs.push(f[h].plotX),
e.plotYs.push(f[h].plotY));g||(e.plotXs.push(e.plotX),e.plotYs.push(e.plotY));"touch"===e.pointerType||this.nd.visible||(this.nd.visible=!0,e.windowVisibility="visible",this.notify("onVisibilityChanged",this,e))};d.prototype.setup=function(e,f,g){var h=this;h.qub=function(k){h.k6(k,h.nd.dU);"touch"===k.pointerType?(h.nd.running&&(h.notify("onTouchEnd",h,k),h.nd.running=!1),h.nd.dU.push(k)):h.notify("onMouseDown",h,k);h.FK=k};h.pub=function(k){h.k6(k,h.nd.dU);if("touch"===k.pointerType){var l=!1,m;
for(m=0;m<h.nd.dU.length;m++)if(h.nd.dU[m].pointerId===k.pointerId){l=!0;break}if(!l)return;h.nd.dU.splice(m,1);h.notify("onTouchEnd",h,k);h.nd.running=!1;0<h.nd.dU.length&&(h.k6(h.nd.dU[h.nd.dU.length-1],h.nd.dU),h.notify("onTouchStart",h,k),h.nd.running=!0)}else h.notify("onMouseUp",h,k);h.FK=k};h.OXb=function(k){if(null==h.FK||h.FK.clientX!==k.clientX||h.FK.clientY!==k.clientY||h.FK.movementX!==k.movementX||h.FK.movementY!==k.movementY){h.k6(k,h.nd.dU);if("touch"===k.pointerType){h.nd.running||
(0===h.nd.dU.length&&h.qub(k),h.notify("onTouchStart",h,k),h.nd.running=!0);if(3===h.nd.dU.length&&h.nd.dU[0].pointerId!==k.pointerId)return;h.notify("onTouchMove",h,k)}else h.notify("onMouseMove",h,k);h.FK=k}};h.PXb=function(k){"touch"===k.pointerType?h.pub(k):(h.k6(k,h.nd.dU),h.notify("onMouseOut",h,k),h.nd.visible&&(h.nd.visible=!1,k.windowVisibility="hidden",h.notify("onVisibilityChanged",h,k)),h.FK=k)};Iy.prototype.setup.call(this,e,f,g);a(this)};d.prototype.dispose=function(){b(this);Iy.prototype.dispose.call(this)};
return d}();var Ly=/*#__PURE__*/function(){function d(e){Iy.call(this,e);this.zaa="";this.l6a="hidden";this.l6a in $a.document?this.zaa="visibilitychange":(this.l6a="mozHidden")in $a.document?this.zaa="mozvisibilitychange":(this.l6a="webkitHidden")in $a.document?this.zaa="webkitvisibilitychange":(this.l6a="msHidden")in $a.document?this.zaa="msvisibilitychange":"onfocusin"in $a.document&&(this.zaa="onfocuschange")}function a(e){e.Ud.addEventListener(c.contextmenu,e.Cla,!1);e.Ud.addEventListener(c.mousedown,e.WSa,!1);e.Ud.addEventListener(c.mousemove,
e.XSa,!1);e.Ud.addEventListener(c.mouseup,e.YSa,!1);e.Ud.addEventListener(c.wheel,e.pT,!1);e.Ud.addEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.addEventListener(c.dblclick,e.USa,!1);e.Ud.addEventListener(c.mouseout,e.kXb,!1);$a.addEventListener("keydown",e.Tma,!1);$a.addEventListener("keyup",e.Uma,!1);"onfocuschange"===e.zaa?$a.document.onfocusin=$a.document.onfocusout=e.gGa:""===e.zaa?$a.onpageshow=$a.onpagehide=$a.onfocus=$a.onblur=e.JIe:$a.document.addEventListener(e.zaa,e.gGa);$a.addEventListener("blur",
e.gGa);$a.addEventListener("focus",e.gGa)}function b(e){e.Ud.removeEventListener(c.contextmenu,e.Cla,!1);e.Ud.removeEventListener(c.mousedown,e.WSa,!1);e.Ud.removeEventListener(c.mousemove,e.XSa,!1);e.Ud.removeEventListener(c.mouseup,e.YSa,!1);e.Ud.removeEventListener(c.wheel,e.pT,!1);e.Ud.removeEventListener(c.DOMMouseScroll,e.pT,!1);e.Ud.removeEventListener(c.dblclick,e.USa,!1);e.Ud.removeEventListener(c.mouseout,e.kXb,!1);$a.removeEventListener("keydown",e.Tma,!1);$a.removeEventListener("keyup",
e.Uma,!1);"onfocuschange"===e.zaa?$a.document.onfocusin=$a.document.onfocusout=null:""===e.zaa?$a.onpageshow=$a.onpagehide=$a.onfocus=$a.onblur=null:$a.document.removeEventListener(e.zaa,e.gGa,!1);$a.removeEventListener("blur",e.gGa,!1);$a.removeEventListener("focus",e.gGa,!1);e.Cla=null;e.WSa=null;e.XSa=null;e.YSa=null;e.kXb=null;e.pT=null;e.USa=null;e.Tma=null;e.Uma=null}var c={contextmenu:"contextmenu",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",wheel:"wheel",DOMMouseScroll:"DOMMouseScroll",
dblclick:"dblclick",mouseout:"mouseout"};D(d,Iy);L(d,"geotoolkit3d.tool.devicesupport.MouseDeviceSupport");d.Iq=function(){return!0};d.prototype.k6=function(e){var f=this.Fbb(e.clientX,e.clientY);e.plotX=f.x;e.plotY=f.y;e.plotXs=[e.plotX];e.plotYs=[e.plotY]};d.prototype.setup=function(e,f,g){function h(l){if("blur"===l.type)l.bbd="hidden";else if("focus"===l.type)l.bbd="visible";else{var m="visible",n="hidden";m={focus:m,gLe:m,qPe:m,blur:n,hLe:n,pPe:n};l=l||$a.event;l.bbd=l.type in m?m[l.type]:this[this.l6a]?
"hidden":"visible"}}var k=this;k.gGa=function(l){h(l);k.notify("onVisibilityChanged",k,l)};Iy.prototype.setup.call(this,e,f,g);a(this)};d.prototype.dispose=function(){b(this);Iy.prototype.dispose.call(this)};return d}();var My=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}var a=[],b=null;d.y2c=function(c){b=c};d.MMc=function(){for(var c=null,e=0;e<a.length;e++)if(c=a[e],null==c.Iq)rb("Warning: "+c.Pa()+" is not implementing isSupported()");else if(c.Iq())break;else c=null;return null!=c?c:b};d.s5b=function(){return a};L(d,"geotoolkit3d.tool.devicesupport.DeviceSupportRegistry");d.s5b().push(Jy);d.s5b().push(Ky);d.y2c(Ly);return d}(),2,"eyJzZXREZWZhdWx0RGV2aWNlU3VwcG9ydCI6InkyYyIsImdldERldmljZVN1cHBvcnQiOiJNTWMiLCJnZXRBbGxEZXZpY2VTdXBwb3J0IjoiczViIn0g");var Ny=/*#__PURE__*/ta(/*#__PURE__*/{onContext:"onContext",onMouseDown:"onMouseDown",onMouseMove:"onMouseMove",onMouseUp:"onMouseUp",onMouseWheel:"onMouseWheel",onTouchStart:"onTouchStart",onTouchEnd:"onTouchEnd",onTouchMove:"onTouchMove",onDoubleClick:"onDoubleClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onPointerStart:"onPointerStart",onPointerMove:"onPointerMove",onPointerEnd:"onPointerEnd",onVisibilityChanged:"onVisibilityChanged"},2,"eyJvbkNvbnRleHQiOiJETGEiLCJvbk1vdXNlRG93biI6ImdkIiwib25Nb3VzZU1vdmUiOiJJYyIsIm9uTW91c2VVcCI6IlljIiwib25Nb3VzZVdoZWVsIjoia3EiLCJvblRvdWNoU3RhcnQiOiJJTGEiLCJvblRvdWNoRW5kIjoiR0xhIiwib25Ub3VjaE1vdmUiOiJITGEiLCJvbkRvdWJsZUNsaWNrIjoienIiLCJvbktleURvd24iOiJVeCIsIm9uS2V5VXAiOiJaVSIsIm9uUG9pbnRlclN0YXJ0IjoiSFRkIiwib25Qb2ludGVyTW92ZSI6IkdUZCIsIm9uUG9pbnRlckVuZCI6IkZUZCIsIm9uVmlzaWJpbGl0eUNoYW5nZWQiOiJLcSJ9"),Oy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){te.call(this,c);this.Ud=c.domelement;var e=My.MMc();c=G(c,{target:this,
name:"abstracttool"});this.ym={};null!=e&&(this.nEa=new e(c),this.setup(this.nEa));this.ic=c.name;this.uc=c.plot}D(d,te);L(d,"geotoolkit3d.tool.AbstractTool");d.prototype.setOptions=function(c){var e=G(c,{name:this.ic,plot:this.uc});null!=this.nEa&&this.nEa.setOptions(c);this.ic=e.name;this.uc=e.plot;return this};d.prototype.ta=function(){var c=this.nEa.ta();c.name=this.Ga();c.plot=this.uc;return c};var a=new RegExp(/touch/),b=new RegExp(/pointer/);d.prototype.pn=function(c){null!=c.Je&&(c=c.Je());
return a.test(c.type)||b.test(c.type)&&"mouse"!==c.pointerType};d.Ka=Ny;d.prototype.setup=function(c){var e=this;e.ym.onContext=function(f,g,h){e.DLa!==Fb&&e.DLa(h);e.notify("onContext",this,h)};c.on("onContext",e.ym.onContext);e.ym.onMouseDown=function(f,g,h){e.gd!==Fb&&e.gd(h);e.notify("onMouseDown",this,h)};c.on("onMouseDown",e.ym.onMouseDown);e.ym.onMouseMove=function(f,g,h){e.Ic!==Fb&&e.Ic(h);e.notify("onMouseMove",this,h)};c.on("onMouseMove",e.ym.onMouseMove);e.ym.onMouseUp=function(f,g,h){e.Yc!==
Fb&&e.Yc(h);e.notify("onMouseUp",this,h)};c.on("onMouseUp",e.ym.onMouseUp);e.ym.onMouseOut=function(f,g,h){e.Ahb!==Fb&&e.Ahb(h);e.notify("onMouseOut",this,h)};c.on("onMouseOut",e.ym.onMouseOut);e.ym.onMouseWheel=function(f,g,h){e.kq!==Fb&&e.kq(h);e.notify("onMouseWheel",this,h)};c.on("onMouseWheel",e.ym.onMouseWheel);e.ym.onTouchStart=function(f,g,h){e.ILa!==Fb&&e.ILa(h);e.notify("onTouchStart",this,h)};c.on("onTouchStart",e.ym.onTouchStart);e.ym.onTouchEnd=function(f,g,h){e.GLa!==Fb&&e.GLa(h);e.notify("onTouchEnd",
this,h)};c.on("onTouchEnd",e.ym.onTouchEnd);e.ym.onTouchMove=function(f,g,h){e.HLa!==Fb&&e.HLa(h);e.notify("onTouchMove",this,h)};c.on("onTouchMove",e.ym.onTouchMove);e.ym.onDoubleClick=function(f,g,h){e.zr!==Fb&&e.zr(h);e.notify("onDoubleClick",this,h)};c.on("onDoubleClick",e.ym.onDoubleClick);e.ym.onKeyDown=function(f,g,h){e.Ux!==Fb&&e.Ux(h);e.notify("onKeyDown",this,h)};c.on("onKeyDown",e.ym.onKeyDown);e.ym.onKeyUp=function(f,g,h){e.ZU!==Fb&&e.ZU(h);e.notify("onKeyUp",this,h)};c.on("onKeyUp",e.ym.onKeyUp);
e.ym.onVisibilityChanged=function(f,g,h){e.Kq!==Fb&&e.Kq(h);e.notify("onVisibilityChanged",this,h)};c.on("onVisibilityChanged",e.ym.onVisibilityChanged);return this};d.prototype.Ga=function(){return this.ic};d.prototype.DLa=Fb;d.prototype.gd=Fb;d.prototype.Ic=Fb;d.prototype.Yc=Fb;d.prototype.Ahb=Fb;d.prototype.kq=Fb;d.prototype.ILa=Fb;d.prototype.GLa=Fb;d.prototype.HLa=Fb;d.prototype.zr=Fb;d.prototype.Ux=Fb;d.prototype.ZU=Fb;d.prototype.Kq=Fb;d.prototype.dispose=function(){null!=this.nEa&&(this.nEa.dispose(),
this.nEa=null);this.Ud=null;te.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJpc1RvdWNoRXZlbnQiOiJwbiIsImdldE5hbWUiOiJHYSIsIm9uQ29udGV4dCI6IkRMYSIsIm9uTW91c2VEb3duIjoiZ2QiLCJvbk1vdXNlTW92ZSI6IkljIiwib25Nb3VzZVVwIjoiWWMiLCJvbk1vdXNlT3V0IjoiQWhiIiwib25Nb3VzZVdoZWVsIjoia3EiLCJvblRvdWNoU3RhcnQiOiJJTGEiLCJvblRvdWNoRW5kIjoiR0xhIiwib25Ub3VjaE1vdmUiOiJITGEiLCJvbkRvdWJsZUNsaWNrIjoienIiLCJvbktleURvd24iOiJVeCIsIm9uS2V5VXAiOiJaVSIsIm9uVmlzaWJpbGl0eUNoYW5nZWQiOiJLcSJ9fX0g");var Py=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}function a(q){Oy.call(this,q);q=G(q,{state:b,dragbutton:0,pinchbutton:1,slidebutton:2,dragtouchcount:1,pinchtouchcount:2,slidetouchcount:3,doubletapdelay:250,name:"abstractgesturetool",radius:0,armingkey:null},!0);this.setOptions(q);this.sVa(null==this.Bea);this.Fc=q.radius;this.cIe=this.kEa=0;this.k_b=!1;this.nna={}}var b="none",c="mb",e="mb2",f="mb3",g="touch1",h="touch2",k="touch3",l="drag",m="slide",n="pinch";D(a,Oy);L(a,"geotoolkit3d.tool.AbstractGestureTool");
a.prototype.setOptions=function(q){var r=G(q,{state:this.Z5a,dragbutton:this.VRb,pinchbutton:this.KXb,slidebutton:this.eZb,dragtouchcount:this.Itc,pinchtouchcount:this.ozc,slidetouchcount:this.RAc,doubletapdelay:this.Mpb,armingkey:this.Bea,radius:this.Fc},!0);this.pw(r.state);this.Fc=r.radius;this.VRb=+r.dragbutton;this.KXb=+r.pinchbutton;this.eZb=+r.slidebutton;this.Itc=+r.dragtouchcount;this.ozc=+r.pinchtouchcount;this.RAc=+r.slidetouchcount;this.Mpb=+r.doubletapdelay;var t=this.Bea;this.Bea=null!=
r.armingkey?+r.armingkey:null;this.Bea!==t&&(null!=t&&null!=this.Bea?this.sVa(!1):null==t?this.sVa(!1):this.sVa(!0));Oy.prototype.setOptions.call(this,q);return this};a.prototype.ta=function(){var q=Oy.prototype.ta.call(this);q.radius=this.Fc;q.dragbutton=this.VRb;q.pinchbutton=this.KXb;q.slidebutton=this.eZb;q.dragtouchcount=this.Itc;q.pinchtouchcount=this.ozc;q.slidetouchcount=this.RAc;q.doubletapdelay=this.Mpb;q.armingkey=this.Bea;return q};a.prototype.pw=function(q,r){this.Z5a=q};a.prototype.DLa=
function(q){this.MS&&q.preventDefault()};a.prototype.gd=function(q){this.MS&&q.preventDefault();switch(q.button){case this.VRb:this.pw(c,q);break;case this.KXb:this.pw(e,q);break;case this.eZb:this.pw(f,q)}q.shiftKey&&this.pw(f,q)};a.prototype.Ic=function(q){this.MS&&q.preventDefault();switch(this.Z5a){case b:this.ho.RH(q);break;case c:this.pw(l,q);this.ho.PE(q);break;case e:this.pw(n,q);q.distanceX=q.plotY;q.distanceY=q.plotY;this.ho.SE(q);break;case f:this.pw(m,q);this.ho.lG(q);break;case l:this.ho.OA(q);
break;case n:1<q.plotXs.length?(q.distanceX=Math.abs(q.plotXs[0]-q.plotXs[1]),q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1])):(q.distanceX=q.plotY,q.distanceY=q.plotY);this.ho.RE(q);break;case m:this.ho.UE(q);break;default:this.pw(b,q)}};a.prototype.Ahb=function(q){this.Yc(q);this.RH(q)};a.prototype.Yc=function(q){this.MS&&q.preventDefault();switch(this.Z5a){case c:Date.now()-this.kEa<this.Mpb?this.ho.jG(q):this.ho.LJ(q),this.kEa=Date.now();case e:case f:this.pw(b,q);break;case l:this.pw(b,q);this.ho.OE(q);
break;case m:this.pw(b,q);this.ho.kD(q);break;case n:this.pw(b,q);this.ho.kG(q);break;default:this.pw(b,q)}};a.prototype.zr=function(q){this.MS&&q.preventDefault();this.pw(b,q);this.ho.jG(q)};a.prototype.ILa=function(q){this.MS||q.preventDefault();switch(q.plotXs.length){case 1:this.pw(g,q);break;case 2:this.pw(h,q);break;case 3:this.pw(k,q)}this.k_b=!0};a.prototype.GLa=function(q){this.MS&&q.preventDefault();if(!this.k_b)switch(q.plotXs.length){case 1:this.pw(g,q);break;case 2:this.pw(h,q);break;
case 3:this.pw(k,q)}switch(this.Z5a){case g:Date.now()-this.kEa<this.Mpb?this.ho.jG(q):this.ho.LJ(q),this.kEa=Date.now();case h:case k:this.pw(b,q);break;case l:this.pw(b,q);this.ho.OE(q);break;case m:this.pw(b,q);this.ho.kD(q);break;case n:this.pw(b,q);this.ho.kG(q);break;default:this.pw(b,q)}this.k_b=!1};a.prototype.HLa=function(q){this.MS&&q.preventDefault();switch(this.Z5a){case b:this.ho.RH(q);break;case g:this.pw(l,q);this.ho.PE(q);break;case h:this.pw(n,q);q.distanceX=Math.abs(q.plotXs[0]-
q.plotXs[1]);q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1]);this.ho.SE(q);break;case k:this.pw(m,q);this.ho.lG(q);break;case l:this.ho.OA(q);break;case n:2===q.plotXs.length&&(q.distanceX=Math.abs(q.plotXs[0]-q.plotXs[1]),q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1]),this.ho.RE(q));break;case m:this.ho.UE(q);break;default:this.pw(b,q)}};a.prototype.Ux=function(q){this.MS||this.sVa(q.keyCode===this.Bea);null!=this.nna[q.keyCode]?this.ho.EO(q):(this.nna[q.keyCode]={since:Date.now()},this.ho.YL(q))};
a.prototype.Kq=function(q){"visible"===q.windowVisibility?this.ho.ZL(q):this.ho.$L(q)};a.prototype.ZU=function(q){this.ho.FO(q);null!=this.nna[q.keyCode]&&(this.nna[q.keyCode]=null,delete this.nna[q.keyCode]);this.MS&&this.sVa(q.keyCode!==this.Bea)};var p={YL:d,EO:d,FO:d,RH:d,LJ:d,jG:d,SE:d,RE:d,kG:d,PE:d,OA:d,OE:d,lG:d,UE:d,kD:d,ZL:d,$L:d};a.prototype.sVa=function(q){this.MS!==q&&(this.ho=q?{YL:this.YL.bind(this),EO:this.EO.bind(this),FO:this.FO.bind(this),ZL:this.ZL.bind(this),$L:this.$L.bind(this),
RH:this.RH.bind(this),LJ:this.LJ.bind(this),jG:this.jG.bind(this),SE:this.SE.bind(this),RE:this.RE.bind(this),kG:this.kG.bind(this),PE:this.PE.bind(this),OA:this.OA.bind(this),OE:this.OE.bind(this),lG:this.lG.bind(this),UE:this.UE.bind(this),kD:this.kD.bind(this)}:p,this.MS=q)};a.prototype.YL=Fb;a.prototype.EO=Fb;a.prototype.FO=Fb;a.prototype.ZL=Fb;a.prototype.$L=Fb;a.prototype.RH=Fb;a.prototype.LJ=Fb;a.prototype.jG=Fb;a.prototype.SE=Fb;a.prototype.RE=Fb;a.prototype.kG=Fb;a.prototype.PE=Fb;a.prototype.OA=
Fb;a.prototype.OE=Fb;a.prototype.lG=Fb;a.prototype.UE=Fb;a.prototype.kD=Fb;a.prototype.dispose=function(){this.nna=this.ho=null;Oy.prototype.dispose.call(this)};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkNvbnRleHQiOiJETGEiLCJvbk1vdXNlRG93biI6ImdkIiwib25Nb3VzZU1vdmUiOiJJYyIsIm9uTW91c2VPdXQiOiJBaGIiLCJvbk1vdXNlVXAiOiJZYyIsIm9uRG91YmxlQ2xpY2siOiJ6ciIsIm9uVG91Y2hTdGFydCI6IklMYSIsIm9uVG91Y2hFbmQiOiJHTGEiLCJvblRvdWNoTW92ZSI6IkhMYSIsIm9uS2V5RG93biI6IlV4Iiwib25WaXNpYmlsaXR5Q2hhbmdlZCI6IktxIiwib25LZXlVcCI6IlpVIiwib25LZXlTdGFydCI6IllMIiwib25LZXkiOiJFTyIsIm9uS2V5RW5kIjoiRk8iLCJvblZpc2liaWxpdHlHYWluZWQiOiJaTCIsIm9uVmlzaWJpbGl0eUxvc3QiOiIkTCIsIm9uQ3Vyc29yTW92ZSI6IlJIIiwib25UYXAiOiJMSiIsIm9uRG91YmxlVGFwIjoiakciLCJvblBpbmNoU3RhcnQiOiJTRSIsIm9uUGluY2giOiJSRSIsIm9uUGluY2hFbmQiOiJrRyIsIm9uRHJhZ1N0YXJ0IjoiUEUiLCJvbkRyYWciOiJPQSIsIm9uRHJhZ0VuZCI6Ik9FIiwib25TbGlkZVN0YXJ0IjoibEciLCJvblNsaWRlIjoiVUUiLCJvblNsaWRlRW5kIjoia0QifX19");var Qy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){var c=G(b,{enabled:!0,nozoom:!1,nopan:!1});Py.call(this,c);this.Vb=b.camera;this.uc=b.plot;this.bh=b.lookat.clone();this.wHa=this.bh.clone();this.vGa=b.position.clone();this.setOptions(c)}function a(){}D(d,Py);L(d,"geotoolkit3d.controller.AbstractController");d.prototype.setOptions=function(b){var c=G(b,{enabled:this.Vf,zoomspeed:this.Kab,nozoom:this.aQ,nopan:this.B$,camera:this.Vb,position:null!=this.Vb?this.Vb.position:this.vGa});this.Vb=c.camera;this.Vf=c.enabled;
this.Kab=c.zoomspeed;this.aQ=c.nozoom;this.B$=c.nopan;Py.prototype.setOptions.call(this,b);this.vGa=c.position;return this};d.prototype.ta=function(){var b=Py.prototype.ta.call(this);b.enabled=this.Vf;b.nozoom=this.aQ;b.zoomspeed=this.Kab;b.nopan=this.B$;return b};d.prototype.RH=a;d.prototype.LJ=a;d.prototype.YL=a;d.prototype.EO=a;d.prototype.FO=a;d.prototype.ZL=a;d.prototype.$L=a;d.prototype.jG=a;d.prototype.PE=a;d.prototype.OA=a;d.prototype.OE=a;d.prototype.SE=a;d.prototype.RE=a;d.prototype.kG=
a;d.prototype.lG=a;d.prototype.UE=a;d.prototype.kD=a;d.prototype.LH=function(){return this.bh};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJSSCIsIm9uVGFwIjoiTEoiLCJvbktleVN0YXJ0IjoiWUwiLCJvbktleSI6IkVPIiwib25LZXlFbmQiOiJGTyIsIm9uVmlzaWJpbGl0eUdhaW5lZCI6IlpMIiwib25WaXNpYmlsaXR5TG9zdCI6IiRMIiwib25Eb3VibGVUYXAiOiJqRyIsIm9uRHJhZ1N0YXJ0IjoiUEUiLCJvbkRyYWciOiJPQSIsIm9uRHJhZ0VuZCI6Ik9FIiwib25QaW5jaFN0YXJ0IjoiU0UiLCJvblBpbmNoIjoiUkUiLCJvblBpbmNoRW5kIjoia0ciLCJvblNsaWRlU3RhcnQiOiJsRyIsIm9uU2xpZGUiOiJVRSIsIm9uU2xpZGVFbmQiOiJrRCJ9fX0g");var Ry=/*#__PURE__*/function(){function d(a){}L(d,"geotoolkit3d.scene.EmptyController");d.prototype.setOptions=function(a){};d.prototype.dispose=function(){};d.prototype.Ga=function(){return"EmptyController"};return d}();var Sy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.Shaders");var a=new Ip(1,255,65025,16581375),b=new Ip(1/a.x,1/a.y,1/a.z,1/a.w);d.jcc=function(){var c=new Ip,e=new Ip,f=new Ip,g=new Ip(1/255,1/255,1/255,0);return function(h){c.copy(a);c.multiplyScalar(h);e.copy(c);e=e.floor();c=c.sub(e);f.set(c.y,c.z,c.w,c.w);f.x*=g.x;f.y*=g.y;f.z*=g.z;f.w*=g.w;return c=c.sub(f)}}();d.dUd=function(c){return d.jcc(c).multiplyScalar(255).round()};d.Okb=function(){var c=new Ip;return function(e){e instanceof Ip?
c.copy(e):c.set(e[0],e[1],e[2],e[3]);return d.k$c(c.divideScalar(255))}}();d.k$c=function(c){return c.dot(b)};d.iu=function(c,e,f,g,h){g||(f=h?[f,e].join("\n"):[e,f].join("\n"));return c=c.replace(e,f)};return d}(),2,"eyJwYWNrRmxvYXRUb1ZlYzQiOiJqY2MiLCJwYWNrRmxvYXRUb1JHQkEiOiJkVWQiLCJ1bnBhY2tSR0JBVG9GbG9hdCI6Ik9rYiIsInVucGFja1ZlYzRUb0Zsb2F0IjoiayRjIn0g");var Ty=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(p){p.defines.hasOwnProperty("addedColorMapShaders")||(p.defines.addedColorMapShaders=!0,p.uniforms[l]={type:"v4",value:new Ip},p.uniforms[k]={type:"tv",value:null},p.uniforms[m]={type:"i",value:0})}function a(p){var q=null!=p.userData.WN?1:!1;q!==p.defines[c.rCa]&&(p.defines[c.rCa]=q,p.needsUpdate=!0)}function b(p){p.defines.hasOwnProperty("addedUnlitShaders")||(p.defines.addedUnlitShaders=!0,p.uniforms[h]={value:0})}function c(){}var e=Sy;L(c,"geotoolkit3d.util.shaders.Shaders");
var f="#ifdef USE_LOGDEPTHBUF\n    #ifdef USE_LOGDEPTHBUF_EXT\n        vFragDepth = 1.0 + gl_Position.w;\n        vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n    #else\n        if (isPerspectiveMatrix ( projectionMatrix)) {\n           gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC - 1.0;\n           gl_Position.z *= gl_Position.w;\n        }\n    #endif\n#endif";Jw.logdepthbuf_vertex=["#ifndef PICKINGMATERIAL_OVERRIDE",f,"#endif"].join("\n");Jw.logdepthbuf_fragment=
"#ifndef PICKINGMATERIAL_OVERRIDE\n   #if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n       gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n   #endif\n#endif";c.bnb=-999.25;c.uP="void main()";c.qF=c.uP+" {";c.Knb="#include <color_vertex>";c.DOb="#include <color_fragment>";c.qjd="#include <shadowmap_vertex>";c.Dqc="#include <project_vertex>";c.Cqc="#include <logdepthbuf_vertex>";var g=1024;c.rCa="CG_USE_COLOR_MAP";var h="useDiffuseAsColor",
k="cgcolormapTexture",l="cgcolormapParams",m="cgcolormapLogValue";c.K8="vcgdeadCell";c.Km="cgcolormapValue";f="float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n   float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n   if (norm < 0.0 || norm >= 0.0) {\n       return norm;\n   }\n   return 0.0;\n}";var n=["\tif("+h+" == 1) {","\t\tgl_FragColor = diffuseColor;\n\t}  else {\n\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t}"].join("\n");
c.m2a=["#ifdef "+c.rCa,"\tv"+c.Km+" = normValueForColorMap("+c.Km+");","#endif"].join("\n");c.n2a=["#ifdef "+c.rCa,"\tattribute float "+c.Km+";","\tvarying float v"+c.Km+";","\tuniform vec4 "+l+";","\tuniform int "+m+";",f,"\tfloat normValueForColorMap(float value) {","\t\tif( "+m+" == 1)","\t\t{\n\t\t\tvalue = log2(value)/log2(10.0);\n\t\t}","\t\treturn Shaders_norm(value - "+l+".x, 0.0, "+l+".y, 0.0, 1.0);","\t}\n#endif"].join("\n");c.k2a=["#ifdef "+c.rCa,"\tdiffuseColor *= getColorFromColorMap(v"+
c.Km+");","#endif"].join("\n");c.l2a=["#ifdef "+c.rCa,"\tvarying float v"+c.Km+";","\tuniform sampler2D "+k+";","\tvec4 getColorFromColorMap(float normValue) {","\t\treturn texture2D("+k+", vec2(normValue, 0.5));","\t}\n#endif"].join("\n");c.Xsa=Jw.meshlambert_vert;c.$da=Jw.meshlambert_frag;c.Xsa=e.iu(c.Xsa,c.uP,c.n2a,!1,!0);c.Xsa=e.iu(c.Xsa,c.Knb,c.m2a,!1,!1);c.$da=e.iu(c.$da,c.uP,["uniform int "+h+";",c.l2a].join("\n"),!1,!0);c.$da=e.iu(c.$da,c.DOb,c.k2a,!1,!1);c.$da=e.iu(c.$da,"gl_FragColor = vec4( outgoingLight, diffuseColor.a )",
n,!0);f="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";c.i3a=Jw.meshbasic_vert;c.h3a=Jw.meshbasic_frag;c.i3a=e.iu(c.i3a,c.uP,[f,c.n2a].join("\n"),!1,!0);c.i3a=e.iu(c.i3a,c.Knb,c.m2a,!1,!1);c.h3a=e.iu(c.h3a,c.uP,c.l2a,!1,!0);c.h3a=e.iu(c.h3a,c.DOb,c.k2a,!1,!1);c.M5c=function(p,q){q&&(b(p),q.hasOwnProperty("unlit")&&(p.uniforms[h].value=q.unlit,p.needsUpdate=!0))};c.MId=function(p){b(p);return{unlit:p.uniforms[h].value}};c.Tdc=function(p){var q=p.uniforms;p=p.userData.WN;null!==q[k].value&&q[k].value.dispose();
if(null!=p){var r=1,t=new ho(0,0,g,r);t.ra(new og({colorProvider:p,startPoint:new N(0,r/2),endPoint:new N(1,r/2),startColor:"white",endColor:"black"}));var u=Xb();Wb(!1);r=Aj.z4b(t,g,r,!1,!1,new U(0,0,g,r));Wb(u);u=new Bx(r.Sk());u.minFilter=Ct;q[k].value=u;q[k].value.needsUpdate=!0;u=p.wc();r=p.Hc();if(p instanceof Xo||p instanceof To)u=p.Xz(u),r=p.Xz(r);q[l].value.set(u,r-u,0,0);q[m].value=p instanceof Xo||p instanceof To?1:0}};c.H5c=function(p,q){q&&(d(p),q.hasOwnProperty("color")&&(p.color=q.color),
q.hasOwnProperty("colorprovider")&&q.colorprovider!==p.userData.WN&&(p.userData.WN instanceof Mo&&"function"===typeof p.Tfb&&p.userData.WN.za(Lo.ib,p.Tfb()),p.userData.WN=q.colorprovider,p.userData.WN instanceof Mo&&"function"===typeof p.Tfb?(p.userData.WN.on(Lo.ib,p.Tfb()),p.color=new Pq(16777215)):("string"===typeof q.colorprovider?p.color=new Pq(q.colorprovider):q.colorprovider instanceof Pq&&(p.color=q.colorprovider),p.userData.WN=null),p.needsUpdate=!0,c.Tdc(p)),a(p))};c.kQc=function(p){d(p);
return{color:p.color,colorprovider:p.userData.WN}};return c}(),1,"eyJDT0xPUk1BUF9TSEFERVJfVkVSVEVYIjoibTJhIiwiQ09MT1JNQVBfU0hBREVSX1ZFUlRFWF9QUkVGSVgiOiJuMmEiLCJDT0xPUk1BUF9TSEFERVJfRlJBRyI6ImsyYSIsIkNPTE9STUFQX1NIQURFUl9GUkFHX1BSRUZJWCI6ImwyYSIsInJlZnJlc2hVbmlmb3Jtc0NvbG9yTWFwIjoiVGRjIn0g");var Uy=/*#__PURE__*/function(){function d(E){E.defines&&!E.defines.hasOwnProperty("addedAbstractPickingShaders")&&(E.defines.addedAbstractPickingShaders=!0,E.uniforms.cgpickingrgba={type:"v4",value:null},E.uniforms.cgpickingmode={type:"f",value:0},E.uniforms.cgpickingViewProjNormInv={type:"m4",value:new Xt})}function a(){}var b=Sy;L(a,"geotoolkit3d.util.shaders.Picking");var c=100,e=100;a.voc=c;a.Dfd=e;var f="#ifndef SHADER_ROUND_FLOAT\n\t#define SHADER_ROUND_FLOAT\n\tfloat Shaders_round(float v) {\n\t\treturn floor(v + 0.5);\n\t}\n#endif",g=
"#ifndef SHADER_FLOAT_TO_VEC4\n\t#define SHADER_FLOAT_TO_VEC4\n\tvec4 Shaders_FloatToVec4( float v ) {\n\t\tvec4 enc = vec4(1.0, 255.0, 255.0 * 255.0, 255.0 * 255.0 * 255.0) * clamp(v, 0., 0.9999999);\n\t\tenc = fract(enc);\n\t\tenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\n\t\treturn enc;\n\t}\n#endif",h=["#define PICKINGMATERIAL_OVERRIDE","#define cgPickingModeID "+Ay.Dmb+".0","#define cgPickingModeX "+Ay.Aa+".0","#define cgPickingModeY "+Ay.Ca+".0","#define cgPickingModeZ "+Ay.$f+
".0"].join("\n"),k="uniform mat4 cgpickingViewProjNormInv;\nuniform float cgpickingmode;\nuniform vec4 cgpickingrgba;\nvarying vec4 cgvcolor;\nvarying float cgvpickingmode;",l="if(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeID)){\n\tcgvcolor = cgpickingrgba;\n} else {\n\tcgvcolor = cgpickingViewProjNormInv * gl_Position;\n}\ncgvpickingmode = cgpickingmode;",m="varying vec4 cgvcolor;\nvarying float cgvpickingmode;",n="\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeX)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeY)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.y);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeZ)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.z);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeID)){\n\t\tgl_FragColor = cgvcolor;\n\t} else {\n\t\tgl_FragColor = vec4(cgvpickingmode / 255.0, 1.0, 1.0, 1.0);\n\t}",
p="#include <envmap_vertex>",q=[f,g,h,"#define cgPickingModeIndex "+c+".0",k,"attribute float cgpointindex;"].join("\n"),r=[Ty.qF,"\tcgpickingmain();",l,"\tif(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeIndex)){\n\t\tcgvcolor.x = cgpointindex;\n\t}\n}"].join("\n"),t=[f,g,h,"#define cgPickingModeIndex "+c+".0",m].join("\n"),u=[Ty.qF,"\tcgpickingmain();",n,"\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeIndex)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t}\n}"].join("\n"),
w=[f,g,h,"#define cgPickingModeIndex "+e+".0",k,"attribute float cgcellindex;"].join("\n"),y=[Ty.qF,"\tcgpickingmain();",l,"\tif(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeIndex)){\n\t\tcgvcolor.x = cgcellindex;\n\t}\n}"].join("\n"),z=[f,g,h,"#define cgPickingModeIndex "+e+".0",m].join("\n"),x=[Ty.qF,"\tcgpickingmain();",n,"\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeIndex)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t}\n}"].join("\n"),C=[f,g,h,k].join("\n"),
A=[Ty.uP+" {","\tcgpickingmain();",l,"}"].join("\n"),v=[f,g,h,m].join("\n"),B=[Ty.uP+" {","\tcgpickingmain();\n#include <logdepthbuf_fragment>",n,"}"].join("\n");a.eOa=Jw.meshlambert_vert;a.jka=Jw.meshlambert_frag;a.eOa=b.iu(a.eOa,Ty.qF,[f,g,h,k].join("\n"),!1,!0);a.eOa=b.iu(a.eOa,p,l,!1,!1);a.jka=b.iu(a.jka,Ty.qF,[f,g,h,m].join("\n"),!1,!0);a.jka=a.jka.slice(0,a.jka.search(Ty.uP));a.jka=[a.jka,Ty.qF,"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif",
n,"}"].join("\n");a.wEc=function(E){E=E.vertexShader.replace(Ty.uP,"void cgpickingmain()");return[q,E,r].join("\n")};a.vEc=function(E){E=E.fragmentShader.replace(Ty.uP,"void cgpickingmain()");return[t,E,u].join("\n")};a.Itd=function(E){E=E.vertexShader.replace(Ty.uP,"void cgpickingmain()");return[w,E,y].join("\n")};a.Htd=function(E){E=E.fragmentShader.replace(Ty.uP,"void cgpickingmain()");return[z,E,x].join("\n")};a.Atd=function(E){E=E.vertexShader.replace(Ty.uP,"void cgpickingmain()");return[C,E,
A].join("\n")};a.ztd=function(E){E=E.fragmentShader.replace(Ty.uP,"void cgpickingmain()");return[v,E,B].join("\n")};a.A3d=function(E,H){if(H&&(d(E),H.hasOwnProperty("pickingmode")&&(E.uniforms.cgpickingmode.value=+H.pickingmode),H.hasOwnProperty("pickingrgba")&&(E.uniforms.cgpickingrgba.value=H.pickingrgba),H.hasOwnProperty("candidates"))){var F=!1,I=E.userData;H.hasOwnProperty("normalizationmatrix")&&(I.Jbc=H.normalizationmatrix,F=!0);H.hasOwnProperty("viewinversematrix")&&(I.Rkc=H.viewinversematrix,
F=!0);H.hasOwnProperty("projectioninversematrix")&&(I.udc=H.projectioninversematrix,F=!0);F&&I.udc&&I.Rkc&&I.Jbc&&(I.llb||(I.llb=new Xt),I.llb.copy(I.udc),I.llb.premultiply(I.Rkc),I.llb.premultiply(I.Jbc),E.uniforms.cgpickingViewProjNormInv.value=I.llb)}};a.zId=function(E){d(E);var H=E.userData;return{pickingmode:E.uniforms.cgpickingmode.value,pickingrgba:E.uniforms.cgpickingrgba.value,normalizationmatrix:H.Jbc,viewinversematrix:H.Rkc,projectioninversematrix:H.udc}};return a}();var Vy=Math,Wy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}d.Jvd=function(h,k,l){h=[h.distanceTo(k),h.distanceTo(l),k.distanceTo(l)].sort();return.25*Vy.sqrt((h[0]+(h[1]+h[2]))*(h[2]-(h[0]-h[1]))*(h[2]+(h[0]-h[1]))*(h[0]+(h[1]-h[2])))};d.r3b=function(h,k,l){l||(l=[]);l[0]=h[1]*k[2]-h[2]*k[1];l[1]=h[2]*k[0]-h[0]*k[2];l[2]=h[0]*k[1]-h[1]*k[0];return l};d.a4b=function(h,k){var l=h[0],m=h[1];h=h[2];var n=k[0],p=k[1];k=k[2];return l*n+m*p+h*k};d.normal=function(h,k,l,m,n,p){null==n&&(n=[]);k*=3;l*=3;m*=3;var q=h[k+0],r=
h[k+1],t=h[k+2];k=h[l+0];var u=h[l+1],w=h[l+2];l=h[m+0];var y=h[m+1];h=h[m+2];if(null!=p&&(t===p||w===p||h===p))return n[0]=0,n[1]=0,n[2]=0,n;p=y-u;t-=w;w=h-w;r-=u;q-=k;k=l-k;n[0]=p*t-w*r;n[1]=w*q-k*t;n[2]=k*r-p*q;q=Vy.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);0===q?(n[0]=0,n[1]=0,n[2]=0):(n[0]/=q,n[1]/=q,n[2]/=q);return n};d.xAa=function(h,k,l,m,n,p){null==n&&(n=[]);k=[h.getX(k),h.getY(k),h.getZ(k)];l=[h.getX(l),h.getY(l),h.getZ(l)];h=[h.getX(m),h.getY(m),h.getZ(m)];if(null!=p&&(k[2]===p||l[2]===p||h[2]===
p))return n[0]=0,n[1]=0,n[2]=0,n;p=h[1]-l[1];m=k[2]-l[2];var q=h[2]-l[2],r=k[1]-l[1];k=k[0]-l[0];l=h[0]-l[0];n[0]=p*m-q*r;n[1]=q*k-l*m;n[2]=l*r-p*k;k=Vy.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);0===k?(n[0]=0,n[1]=0,n[2]=0):(n[0]/=k,n[1]/=k,n[2]/=k);return n};d.intersect=function(h,k,l,m){var n=k.x-h.x;k=k.y-h.y;var p=m.x-l.x,q=m.y-l.y;m=(-k*(h.x-l.x)+n*(h.y-l.y))/(-p*k+n*q);l=(p*(h.y-l.y)-q*(h.x-l.x))/(-p*k+n*q);return 0<=m&&1>=m&&0<=l&&1>=l?new gy(h.x+l*n,h.y+l*k):null};d.L3b=function(h){return h*Vy.PI/
180};d.Fdc=function(h){return 180*h/Vy.PI};d.rca=function(h,k,l,m,n,p,q){null==k&&(k=0);null==l&&(l=1);null==q&&(q=NaN);h=h.slice();var r=Number.MAX_VALUE,t=-Number.MAX_VALUE,u;for(u=0;u<h.length;u++)null==h[u]||isNaN(h[u])||h[u]===p||(null!=m&&h[u]<m?h[u]=m:null!=n&&h[u]>n?h[u]=n:(r=Vy.min(r,h[u]),t=Vy.max(t,h[u])));isNaN(k)&&(k=r);isNaN(l)&&(l=t);m=null!=m?m:r;n=null!=n?n:t;if(n===m)for(u=0;u<h.length;u++)h[u]=null==h[u]||isNaN(h[u])||h[u]===p?q:k+(l-k)/2;else for(u=0;u<h.length;u++)h[u]=null==
h[u]||isNaN(h[u])||h[u]===p?q:k+(h[u]-m)/(n-m)*(l-k);return h};d.S7d=function(h,k,l,m,n,p,q,r,t,u,w,y){var z=Vy.sqrt((h-k)*(h-k)+(n-p)*(n-p)),x=Vy.sqrt((k-l)*(k-l)+(p-q)*(p-q)),C=12===arguments.length?Vy.sqrt((u-w)*(u-w)+(u-w)*(u-w)):0,A=(h+k+l+m)/4,v=(n+p+q+r)/4,B=12===arguments.length?(t+u+w+y)/4:0;return new uq(new Hp(A-z/2,v-x/2,12===arguments.length?B-C/2:Number.NaN),new Hp(A+z/2,v+x/2,12===arguments.length?B+C/2:Number.NaN))};var a=[0,0,0],b=[0,0,0],c=[0,0,0],e=[0,0,0];d.WVa=function(h,k,l,
m){a[0]=k[0]-h[0];a[1]=k[1]-h[1];a[2]=k[2]-h[2];b[0]=l[0]-h[0];b[1]=l[1]-h[1];b[2]=l[2]-h[2];c[0]=m[0]-h[0];c[1]=m[1]-h[1];c[2]=m[2]-h[2];Wy.r3b(a,b,e);return Vy.abs(Wy.a4b(e,c))/6};d.mGc=function(h){return Wy.WVa(h[0],h[1],h[2],h[4])+Wy.WVa(h[1],h[2],h[3],h[7])+Wy.WVa(h[2],h[4],h[6],h[7])+Wy.WVa(h[1],h[4],h[5],h[7])+Wy.WVa(h[1],h[2],h[4],h[7])};d.Dvd=function(h,k,l){var m=Vy.pow(k.x-h.x,2)+Vy.pow(k.y-h.y,2),n=Vy.pow(l.x-k.x,2)+Vy.pow(l.y-k.y,2),p=Vy.pow(h.x-l.x,2)+Vy.pow(h.y-l.y,2);return p>m&&p>
n?new gy(h.x+(l.x-k.x),h.y+(l.y-k.y)):n>m&&n>p?new gy(k.x+(l.x-h.x),k.y+(l.y-h.y)):new gy(h.x+(k.x-l.x),h.y+(k.y-l.y))};d.Ebb=function(h,k,l,m,n,p){var q=Vy.pow(l-h,2)+Vy.pow(m-k,2),r=Vy.pow(n-l,2)+Vy.pow(p-m,2),t=Vy.pow(h-n,2)+Vy.pow(k-p,2);return t>q&&t>r?{x:h+(n-l),y:k+(p-m)}:r>q&&r>t?{x:l+(n-h),y:m+(p-k)}:{x:h+(l-n),y:k+(m-p)}};d.YRd=function(h,k){var l=new Hp;l.x=h.x>k.x?h.x:k.x;l.y=h.y>k.y?h.y:k.y;l.z=h.z>k.z?h.z:k.z;return l};d.oSd=function(h,k){var l=new Hp;l.x=h.x>k.x?k.x:h.x;l.y=h.y>k.y?
k.y:h.y;l.z=h.z>k.z?k.z:h.z;return l};d.intersectBox=function(h,k){return!(h.max.x<=k.min.x||h.min.x>=k.max.x||h.max.y<=k.min.y||h.min.y>=k.max.y)};d.containsBox=function(h,k){return!(h.min.x>k.min.x||h.max.x<k.max.x||h.min.y>k.min.y||h.max.y<k.max.y)};d.$Gc=function(h,k){var l=new tq;l.min.x=k.min.x>h.min.x?k.min.x:h.min.x;l.max.x=k.max.x<h.max.x?k.max.x:h.max.x;l.min.y=k.min.y>h.min.y?k.min.y:h.min.y;l.max.y=k.max.y<h.max.y?k.max.y:h.max.y;return l};d.rGc=function(h){var k=[0,0,0,0,0],l;for(l=0;l<
h.length;l++){var m=h[l];k[0]+=m[0];k[1]+=m[1];k[2]+=m[0]*m[0];k[3]+=m[0]*m[1];k[4]+=m[1]*m[1]}h=(l*k[3]-k[0]*k[1])/(l*k[2]-k[0]*k[0]);k=k[1]/l-h*k[0]/l;return k={a:h,b:k}};d.ZZd=function(h,k){var l=(new Wt).set(h[0].x,h[0].y,1,h[1].x,h[1].y,1,h[2].x,h[2].y,1);l=l.invert();h=(new Hp(k[0].x,k[1].x,k[2].x)).applyMatrix3(l);k=(new Hp(k[0].y,k[1].y,k[2].y)).applyMatrix3(l);return(new Wt).set(h.x,h.y,h.z,k.x,k.y,k.z,0,0,1)};d.Fec=function(h,k){var l=(new Xt).set(h[0].x,h[0].y,h[0].z,1,h[1].x,h[1].y,h[1].z,
1,h[2].x,h[2].y,h[2].z,1,h[3].x,h[3].y,h[3].z,1);l=l.invert();h=(new Ip(k[0].x,k[1].x,k[2].x,k[3].x)).applyMatrix4(l);var m=(new Ip(k[0].y,k[1].y,k[2].y,k[3].y)).applyMatrix4(l);k=(new Ip(k[0].z,k[1].z,k[2].z,k[3].z)).applyMatrix4(l);return(new Xt).set(h.x,h.y,h.z,h.w,m.x,m.y,m.z,m.w,k.x,k.y,k.z,k.w,0,0,0,1)};d.nhb=function(h,k,l,m){function n(J,K){J=p(J,K);return 0===J?1:2/J*Vy.tan(J/2)}function p(J,K){J=t(K)*y(J)+r(K)*w(J)+q(K)*u(J);return Vy.acos(J)}function q(J){return Vy.cos(k[J])}function r(J){return Vy.sin(k[J])*
Vy.sin(l[J])}function t(J){return Vy.sin(k[J])*Vy.cos(l[J])}function u(J){return Vy.cos(k[J])}function w(J){return Vy.sin(k[J])*Vy.sin(l[J])}function y(J){return Vy.sin(k[J])*Vy.cos(l[J])}for(var z=[0],x=[0],C=[0],A=0,v=0,B=0,E=0,H=1;H<h.length;H++){var F=h[H]-h[E],I=n(E,H);A+=F*I*(t(H)+y(E))/2;v+=F*I*(r(H)+w(E))/2;B=m?B-F*I*(q(H)+u(E))/2:B+F*I*(q(H)+u(E))/2;z.push(A);x.push(v);C.push(B);E=H}return{x:z,y:x,z:C}};d.KDc=function(h,k,l){l=l||new Ur;var m=h.x,n=h.y;h=h.z;var p=Vy.sin(k),q=Vy.cos(k);q=
1-q;return.998<m*n*q+h*p?l.set(0,2*Vy.atan2(m*Vy.sin(k/2),Vy.cos(k/2)),Vy.PI/2):-.998>m*n*q+h*p?l.set(0,-2*Vy.atan2(m*Vy.sin(k/2),Vy.cos(k/2)),-Vy.PI/2):l.set(Vy.atan2(m*p-n*h*q,1-(m*m+h*h)*q),Vy.atan2(n*p-m*h*q,1-(n*n+h*h)*q),Vy.asin(m*n*n+h*p))};var f=new Hp,g=new Hp;d.scb=function(h,k,l){l=l||new Ur;l.z=Vy.atan2(h.y,h.x);l.x=Vy.asin(h.z);f.set(-h.y,h.x,0);g.crossVectors(f,h);l.y=Vy.atan2(f.dot(k)/f.length(),g.dot(k)/g.length());return l};d.Xaa=function(h,k){var l=new Xt,m=Vy.abs(k.max.x-k.min.x)/
Vy.abs(h.max.x-h.min.x),n=Vy.abs(k.max.y-k.min.y)/Vy.abs(h.max.y-h.min.y),p=Vy.abs(k.max.z-k.min.z)/Vy.abs(h.max.z-h.min.z);l.multiply((new Xt).makeTranslation(k.min.x,k.min.y,k.min.z));l.multiply((new Xt).makeScale(m,n,p));l.multiply((new Xt).makeTranslation(-h.min.x,-h.min.y,-h.min.z));return l};return d}(),2,"eyJjb21wdXRlSGVyb25BcmVhIjoiSnZkIiwiY3Jvc3NQcm9kdWN0IjoicjNiIiwiZG90UHJvZHVjdCI6ImE0YiIsIm5vcm1hbEJ1ZmZlckF0dHJpYnV0ZSI6InhBYSIsImRlZ3JlZVRvUmFkaWFucyI6IkwzYiIsInJhZGlhbnNUb0RlZ3JlZSI6IkZkYyIsIm5vcm1hbGl6ZUFycmF5IjoicmNhIiwidW5yb3RhdGUiOiJTN2QiLCJjb21wdXRlVGV0cmFoZWRyb25Wb2x1bWUiOiJXVmEiLCJjb21wdXRlQ2VsbFZvbHVtZSI6Im1HYyIsImNvbXB1dGU0dGhDb3JuZXIiOiJEdmQiLCJjb21wdXRlNHRoQ29ybmVyWFkiOiJFYmIiLCJtYXhWZWN0b3IzIjoiWVJkIiwibWluVmVjdG9yMyI6Im9TZCIsImNyZWF0ZUZpdEJveCI6IiRHYyIsImNvbXB1dGVMaW5lYXJSZWdyZXNzaW9uMkQiOiJyR2MiLCJyZXNvbHZlVHJhbnNmb3JtTWF0cml4MyI6IlpaZCIsInJlc29sdmVUcmFuc2Zvcm1NYXRyaXg0IjoiRmVjIiwibWluaW11bUN1cnZhdHVyZSI6Im5oYiIsImFuZ2xlVG9FdWxlciI6IktEYyIsImRpcmVjdGlvblRvRXVsZXIiOiJzY2IiLCJnZXRCb3hUb0JveE1hdHJpeCI6IlhhYSJ9");var Xy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){b=G(b,{},!0);Lw.call(this,{uniforms:b.uniforms,vertexShader:b.vertexshader,fragmentShader:b.fragmentshader,defines:null!=b.defines?b.defines:[]});this.type="AbstractShaderPickingMaterial"}var a=new uq(new Hp,new Hp(1,1,1));D(d,Lw);L(d,"geotoolkit3d.picking.pickingrenderer.AbstractShaderPickingMaterial");d.prototype.setOptions=function(b){Uy.A3d(this,b);return this};d.prototype.ta=function(){return Uy.zId(this)};d.sGc=function(b){return Wy.Xaa(a,b)};d.tGc=function(b){return Wy.Xaa(b,
a)};d.vGc=function(b){b=b.oa(!0).clone();return Wy.Xaa(b,a)};d.Lvd=function(b){b=b.oa(!0).clone();return Wy.Xaa(a,b)};return d}(),2,"eyJjb21wdXRlTm9ybUludk1hdHJpeCI6InNHYyIsImNvbXB1dGVOb3JtTWF0cml4IjoidEdjIiwiY29tcHV0ZVBsb3ROb3JtTWF0cml4IjoidkdjIiwiY29tcHV0ZVBsb3ROb3JtSW52TWF0cml4IjoiTHZkIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var Yy=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.picking.AbstractPicking");d.Hn=function(a,b,c){hb("AbstractPicking.pick() has to be overriden");return[]};return d}(),2,"eyJwaWNrIjoiSG4ifSAg");var Zy=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.ResourceHelper");d.bha=function(a,b){a.userData.resources=a.userData.resources||[];a.userData.resources.push(b);return a};d.VPe=function(a,b){a.userData.hasOwnProperty("resources")&&(b=a.userData.resources.indexOf(b),-1!==b&&a.userData.resources.splice(b,1));return a};d.JIc=function(a){a.userData.hasOwnProperty("resources")&&(a.userData.resources.forEach(function(b){b.dispose()}),delete a.userData.resources);return a};return d}();var $y=/*#__PURE__*/ta(/*#__PURE__*/{wlc:"beforerender",T1a:"afterrender",xdd:"duringrender",tid:"rendererror",ib:"invalidate",eP:"add",CG:"remove",Camera:"camera",ata:"resize",Animation:"animation",m3a:"modellimits"},2,"eyJCZWZvcmVSZW5kZXIiOiJ3bGMiLCJBZnRlclJlbmRlciI6IlQxYSIsIkR1cmluZ1JlbmRlciI6InhkZCIsIlJlbmRlckVycm9yIjoidGlkIiwiSW52YWxpZGF0ZSI6ImliIiwiQWRkIjoiZVAiLCJSZW1vdmUiOiJDRyIsIlJlc2l6ZSI6ImF0YSIsIk1vZGVsTGltaXRzIjoibTNhIn0g"),az=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){if(null==a.type)throw Error("Type should not be null");if(null==a.source)throw Error("Type should not be null");this.Kj=a.type;this.Cc=a.source;this.e9=a.args}L(d,"geotoolkit3d.Event");d.prototype.sr=function(){return this.Kj};d.prototype.hs=function(){return this.Cc};d.prototype.bLc=
function(){return this.e9};d.prototype.dispose=function(){return this.e9=this.Cc=this.Kj=null};d.wPa=$y;return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUeXBlIjoic3IiLCJnZXRTb3VyY2UiOiJocyIsImdldEFyZ3MiOiJiTGMifX19");var bz=/*#__PURE__*/function(){function d(c){c=c||{};Ms.call(this);var e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],f=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],g=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(g);this.setAttribute("position",new ds(e,3));this.setAttribute("uv",new ds(f,2));this.type="LineSegmentsGeometry";this.setData(c)}var a=new uq,b=new Hp;D(d,Ms);L(d,"geotoolkit3d.scene.LineSegmentsGeometry");d.prototype.setData=function(c){if(null==c)return this;if(c.hasOwnProperty("positions")){var e=
c.positions;var f;e instanceof Float32Array?f=e:Array.isArray(e)&&(f=new Float32Array(e));e=new Ns(f,6,1);this.setAttribute("instanceStart",new Xs(e,3,0));this.setAttribute("instanceEnd",new Xs(e,3,3));this.computeBoundingBox();this.computeBoundingSphere()}if(c.hasOwnProperty("colors")){e=c.colors;var g;e instanceof Float32Array?g=e:Array.isArray(e)&&(g=new Float32Array(e));c=new Ns(g,6,1);this.setAttribute("instanceColorStart",new Xs(c,3,0));this.setAttribute("instanceColorEnd",new Xs(c,3,3))}return this};
d.prototype.computeBoundingBox=function(){this.boundingBox=this.boundingBox||new uq;var c=this.getAttribute("instanceStart"),e=this.getAttribute("instanceEnd");null!=c&&null!=e&&(this.boundingBox.setFromBufferAttribute(c),a.setFromBufferAttribute(e),this.boundingBox.union(a))};d.prototype.computeBoundingSphere=function(){this.boundingSphere=this.boundingSphere||new Xw;null==this.boundingBox&&this.computeBoundingBox();var c=this.getAttribute("instanceStart"),e=this.getAttribute("instanceEnd");if(null!=
c&&null!=e){var f=this.boundingSphere.center;this.boundingBox.getCenter(f);for(var g=0,h=0;h<c.count;h++)b.fromBufferAttribute(c,h),g=Math.max(g,f.distanceToSquared(b)),b.fromBufferAttribute(e,h),g=Math.max(g,f.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g)}};return d}();var cz=/*#__PURE__*/function(){function d(c){c.defines.hasOwnProperty("addedLineShaders")||(c.defines.addedLineShaders=!0,c.uniforms=Yx.merge([Xx.common,Xx.fog,{linewidth:{type:"1f",value:1},polygonoffset:{type:"1f",value:0},polygonoffsetfactor:{type:"1f",value:1},resolution:{type:"2f",value:new gy(1,1)},dashScale:{type:"1f",value:1},dashSize:{type:"1f",value:1},dashOffset:{type:"1f",value:0},gapSize:{type:"1f",value:1},opacity:{type:"1f",value:1},mask:new Wx(new Bx),useMask:new Wx(!1)}]))}function a(){}var b=
"linewidth dashScale dashSize dashOffset gapSize opacity".split(" ");L(a,"geotoolkit3d.util.shaders.Line");a.Aid="#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nuniform float polygonoffset;\nuniform float polygonoffsetfactor;\nuniform float linewidth;\nuniform vec2 resolution;\nattribute vec3 instanceStart;\nattribute vec3 instanceEnd;\nattribute vec3 instanceColorStart;\nattribute vec3 instanceColorEnd;\nvarying float vAdjustedLineWidth;\nvarying vec2 vOffset;\nvarying vec2 vUv;\n#ifdef USE_DASH\n    uniform float dashScale;\n    attribute float instanceDistanceStart;\n    attribute float instanceDistanceEnd;\n    varying float vLineDistance;\n#endif\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\n    float a = projectionMatrix[ 2 ][ 2 ];\n    float b = projectionMatrix[ 3 ][ 2 ];\n    float nearEstimate = - 0.5 * b / a;\n    float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n    end.xyz = mix( start.xyz, end.xyz, alpha );\n}\nvoid main() {\n    #ifdef USE_COLOR\n        vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n    #endif\n    #ifdef USE_DASH\n        vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n    #endif\n    float aspect = resolution.x / resolution.y;\n    vUv = uv;\n    vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n    vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n    if (polygonoffset > 0.) {\n        float frNear = projectionMatrix[3][2] / (projectionMatrix[2][2] - 1.);\n        float frFar = projectionMatrix[3][2] / (projectionMatrix[2][2] + 1.);\n        float frRange = frFar - frNear;\n        float baseOffset = polygonoffsetfactor * frRange / 1000.;\n        start.z += baseOffset * abs(start.z) / frRange;\n        end.z += baseOffset * abs(end.z) / frRange;\n    }\n    bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n    if ( perspective ) {\n        if ( start.z < 0.0 && end.z >= 0.0 ) {\n            trimSegment( start, end );\n        } else if ( end.z < 0.0 && start.z >= 0.0 ) {\n            trimSegment( end, start );\n        }\n    }\n    vec4 clipStart = projectionMatrix * start;\n    vec4 clipEnd = projectionMatrix * end;\n    vec2 ndcStart = clipStart.xy / clipStart.w;\n    vec2 ndcEnd = clipEnd.xy / clipEnd.w;\n    vec2 dir = ndcEnd - ndcStart;\n    dir.x *= aspect;\n    dir = normalize( dir );\n    vec2 offset = vec2( dir.y, - dir.x );\n    dir.x /= aspect;\n    offset.x /= aspect;\n    if ( position.x < 0.0 ) offset *= - 1.0;\n    if ( 1. - abs(viewMatrix[2][2]) > 1e-7 ) {\n        if ( position.y < 0.0 ) {\n            offset += - dir;\n        } else if ( position.y > 1.0 ) {\n            offset += dir;\n        }\n    }\n    vAdjustedLineWidth = linewidth + 2.;\n    offset *= vAdjustedLineWidth;\n    offset /= resolution.y;\n    vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n    offset *= clip.w;\n    vOffset = offset;\n    clip.xy += offset;\n    gl_Position = clip;\n    vec4 mvPosition = ( position.y < 0.5 ) ? start : end;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <fog_vertex>\n}";
a.zid="uniform vec3 diffuse;\nuniform float linewidth;\nuniform float opacity;\nuniform vec2 resolution;\nuniform sampler2D mask;\nuniform bool useMask;\n#ifdef USE_DASH\n    uniform float dashSize;\n    uniform float dashOffset;\n    uniform float gapSize;\n#endif\nvarying float vLineDistance;\nvarying vec2 vOffset;\nvarying float vAdjustedLineWidth;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vUv;\nvoid main() {\n    #include <clipping_planes_fragment>\n    if (useMask) {\n        vec2 actualResolution = resolution;\n        #ifdef VARIABLE_RENDER_RESOLUTION\n            actualResolution = renderResolution;\n        #endif\n        vec2 screenCoord = gl_FragCoord.xy / actualResolution;\n        if (texture2D(mask, screenCoord).r != 0.) discard;\n    }\n    #ifdef USE_DASH\n        if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard;\n        if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard;\n    #endif\n    float endcapOpacity = 1.;\n    float a = abs(vUv.x);\n    float b = abs(vUv.y);\n    if ( b > 1. ) {\n        b -= 1.;\n        float len2 = sqrt(1.5 * a*a + 1.2 * b*b);\n        endcapOpacity = clamp(1. - len2, 0., 1.);\n        if ( endcapOpacity < 0.26 ) discard;\n    }\n    float uvOpacity = 1. - a;\n    float offsetLength = length(vOffset);\n    float offsetRate = 0.4 * fwidth(offsetLength);\n    #ifdef VARIABLE_RENDER_RESOLUTION\n        offsetRate *=  renderResolution.y / resolution.y;\n    #endif\n    offsetLength = offsetLength / offsetRate / vAdjustedLineWidth;\n    float offsetOpacity = 1. - offsetLength;\n    float lineWidthOpacity = max(uvOpacity, offsetOpacity);\n    float lineOpacity = min(lineWidthOpacity, endcapOpacity);\n    lineOpacity *= lineOpacity;\n    float minSmoothness = 0.1;\n    float smoothFactor = 1. - min(linewidth, 5.) / 5.;\n    float smoothness = minSmoothness + smoothFactor * (1. - minSmoothness);\n    float lineSmoothingAlpha = smoothstep( 0., smoothness, lineOpacity );\n    float alpha = opacity * lineSmoothingAlpha;\n    if (alpha < 0.03) discard;\n    vec4 diffuseColor = vec4( diffuse, alpha );\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    gl_FragColor = vec4( diffuseColor.rgb, alpha );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n}";
a.K5c=function(c,e){null!=e&&(d(c),b.forEach(function(f){e.hasOwnProperty(f.toLowerCase())&&(c.uniforms[f].value=e[f.toLowerCase()])}),e.hasOwnProperty("polygonoffset")&&(c.uniforms.polygonoffset.value=e.polygonoffset?1:0),e.hasOwnProperty("polygonoffsetfactor")&&(c.uniforms.polygonoffsetfactor.value=e.polygonoffsetfactor),e.hasOwnProperty("resolution")&&c.uniforms.resolution.value.set(e.resolution.width,e.resolution.height),e.hasOwnProperty("color")&&c.uniforms.diffuse.value.set(e.color),e.hasOwnProperty("dashed")&&
(e.dashed?c.defines.USE_DASH=!0:delete c.defines.USE_DASH),e.hasOwnProperty("colorfromattribute")&&(e.colorfromattribute?c.defines.USE_COLOR=!0:delete c.defines.USE_COLOR),e.hasOwnProperty("mask")&&(c.uniforms.mask.value=e.mask,c.uniforms.useMask.value=!0))};a.DId=function(c){d(c);var e={};b.forEach(function(f){e[f]=c.uniforms[f].value});e.color=c.uniforms.diffuse.value;e.dashed=c.defines.hasOwnProperty("USE_DASH");return e};return a}();var dz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Lw.call(this,{vertexShader:cz.Aid,fragmentShader:cz.zid});cz.K5c(this,a);this.type="LineMaterial";this.Lzb=this.transparent=!0;this.side=Fr}D(d,Lw);L(d,"geotoolkit3d.scene.LineMaterial");d.prototype.setOptions=function(a){cz.K5c(this,a);return this};d.prototype.ta=function(){return cz.DId(this)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var ez=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e){e=e||{};null!=e.data&&null!=e.data.colors&&(e.colorfromattribute=!0);Zt.call(this,new bz(e.data),new dz(e));this.type="LineSegments";this.BCc=new gy(0,0);this.frustumCulled=!1}var a=new Hp,b=new Hp,c=new gy;D(d,Zt);L(d,"geotoolkit3d.scene.LineSegments");d.prototype.setOptions=function(e){if(null==e)return this;e.colorfromattribute=null!=this.geometry.getAttribute("colors");this.material.setOptions(e);return this};d.prototype.onBeforeRender=function(e,f,g,h,k,l){Zt.prototype.onBeforeRender.call(this,
e,f,g,h,k,l);e.getSize(c);this.BCc.equals(c)||(this.BCc.set(c.x,c.y),this.material.setOptions({resolution:{width:c.x,height:c.y}}))};d.prototype.ta=function(){var e=this.material.ta();delete e.colorfromattribute;return e};d.prototype.Ls=function(){return!1};d.prototype.computeLineDistances=function(){for(var e=this.geometry,f=e.getAttribute("instanceStart"),g=e.getAttribute("instanceEnd"),h=new Float32Array(2*f.count),k=0,l=0;k<f.count;k++,l+=2)a.fromBufferAttribute(f,k),b.fromBufferAttribute(g,k),
h[l]=0===l?0:h[l-1],h[l+1]=h[l]+a.distanceTo(b);f=new Ns(h,2,1);e.setAttribute("instanceDistanceStart",new Xs(f,1,0));e.setAttribute("instanceDistanceEnd",new Xs(f,1,1));return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJpc1NlbGVjdGFibGUiOiJMcyJ9fX0g");var fz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){Gp.call(this);this.Up=this.visible;this.BW=!1;this.ova=!0;var a=this;Object.defineProperty(this,"visible",{get:function(){return a.Up},set:function(b){if(b===a.Up)return this;a.Up=b;a.gg();return this}});this.frustumCulled=!1;this.WM=null}D(d,Gp);d.prototype.a6a=function(){return""};L(d,"geotoolkit3d.scene.Object3D");d.prototype.Pa=function(){return this.a6a()};d.prototype.gg=function(a){a=a||new az({type:$y.ib,source:this,args:[]});for(var b=this;null!=b.parent;)if(b=
b.parent,null!=b.gg)return b.gg(a),this;null!=b.userData.plot&&b.userData.plot.gg(a);return this};d.prototype.WBa=function(a,b){return this};d.prototype.ui=function(a,b,c,e){return this};d.prototype.n6=function(a,b,c,e){return this};d.prototype.add=function(a){if(Array.isArray(a)){var b=this;a.forEach(function(c){Gp.prototype.add.apply(b,[c]);null!=c.updateMatrixWorld&&c.updateMatrixWorld(!0)})}else Gp.prototype.add.apply(this,arguments),null!=a.updateMatrixWorld&&a.updateMatrixWorld(!0);this.gg(new az({type:$y.eP,
source:this,args:arguments}));return this};d.prototype.remove=function(a){Gp.prototype.remove.apply(this,arguments);this.gg(new az({type:$y.CG,source:this,args:arguments}));return this};d.prototype.Ikc=function(){return!1};d.prototype.kha=function(){return!1};d.prototype.Opa=function(){return[]};d.prototype.T1d=function(a){if(null==this.WM)if(a)this.rBd();else return this;this.WM.forEach(function(b){b.visible=a});return this};d.prototype.rBd=function(){var a=this;this.WM=[];var b=this.Opa();b.forEach(function(c){var e=
c.geometry instanceof Aq?c.geometry:(new Aq).oLe(c.geometry);var f=e.index;e=e.getAttribute("position");var g={},h=null!=f?f.count:e.count,k;for(k=0;k<h;k+=3){var l,m=!0;var n=k+2;for(l=k;l<k+3;n=l,l++){if(null!=f){var p=f.getX(n);n=f.getX(l)}else p=n,n=l;var q=e.getX(p),r=e.getX(n),t=e.getY(p),u=e.getY(n);p=e.getZ(p);n=e.getZ(n);if(!(Number.isFinite(q)&&Number.isFinite(r)&&Number.isFinite(t)&&Number.isFinite(u)&&Number.isFinite(p)&&Number.isFinite(n))){m=!1;break}}if(m)for(n=k+2,l=k;l<k+3;n=l,l++)null!=
f?(p=f.getX(n),n=f.getX(l)):(p=n,n=l),p>n&&(m=p,p=n,n=m),m=p+"x"+n,g.hasOwnProperty(m)?g[m]++:g[m]=1}f=[];for(var w in g)1===g[w]&&(h=w.split("x").map(function(y){return+y}),f.push(e.getX(h[0]),e.getY(h[0]),e.getZ(h[0]),e.getX(h[1]),e.getY(h[1]),e.getZ(h[1])));w=new ez({data:{positions:f},color:new Pq("red"),linewidth:5,dashed:!0,alphatocoverage:!0,opacity:.75});c.add(w);a.WM.push(w)})};d.register=function(){};d.prototype.dispose=function(){if(!this.te()&&(this.BW=!0,null!=this.WM&&Array.isArray(this.WM))){for(var a=
this.WM.length-1;0<=a;a--){var b=this.WM[a];null!=b.geometry&&b.geometry.dispose();null!=b.material&&b.material.dispose();null!=b.parent&&b.parent.remove(b)}this.WM=null}};d.prototype.te=function(){return this.BW};d.prototype.setOptions=function(a){if(null==a)return this;a.hasOwnProperty("visible")&&(this.visible=a.visible);return this};d.prototype.ta=function(){return{visible:this.visible}};d.prototype.va=function(a){this.visible=a;return this};d.prototype.Ia=function(){return this.visible};d.prototype.Ls=
function(){return this.ova};d.prototype.Fg=function(a){this.ova=a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDbGFzc05hbWUiOiJQYSIsImludmFsaWRhdGVPYmplY3QiOiJnZyIsInVwZGF0ZU9iamVjdCI6IldCYSIsImJlZm9yZVJlbmRlciI6InVpIiwiYWZ0ZXJSZW5kZXIiOiJuNiIsImlzRGlzcG9zZWQiOiJ0ZSIsImdldE9wdGlvbnMiOiJ0YSIsInNldFZpc2libGUiOiJ2YSIsImdldFZpc2libGUiOiJJYSIsImlzU2VsZWN0YWJsZSI6IkxzIiwic2V0U2VsZWN0YWJsZSI6IkZnIn19fSAg");var gz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(q,r){var t=wc(0,0,!0);gx.call(this,a(t));r=r||{};this.lj=t;this.Tg=this.lj.getContext("2d");this.Bb=q;this.af=r.style||new Fi({font:r.font||b,color:r.color||c,alignment:e,baseline:f});null!=r.outline&&this.W2(r.outline);this.r3();this.t0=!1;this.bma=!1!==r.issizeindevice;this.Zld=!0===r.dontmanuallyupdate;this.GT=this.material.map.image.width;this.FT=this.material.map.image.height;this.scale.set(this.GT,this.FT,1);this.FPb=new Hp(0,0,0);this.jla=new gy(0,0);this.visible=
!0;this.rpb=new Hp(0,0,0);this.T_=new Hp(0,0,0);this.renderOrder=1}function a(q){q=new Bx(q);q.needsUpdate=!0;q.minFilter=Ct;q.generateMipmaps=!1;return new hx({map:q})}var b="24px Arial",c="rgba(255, 255, 255, 1.0)",e=Ai.tc,f=zi.Ed,g=new Hp,h=new Hp,k=new Hp,l=new Ud,m=new Hp,n=new Hp,p=new sv;D(d,gx);L(d,"geotoolkit3d.scene.Text2d");d.prototype.W2=function(q){null!=q&&(!1===q.enable?this.mo=null:(this.mo=q,this.mo=G(this.mo,{enable:!0,innercolor:"white",outlinecolor:"black",thickness:4}),this.mo.innercolor instanceof
xd&&(this.mo.innercolor=this.mo.innercolor.um()),this.mo.outlinecolor instanceof xd&&(this.mo.outlinecolor=this.mo.outlinecolor.um())),this.r3())};d.prototype.me=function(){return this.Bb};d.prototype.Eb=function(q){if(q===this.Bb)return this;this.Bb=q;this.r3();return this};d.prototype.jb=function(){return this.af};d.prototype.kb=function(q){if(this.af===q)return this;this.af=q;this.r3();return this};d.prototype.r3=function(){var q=sg.measureText(this.Bb,this.af),r=q.ca(),t=q.da();q=(this.Bb+"").split(qg.e3);
var u=0;null!=this.mo&&(u=this.mo.thickness,r+=2*u,t+=2*u*q.length);var w=t/q.length;this.Tg.clearRect(0,0,this.lj.width,this.lj.height);this.lj.width=r;this.lj.height=t;this.Tg.font=this.af.wt();null!=this.mo?(this.Tg.strokeStyle=this.mo.outlinecolor,this.Tg.lineWidth=u,this.Tg.lineJoin="miter",this.Tg.miterLimit=3):this.Tg.fillStyle=this.af.mb();this.Tg.textBaseline=f;this.Tg.textAlign=e;r=w;for(t=0;t<q.length;t++)null!=this.mo?(this.Tg.strokeText(q[t],u,r-u),this.Tg.fillStyle=this.mo.innercolor,
this.Tg.fillText(q[t],u,r-u)):this.Tg.fillText(q[t],0,r),r+=w;this.t0=!1;this.material&&(this.material.needsUpdate=!0)};d.prototype.AMa=function(q){this.FPb.copy(q);return this};d.prototype.Mib=function(q){this.jla.copy(q);return this};d.prototype.wsd=function(q,r,t){if(this.bma){var u=this.scale.y/this.scale.x;var w=q.distanceTo(r.position);r instanceof $u?(r=r.fov*Math.PI/180,w*=2*Math.tan(r/2)):w=r.top-r.bottom;w=this.scale.y/w;t=w*t.userData.plot.getSize(l).da();t=this.scale.y/t;this.scale.y*=
t;this.scale.x=this.scale.y/u;u=0!==this.jla.x?this.jla.y/this.jla.x:1;t*=this.jla.y;g.set(t/u,t/u,t)}else g.set(this.jla.x,this.jla.x,this.jla.y);h.set(this.scale.x,this.scale.x,this.scale.y).add(g);u=h.multiplyScalar(.75).multiply(this.FPb);t=this.parent.matrixWorld.elements;k.set(W.sign(t[0]),W.sign(t[5]),W.sign(t[10]));u.multiply(k);q=q.add(u);return q=this.parent.worldToLocal(q)};d.prototype.ui=function(q,r,t,u,w){!this.visible||this.Zld&&!w||(fz.prototype.ui.call(this,q,r,t,u),this.t0?this.position.equals(this.rpb)?
this.position.copy(this.T_):this.T_.copy(this.position):(fz.prototype.gg.call(this),this.T_.copy(this.position),this.rpb.copy(this.position),this.GT=this.material.map.image.width,this.FT=this.material.map.image.height,this.t0=!0),this.scale.set(this.GT,this.FT,1),t=this.parent.localToWorld(n.copy(this.T_)),q=this.wsd(t,r,q),this.position.copy(q),this.rpb.copy(q),this.parent.matrixWorld.decompose(n,p,m),this.scale.multiply(n.set(1,1,1).divide(m)))};d.prototype.oba=function(){return this.T_};d.prototype.ZJd=
function(){return this.t0};d.prototype.dispose=function(){this.material.dispose();this.rpb=this.T_=this.jla=this.FPb=this.af=this.Tg=this.lj=this.material=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPdXRsaW5lIjoiVzIiLCJnZXRUZXh0IjoibWUiLCJzZXRUZXh0IjoiRWIiLCJnZXRUZXh0U3R5bGUiOiJqYiIsInNldFRleHRTdHlsZSI6ImtiIiwic2V0QW5jaG9yT2Zmc2V0UmF0aW8iOiJBTWEiLCJzZXRBbmNob3JPZmZzZXQiOiJNaWIifX19");var hz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.Helper");var a=new Hp;d.Kbd=1E-6;d.y$c=function(){var f=new Hp,g=new Hp,h=new Hp,k=new Hp,l=new sv,m=new Hp,n=new Hp,p=new Ud;return function(q,r,t){q.updateMatrixWorld();q.matrixWorld.decompose(k,l,f);g.set(1,1,1).divide(f);r.matrixWorldInverse.decompose(k,l,m);h.set(1,1,1).divide(m);for(var u=0;u<q.children.length;u++){var w=q.children[u];n.copy(w.position).applyMatrix4(q.matrixWorld);var y=d.pGc(n,r);y=w.scale.y/y;y*=t.userData.plot.getSize(p).da();
y=w.scale.y/y;w.scale.multiplyScalar(y);w.scale.multiply(g);w.scale.multiply(h)}}}();d.pGc=function(f,g){f=f.distanceTo(g.position);g instanceof $u?(g=g.fov*Math.PI/180,g=2*Math.tan(g/2)*f):g=g.top-g.bottom;return g};d.Ibb=function(f,g,h){function k(t){if("function"!==typeof g||!1!==g(t))t instanceof gz?t.ZJd()&&(m.set(n.copy(q),p.copy(r)),m.applyMatrix4(t.matrixWorld)):t instanceof gx?(m.set(n.copy(q),p.copy(r)),m.applyMatrix4(t.matrixWorld)):"function"===typeof t.yia?m.copy(t.yia(m)):null!=t.geometry?
(null==t.geometry.boundingBox&&"function"===typeof t.geometry.computeBoundingBox&&t.geometry.computeBoundingBox(),m.copy(t.geometry.boundingBox),m.applyMatrix4(t.matrixWorld)):h||t.children.forEach(k),h&&t.children.forEach(k),isFinite(m.min.length())&&isFinite(m.max.length())&&(null==l?l=(new uq).copy(m):l.union(m))}h="boolean"===typeof h?h:!1;var l=null,m=new uq,n=new Hp,p=new Hp,q=new Hp(-.5,-.5,0),r=new Hp(.5,.5,0);k(f);return l};d.N5b=function(f){if(!f||f.isEmpty())return 0;a.copy(f.max).sub(f.min);
f=a.length();return isNaN(f)?0:f};d.cJd=function(){var f=new Ud,g=new Hp,h=new Hp,k=new Hp,l=new Hp,m=new Hp,n=new Hp,p=new jw,q=new jw,r=new uq;return function(t,u,w,y){g.copy(w.position);r.copy(t);u.getSize(f);h.x=2*y.x/f.ca()-1;h.y=2*-y.y/f.da()+1;h.z=1;h.unproject(w);m.copy(h).sub(g).normalize();n.copy(g).sub(h).normalize();t=d.N5b(r);m.multiplyScalar(t);g.sub(m);h.add(m);m.normalize();p.set(g,m);q.set(h,n);p.intersectBox(r,k);q.intersectBox(r,l);t=new uq;y.IAa=g;y.ZZa=h;if(k&&l&&(t.makeEmpty().setFromPoints([k,
l]),t.intersectsBox(r)))return t;t.copy(r);return t}}();d.ucb=function(f){f&&(1<f.length?f.forEach(function(g){g instanceof Tt&&(g.map&&(g.map.dispose(),g.map.image&&(g.map.image=null)),g.map=null,g.dispose())}):f instanceof Tt&&(null!=f.map&&(f.map.dispose(),null!=f.map.image&&(f.map.image=null)),f.map=null,f.dispose()))};d.dispose=function(f){if(Array.isArray(f)&&0<f.length)for(var g=f.length-1;0<=g;g--)d.dispose(f[g]);else if(null!=f){if(f instanceof Gp||f instanceof zs)Zy.JIc(f),d.dispose(f.children);
null!=f.dispose&&f.dispose();null!=f.parent&&f.parent.remove(f);null!=f.geometry&&(f.geometry.dispose(),f.geometry=null);d.ucb(f.material);f.material=null}};var b=new Hp(0,1,0);d.OMd=function(f,g,h){f=f.clone().sub(g).normalize();return.99>Math.abs(f.dot(h.Vb.up))?h.Vb.up.clone():b.clone()};d.Xaa=function(f,g){hb("geotoolkit3d.util.Helper.getBoxToBoxMatrix is deprecated since 3.3, use geotoolkit3d.util.Math.getBoxToBoxMatrix instead");return Wy.Xaa(f,g)};d.R1a=function(){var f=new Hp;return function(g,
h,k,l,m){null==l&&(l=new Hp);null==m&&(m=new Xt);f.copy(g);f.applyMatrix4(m);f.project(h);f.x=(f.x+1)/2;f.y=(-f.y+1)/2;return l.set(f.x*k.ca(),f.y*k.da(),f.z)}}();d.Nyd=function(){var f=new Hp;return function(g,h,k,l){null==l&&(l=new Hp);f.copy(g);f.x/=k.ca();f.y/=k.da();f.x=2*f.x-1;f.y=-(2*f.y-1);f.unproject(h);return l.set(f.x,f.y,f.z)}}();d.Fsa=function(){var f=new Hp;return function(g,h,k,l){null==l&&(l=new gy);f.copy(g);f.project(h);f.x=(f.x+1)/2;f.y=(-f.y+1)/2;return l.set(f.x*k.ca(),f.y*k.da())}}();
d.R3b=function(){function f(n,p,q,r){var t=n.material[0]||n.material,u=t.map.image.width;t=t.map.image.height;n.parent.localToWorld(h.copy(n.position));d.R1a(h,q,r.userData.plot.getSize(m),g);if(!isFinite(g.x)||!isFinite(g.y))return null;g.x-=u/2;g.y-=t/2;k.set(g.x+u,g.y+t);return new tq(new gy(g.x-p.x,g.y-p.z),new gy(k.x+p.y,k.y+p.w))}var g=new Hp,h=new Hp,k=new gy,l=new tq,m=new Ud;return function(n,p,q,r,t,u){var w=[],y;if(null!=u)for(y=0;y<u.length;y++){var z=u[y];z.visible&&null!=z.parent&&null!=
n.userData.plot&&(z=f(z,t,p,n),null!==z&&w.push(z))}for(y=0;y<q.length;y++)if(z=q[y],z.visible&&null!=z.parent&&null!=n.userData.plot&&(u=f(z,t,p,n),null!=u)){u.M5=z;for(var x=!1,C=0,A=0;A<w.length;A++)if(u.intersectsBox(w[A])){var v=new Hp;l.copy(u).intersect(w[A]).getSize(v);C+=v.x*v.y;if(C>r){x=!0;break}}x?z.visible=!1:z.visible&&w.push(u)}}}();var c=new gy;d.mZd=function(f,g,h,k){var l;null==k?k=new qy:l=k.getSize(c);null!=g&&null!=h&&k.setSize(g,h);g=f.parent;h=new Jp;h.add(f);var m=(new uq).setFromObject(f),
n=new Pu(-16E3,16E3,-16E3,16E3),p=new Hp;m.getSize(p);0===p.z&&(m.expandByVector(new Hp(0,0,.5)),p=new Hp,m.getSize(p));var q=new Hp;m.getCenter(q);n.translateX(q.x);n.translateY(q.y);n.translateZ(q.z+.6*p.z);n.near=.05*p.z;n.far=1.15*p.z;n.updateMatrixWorld();n.updateProjectionMatrix();p=m.min.clone();p.project(n);q=m.max.clone();q.project(n);m=Math.max(p.x,q.x);p=Math.max(p.y,q.y);n.left*=m;n.right*=m;n.top*=p;n.bottom*=p;n.updateProjectionMatrix();k.render(h,n);h=k.domElement.toDataURL();null!=
l?k.setSize(l.width,l.height):k.dispose();f.parent=g;return h};d.aWa=function(f){null!=f.color&&null!=f.colorprovider?f.color=null:null!=f.color&&null==f.colorprovider&&(f.colorprovider=f.color);if(!(f.colorprovider instanceof Mo))if("string"===typeof f.colorprovider)f.colorprovider=new Po({values:[0,1],colors:[f.colorprovider,f.colorprovider]});else if(f.colorprovider instanceof Pq){var g=f.colorprovider.getStyle();f.colorprovider=new Po({values:[0,1],colors:[g,g]})}else f.colorprovider=new Po({values:[0,
1],colors:["beige","beige"]})};var e=new tq(new gy(-2.00375083428E7,-2.00375083428E7),new gy(2.00375083428E7,2.00375083428E7));d.yYa=function(){return e.clone()};d.lGc=function(f,g){var h=(new uq).copy(f);g=g||0;var k=h.max.sub(h.min).multiplyScalar(g),l=k.x;f=k.y;var m=k.z;k=(1-g)/g/2;var n=h.min.x+l*k;g=h.min.y+f*k;var p=h.min.z+m*k;h=n;k=g;var q=p+m,r=n+l,t=g,u=p+m,w=n,y=g+f,z=p+m,x=n+l,C=g+f;m=p+m;var A=n,v=g,B=p,E=n+l,H=g,F=p,I=n,J=g+f,K=p;l=n+l;f=g+f;g=p;return f=[h,k,q,r,t,u,w,y,z,w,y,z,r,
t,u,x,C,m,r,t,u,E,H,F,x,C,m,x,C,m,E,H,F,l,f,g,r,H,F,A,v,B,l,f,g,l,f,g,A,v,B,I,J,K,A,v,B,h,k,q,I,J,K,I,J,K,h,k,q,w,y,z,w,y,z,x,C,m,I,J,K,I,J,K,x,C,m,l,f,g,A,v,B,E,H,F,h,k,q,h,k,q,E,H,F,r,t,u]};d.aVc=function(f){function g(){for(var q=f.length/24,r=0;r<q;r++){var t=h(r,0),u=h(r,4);if(k([t[0],t[1],t[2],u[0],u[1],u[2]])&&t[2]!==u[2])return r}return-1}function h(q,r){q=24*q+3*r;return[f[q],f[q+1],f[q+2]]}function k(q){if(!q||!Array.isArray(q))return!1;for(var r=0;r<q.length;r++)if(!Number.isFinite(q[r]))return!1;
return!0}var l=g();if(-1===l)return!0;var m=h(l,0),n=h(l,1),p=h(l,2);l=h(l,4);n=new Hp(n[0]-m[0],n[1]-m[1],n[2]-m[2]);p=new Hp(p[0]-m[0],p[1]-m[1],p[2]-m[2]);m=new Hp(l[0]-m[0],l[1]-m[1],l[2]-m[2]);m.normalize();p=n.cross(p);p.normalize();m=p.dot(m);return 0<m};return d}(),2,"eyJ1cGRhdGVDaGlsZHJlblNjYWxlRm9yRGV2aWNlIjoieSRjIiwiY29tcHV0ZUZydXN0dW1IZWlnaHRGb3IiOiJwR2MiLCJjb21wdXRlV29ybGRCb3VuZGluZ0JveCI6IkliYiIsImdldEJveFNpemUiOiJONWIiLCJkaXNwb3NlTWF0ZXJpYWwiOiJ1Y2IiLCJnZXRCb3hUb0JveE1hdHJpeCI6IlhhYSIsIndvcmxkVG9EZXZpY2UiOiJSMWEiLCJkZXZpY2VUb1dvcmxkIjoiTnlkIiwid29ybGRUb0RldmljZTJEIjoiRnNhIiwicmVuZGVyU3VyZmFjZVRvSGVpZ2h0bWFwIjoibVpkIiwiY29udmVydFRvQ29sb3JQcm92aWRlciI6ImFXYSIsImdldFdHUzg0RGVmYXVsdEV4dGVudCI6InlZYSIsImNvbXB1dGVCb3hQb3NpdGlvbnMiOiJsR2MiLCJpc1RyaWFuZ2xlRmFjaW5nSW53YXJkIjoiYVZjIn0g");var iz=/*#__PURE__*/function(){function d(b){var c=b.material;b=G(b,{uniforms:Yx.clone(Kw.basic.uniforms),vertexshader:a.eOa,fragmentshader:a.jka,defines:c.defines},!0);Xy.call(this,b);this.type="BasicPickingMaterial";this.transparent=!1;this.blending=yu;this.side=c.side}var a=Uy;D(d,Xy);L(d,"geotoolkit3d.picking.pickingrenderer.BasicPickingMaterial");return d}();var jz=/*#__PURE__*/function(){function d(a){iz.call(this,a);this.type="DefaultMeshPickingMaterial"}D(d,iz);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultMeshPickingMaterial");return d}();var kz=/*#__PURE__*/function(){function d(f){f=new Bx(c);f.wrapS=f.wrapT=pw;f.needsUpdate=!0;var g=Uy;hx.call(this,{map:f,transparent:!1});this.vertexShader=g.eOa;this.fragmentShader=g.jka;this.uniforms=Yx.clone(Kw.sprite.uniforms);this.type="DefaultSpritePickingMaterial";this.blending=yu}var a=Xy.vGc,b=Sy.jcc,c=wc(1,1,!0),e=c.getContext("2d");null!=e&&(e.fillStyle="white",e.fillRect(0,0,1,1));D(d,hx);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultSpritePickingMaterial");d.prototype.setOptions=function(f){var g=
f.plot;switch(f.pickingmode){case Ay.Dmb:var h=f.pickingrgba;this.color=new Pq(h.x,h.y,h.z);this.opacity=h.w;break;case Ay.Aa:case Ay.Ca:case Ay.$f:h=f.candidates;if(null==h)throw Error("Cannot pick XYZ if no object has been selected");var k=this;h.forEach(function(l){if(l.material===k){l=l.position.clone().applyMatrix4(l.matrixWorld);l=g.Nca(l.sub(g.HXa()));l=l.applyMatrix4(a(g));switch(f.pickingmode){case Ay.Aa:var m=l.x;break;case Ay.Ca:m=l.y;break;case Ay.$f:m=l.z}m=b(m);k.color=new Pq(m.x,m.y,
m.z);k.opacity=m.w}});break;default:throw Error("not implemented");}return this};return d}();var lz=/*#__PURE__*/function(){function d(a){iz.call(this,a);this.type="DefaultLinePickingMaterial"}D(d,iz);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultLinePickingMaterial");return d}();var mz=/*#__PURE__*/function(){function d(b){var c=b.material;b=G(b,{uniforms:c.uniforms,vertexshader:a.Atd(c),fragmentshader:a.ztd(c),defines:c.defines},!0);Xy.call(this,b);this.type="DefaultShaderPickingMaterial";this.transparent=!1;this.lights=c.lights;this.side=c.side;this.blending=yu;this.extensions={derivatives:!0}}var a=Uy;D(d,Xy);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultShaderPickingMaterial");return d}();var oz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(C){for(var A=null,v=0;v<C.length;v++){var B=C[v],E=hz.Ibb(B);E?A?A.union(E):A=E:w<r&&(hb("Warning Picking: object ("+B.type+"), children of ("+B.parent.type+"), do not have a proper bounding box. Picking accuracy will be reduced."),w++,w===r&&hb("Warning Picking: too much warnings, picking warnings will stop displaying."))}return A}function a(C,A){C.UCb().traverse(function(v){null!=v.material&&null!=A[v.uuid]&&(v.material=A[v.uuid],A[v.uuid]=null)})}function b(C,A){for(var v=
Object.keys(C),B=0;B<v.length;B++)A[v[B]].visible=C[v[B]]}function c(C,A,v){C=Object.keys(C);for(var B=0;B<v.length;B++)for(var E=v[B],H=0;H<C.length;H++)A[C[H]].visible=E.uuid===C[H];return C}function e(){}function f(C,A){for(var v=[],B=0;B<A.length;B++)v.push(Sy.Okb(C[A[B]]));return v}function g(C){C.w++;255<C.w&&(C.z++,C.w=0);255<C.z&&(C.z=0,C.y++);255<C.y&&(C.x++,C.y=0);if(255<C.x)throw Error("Error, can't generate a unique picking ID");}function h(C){C=C.split(",");return new Ip(+C[0],+C[1],
+C[2],+C[3])}function k(C){return C.x+","+C.y+","+C.z+","+C.w}function l(C,A){var v=C.getCamera().projectionMatrix;C=C.getCamera().matrixWorldInverse;C=(new Xt).copy(C).invert();v=(new Xt).copy(v).invert();var B=Xy.tGc(A.modellimits);A.projectioninversematrix=v;A.viewinversematrix=C;A.normalizationmatrix=B}function m(C,A,v,B,E,H){var F=new Ip(0,0,0,0),I=C.T6().getClearColor(t),J=(new Ip(I.r,I.g,I.b,C.T6().getClearAlpha())).multiplyScalar(255);C.UCb().traverse(function(K){var M=null!=K.Ls&&!1===K.Ls();
if(!H(K,!M))v[K.uuid]=K.visible,B[K.uuid]=K,K.visible=!1;else if(null!=K.material){v[K.uuid]=K.visible;B[K.uuid]=K;M=Array.isArray(K.material)?K.material:[K.material];g(F);F.equals(J)&&g(F);var P=[];M.forEach(function(R){if(null==K.userData.kyb){var Q=nz(R);null!=Q&&null!=q[Q]&&(R=new q[Q]({material:R,object:K}),K instanceof Gp&&(K.userData.kyb=R,Zy.bha(K,{dispose:function(){hz.ucb(K.userData.kyb);K.userData.kyb=null}})),P.push(R))}else{Q=K.userData.kyb;if(null!=R.uniforms&&null!=Q.uniforms)for(var V=
Object.keys(Q.uniforms),Z=0;Z<V.length;Z++)null!=R.uniforms[V[Z]]&&(Q.uniforms[V[Z]].value=R.uniforms[V[Z]].value);P.push(Q)}});0!==P.length&&(1===P.length&&(M=M[0],P=P[0]),A[K.uuid]=M,K.material=P);E[k(F)]=K}})}function n(C,A,v,B){C=Array.isArray(C.material)?C.material:[C.material];C.forEach(function(E){if(null!=E.cBb){E=E.cBb();for(var H=0;H<E.length;H++)A.pickingmode=E[H].pickingmode,E[H].callback(x(A)[0],v,B)}})}function p(){0!==z.length&&(z.forEach(function(C){if(C.userData&&C.userData.dispose){var A=
C.userData.dispose;A(C)}}),z=[])}var q={},r=10,t=new Pq,u=new Ud,w=0,y=Xy.sGc,z=[];D(e,Yy);L(e,"geotoolkit3d.picking.RendererPicking");e.lw=function(C,A){q[C]=A};var x=function(){var C=null,A=[];return function(v){var B=2*v.width+1,E=2*v.height+1,H=Math.floor(v.x-v.width),F=Math.floor(v.texture.height-(v.y+v.height));v.texture.scissor.set(H,F,H+B,F+E);v.texture.scissorTest=!0;var I=B*E;if(null==C||4*I!==C.length)C=new Uint8Array(4*I),A.length=I;else if(null!=C.fill)C.fill(0);else for(var J=0;J<C.length;J++)C[J]=
0;J=Object.keys(v.objects);for(var K=0;K<J.length;K++)if(null==v.candidates||-1!==v.candidates.indexOf(v.objects[J[K]])){v.pickingrgba=h(J[K]).divideScalar(255);var M=Array.isArray(v.objects[J[K]].material)?v.objects[J[K]].material:[v.objects[J[K]].material];M.forEach(function(P){P.setOptions(v)})}J=v.plot;J.T6().setRenderTarget(v.texture);J.T6().clear();J.T6().render(J.UCb(),J.getCamera());J.T6().setRenderTarget(null);J.T6().readRenderTargetPixels(v.texture,H,F,B,E,C);for(B=0;B<I;B++)null!=A[B]?
A[B].set(C[4*B],C[4*B+1],C[4*B+2],C[4*B+3]):A[B]=new Ip(C[4*B],C[4*B+1],C[4*B+2],C[4*B+3]);return A}}();e.Hn=function(C,A,v,B,E,H){p();var F=C.getSize(u);if(0>A||0>v||A>F.ca()||v>F.da())return[];!1!==C.YPd()&&C.render();null==B&&(B=0);null==E&&(E=0);null==H&&(H=function(bb,Ya){return Ya});F={};var I={},J={},K={};C.$Fb();var M=C.oa(!0).clone();m(C,F,J,K,I,H);B={plot:C,texture:C.dJd(),pickingmode:Ay.Dmb,objects:I,x:A,y:v,width:B,height:E,modellimits:M};l(C,B);var P=y(M);P=x(B);E=C.T6().getClearColor(t);
var R=(new Ip(E.r,E.g,E.b,C.T6().getClearAlpha())).multiplyScalar(255);E=[];H=[];for(var Q=[],V=B.width,Z=B.height,aa=2*V+1,na=0;na<P.length;na++){var ya=P[na];if(!ya.equals(R)){var va=I[k(ya)];if(null!=va){ya=E.indexOf(va);-1===ya&&(E.push(va),ya=E.length-1);null==H[ya]&&(H[ya]=[Number.MAX_VALUE,Number.MAX_VALUE]);va=H[ya];var qa=na%aa,Ja=Math.floor(na/aa),Qa=(va[0]-V)*(va[0]-V)+(va[1]-Z)*(va[1]-Z),Oa=(qa-V)*(qa-V)+(Ja-Z)*(Ja-Z);Qa>Oa&&(va[0]=qa,va[1]=Ja,Q[ya]=na)}}}I=[];if(0<E.length){B.candidates=
E;c(J,K,E);C.Hzb();C.aT().updateMatrixWorld();P=d(E);if(!P||hz.N5b(P)<hz.Kbd)P=M;C.N5c(!0);C.$Fb({Wcc:{tSd:P,RVd:{x:A,y:v}}});B.modellimits=P;l(C,B);P=y(P);B.pickingmode=Ay.Aa;M=f(x(B),Q);B.pickingmode=Ay.Ca;R=f(x(B),Q);B.pickingmode=Ay.$f;Q=f(x(B),Q);for(aa=0;aa<E.length;aa++)va=new Hp(M[aa],R[aa],Q[aa]),va.applyMatrix4(P),na=A+(H[aa][0]-V),ya=v-(H[aa][1]-Z),va={object:E[aa],point:C.Nca(va),pointdevice:new gy(na,ya)},I.push(va),B.x=na,B.y=ya,B.width=0,B.height=0,n(E[aa],B,va,z)}var Ua=new gy(A,v);
I.sort(function(bb,Ya){bb=bb.pointdevice.distanceTo(Ua);Ya=Ya.pointdevice.distanceTo(Ua);return W.sign(bb-Ya)});C.Hzb();C.N5c(!1);C.aT().updateMatrixWorld();b(J,K);a(C,F);return I};return e}(),2,"eyJzZXRQaWNraW5nTWF0ZXJpYWwiOiJsdyIsInBpY2siOiJIbiJ9");
function nz(d){return d.Pa?d.Pa():d instanceof $t||d===$t?"THREE.MeshBasicMaterial":d instanceof gu||d===gu?"THREE.MeshPhongMaterial":d instanceof fu||d===fu?"THREE.MeshNormalMaterial":d instanceof du||d===du?"THREE.MeshLambertMaterial":d instanceof hx||d===hx?"THREE.SpriteMaterial":d instanceof tt||d===tt?"THREE.LineBasicMaterial":d instanceof wt||d===wt?"THREE.LineDashedMaterial":d instanceof iw||d===iw||d instanceof Lw||d===Lw?"THREE.RawShaderMaterial":null}oz.lw(nz($t),jz);oz.lw(nz(du),jz);
oz.lw(nz(gu),jz);oz.lw(nz(fu),jz);oz.lw(nz(hx),kz);oz.lw(nz(tt),lz);oz.lw(nz(wt),lz);oz.lw(nz(Lw),mz);var pz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f){f=G(f,{zoomspeed:1,mindistance:0,maxdistance:Infinity,norotate:!1,rotatespeed:1,keypanspeed:7,nodblclick:!1,dblclickspeed:250,autorotate:!1,autorotatespeed:2,minpolarangle:0,maxpolarangle:Math.PI,minazimuthangle:-Infinity,maxazimuthangle:Infinity,constantzoom:!1,nokeys:!1,keys:{LEFT:37,Vjd:38,RIGHT:39,$1a:40},name:"orbitcontroller"},!0);Qy.call(this,f);this.a5a=f.constantzoom;this.nd=b.NONE;this.eX=new gy;this.rN=new gy;this.lwa=new gy;this.hQ=new gy;this.UW=new gy;
this.Ufa=new gy;this.I$=new Hp;this.Ib=new Hp;this.TRb=new gy;this.SRb=new gy;this.RRb=new gy;this.E$a=this.b9a=0;this.Dg=1;this.v5=new Hp;this.wh=!0;this.setOptions(f)}var a=1E-6,b={NONE:-1,jDa:3,FOb:4,Lnb:5},c=(new sv).setFromUnitVectors(new Hp(0,0,1),new Hp(0,1,0)),e=c.clone().invert();D(d,Qy);L(d,"geotoolkit3d.controller.OrbitController");d.prototype.setOptions=function(f){Qy.prototype.setOptions.call(this,f);if(!this.wh)return this;var g=G(f,{mindistance:this.NW,maxdistance:this.Hfa,norotate:this.p5,
rotatespeed:this.nga,keypanspeed:this.dwc,nodblclick:this.WFa,autorotate:this.TPa,autorotatespeed:this.osc,minpolarangle:this.dWb,maxpolarangle:this.OVb,minazimuthangle:this.XVb,maxazimuthangle:this.FVb,nokeys:this.Eod,keys:this.BF,constantzoom:this.a5a,position:null!=this.Vb?this.Vb.position:this.vGa,lookat:this.bh},!0);this.a5a=g.constantzoom;this.NW=g.mindistance;this.Hfa=g.maxdistance;this.p5=g.norotate;this.nga=g.rotatespeed;this.dwc=g.keypanspeed;this.WFa=g.nodblclick;this.TPa=g.autorotate;
this.osc=g.autorotatespeed;this.dWb=g.minpolarangle;this.OVb=g.maxpolarangle;this.XVb=g.minazimuthangle;this.FVb=g.maxazimuthangle;this.Eod=g.nokeys;this.BF=g.keys;this.vRb=f.dblclickspeed;this.wHa=g.lookat;this.iEa=this.pQa=(new Hp).subVectors(this.wHa,this.vGa).length();this.bh.copy(this.wHa);this.nd=b.NONE;this.W7d();return this};d.prototype.ta=function(){var f=Qy.prototype.ta.call(this);f.mindistance=this.NW;f.maxdistance=this.Hfa;f.norotate=this.p5;f.rotatespeed=this.nga;f.nodblclick=this.WFa;
f.dblclickspeed=this.vRb;return f};d.prototype.jG=function(f){!1===this.Vf||this.WFa||this.Ckc(f.plotX,f.plotY)};d.prototype.PE=function(f){!1===this.Vf||this.p5||(this.nd=b.jDa,this.eX.set(f.plotX,f.plotY))};d.prototype.OA=function(f){!1!==this.Vf&&!0!==this.p5&&this.nd===b.jDa&&(this.rN.set(f.plotX,f.plotY),this.lwa.subVectors(this.rN,this.eX),f=this.uc.getSize().da(),this.Mec(2*Math.PI*this.lwa.x/f*this.nga),this.k_d(2*Math.PI*this.lwa.y/f*this.nga),this.eX.copy(this.rN),this.CV())};d.prototype.OE=
function(f){!1!==this.Vf&&(this.nd=b.NONE)};d.prototype.SE=function(f){if(!1!==this.Vf&&!0!==this.aQ){this.nd=b.FOb;var g=f.distanceX;f=f.distanceY;g=Math.sqrt(g*g+f*f);this.TRb.set(0,g)}};d.prototype.RE=function(f){if(!1!==this.Vf&&!0!==this.aQ&&this.nd===b.FOb){var g=f.distanceX;f=f.distanceY;g=Math.sqrt(g*g+f*f);this.SRb.set(0,g);this.RRb.subVectors(this.SRb,this.TRb);if(5<this.RRb.y)this.TIc();else if(-5>this.RRb.y)this.SIc();else return;this.TRb.copy(this.SRb);this.CV()}};d.prototype.kG=function(f){!1!==
this.Vf&&(this.nd=b.NONE)};d.prototype.lG=function(f){!1!==this.Vf&&!0!==this.B$&&(this.nd=b.Lnb,this.hQ.set(f.plotX,f.plotY))};d.prototype.UE=function(f){!1!==this.Vf&&!0!==this.B$&&this.nd===b.Lnb&&(this.UW.set(f.plotX,f.plotY),this.Ufa.subVectors(this.UW,this.hQ),5>this.Ufa.length()||(this.pan(this.Ufa.x,this.Ufa.y),this.hQ.copy(this.UW),this.CV()))};d.prototype.kD=function(f){!1!==this.Vf&&(this.nd=b.NONE)};d.prototype.kq=function(f){!1!==this.Vf&&!0!==this.aQ&&(f.preventDefault(),f=-f.deltaY,
0<f?this.TIc():this.SIc(),this.CV())};d.prototype.W7d=function(){var f=this.Vb.position;this.Ib.copy(f).sub(this.bh);this.Ib.applyQuaternion(c);this.Dea=Math.atan2(this.Ib.x,this.Ib.z);this.Wfa=Math.atan2(Math.sqrt(this.Ib.x*this.Ib.x+this.Ib.z*this.Ib.z),this.Ib.y)};d.prototype.Ckc=function(f,g){f=oz.Hn(this.uc,f,g,this.Fc,this.Fc);0<f.length&&(this.uc.rfc(f[0].point,!0),this.wHa.copy(f[0].point),this.vGa.copy(this.uc.sya()),this.iEa=this.pQa=(new Hp).subVectors(this.wHa,this.vGa).length())};d.prototype.Mec=
function(f){void 0===f&&(f=this.B5b());this.Dea-=f;this.Dea=Math.max(this.XVb,Math.min(this.FVb,this.Dea))};d.prototype.k_d=function(f){void 0===f&&(f=this.B5b());this.Wfa=!this.a5a||0<this.iEa?this.Wfa-f:this.Wfa+f;this.Wfa=Math.max(this.dWb,Math.min(this.OVb,this.Wfa))};d.prototype.B5b=function(){return 2*Math.PI/60/60*this.osc};d.prototype.lTc=function(){return Math.pow(.95,this.Kab)};d.prototype.wFb=function(f){var g=this.Vb.matrix.elements;this.I$.set(g[0],g[1],g[2]);this.I$.multiplyScalar(-f);
this.v5.add(this.I$)};d.prototype.yFb=function(f){var g=this.Vb.matrix.elements;this.I$.set(g[4],g[5],g[6]);this.I$.multiplyScalar(f);this.v5.add(this.I$)};d.prototype.pan=function(f,g){var h=this.uc.getSize(),k=h.ca();h=h.da();if(this.Vb instanceof $u){var l=this.pQa;this.a5a||(l=this.Vb.position,l=l.clone().sub(this.bh),l=l.length());l*=Math.tan(this.Vb.fov/2*Math.PI/180);this.wFb(2*f*l/k);this.yFb(2*g*l/h)}else void 0!==this.Vb.top&&(this.wFb(f*(this.Vb.right-this.Vb.left)/k),this.yFb(g*(this.Vb.top-
this.Vb.bottom)/h))};d.prototype.SIc=function(f){void 0===f&&(f=this.lTc());this.Dg/=f;this.iEa+=this.pQa*(1-f)};d.prototype.TIc=function(f){void 0===f&&(f=this.lTc());this.Dg*=f;this.iEa-=this.pQa*(1-f)};d.prototype.CV=function(){var f=this.Vb.position;if(this.nd===b.ROTATE||this.nd===b.jDa)this.Wfa=Math.max(a,Math.min(Math.PI-a,this.Wfa));if(this.a5a)var g=this.iEa;else this.Ib.copy(f).sub(this.bh),g=this.Ib.length()*this.Dg;g=Math.max(this.NW,Math.min(this.Hfa,g));this.bh.add(this.v5);this.Vb instanceof
$u||(this.Vb.left*=this.Dg,this.Vb.right*=this.Dg,this.Vb.top*=this.Dg,this.Vb.bottom*=this.Dg,this.Vb.updateProjectionMatrix());this.TPa&&this.nd===b.NONE&&this.Mec();this.Ib.x=g*Math.sin(this.Wfa)*Math.sin(this.Dea);this.Ib.y=g*Math.cos(this.Wfa);this.Ib.z=g*Math.sin(this.Wfa)*Math.cos(this.Dea);this.Ib.applyQuaternion(e);f.copy(this.bh).add(this.Ib);this.Vb.lookAt(this.bh);this.Dg=1;this.v5.set(0,0,0);fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]}))};d.prototype.z0c=function(){};
d.prototype.dispose=function(){this.uc=this.Vb=null;Qy.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJrcSJ9fX0g");var qz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.scene.animation.AbstractAnimation");d.prototype.OO=Fb;return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJPTyJ9fX0g");var rz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){qz.call(this);this.Bmd=(b?b["function"]:null)||a}function a(){return!0}D(d,qz);L(d,"geotoolkit3d.scene.animation.Animation");d.prototype.OO=function(){return this.Bmd()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJPTyJ9fX0g");var sz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(g){g=G(g,{name:"firstpersoncontroller",keypanspeed:168,pointerlock:!1,inverty:!1,rotatespeed:30,deltaCap:.1},!0);pz.call(this,g);this.M$=!1;this.kva=g.inverty;this.r5a=g.deltaCap;this.ayc=new gy;this.QSa=new gy;this.wh=!0;this.setOptions(g)}function a(){}var b=1E-6,c={NONE:-1,jDa:3,FOb:4,Lnb:5},e=(new sv).setFromUnitVectors(new Hp(0,0,1),new Hp(0,1,0)),f=e.clone().invert();D(d,pz);L(d,"geotoolkit3d.controller.FirstPersonController");d.prototype.setOptions=function(g){pz.prototype.setOptions.call(this,
g);if(!this.wh)return this;g=G(g,{pointerlock:this.M$,inverty:this.kva,deltaCap:this.r5a},!0);this.M$=vd.Fqa()?!1:g.pointerlock;this.kva=g.inverty;this.r5a=g.deltaCap;this.Ib.copy(this.bh).sub(this.Vb.position);return this};d.prototype.ta=function(){var g=pz.prototype.ta.call(this);g.pointerlock=this.M$;g.inverty=this.kva;g.deltaCap=this.r5a;return g};d.prototype.RH=a;d.prototype.LJ=a;d.prototype.ZL=a;d.prototype.$L=function(g){for(var h in this.nna)delete this.nna[h]};d.prototype.gd=function(g){pz.prototype.gd.call(this,
g);this.M$&&(g=this.uc.T6().domElement,g.requestPointerLock=g.requestPointerLock||g.mozRequestPointerLock||g.webkitRequestPointerLock,g.requestPointerLock())};d.prototype.Yc=function(g){pz.prototype.Yc.call(this,g);this.M$&&($a.document.exitPointerLock=$a.document.exitPointerLock||$a.document.mozExitPointerLock||$a.document.webkitExitPointerLock,$a.document.exitPointerLock())};d.prototype.YL=function(g){!1!==this.Vf&&this.v8c()};d.prototype.oEd=function(g,h){for(var k=!1,l=!1,m=0;m<g.length;m++){switch(g[m]){case "37":case "65":h.add(new Hp(-1,
0,0));break;case "39":case "68":h.add(new Hp(1,0,0));break;case "38":case "87":h.add(new Hp(0,0,-1));break;case "40":case "83":h.add(new Hp(0,0,1));break;case "82":h.add(new Hp(0,1,0));break;case "70":h.add(new Hp(0,-1,0));break;case "16":k=!0;break;case "90":l=!0;break;default:h.add(new Hp(0,0,0))}k&&h.multiplyScalar(2);l&&h.multiplyScalar(.5)}};d.prototype.v8c=function(){if(null==this.o4a){var g=new Xt,h=this;this.o4a=new rz({"function":function(){var k=Date.now(),l=(k-h.rwc)/1E3;l>h.r5a&&(l=h.r5a);
h.rwc=k;k=Object.keys(h.nna);if(0===k.length&&0===h.v5.lengthSq()&&0===h.E$a&&0===h.b9a)return!0;if(0!==k.length){var m=new Hp;h.oEd(k,m);h.Vb.updateMatrixWorld();g.extractRotation(h.Vb.matrixWorld);m.applyMatrix4(g);m.multiplyScalar(h.dwc*l);h.Vb.position.add(m);h.bh.add(m)}if(0!==h.E$a||0!==h.b9a){k=h.Vb.position;h.Ib.copy(h.bh).sub(k);h.Ib.applyQuaternion(e);m=Math.atan2(h.Ib.x,h.Ib.z);var n=Math.atan2(Math.sqrt(h.Ib.x*h.Ib.x+h.Ib.z*h.Ib.z),h.Ib.y);h.TPa&&h.Mec(h.B5b());m+=h.E$a*l*h.nga;n+=h.b9a*
l*h.nga;m=Math.max(h.XVb,Math.min(h.FVb,m));n=Math.max(h.dWb,Math.min(h.OVb,n));if(h.nd===c.ROTATE||h.nd===c.jDa)n=Math.max(b,Math.min(Math.PI-b,n));l=h.Ib.length()*h.Dg;l=Math.max(h.NW,Math.min(h.Hfa,l));h.Vb.position.add(h.v5);h.Vb instanceof $u||(h.Vb.left*=h.Dg,h.Vb.right*=h.Dg,h.Vb.top*=h.Dg,h.Vb.bottom*=h.Dg,h.Vb.updateProjectionMatrix());h.Ib.x=l*Math.sin(n)*Math.sin(m);h.Ib.y=l*Math.cos(n);h.Ib.z=l*Math.sin(n)*Math.cos(m);h.Ib.applyQuaternion(f);h.bh.copy(k).add(h.Ib);h.Vb.lookAt(h.bh);h.E$a=
0;h.b9a=0;h.Dg=1}0!==h.v5.lengthSq()&&(h.Vb.position.add(h.v5),h.bh.add(h.v5),h.v5.set(0,0,0));return!1}})}this.uc.idb().pFc(this.o4a)||(this.uc.idb().J0b(this.o4a),this.rwc=Date.now())};d.prototype.PE=function(g){!1===this.Vf||this.p5||(this.nd=c.jDa,this.eX.set(g.plotX,this.kva?g.plotY:-g.plotY))};d.prototype.OA=function(g){!1!==this.Vf&&!0!==this.p5&&this.nd===c.jDa&&(this.M$&&!this.pn(g)?this.lwa.set(g.movementX,this.kva?g.movementY:-g.movementY):this.M$&&this.pn(g)?(this.rN.set(g.plotX,this.kva?
g.plotY:-g.plotY),this.lwa.subVectors(this.rN,this.ayc),this.ayc.copy(this.rN)):(this.rN.set(g.plotX,this.kva?g.plotY:-g.plotY),this.lwa.subVectors(this.rN,this.eX)),g=this.uc.getSize().ca(),this.E$a=2*Math.PI*this.lwa.x/g,this.b9a=2*Math.PI*this.lwa.y/g,this.M$||this.eX.copy(this.rN),this.CV())};d.prototype.UE=function(g){!1!==this.Vf&&!0!==this.B$&&this.nd===c.Lnb&&(this.M$&&!this.pn(g)?this.Ufa.set(g.movementX,this.kva?g.movementY:-g.movementY):this.M$&&this.pn(g)?(this.UW.set(g.plotX,g.plotY),
0===this.QSa.x&&0===this.QSa.y&&this.QSa.copy(this.hQ),this.Ufa.subVectors(this.UW,this.QSa),this.QSa.copy(this.UW)):(this.UW.set(g.plotX,g.plotY),this.Ufa.subVectors(this.UW,this.hQ),this.hQ.copy(this.UW)),5>this.Ufa.length()||(this.I$.set(this.Ufa.x,this.Ufa.y,0),this.v5.add(this.I$),this.CV()))};d.prototype.kD=function(g){pz.prototype.kD.call(this,g);this.QSa=new gy};d.prototype.OE=function(g){!1!==this.Vf&&(this.nd=c.NONE,this.M$&&($a.document.exitPointerLock=$a.document.exitPointerLock||$a.document.mozExitPointerLock||
$a.document.webkitExitPointerLock,$a.document.exitPointerLock()))};d.prototype.SE=function(g){if(!1!==this.Vf&&!0!==this.aQ){var h=g.distanceX;g=g.distanceY;this.nzc=Math.sqrt(h*h+g*g)}};d.prototype.RE=function(g){if(!1!==this.Vf&&!0!==this.aQ){g.preventDefault();var h=g.distanceX;g=g.distanceY;g=Math.sqrt(h*h+g*g);h=this.nzc-g;if(0!==h){this.nzc=g;g=this.uc.getSize();g=g.ca();if(this.Vb instanceof $u){var k=this.Vb.position;k=k.clone().sub(this.bh);k=k.length();k*=Math.tan(this.Vb.fov/2*Math.PI/
180);this.zFb(2*h*k/g)}else void 0!==this.Vb.top&&this.zFb(2*(this.Vb.right-this.Vb.left)/g);this.CV()}}};d.prototype.kq=function(g){if(!1!==this.Vf&&!0!==this.aQ){g.preventDefault();g=-g.deltaY;var h=this.uc.getSize();h=h.ca();if(this.Vb instanceof $u){var k=this.Vb.position;k=k.clone().sub(this.bh);k=k.length();k*=Math.tan(this.Vb.fov/2*Math.PI/180);this.zFb(2*g*k/h)}else void 0!==this.Vb.top&&this.zFb(2*(this.Vb.right-this.Vb.left)/h);this.CV()}};d.prototype.zFb=function(g){var h=this.Vb.matrix.elements;
this.I$.set(h[8],h[9],h[10]);this.I$.multiplyScalar(g);this.v5.add(this.I$)};d.prototype.CV=function(){this.v8c()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJrcSJ9fX0g");var tz=/*#__PURE__*/ta(/*#__PURE__*/{Y3:"XY",aob:"XZ",hPb:"YZ"},2,"eyJYWSI6IlkzIiwiWFoiOiJhb2IiLCJZWiI6ImhQYiJ9"),uz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{zoomspeed:1,panspeed:.001,noroll:!1,plane:d.Plane.aob,name:"rollcontroller"});Qy.call(this,a);this.hQ=new gy;this.j6=new gy;this.Bu=new gy;this.yYb=0;this.en=a.plane;this.I9a=this.m6b();this.wh=!0;this.setOptions(a)}D(d,Qy);L(d,"geotoolkit3d.controller.RollController");d.Plane=tz;d.prototype.setOptions=function(a){Qy.prototype.setOptions.call(this,a);if(!this.wh)return this;a=G(a,{panspeed:this.dTa,noroll:this.Mva,plane:this.en},
!0);this.dTa=a.panspeed;this.Mva=a.noroll;this.en=a.plane;this.yYb=0;this.I9a=this.m6b();return this};d.prototype.ta=function(){var a=Qy.prototype.ta.call(this);a.panspeed=this.dTa;a.noroll=this.Mva;a.plane=this.en;return a};d.prototype.PE=function(a){this.Mva||(this.Upd=new gy(a.plotX,a.plotY),this.yYb=this.m6b())};d.prototype.OA=function(a){if(!0!==this.Mva){var b=new gy;this.Bu.set(a.plotX,a.plotY);b.subVectors(this.Bu,new gy(this.uc.getSize().ca()/2,this.uc.getSize().da()/2));a=(new gy).subVectors(this.Upd,
new gy(this.uc.getSize().ca()/2,this.uc.getSize().da()/2));a=Math.atan2(a.x,-a.y);b=Math.atan2(b.x,-b.y);this.i_d(b-a+this.yYb);fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]}))}};d.prototype.OE=function(a){};d.prototype.SE=function(a){if(!0!==this.aQ){var b=a.distanceX;a=a.distanceY;b=Math.sqrt(b*b+a*a);this.j6.set(0,b)}};d.prototype.RE=function(a){if(!0!==this.aQ){var b=a.distanceX;a=a.distanceY;var c=new gy;this.Bu.set(b,a);c.subVectors(this.Bu,this.j6);this.GKb(c.y/this.uc.getSize().da());
this.j6.copy(this.Bu);fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]}))}};d.prototype.kG=function(a){};d.prototype.lG=function(a){!0!==this.B$&&this.hQ.set(a.plotX,a.plotY)};d.prototype.UE=function(a){if(!0!==this.B$){var b=new gy;this.Bu.set(a.plotX,a.plotY);b.subVectors(this.Bu,this.hQ);this.occ(b);this.hQ.copy(this.Bu);fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]}))}};d.prototype.kD=function(a){};d.prototype.kq=function(a){!1!==this.Vf&&!0!==
this.aQ&&(a.preventDefault(),a=a.deltaY,this.GKb(a),fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]})))};d.prototype.occ=function(a){var b=this.Vb.position;b=b.clone().sub(this.bh);b=b.length();b*=Math.tan(this.Vb.fov/2*Math.PI/180);this.wFb(2*a.x*b/this.uc.getSize().ca());this.yFb(2*a.y*b/this.uc.getSize().da())};d.prototype.wFb=function(a){var b=this.Vb.matrix.elements;b=new Hp(b[0],b[1],b[2]);b.multiplyScalar(-a);this.Vb.position.add(b);this.bh.add(b);this.Vb.lookAt(this.bh);
this.bkc()};d.prototype.yFb=function(a){var b=this.Vb.matrix.elements;b=new Hp(b[4],b[5],b[6]);b.multiplyScalar(a);this.Vb.position.add(b);this.bh.add(b);this.Vb.lookAt(this.bh);this.bkc()};d.prototype.GKb=function(a){a=this.Vb.fov+=a*this.Kab;a=Math.min(Math.max(10,a),90);this.uc.setOptions({camera:{fov:a}})};d.prototype.i_d=function(a){this.I9a=a;this.bkc()};d.prototype.m6b=function(){switch(this.en){case tz.aob:return this.Vb.rotation.z;case tz.Y3:return this.Vb.rotation.y;case tz.hPb:return this.Vb.rotation.x}return 0};
d.prototype.bkc=function(){switch(this.en){case tz.aob:this.Vb.rotation.z=this.I9a;break;case tz.Y3:this.Vb.rotation.y=this.I9a;break;case tz.hPb:this.Vb.rotation.x=this.I9a}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJrcSJ9fX0g");var vz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(g){var h=G(g,{rotatespeed:1,zoomspeed:.005,panspeed:.001,norotate:!1,noroll:!1,nodblclick:!1,dblclickspeed:250,staticmoving:!1,dynamicdampingfactor:.2,mindistance:0,maxdistance:Infinity,keys:{LEFT:37,Vjd:38,RIGHT:39,$1a:40},name:"trackballcontroller"});Qy.call(this,h);this.r9a=this.nd=b;this.B_=new Hp;this.eX=new Hp;this.rN=new Hp;this.j6=new gy;this.cVa=new gy;this.cJe=this.dJe=0;this.hQ=new gy;this.UW=new gy;this.GK=g.position.clone();this.wh=!0;this.setOptions(h)}var a=
1E-6,b=-1,c=3,e=4,f=5;D(d,Qy);L(d,"geotoolkit3d.controller.TrackballController");d.prototype.setOptions=function(g){Qy.prototype.setOptions.call(this,g);if(!this.wh)return this;var h=G(g,{rotatespeed:this.nga,panspeed:this.dTa,norotate:this.p5,noroll:this.Mva,nodblclick:this.WFa,staticmoving:this.Pvb,dynamicdampingfactor:this.iqb,mindistance:this.NW,maxdistance:this.Hfa,position:null!=this.Vb?this.Vb.position:this.vGa,lookat:this.bh,keys:this.BF},!0);this.vRb=g.dblclickspeed;this.nga=h.rotatespeed;
this.dTa=h.panspeed;this.p5=h.norotate;this.Mva=h.noroll;this.WFa=h.nodblclick;this.Pvb=h.staticmoving;this.iqb=h.dynamicdampingfactor;this.NW=h.mindistance;this.Hfa=h.maxdistance;this.BF=h.keys;this.wHa=h.lookat;this.bh.copy(this.wHa);this.r9a=this.nd=b;return this};d.prototype.ta=function(){var g=Qy.prototype.ta.call(this);g.mindistance=this.NW;g.maxdistance=this.Hfa;g.norotate=this.p5;g.rotatespeed=this.nga;g.nodblclick=this.WFa;g.dblclickspeed=this.vRb;g.panspeed=this.dTa;g.noroll=this.Mva;return g};
d.prototype.jG=function(g){!1===this.Vf||this.WFa||this.Ckc(g.plotX,g.plotY)};d.prototype.Ckc=function(g,h){g=oz.Hn(this.uc,g,h,this.Fc,this.Fc);0<g.length&&this.uc.rfc(g[0].point,!0)};d.prototype.JPc=function(g,h){var k=new Hp,l=new Hp,m=new Hp,n=this.uc.getSize(),p=.5*n.ca();n=.5*n.da();m.set((g-p)/p,(n-h)/n,0);g=m.length();this.Mva?m.z=g<Math.SQRT1_2?Math.sqrt(1-g*g):.5/g:1<g?m.normalize():m.z=Math.sqrt(1-g*g);this.B_.copy(this.Vb.position).sub(this.bh);k.copy(this.Vb.up).setLength(m.y);k.add(l.copy(this.Vb.up).cross(this.B_).setLength(m.x));
k.add(this.B_.setLength(m.z));return k};d.prototype.z0c=function(){if(this.nd===c){var g=new Hp,h=new sv,k=Math.acos(this.eX.dot(this.rN)/this.eX.length()/this.rN.length());.01<k&&(g.crossVectors(this.eX,this.rN).normalize(),k*=this.nga,h.setFromAxisAngle(g,-k),this.B_.applyQuaternion(h),this.Vb.up.applyQuaternion(h),this.rN.applyQuaternion(h),this.Pvb?this.eX.copy(this.rN):(h.setFromAxisAngle(g,k*(this.iqb-1)),this.eX.applyQuaternion(h)))}};d.prototype.GKb=function(){if(this.nd===e){var g=1+Math.abs(this.cVa.y-
this.j6.y)*this.Kab;this.cVa.y>this.j6.y&&(g=1/g);1!==g&&0<g&&(this.B_.multiplyScalar(g),this.Pvb?this.j6.copy(this.cVa):this.j6.y+=(this.cVa.y-this.j6.y)*this.iqb)}};d.prototype.occ=function(){if(this.nd===f){var g=new gy,h=new Hp,k=new Hp;g.copy(this.UW).sub(this.hQ);g.lengthSq()&&(g.multiplyScalar(this.B_.length()*this.dTa),k.copy(this.B_).cross(this.Vb.up).setLength(g.x),k.add(h.copy(this.Vb.up).setLength(g.y)),this.Vb.position.add(k),this.bh.add(k),this.Pvb?this.hQ.copy(this.UW):this.hQ.add(g.subVectors(this.UW,
this.hQ).multiplyScalar(this.iqb)))}};d.prototype.Qud=function(){this.aQ&&this.B$||(this.B_.lengthSq()>this.Hfa*this.Hfa&&this.Vb.position.addVectors(this.bh,this.B_.setLength(this.Hfa)),this.B_.lengthSq()<this.NW*this.NW&&this.Vb.position.addVectors(this.bh,this.B_.setLength(this.NW)))};d.prototype.CV=function(){this.B_.subVectors(this.Vb.position,this.bh);this.p5||this.z0c();this.aQ||this.GKb();this.B$||this.occ();this.Vb.position.addVectors(this.bh,this.B_);this.Qud();this.Vb.lookAt(this.bh);this.GK.distanceToSquared(this.Vb.position)>
a&&this.GK.copy(this.Vb.position);fz.prototype.gg.call(this.Vb,new az({type:$y.Camera,source:this,args:[]}))};d.prototype.PE=function(g){!1===this.Vf||this.p5||(this.nd=c,this.eX.copy(this.JPc(g.plotX,g.plotY)),this.rN.copy(this.eX))};d.prototype.OA=function(g){!1!==this.Vf&&!0!==this.p5&&this.nd===c&&(this.rN.copy(this.JPc(g.plotX,g.plotY)),this.CV())};d.prototype.OE=function(g){!1!==this.Vf&&(this.nd=b)};d.prototype.SE=function(g){if(!1!==this.Vf&&!0!==this.aQ){this.nd=e;var h=g.distanceX;g=g.distanceY;
h=Math.sqrt(h*h+g*g);this.j6.set(0,h)}};d.prototype.RE=function(g){if(!1!==this.Vf&&!0!==this.aQ&&this.nd===e){var h=g.distanceX;g=g.distanceY;h=Math.sqrt(h*h+g*g);this.cVa.set(0,h);this.CV()}};d.prototype.kG=function(g){!1!==this.Vf&&(this.nd=b)};d.prototype.lG=function(g){!1!==this.Vf&&!0!==this.B$&&(this.nd=f,this.hQ.set(g.plotX,g.plotY))};d.prototype.UE=function(g){!1!==this.Vf&&!0!==this.B$&&this.nd===f&&(this.UW.set(g.plotX,g.plotY),this.CV())};d.prototype.kD=function(g){!1!==this.Vf&&(this.nd=
b)};d.prototype.kq=function(g){!1!==this.Vf&&!0!==this.aQ&&(this.nd=e,g.preventDefault(),g=-g.deltaY,this.j6.y=0,this.cVa.y=3*g,this.CV())};d.prototype.dispose=function(){this.uc=this.Vb=null;Qy.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJrcSJ9fX0g");var wz=/*#__PURE__*/function(){function d(){this.Swc=vr}L(d,"geotoolkit3d.data.loader.surface.AbstractLoader");d.prototype.load=Fb;d.prototype.parse=Fb;return d}();var xz=/*#__PURE__*/function(){function d(){wz.call(this)}L(d,"geotoolkit3d.data.loader.surface.EarthVisionLoader");D(d,"geotoolkit3d.data.loader.AbstractLoader");d.prototype.load=function(a,b,c){function e(g){this.parse(new up({stream:new tp({buffer:g,stride:1}),chunksize:g.byteLength}),b,c)}var f=new as(this.Swc);f.setResponseType("arraybuffer");f.load(a,e.bind(this),c)};d.prototype.parse=function(a,b,c){return b=(new Cg(function(e,f){a.Ica(0,function(g,h,k,l,m){g&&f();k=k.filter(function(J){return J&&J.length});
var n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;g=[];h=[];l=[];m=[];var w=[],y=!1,z=!1,x=!1,C=-999.25,A;for(A=0;A<k.length;A++){var v=k[A].split(/(\s+)/).filter(function(J){return 0<J.trim().length});if(!(null==v||3>v.length))if("#"===v[0]){if(k[A].toLowerCase().includes("field")&&(k[A].includes("4")&&k[A].toLowerCase().includes("column")&&(y=!0),k[A].includes("5")&&k[A].toLowerCase().includes("row")&&
(z=!0),y&&z&&(x=!0)),k[A].includes("# Grid_size:")){v=k[A].split(" ");var B=+v[2];var E=+v[4]}}else{var H=Number(v[0]),F=Number(v[1]),I=Number(v[2]);isNaN(H)||isNaN(F)||isNaN(I)||(n=Math.min(n,H),p=Math.max(p,H),q=Math.min(q,F),r=Math.max(r,F),t=Math.min(t,I),u=Math.max(u,I),g.push(H),h.push(F),l.push(I),x&&(H=Number(v[3]),v=Number(v[4]),isNaN(H)||isNaN(v)||(m.push(H),w.push(v))))}}if(0<t)for(A=t,t=-u,u=-A,A=0;A<l.length;A++)l[A]*=-1;k={x:g,y:h,z:l,xmin:n,xmax:p,ymin:q,ymax:r,zmin:t,zmax:u};if(x){A=
B*E;x=g.length;n=Array(A);p=Array(A);q=Array(A);for(A=0;A<B*E;A++)q[A]=C;for(A=0;A<x;A++)r=m[A],t=w[A],r=(t-1)*B+(r-1),n[r]=g[A],p[r]=h[A],q[r]=l[A];k=G(k,{isgridsurface:!0,width:B,height:E,xvalues:n,yvalues:p,elevation:q,nullvalue:C})}e(k)})})).then(b,c)};return d}();var yz=/*#__PURE__*/function(){function d(){}var a=/(.*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/,b=/(.*)\s+(\-?\d+\.?[\d\-\+e]*)\s/,c=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,e=/^VECTORS[ ]+(\w+)[ ]+(\w+)/,f=/^SCALARS[ ]+(\w+)[ ]+(\w+)/,g=/^FIELD[ ]+(\w+)[ ]+(\w+)/,h=/^POINTS /,k=/^POLYGONS /,l=/^LINES /,m=/^TRIANGLE_STRIPS /,n=/^POINT_DATA[ ]+(\d+)/,p=/^CELL_DATA[ ]+(\d+)/,q=/^CELLS /,r=/^CELL_TYPES /,t=/^DATASET[ ]+(\w+)/,u="STRUCTURED_POINTS",w="STRUCTURED_GRID",y="RECTILINEAR_GRID",z=
"POLYDATA",x="UNSTRUCTURED_GRID",C=/^(\d+)\s+([\s\d]*)/,A=/\s+/;d.Bkb=function(v){return+v};d.dea={WFb:function(v,B,E){null!=E.ZO&&("normals"===E.ZO.type||"vector"===E.ZO.type||"scalar"===E.ZO.type?Array.prototype.push.apply(B.data[E.ZO.name].values,v.split(A).map(d.Bkb)):"field"===E.ZO.type&&(B=B.data[E.ZO.name].arrays,Array.prototype.push.apply(B[B.length-1].values,v.split(A).map(d.Bkb))))},points:function(v,B,E){Array.prototype.push.apply(B.data.position,v.split(A).map(d.Bkb))},cells:function(v,
B,E){var H;null!==(H=C.exec(v))&&B.data.cells.push(H[2].split(A).map(d.Bkb))},Gud:function(v,B,E){E=B.data.cells[E.cellIndex++];switch(+v){case 1:case 2:null==B.data.pointindex&&(B.data.pointindex=[]);Array.prototype.push.apply(B.data.pointindex,E);break;case 3:null==B.data.lineindex&&(B.data.lineindex=[]);Array.prototype.push.apply(B.data.lineindex,E);break;case 4:null==B.data.lineindex&&(B.data.lineindex=[]);Array.prototype.push.apply(B.data.polylineindex,E.slice(0,2));for(v=2;v<E.length;v++)B.data.polylineindex.push(B.data.polylineindex[B.data.polylineindex.length-
1],E[v]);break;case 5:null==B.data.index&&(B.data.index=[]);Array.prototype.push.apply(B.data.index,E);break;case 6:null==B.data.index&&(B.data.index=[]);B=B.data.index;Array.prototype.push.apply(B,E.slice(0,3));for(v=3;v<E.length;v++)B.push(B[B.length-2],B[B.length-1],E[v]);break;case 7:hb("VTKParser: Unsupported/Unhandled cell type: VTK_POLYGON");break;case 8:case 9:null==B.data.index&&(B.data.index=[]);B.data.index.push(E[0],E[1],E[2]);B.data.index.push(E[0],E[2],E[3]);break;case 10:null==B.data.index&&
(B.data.index=[]);B.data.index.push(E[0],E[2],E[1]);B.data.index.push(E[0],E[1],E[3]);B.data.index.push(E[1],E[2],E[3]);B.data.index.push(E[0],E[3],E[2]);break;case 11:case 12:case 13:case 14:hb("VTKParser: Unsupported/Unhandled cell type: VTK_VOXEL VTK_HEXAHEDRON VTK_WEDGE VTK_PYRAMID");break;case 21:case 22:case 23:case 24:case 25:hb("VTKParser: Unsupported/Unhandled cell type: VTK_QUADRATIC_EDGE VTK_QUADRATIC_TRIANGLE VTK_QUADRATIC_QUAD VTK_QUADRATIC_TETRA VTK_QUADRATIC_HEXAHEDRON")}},triangles:function(v,
B,E){if(null!==(E=C.exec(v))&&(v=parseInt(E[1]),E=E[2].split(/\s+/),3<=v))for(var H,F,I,J=0;J<v-2;J++)1===J%2?(H=parseInt(E[J]),F=parseInt(E[J+2]),I=parseInt(E[J+1])):(H=parseInt(E[J]),F=parseInt(E[J+1]),I=parseInt(E[J+2])),B.data.index.push(H,F,I)},polygon:function(v,B,E){if(null!==(E=C.exec(v))&&(v=parseInt(E[1]),E=E[2].split(A),3<=v))for(var H=parseInt(E[0]),F,I,J=1,K=0;K<v-2;++K)F=parseInt(E[J]),I=parseInt(E[J+1]),B.data.index.push(H,F,I),J++},line:function(v,B,E){if(null!==(E=C.exec(v))){v=parseInt(E[1]);
E=E[2].split(A);for(var H=[],F=0;F<v;F++)H.push(parseInt(E[F]));B.data.lineindex.push(H)}}};d.oVd=function(v,B,E){null!==k.exec(v)?(B.bja=d.dea.polygon,E.data.index=[]):null!==l.exec(v)?(B.bja=d.dea.line,E.data.lineindex=[]):null!==h.exec(v)?(B.bja=d.dea.points,E.data.position=[]):null!==m.exec(v)?(B.bja=d.dea.triangles,E.data.index=[]):null!==q.exec(v)?(B.bja=d.dea.cells,E.data.cells=[]):null!==r.exec(v)?(B.bja=d.dea.Gud,B.cellIndex=0,E.data.index=[]):null!==n.exec(v)?B.bja=d.dea.WFb:null!==p.exec(v)?
B.bja=d.dea.WFb:g.test(v)?(B.bja=d.dea.WFb,v=g.exec(v),B.ZO={type:"field",name:v[1].toLowerCase(),arrays:[]},E.data[v[1].toLowerCase()]=B.ZO):B.bja===d.dea.WFb?f.test(v)?(v=f.exec(v),B.ZO={type:"scalar",name:v[1].toLowerCase(),values:[]},E.data[v[1].toLowerCase()]=B.ZO):c.test(v)?(v=c.exec(v),null==E.data.normals&&(E.data.normals=E.data[v[1].toLowerCase()]),B.ZO={type:"normals",name:v[1].toLowerCase(),values:[]},E.data[v[1].toLowerCase()]=B.ZO):e.test(v)?(v=e.exec(v),B.ZO={type:"vector",name:v[1].toLowerCase(),
values:[]},E.data[v[1].toLowerCase()]=B.ZO):null!=B.ZO&&"field"===B.ZO.type?(E=v.split(A),B.ZO.arrays.push({name:E[0],stride:+E[1],values:[]})):hb("VTKParser: Unsupported/Unhandled submode: "+v):hb("VTKParser: Unsupported/Unhandled entry: "+v)};d.DUd=function(v,B){var E=d.Bkb;switch(t.exec(v[3])[1]){case u:B.metadata.dataset.dimensions=a.exec(v[4]).slice(2).map(E);B.metadata.dataset.origin=a.exec(v[5]).slice(2).map(E);B.metadata.dataset.spacing=a.exec(v[6]).slice(2).map(E);v=3;break;case w:B.metadata.dataset.dimensions=
a.exec(v[4]).slice(2).map(E);B.metadata.dataset.points=b.exec(v[5]).slice(2).map(E)[0];v=2;break;case y:B.metadata.dataset.dimensions=a.exec(v[4]).slice(2).map(E);v=1;break;case z:case x:B.metadata.dataset.points=b.exec(v[4]).slice(2).map(E)[0];v=1;break;default:v=-1}return v};return d}();var zz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}var a=/^[e\-0-9\. ]*$/,b=/(?![\x20-\x7E]|[\x0D]|[\x0A])./g,c="ASCII",e=yz;L(d,"geotoolkit3d.data.loader.vtk.VTKASCIIStreamLoader");d.vUc=function(f){return new Cg(function(g,h){f.jGb(0,10,function(k,l,m,n,p,q){k?h(k):g(-1!==m[2].indexOf(c))})})};d.parse=function(f){return new Cg(function(g,h){var k={};f.jGb(0,10,function(l,m,n,p,q,r){if(l)h(l);else if(l=n,n=n.map(function(u){return u.replace(b," ").trim()}).filter(function(u){return 0!==u.length}),k.metadata={header:n[0],
title:n[1],type:n[2].split(" ")[1],dataset:{type:n[3]}},k.data={},m=e.DUd(n,k),-1===m)h("Unsupported dataset type: "+n[3]);else{m+=l.indexOf(n[3]);var t={};f.Ica(m,function v(w,y,z,x,C,A){for(w=0;w<z.length;w++)C=z[w],C=C.replace(b," ").trim(),0!==C.length&&"#"!==C.charAt(0)&&(a.test(C)?t.bja(C,k,t):e.oVd(C,t,k));x?g(k):f.Ica(y+z.length,v)})}})})};return d}(),1,"eyJpc0FzY2lpIjoidlVjIn0g");var Az=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.Attributes");d.JIa=function(a){var b=a.hi(),c=a.mb();c=Pd.Rg(c);var e=new Pq(c.Xj()/255,c.Wj()/255,c.Vj()/255);b=null==b||0===b.length?new tt({color:e.getHex(),linewidth:a.ca(),transparent:255>c.Ik(),opacity:c.Ik()/255}):new wt({color:e.getHex(),linewidth:a.ca(),scale:250,gapSize:b[1],dashSize:b[0],transparent:255>c.Ik(),opacity:c.Ik()/255});b.userData.LY=a;return b};d.l3b=function(a){var b=d.yza(a.mb());b=new du({color:b.color.getHex(),transparent:1>
b.opacity,opacity:b.opacity,side:Fr});b.userData.bpa=a;return b};d.Xwd=function(a){var b=d.yza(a.mb());b=new gu({color:b.color.getHex(),transparent:1>b.opacity,opacity:b.opacity,side:Fr});b.userData.bpa=a;return b};d.yza=function(a){var b=Pd.Rg(a);a=new Pq(b.Xj()/255,b.Wj()/255,b.Vj()/255);b=b.Ik()/255;return{color:a,opacity:b}};d.dad=function(a,b){var c=d.yza(b.mb());a.color=c.color;a.transparent=1>c.opacity;a.opacity=c.opacity;a.userData.bpa=b;a.needsUpdate=!0;return a};return d}(),2,"eyJjcmVhdGVMaW5lTWF0ZXJpYWwiOiJKSWEiLCJjcmVhdGVNZXNoTWF0ZXJpYWwiOiJsM2IiLCJjcmVhdGVQaG9uZ01lc2hNYXRlcmlhbCI6Ilh3ZCIsImdldFRocmVlQ29sb3IiOiJ5emEiLCJ1cGRhdGVNZXNoTWF0ZXJpYWwiOiJkYWQifSAg");var Bz=/*#__PURE__*/function(){function d(b){b.defines.hasOwnProperty("addedPointCloudShaders")||(b.defines.addedPointCloudShaders=!0,b.uniforms.cgalphaTest={type:"f",value:1},b.uniforms.cgpointTexture={type:"tv",value:null},b.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},b.uniforms.cgpointOpacity={type:"f",value:1},b.uniforms.cgpixelScale={type:"f",value:bc()})}function a(){}L(a,"geotoolkit3d.util.shaders.PointCloud");a.Bhd=["attribute float cgpointSize;\nattribute float cgpointVisible;\nvarying float vcgpointVisible;\nuniform float cgpixelScale;\n#include <common>\n#include <logdepthbuf_pars_vertex>",
Ty.n2a,"",Ty.uP+" {","\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);",Ty.m2a,"\tvcgpointVisible = cgpointVisible;\n\tgl_PointSize = cgpixelScale * cgpointSize * 2.0;\n\tgl_Position = projectionMatrix * mvPosition;\n#include <logdepthbuf_vertex>\n}"].join("\n");a.Ahd=["uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\nuniform float cgalphaTest;\n#include <logdepthbuf_pars_fragment>",Ty.l2a,"varying float vcgpointVisible;",Ty.uP+" {","\tif(vcgpointVisible < 0.1) {\n\t\tdiscard;\n\t}\n\tvec4 diffuseColor = vec4(cgpointColor, 1.0);",
Ty.k2a,"\tvec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n\n\tif(finalColor.a < cgalphaTest) {\n\t\tdiscard;\n\t}\n\tfinalColor.a = max(finalColor.r + finalColor.g + finalColor.b, 1.0) * cgpointOpacity;\n\tgl_FragColor = diffuseColor * finalColor;\n#include <logdepthbuf_fragment>\n}"].join("\n");a.J3d=function(b,c){c&&(d(b),c.hasOwnProperty("colorprovider")?b.uniforms.cgpointColor.value="string"===typeof c.colorprovider?new Pq(c.colorprovider):c.colorprovider instanceof Pq?c.colorprovider:
new Pq(16777215):c.hasOwnProperty("color")&&(b.uniforms.cgpointColor.value=c.color),c.hasOwnProperty("symbol")&&(b.uniforms.cgpointTexture.value=c.symbol),c.hasOwnProperty("opacity")&&(b.uniforms.cgpointOpacity.value=c.opacity),c.hasOwnProperty("alphatest")&&(b.uniforms.cgalphaTest.value=c.alphatest))};a.IId=function(b){d(b);return{symbol:b.uniforms.cgpointTexture.value,color:b.uniforms.cgpointColor.value,opacity:b.uniforms.cgpointOpacity.value,alphatest:b.uniforms.cgalphaTest.value,pixelscale:b.uniforms.cgpixelScale.value}};
return a}();var Cz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Lw.call(this,{side:a.side||Fr,opacity:null!=a.opacity?a.opacity:1,transparent:null!=a.transparent?a.transparent:!0,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:null!=a.uniforms?a.uniforms:{}});this.Z$a=null;this.type="ColorMapShaderMaterial";this.setOptions(a)}D(d,Lw);L(d,"geotoolkit3d.scene.ColorMapShaderMaterial");d.prototype.setOptions=function(a){null!=a.vertexcolors&&(a.vertexcolors!==jy&&a.vertexcolors!==zu&&a.vertexcolors!==$r||hb("THREE.VertexColors, THREE.FaceColors and THREE.NoColors was deprecated since 3.3, use true instead of THREE.VertexColors and false instead of THREE.NoColors"),
a.vertexColors=a.vertexcolors===jy||!0===a.vertexcolors);var b=G(a,{opacity:this.opacity,transparent:this.transparent,side:this.side,vertexColors:this.vertexColors,alphaTest:this.alphaTest,blendDst:this.blendDst,blendEquation:this.blendEquation,blending:this.blending,blendSrc:this.blendSrc,colorWrite:this.colorWrite,depthFunc:this.depthFunc,depthTest:this.depthTest,depthWrite:this.depthWrite,fog:this.fog,lights:this.lights,precision:this.precision,toneMapped:this.toneMapped,clipping:this.clipping});
this.opacity=b.opacity;this.transparent=b.transparent;this.side=b.side;this.vertexColors=b.vertexColors;this.alphaTest=b.alphaTest;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blending=b.blending;this.blendSrc=b.blendSrc;this.colorWrite=b.colorWrite;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;this.fog=b.fog;this.lights=b.lights;this.toneMapped=b.toneMapped;this.clipping=b.clipping;Ty.H5c(this,a);this.needsUpdate=!0;return this};d.prototype.ta=
function(){return Ty.kQc(this)};d.prototype.dispose=function(){this.userData.WN instanceof Mo&&this.Z$a&&this.userData.WN.za(Lo.ib,this.Z$a);Lw.prototype.dispose.call(this)};d.prototype.onBeforeCompile=function(a,b){this.userData.z$c&&(Ty.Tdc(this),this.userData.z$c=!1);Lw.prototype.onBeforeCompile.call(this,a,b)};d.prototype.Tfb=function(){this.Z$a||(this.Z$a=function(){this.needsUpdate=!0;this.userData.z$c=!0}.bind(this));return this.Z$a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRVcGRhdGVDb2xvck1hcCI6IlRmYiJ9fX0g");var Dz=/*#__PURE__*/function(){function d(b){var c=b.material,e=G(b,{uniforms:c.uniforms,vertexshader:a.wEc(c),fragmentshader:a.vEc(c),defines:c.defines},!0);Xy.call(this,e);this.mh=b.object;b=null!=this.mh.geometry.getAttribute("position")?this.mh.geometry.getAttribute("position").count:0;null!=this.mh.geometry.getAttribute("cgpointindex")?e=this.mh.geometry.getAttribute("cgpointindex"):(e=new Float32Array(1*b),e=new zq(e,1),this.mh.geometry.setAttribute("cgpointindex",e));for(var f=0;f<b;f++)e.setX(f,this.n4b(f));
this.type="DefaultPointCloudPickingMaterial";this.transparent=!1;this.lights=c.lights;this.side=c.side;this.blending=yu}var a=Uy;D(d,Xy);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultPointCloudPickingMaterial");d.prototype.n4b=function(b){return b/this.mh.geometry.getAttribute("position").count};d.prototype.ncb=function(b){return Math.round(b*this.mh.geometry.getAttribute("position").count)};d.Cfd=100;d.prototype.cBb=function(){var b=this;return[{pickingmode:a.voc,callback:function(c,e){c=b.ncb(Sy.Okb(c));
e.pointindex=c;var f=b.mh.parent&&b.mh.parent.Pa&&"geotoolkit3d.scene.pointset.PointCloud"===b.mh.parent.Pa();f&&e.point&&(c=b.mh.parent.QXa(c),null!=c&&(c=c.position,e.point.x=c[0],e.point.y=c[1],e.point.z=c[2]))}}]};return d}();var Ez=/*#__PURE__*/function(){function d(b){Cz.call(this,{vertexShader:a.Bhd,fragmentShader:a.Ahd,transparent:!0});this.type="PointCloudMaterial";d.prototype.setOptions.call(this,b)}var a=Bz;D(d,Cz);L(d,"geotoolkit3d.scene.pointset.PointCloudMaterial");d.prototype.setOptions=function(b){Cz.prototype.setOptions.call(this,b);a.J3d(this,b);return this};d.prototype.ta=function(){return xb(a.IId(this),Cz.prototype.ta.call(this))};return d}();oz.lw(Ez.Pa(),Dz);var Fz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.Texture");d.dEc=function(a,b,c){a=(new Cx).load("data:image/png;base64,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",a,
b,c);a.name="ball";return a};d.itd=d.dEc();d.G8c=function(a,b,c){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDktMDRUMjM6NDY6MzUtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDktMDRUMjM6NDY6MzUtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmRkZGEwNzYwLTY2ODMtNDQ5Yy1hMjc5LTdmZTFjMTAwYzE2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmQ3N2I5NWVlLWE5NDktNDI0Yy1hZjY2LTMwZDJhMmEzOGNlMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk1MTE4ZWFlLThlOTItNDY3NC04MWUyLTBjNWU0OGRhMTgxYiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTUxMThlYWUtOGU5Mi00Njc0LTgxZTItMGM1ZTQ4ZGExODFiIiBzdEV2dDp3aGVuPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZGRkYTA3NjAtNjY4My00NDljLWEyNzktN2ZlMWMxMDBjMTZkIiBzdEV2dDp3aGVuPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o6NP6AAAPRklEQVR4nO3df6zfVX3H8WfbO2qh0FJuXRAphV7J/pDfkoVqJQJDurmFDV10mOmgWTZRR8bGxGwzaiBsM8pQGUkFFzZMFMeW6EBQMOiAzVTGD/+ZllKqrhlcSgsthaXl7o/37VpKy/35/bzP+ZznI/nm9o/77Xnf7+ec1/d8P9/P+Zw5Y2NjSGrT3OwCJOUxAKSGGQBSwwwAqWEGgNQwA0BqmAEgNcwAkBpmAEgNMwCkhhkAUsMMAKlhBoDUMANAapgB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",
a,b,c);a.name="soliddot";return a};d.cjc=d.G8c();d.BFc=function(a,b,c){a=(new Cx).load("data:image/png;base64,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",
a,b,c);a.name="circle";return a};d.q2b=d.BFc();d.N8c=function(a,b,c){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wQYEi8ITPQaqwAAAGVJREFUeNrt0AEBADAIAyB9/4rLoj0uRKCTTB326jgBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEPCDBbsABBZDMwGRAAAAAElFTkSuQmCC",a,b,c);a.name="square";return a};d.$0a=d.N8c();d.FHc=function(a,b,c){a=(new Cx).load("data:image/png;base64,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",
a,b,c);a.name="cube";return a};d.rha=d.FHc();d.L8c=function(a,b,c){a=(new Cx).load("data:image/png;base64,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",
a,b,c);a.name="sphere";return a};d.wsa=d.L8c();d.c$c=function(a,b,c){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAJ18AACdfAR2GumoAAAmWaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTAtMTBUMTI6MTA6NTQtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTAtMTBUMTY6MzY6MzYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTEwLTEwVDE2OjM2OjM2LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTJmYWRkYy1mZmMyLTQ4NWMtODIyOS03Yzk3YzY1YmEzMTMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyY2YwYzBiNi0yNTFjLWU5NDItYTA5YS02ZmYyZjcxOTY4NTUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4M2QzOGVkOS03NmNjLTQ0NTItYWMwZC01MGJiODUwMGI3ODEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODNkMzhlZDktNzZjYy00NDUyLWFjMGQtNTBiYjg1MDBiNzgxIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjEwOjU0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NmE3NTNiYjMtZDUwNi00MzNiLTk5NjktMjNlODYyODM2ZjgwIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjExOjE1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZWFjYTVlNDctNzBmNC00OWNlLTlmZmQtZjNiMGU1MDhmODM4IiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjExOjE1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTEyZmFkZGMtZmZjMi00ODVjLTgyMjktN2M5N2M2NWJhMzEzIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDE2OjM2OjM2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NmE3NTNiYjMtZDUwNi00MzNiLTk5NjktMjNlODYyODM2ZjgwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgzZDM4ZWQ5LTc2Y2MtNDQ1Mi1hYzBkLTUwYmI4NTAwYjc4MSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgzZDM4ZWQ5LTc2Y2MtNDQ1Mi1hYzBkLTUwYmI4NTAwYjc4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkFrnbcAAA4lSURBVHhe7d1rt6/lFMfxneGZ4VX02Kvw1LsoSQcUUVHRgRJtGkSlKEKElKKGkeRQVE6hqK3SQTopISTb/K65tnZ777XW/3AfrsP3M8Yca64e7tb6rf993dc1r8P27t27S1KfXrP5VVKHDACpYwaA1DEDQOqYASB1zACQOmYASB0zAKSOGQBSxwwAqWMGgNQxA0DqmAEgdcwAkDpmAEgdMwCkjhkAUscMAKljBoDUMQNA6pgBIHXMAJA6ZgBIHTMApI4ZAFLHDACpYwaA1DEDQOqYASB1zACQOmYASB0zAKSOGQBSxwwAqWOH7d27d7PdtWvPnj2XxJc35neje23U67NVZ/x/P50bDj/88Ddt9gc5MAAOjy+/jHrdxn+QVLN/Rb0hAuD+/PZgBz4C7Ik6PVtJldsdteUvPw61BvDxqDuzlVSpx6LOyXZrhwqAl6OOiHpp4ztJNXp31N+y3dpWbwHuiTo3W0mV+UHUl7Ld3navAfn48NtsJVWCT/Bvi3pldX8b2wUAK4hHRv134ztJNeBV/i+y3dl2AYDboz6RraTCPR11WraL2SkA8N6oh7KVVLBTop7JdjGLBAAriUdnK6lQd0Vdnu3iFgkA3BR1ZbaSCsOC3/FRS6/XLRoAOCHqyWwlFYQ/zndku5xlAuDZKFJGUjn+GnVytstbJgDwlahvZiupAGdGPZHt8pYNABwT9Xy2kmZ0X9SF2a5mlQB4POqkbCXN6O1Ra53ZWSUA8Jmo72UraQbXRt2c7epWDQBeOxwV9eLGd5Km9M+oE7Ndz6oBgAeizshW0oQ+HPVgtutZJwBwQdTd2UqaAL/4H8p2fesGgMNDpGnx0Z9HgEGsGwBgiCgfSSSNi0U/Fv8GM0QA4Kwo3klKGgefsnntN6ihAsDhIdK42PAz+B/ZoQIAP4q6KFtJA2KrL1t+BzdkAODUqD9mK2kgHPbh0M/ghg6AF6IcHiINh2O+o83iGDoA8O2oL2QraQ2sqXEEf6EJv6sYIwDg8BBpfYz4YtTXaMYKAKaTDv7KQuoIA3hYUxvVWAGAL0ddn62kJb0v6qlsxzNmAIDhIaOsXkoN42IPLvgY3dgB8GjUe7KVtAAW/Ljai3M2oxs7AHBx1G3ZStoBl3pyueckpggAEo1twoOdYJIaxSU8XOs9mSkCAPdHvT9bSVvgRu7Hsp3GVAGAj0b9LFtJB+CP5O5spzNlAPwniuEhfJX0amye41TtpKYMAPB64/xsJW26YbMmN3UAgGONv89W6h5/9fnrP4s5AoC3AbwVGO2Ag1QR1sZ4/p/FHAEA3nN+OlupW8zOYOV/NnMFANghyE5BqVfvivpHtvOYMwAcHqKecbXeV7Odz5wBAFY+v5it1A1ehbPff3ZzBwCYG8D8AKkXDM/9dbbzKiEA+OV/R7ZS8zjjX8ydmiUEAK6KujFbqWlM+Xku2/mVEgBgQZCFQalVzPdjzl8xSgqAR6KYfy61iI1vTPgt6vaskgIAn4r6YbZSU5jtz4z/opQWAA4PUYt45i9yNF5pAYDfRY1yD5o0E1b9/5xtWUoMAHBkmKPDUu1431/spbmlBgA7pXgUcHiIaseOv2J/jksNANwddUG2UpXY68+e/2KVHABgkOhsZ6WlNXDKj9N+RSs9AF6MenOUw0NUm3OjOO9ftNIDAN+PmuSaJGkgD0ZVMfuyhgCAw0NUkxOjqtjLUksAPB/FRaNS6W6Oujbb8tUSAOCq8auzlYr0UhTzLapRUwCAd6rPZCsVh9fW92Vbh9oC4Mmo2WaoS9vgTr+zs61HbQGAz0d9J1upGNzqy+2+VakxAPCWqOr+sdUs7rngXv/q1BoAbLA4JVtpVi9HsTZV5Wa1WgMAnLD6UbbSbNikVu3J1ZoDgNFKbBOe/EplaRNvpE7Ltk41BwDujapu5VXN4Je/6tfStQcAzov6VbbSZPjYX/0ZlRYCgN1XR0SxGCNNgQU/Fv6q/5lrIQDAvPXd2Uqj45Ufr/6q10oA4PSoPdlKo/lrVPGDPhbVUgA4PERTYGL1n7KtX0sBAOavfSZbaXAc9Lkw2za0FgBgT/bj2UqD4qgvi87NaDEAuIXl2GylwTDkg2EfTWkxAMD/LEYyS0NgvBdjvprTagCAm1ifzVZaCwM+GfTZnJYDgLvYmkxtTYqTp4z4blLLAYAropp7btOkeOfPJR9Naj0A4PAQrYrXyk2vJfUQAA9FvS9baWFc6Ml+/6b1EAD4RNTt2UoL+XgUV3s3rZcA4NSWw0O0qCei2PLbvF4CAL+J+mC20rZOjuLQT/N6CgDwOueebKVDuiPqymzb11sA/DvqyCiHh+hQmDPJBrJuTpT2FgD4aRQLPNKBLo9iuEw3egwAMDzkD9lKGzhEdmq2/eg1AP4exQYhh4donzOinsq2H70GAL4b9dls1Tne93PRTHd6DgCwz7uZ8U5aGTv+2PnXnd4D4C9Rx2WrTn0lij3/Xeo9APD1qK9lq85wSKzrI+MGQOJTAJ8G1Jdzoh7Ltk8GQGLv9zuzVSfuj+r+MhkD4BWfi+LNgPpwQlT3h8MMgFewJ4C9AewRUNtu2KzuGQCvxu7Aqu971474q89ffwUD4GDc/PKTbNUgnvt5/lcwAA7GSUFODHJyUG1hxZ+Vf20yAA6NraEfylYN4do4B8TuxwDYGtODmCKkNnCfP/f6az8GwNZ4BGCOoMND6rdvwq+nPw9gAGyPScJMFFbdOOn3i2y1PwNgZ9wp0OS9cJ3gjD9n/XUIBsDOWDQ6OsqPj3Viyg/TfnQIBsBiuF+QewZVF+b7MedPWzAAFsdhIQ4NqQ58YmPCL5N+tQUDYHHPRvEDpTow258Z/9qGAbCca6KuzVYF41YfbvfRDgyA5R0b5aJS2bjXz8e1BRgAy3s86qRsVaD7ojjQpQUYAKu5LOqWbFWYt0e9lK12YgCshhXmo6L+sfGdSsGAV17ZakEGwOr2RHHFmMpAGDvoY0kGwHo+FnVntpoZV7//MVstygBYz77hIT5zzouzGudnq2UYAOv7VdR52WomXO7xz2y1DANgGGdH3ZutJsain5uzVmQADINJszwKuO98Wjx68dpPKzIAhvPjqE9mq4mw4YeNP1qRATAszp4/nK1GxlZftvxqDQbAsBgewu1CGh+HfTj0ozUYAMO7KYqjqBoPx3z9Nx6AATAOXks9ma0Gxt4LrnN3RNsADIBxPBPFGGoN75Kou7PVugyA8VwddV22GgjB6uWtAzIAxnVM1PPZagD88hMCGogBMC4uo+Q+Oq2Piz34+K8BGQDjuzTq1my1Ihb8WFPxmraBGQDj44eXOwZf3PhOq+BSTy731MAMgGk8EPX+bLUkNlf5GDUSA2A6F0T5+mp550SxlqIRGADT4Ypqh4cs5/6o3dlqDAbAtFjJdnLN4pjxx1FrjcQAmN5ZUR5h3dn1UTdkq7EYANNjdBVvBRwesjX+jRz0MQEDYB4/jPpUtjoEHpMY9KmRGQDzOSXqkWy1H0Z7M+JbEzAA5vNC1NHZaj/vivLGpYkYAPO6MeqqbBW+F/XVbDUFA2B+74h6KtuusU/CGQoTMwDm93SUK967dl0U9etsNRUDoAwcdvlWtl3iE9AZ2WpKBkA53hrV65Rbxqk/l62mZACU49Go92TblbuiLs9WUzMAynJxVE/n3tkNeezmV83AACgLw0M4MdjLTbf85f9ptpqDAVCe30d9INum8czPs79mZACU6SNRP8+2Waz6u/9hZgZAmdgUc8Tm1xbxvp/3/pqZAVAuPgHwSaBF7PhrNdyqYgCUjbUA1gRawl5/9vyrAAZA2fYND2nlIkxO+XHaT4UwAMp3WxT7A1rAOX/O+6sQBkAd2CHITsGaMeHHgaiFMQDqwBkBzgrU7MSoXjY4VcMAqAenBTk1WCMGn1ybrUpiANSFuQHMD6gJc/0ZeqICGQB1Yedcbb9M3OzDDT8qkAFQH2YI8pG6Btzpx91+KpQBUCcWBJkqXDpu9eV2XxXKAKgT79K5V6BkzDWoddGyGwZAvbhZiBuGSvRyFPv9W9nB2CwDoF5M0WGbcInv1i+J4iZkFc4AqBu3DHPbcEmeiTotW5XOAKgf22tL+mvLLz8hoAoYAPV7KYo5gjx3z40g4uO/KmEAtOHuqAuynQ0LfsdElRBEWpAB0A5m7D2Q7SyujLo9W9XCAGjHi1FzDQ/htOLJ2aomBkBbbo26NNtJnRn1RLaqiQHQHrbfsgd/KryKvDBb1cYAaM/zUSzGTYUjyryJUIUMgDZdF3V1tqNiyMfN2apGBkC72Iv/bLajYAsyY75UMQOgXU9GnZDtKNiByKBPVcwAaBvv5m/KdlAcR2bEtypnALTvLVFDD+Xgcg8u+VDlDID2PRw15DXcLPpxvZcaYAD04ZNRP852Lbzu47WfGmEA9IHhIZwYZET3Otjww8YfNcIA6Me9UWdnuxK2+rLlVw0xAPpyXtQ92S6Nwz4c+lFDDIC+8Ax/RNSyZ/bviOKVohpjAPTnzqiPZbsQ1g+Oj3LCb4MMgD6dHrUn2x1dHnVXtmqNAdAnNvEcFbXTX/XnoobcQ6DCGAD9uiXqsmy3xJgxLiRVowyAvp0U9Xi2B+FtwUXZqlUGQN/4iH9ctq/Co8GxUf/Z+E7NMgD0jahrsv0/LvXkck81zgAQeM23b3gIJweZK6gOGAAC23zfme2uc6KmHCqqGRkA2ueKKE4N7t74Tl04bO9eN3hJvfITgNQxA0DqmAEgdcwAkDpmAEgdMwCkjhkAUscMAKljBoDUMQNA6pgBIHXMAJA6ZgBIHTMApI4ZAFLHDACpYwaA1DEDQOqYASB1zACQOmYASN3atet/m2RuaReHGYUAAAAASUVORK5CYII=",
a,b,c);a.name="triangle";return a};d.WJb=d.c$c();return d}(),2,"eyJiYWxsTG9hZGVyIjoiZEVjIiwiYmFsbCI6Iml0ZCIsInNvbGlkZG90TG9hZGVyIjoiRzhjIiwic29saWRkb3QiOiJjamMiLCJjaXJjbGVMb2FkZXIiOiJCRmMiLCJjaXJjbGUiOiJxMmIiLCJzcXVhcmVMb2FkZXIiOiJOOGMiLCJzcXVhcmUiOiIkMGEiLCJjdWJlTG9hZGVyIjoiRkhjIiwiY3ViZSI6InJoYSIsInNwaGVyZUxvYWRlciI6Ikw4YyIsInNwaGVyZSI6IndzYSIsInRyaWFuZ2xlTG9hZGVyIjoiYyRjIiwidHJpYW5nbGUiOiJXSmIifSAg");var Gz=/*#__PURE__*/ta(/*#__PURE__*/{wsa:Fz.wsa,$0a:Fz.$0a,rha:Fz.rha},2,"eyJzcGhlcmUiOiJ3c2EiLCJzcXVhcmUiOiIkMGEiLCJjdWJlIjoicmhhIn0g"),Hz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{name:"default",colorprovider:"red",symbol:Gz.wsa,symbolminsize:2,symbolmaxsize:7,alphatest:.8});this.name=a.name;this.HM=-Number.MAX_VALUE;this.tC=Number.MAX_VALUE;var b=null!=a.data.xyz?a.data.xyz.length/3:a.data.x.length;var c=new Ws(new Float32Array(6*b),6),e=new Xs(c,3,0),f=new Xs(c,1,3),g=new Xs(c,1,4);c=new Xs(c,1,5);if(null!=a.data.xyz){var h=a.data.xyz;for(var k=0;k<b;k++){var l=null!=a.data.visible?
!0===a.data.visible[k]?1:0:1;e.setXYZW(k,h[3*k],h[3*k+1],h[3*k+2],l)}}else{b=a.data.x;h=a.data.y;k=a.data.z;for(var m=0;m<b.length;m++)l=null!=a.data.visible?!0===a.data.visible[m]?1:0:1,e.setXYZW(m,b[m],h[m],k[m],l)}null==a.data.sizes?this.dic([1]):this.dic(a.data.sizes,a.data.sizemin,a.data.sizemax);this.Cb=a.data.values;this.wI=a.colorprovider;l=new Ez(a);b=new Aq;b.setAttribute("position",e);b.setAttribute("cgpointVisible",f);b.setAttribute("cgpointSize",g);b.setAttribute(Ty.Km,c);this.WW=new iv(b,
l);this.krd=function(){if(null!=this.Cb){for(var n=this.WW.geometry.getAttribute(Ty.Km),p=0;p<this.WW.geometry.getAttribute("position").count;p++)n.setX(p,this.Cb[p]);this.WW.geometry.getAttribute(Ty.Km).data.needsUpdate=!0}}.bind(this);this.add(this.WW);this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.pointset.PointCloud");d.prototype.dic=function(a,b,c){Array.isArray(a)||(a=[a]);if(null==b||null==c){b=Number.MAX_VALUE;c=-Number.MAX_VALUE;var e;for(e=0;e<a.length;e++)isNaN(a[e])||(b=Math.min(b,
a[e]),c=Math.max(c,a[e]))}this.HM=c;this.tC=b;this.Wc=Wy.rca(a,0,1,this.tC,this.HM)};d.Symbol=Gz;d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);var b=!1;null!=a.data&&null!=a.data.values&&(b=!0,this.Cb=a.data.values);var c=G(a,{symbolminsize:this.CN,symbolmaxsize:this.zQ}),e=this.CN!==c.symbolminsize||this.zQ!==c.symbolmaxsize;null!=a.data&&null!=c.data.sizes&&(this.dic(c.data.sizes,c.data.sizemin,c.data.sizemax),e=!0);this.CN=c.symbolminsize;this.zQ=
c.symbolmaxsize;if(e){e=Wy.rca(this.Wc,this.CN,this.zQ);var f=this.WW.geometry;f=f.getAttribute("cgpointSize");for(var g=0;g<f.count;g++)f.setX(g,e[g%e.length]);f.data.needsUpdate=!0}b&&this.krd();if(null!=a.data&&null!=a.data.visible)if(b=this.WW.geometry.getAttribute("cgpointVisible"),e=0,Array.isArray(a.data.visible))for(;e<b.count&&e<a.data.visible.length;e++)b.setX(e,a.data.visible[e]);else for(;e<b.count;e++)b.setX(e,a.data.visible);this.WW.material.setOptions(c);this.gg();return this};d.prototype.ta=
function(){var a=this.WW.material.ta();a.data={};a.data.values=this.Cb;a.data.sizes=this.Wc;a.data.sizemin=this.tC;a.data.sizemax=this.HM;a.data.visible=[];a.symbolminsize=this.CN;a.symbolmaxsize=this.zQ;a.colorprovider=this.wI;for(var b=this.WW.geometry.getAttribute("cgpointVisible"),c=0;c<b.count;c++)a.data.visible[c]=1===b.getX(c);return xb(a,fz.prototype.ta.call(this))};d.prototype.EIb=function(a,b){if(!this.IR(a))return this;var c=this.WW.geometry;null!=b.visible&&(c.getAttribute("cgpointVisible").setX(a,
b.visible?1:0),c.getAttribute("cgpointVisible").data.needsUpdate=!0);null!=b.size&&(this.Wc[a]=(b.size-this.tC)/(this.HM-this.tC),c.getAttribute("cgpointSize").setX(a,this.CN+(this.zQ-this.CN)*this.Wc[a]),c.getAttribute("cgpointSize").data.needsUpdate=!0);null!=b.value&&null!=this.Cb&&(this.Cb[a]=b.value,c.getAttribute(Ty.Km).setX(a,this.Cb[a]),c.getAttribute(Ty.Km).data.needsUpdate=!0);return this};d.prototype.QXa=function(a){if(!this.IR(a))return null;var b=this.WW.geometry,c=b.getAttribute("position").array,
e=6*a;return{visible:1===b.getAttribute("cgpointVisible").getX(a),size:(b.getAttribute("cgpointSize").getX(a)-this.CN)/(this.zQ-this.CN)*(this.HM-this.tC)+this.tC,value:this.Cb?this.Cb[a]:null,position:[c[e],c[e+1],c[e+2]]}};d.prototype.O8b=function(a,b){a=a||"default";if(this.name!==a||!this.IR(b))return null;a=this.WW.geometry;var c=a.getAttribute("position").array;a=c[6*b];var e=c[6*b+1],f=c[6*b+2],g=c[6*b+3],h=c[6*b+4];b=c[6*b+5];var k=new Ws(new Float32Array(6),6);c=new Xs(k,3,0);var l=new Xs(k,
1,3),m=new Xs(k,1,4);k=new Xs(k,1,5);c.setXYZ(0,a,e,f);l.setX(0,g);m.setX(0,h);k.setX(0,b);return{position:c,cgpointVisible:l,cgpointSize:m,cgcolormapValue:k}};d.prototype.IR=function(a){var b=this.WW.geometry.getAttribute("position").count;return Number.isFinite(a)&&0<=a&&a<b};d.prototype.P8b=function(){return this.WW};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQb2ludE9wdGlvbnMiOiJFSWIiLCJnZXRQb2ludE9wdGlvbnMiOiJRWGEiLCJnZXRQb2ludEJ5SW5kZXgiOiJPOGIiLCJpc1ZhbGlkSW5kZXgiOiJJUiIsImdldFBvaW50Q2xvdWQiOiJQOGIifX19");var Iz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.data.loader.vtk.VTKFactory");d.prototype.create=function(a,b){var c=[],e=a.data;null!=e.index&&c.push(this.Goa(a,b));(null!=e.pointindex||null==e.index&&null==e.lineindex)&&c.push(this.tHc(a,b));null!=e.lineindex&&Array.prototype.push.apply(c,this.bcb(a,b));return c};d.prototype.Goa=function(a,b){var c=a.data;a=new Aq;a.setAttribute("position",new zq(new Float32Array(c.position),3));a.setIndex(new zq(new Uint32Array(c.index),1));null==b.mesh&&(b.mesh=
{});!0!==b.mesh.zup&&(a.applyMatrix4((new Xt).makeRotationZ(Math.PI/2)),a.applyMatrix4((new Xt).makeRotationY(Math.PI/2)));null!=c.colors&&a.setAttribute("colors",new zq(new Float32Array(c.colors.values),3));null!=c.normals?a.setAttribute("normal",new zq(new Float32Array(c.normals.values),3)):a.computeVertexNormals();c=null!=b.mesh.material?b.mesh.material:new gu({color:"lightgrey"});a=new Zt(a,c);null!=b.mesh.position&&a.position.copy(b.mesh.position);null!=b.scale&&a.scale.multiplyVectors(b.scale,
a.scale);null!=b.mesh.scale&&a.scale.multiplyVectors(b.mesh.scale,a.scale);return a};d.prototype.bcb=function(a,b){var c=a.data,e=new zq(new Float32Array(c.position),3);return a.data.lineindex.map(function(f,g){var h=new Aq;h.setAttribute("position",e);h.setIndex(new zq(new Uint32Array(f),1));null==b.line&&(b.line={});f=null!=b.line.material?b.line.material.clone():Az.JIa(new Y("lightgrey"));f=new rt(h,f);!0!==b.line.zup&&0===g&&(h.applyMatrix4((new Xt).makeRotationZ(Math.PI/2)),h.applyMatrix4((new Xt).makeRotationY(Math.PI/
2)));null!=b.line.position&&f.position.copy(b.line.position);null!=b.scale&&f.scale.multiplyVectors(b.scale,f.scale);null!=b.line.scale&&f.scale.multiplyVectors(b.line.scale,f.scale);return f})};d.prototype.tHc=function(a,b){var c=a.data;a=Object.keys(c).filter(function(l){return l="position"!==l&&"scalar"===c[l].type&&0<c[l].values.length});var e=a.map(function(l){return c[l]});Object.keys(c).filter(function(l){return"field"===c[l].type}).forEach(function(l){c[l].arrays.forEach(function(m){1===m.stride&&
0<m.values.length&&e.push(m)})});null==b.pointcloud&&(b.pointcloud={});a=e.filter(function(l){return null!=b.pointcloud.attributes&&l.name===b.pointcloud.attributes.sizes});var f=e.filter(function(l){return null!=b.pointcloud.attributes&&l.name===b.pointcloud.attributes.values});0===a.length&&0===f.length&&0!==e.length&&(1<e.length?(0<e[0].values.length&&(a=[e[0]]),0<e[1].values.length&&(f=[e[1]])):1===e.length&&0<e[0].values.length&&(f=[e[0]]));var g=null;if(null!=c.pointindex){g=[];for(var h=0;h<
c.position.length/3;h++)g[h]=!1;for(h=0;h<c.pointindex.length;h++)g[c.pointindex[h]]=!0}h="red";if(0<f.length){var k=W.Ol(f);k[0]!==Number.POSITIVE_INFINITY&&k[1]!==Number.NEGATIVE_INFINITY&&(h=(new Po).gl(Ko.nnb,k[0],k[1]))}a=new Hz({data:{xyz:new Float32Array(c.position),sizes:0<a.length?a[0].values:null,values:0<f.length?f[0].values:null,visible:g},symbolmaxsize:6,colorprovider:null!=b.pointcloud.colorprovider?b.pointcloud.colorprovider:h});!0!==b.pointcloud.zup&&(a.P8b().geometry.applyMatrix4((new Xt).makeRotationZ(Math.PI/
2)),a.P8b().geometry.applyMatrix4((new Xt).makeRotationY(Math.PI/2)));null!=b.pointcloud.position&&a.position.copy(b.pointcloud.position);null!=b.scale&&a.scale.multiplyVectors(b.scale,a.scale);null!=b.pointcloud.scale&&a.scale.multiplyVectors(b.pointcloud.scale,a.scale);return a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVNZXNoIjoiR29hIiwiY3JlYXRlTGluZXMiOiJiY2IiLCJjcmVhdGVQb2ludGNsb3VkIjoidEhjIn19fSAg");var Jz=/*#__PURE__*/function(){function d(){wz.call(this)}L(d,"geotoolkit3d.data.loader.vtk.VTKLoader");D(d,"geotoolkit3d.data.loader.AbstractLoader");d.prototype.load=function(a,b,c){var e=this,f=new as(e.Swc);f.setResponseType("arraybuffer");f.load(a,function(g){e.parse(new up({stream:new tp({buffer:g,stride:1})}),b,c)},function(){},c)};d.prototype.parse=function(a,b,c){var e=new Cg(function(f,g){zz.vUc(a).then(function(h){h||g("Warning: Only ASCII format is supported");zz.parse(a).then(function(k){f(k)},g)},
g)});e.then(b,c);return e};return d}();var Kz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e,f,g,h){for(var k=[],l=[],m=Number.NaN,n=[-g,-g+1,-1,1,g-1,g],p=[[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0]],q=0,r=0;r<h;r++)for(var t=0;t<g;t++){var u=t+r*g,w=e[u];if(w!==m||isNaN(w)||w===f)m=w;else{q++;k.push(u);l.push(w,[r,t]);for(e[u]=Number.NaN;0<k.length;){u=k[0];k.splice(0,1);for(var y=Math.floor(u/g),z=u%g,x=0;x<n.length;x++){var C=y+p[x][0],A=z+p[x][1];0<=C&&C<h&&0<=A&&A<g&&e[u+n[x]]===w&&(k.push(u+n[x]),l.push([C,A]),e[u+n[x]]=Number.NaN)}}a(e,l,g,h,f);l=[]}}return q}function a(e,f,g,h,k){if(!(2>f.length)){var l=f[0];f.splice(0,1);f.sort(b);for(var m=[[-1,0],[0,-1],[0,1],[1,0]],n=0;n<f.length;n++){for(var p=f[n][0],q=f[n][1],r=0,t=0,u=0;u<m.length;u++){var w=p+m[u][0],y=q+m[u][1];0<=w&&w<h&&0<=y&&y<g&&(w=e[y+w*g],isNaN(w)||null==w||w===k||(r+=w,t++))}r=0<t?r/t:l;r+=Math.sqrt(1+n)*W.Tb;e[q+p*g]=r}}}function b(e,f){return e[0]<f[0]?-1:e[0]>f[0]?1:e[1]-f[1]}function c(){}L(c,"geotoolkit3d.util.surface.BasicTriangulator");c.oM=function(e){var f=G(e.data,{xmin:0,xstep:1,
ymin:0,ystep:1,normals:!0}),g=e.bufferpadding||0,h=e.surfacesmooth,k=f.width,l=f.height,m=k*l,n=f.xmin,p=Number.NEGATIVE_INFINITY,q=f.ymin,r=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(3>k||3>l)throw Error("Unsupported operation: cannot triangulate a grid with less than 3 rows or less than 2 columns");var w;g+=3;!0===f.normals&&(g+=3);if(!0===e.interleaved){var y=new Float32Array(m*g);y=new Ws(y,g);e=new Xs(y,3,0);!0===f.normals&&(w=new Xs(y,3,3))}else e=new zq(new Float32Array(3*
m),3),!0===f.normals&&(w=new zq(new Float32Array(3*m),3));var z=new zq(new Uint32Array((l-1)*(k-1)*6),1);h&&null!=f.elevation&&d(f.elevation,f.nullvalue,k,l);h=!1;if(f.elevation&&Array.isArray(f.elevation)){h=f.xvalues&&Array.isArray(f.xvalues)&&f.xvalues.length===f.elevation.length;var x=f.yvalues&&Array.isArray(f.yvalues)&&f.yvalues.length===f.elevation.length;h=h&&x}var C,A;for(x=0;x<l;x++)for(C=0;C<k;C++){if(h){var v=f.xvalues[C+x*k];var B=f.yvalues[C+x*k]}else v=f.xmin+C*f.xstep,B=f.ymin+x*f.ystep;
var E=x*k+C;if(null!=f.elevation){var H=f.elevation[C+x*k];H=(A=isNaN(H)||H===f.nullvalue)?Number.NaN:H;A||(n=Math.min(v,n),p=Math.max(v,p),q=Math.min(B,q),r=Math.max(B,r),t=Math.min(H,t),u=Math.max(H,u))}else H=0;e.setXYZ(E,v,B,H);x<l-1&&C<k-1&&(E=6*(x*(k-1)+C),v=C+k*x,B=C+k*(x+1),A=C+1+k*(x+1),H=C+1+k*x,z.setXYZ(E,v,B,H),z.setXYZ(E+3,B,A,H))}h&&(z=c.XJc(z,e,f.nullvalue));!0===f.normals&&c.Kyb(z,e,w,f.nullvalue);return{triangles:{position:e,normal:w,index:z,vertexcount:m},xmin:n,xmax:p,ymin:q,ymax:r,
zmin:t,zmax:u,bufferpadding:g,bufferused:!0===f.normals?6:3,buffer:y}};c.Kyb=function(e,f,g,h){for(var k=0;k<e.count;k+=3){var l=[],m=e.getX(k),n=e.getY(k),p=e.getZ(k);Wy.xAa(f,m,n,p,l,h);if(!isNaN(l[0])&&!isNaN(l[1])&&!isNaN(l[2])){var q=g.getX(m);var r=g.getY(m);var t=g.getZ(m);g.setXYZ(m,q+l[0],r+l[1],t+l[2]);q=g.getX(n);r=g.getY(n);t=g.getZ(n);g.setXYZ(n,q+l[0],r+l[1],t+l[2]);q=g.getX(p);r=g.getY(p);t=g.getZ(p);g.setXYZ(p,q+l[0],r+l[1],t+l[2])}}};c.XJc=function(e,f,g){for(var h=[],k=0;k<e.count;k+=
3){var l=e.getX(k),m=e.getY(k),n=e.getZ(k),p=[f.getX(l),f.getY(l),f.getZ(l)],q=[f.getX(m),f.getY(m),f.getZ(m)],r=[f.getX(n),f.getY(n),f.getZ(n)];(null==g||p[2]!==g&&q[2]!==g&&r[2]!==g)&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(q[0])&&isFinite(q[1])&&isFinite(q[2])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(r[2])&&h.push(l,m,n)}e=new zq(new Uint32Array(h.length),1);e.set(h,0);return e};return c}(),2,"eyJ0cmlhbmd1bGF0ZSI6Im9NIiwiY3JlYXRlTm9ybWFscyI6Ikt5YiIsImZpbHRlckluZGljZXMiOiJYSmMifSAg");var Lz=/*#__PURE__*/function(){function d(a){Aq.call(this);this.type="SurfaceGeometry";a=G(a,{});var b=a.data.surface.getAttributes(),c=b.position;this.lA=b.nullvalue;this.setAttribute("position",c);this.setIndex(b.index);null!=b.normal?this.setAttribute("normal",b.normal):this.computeVertexNormals(b.normal);b.values&&(b.values instanceof zq||b.values instanceof Xs?this.setAttribute(Ty.Km,b.values):b.values instanceof Float32Array?this.setAttribute(Ty.Km,new zq(b.values,1)):this.setAttribute(Ty.Km,new zq(new Float32Array(b.values),
1)));null!=b.xmin&&b.xmax&&null!=b.ymin&&b.ymax&&null!=b.zmin&&b.zmax?(c=new Hp(b.xmin,b.ymin,b.zmin),b=new Hp(b.xmax,b.ymax,b.zmax),this.boundingBox=new uq(c,b)):this.computeBoundingBox();this.setOptions(a)}D(d,Aq);L(d,"geotoolkit3d.scene.surface.SurfaceGeometry");d.prototype.setOptions=function(a){if(null==a.data)return this;(Array.isArray(a.data.values)||a.data.values instanceof Float32Array)&&this.Gkc(a.data.values);return this};d.prototype.ta=function(){var a=this.getAttribute(Ty.Km);if(null==
a)return{};for(var b=new Float32Array(a.count),c=0;c<a.count;c++)b[c]=a.getX(c);return{data:{values:b}}};d.prototype.computeBoundingBox=function(){for(var a=this.getAttribute("position"),b=new Hp(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=new Hp(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),e=0;e<a.count;e++){b.x=Math.min(a.getX(e),b.x);c.x=Math.max(a.getX(e),c.x);b.y=Math.min(a.getY(e),b.y);c.y=Math.max(a.getY(e),c.y);var f=a.getZ(e);
f===this.lA||isNaN(f)||(b.z=Math.min(f,b.z),c.z=Math.max(f,c.z))}this.boundingBox=new uq(b,c)};d.prototype.computeBoundingSphere=function(){null==this.boundingBox&&this.computeBoundingBox();this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere)};d.prototype.Gkc=function(a){var b=this.getAttribute("position").count;a.length!==b&&rb("Given values array does not match vertices count: "+b+"="+b+", actual="+a.length);var c=this.getAttribute(Ty.Km);null==c&&(c=new zq(new Float32Array(b),
1),this.setAttribute(Ty.Km,c));for(b=0;b<c.count;b++)c.setX(b,a[b]);c.needsUpdate=!0};d.prototype.computeVertexNormals=function(){var a=this.getAttribute("position");if(a){var b=this.getAttribute("normal");void 0===b&&(b=new zq(new Float32Array(a.count*a.itemSize),3),this.setAttribute("normal",b));Kz.Kyb(this.getIndex(),a,b)}};return d}();var Mz=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.shaders.FlatShading");d.oDa="isFlatShadingEnabled";d.kta="smoothShadingBlendingFactor";d.rmb=["","uniform bool "+d.oDa+";","uniform float "+d.kta+";","varying vec3 vertexMVposition;\nvarying float flip_sided;\n"].join("\n");d.Nnc=["","    if("+d.oDa+") {","        vertexMVposition = mvPosition.xyz;\n        flip_sided = 1.0;\n        #ifdef FLIP_SIDED\n            flip_sided = -1.0;\n        #endif\n    }\n"].join("\n");var a="\n#if __VERSION__ >= 300\n",
b="\n#endif\n",c=Jw.lights_lambert_vertex;c=c.replace(/vLightFront/g,"vFlatLightFront");c=c.replace(/vIndirectFront/g,"vFlatIndirectFront");c=c.replace(/vLightBack/g,"vFlatLightBack");c=c.replace(/vIndirectBack/g,"vFlatIndirectBack");c=c.replace(/mvPosition/g,"vertexMVposition");c=c.replace(/transformedNormal/g,"flatTransformedNormal");d.yCa="blendedLightFront";d.t2a="blendedLightBack";d.OCa="blendedIndirectFront";d.T2a="blendedIndirectBack";d.Mnc=[a,"    if("+d.oDa+") {","        vec3 U = dFdx(vertexMVposition);\n        vec3 V = dFdy(vertexMVposition);\n        vec3 flatTransformedNormal = flip_sided * normalize(cross(U,V));\n        vec3 vFlatLightFront;\n        vec3 vFlatIndirectFront;\n        vec3 vFlatLightBack;\n        vec3 vFlatIndirectBack;",
c,"        float smoothScale = "+d.kta+";","        float flatScale = 1. - smoothScale;","        "+d.yCa+" = smoothScale * vLightFront + flatScale * vFlatLightFront;","        "+d.t2a+"  = smoothScale * vLightBack  + flatScale * vFlatLightFront;","        "+d.OCa+" = smoothScale * vIndirectFront + flatScale * vFlatIndirectFront;","        "+d.T2a+"  = smoothScale * vIndirectBack  + flatScale * vFlatIndirectBack;","    }",b].join("\n");return d}();var Nz=/*#__PURE__*/function(){function d(n){n.defines.hasOwnProperty("addedHeightMapShaders")||(n.defines.addedHeightMapShaders=!0,n.uniforms.cgheightmap={type:"tv",value:null},n.uniforms.cgvaluemap={type:"tv",value:null},n.uniforms.cgheightmapSize={type:"v2",value:new gy},n.uniforms.cggridStart={type:"v2",value:new gy(0,0)},n.uniforms.cggridSteps={type:"v2",value:new gy(0,0)},n.uniforms.cgzOrient={type:"f",value:0},n.uniforms.cgvalueMode={type:"i",value:zy.qLb},n.uniforms.useOSMShader={type:"b",value:!1})}function a(n){n.defines.hasOwnProperty("addedSurfaceShaders")||
(n.defines.addedSurfaceShaders=!0,n.uniforms[f]={type:"f",value:-999.25},n.uniforms[c.kta]=new Wx(1),n.uniforms[c.oDa]=new Wx(!1),n.uniforms[g]=new Wx(n.wireframe))}function b(){}var c=Mz,e=Sy,f=Ty.Km+"NullValue",g="wireframeEnabled";L(b,"geotoolkit3d.util.shaders.Surface");b.eqc=["#define LAMBERT",c.rmb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1) {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvarying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\nbool _isnan( float val ) {\n    return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\nvoid main() {\n    #ifdef CG_USE_COLOR_MAP\n        vcgdeadCell = _isnan(cgcolormapValue) || abs( cgcolormapValue - cgcolormapValueNullValue ) < 0.00001 ? 1.0 : 0.0 ;\n    #endif\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    // normalize normal vector\n    objectNormal = normalize(objectNormal);\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>",
c.Nnc,"}"].join("\n");b.dqc=["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;","uniform bool "+g+";",c.rmb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nuniform int useDiffuseAsColor;\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvarying float vcgdeadCell;\nvoid main() {\n    if(vcgdeadCell != 0.0) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",
"    vec3 "+c.yCa+" = vLightFront;","    vec3 "+c.t2a+" = vLightBack;","    vec3 "+c.OCa+" = vIndirectFront;","    vec3 "+c.T2a+" = vIndirectBack;",c.Mnc,"    #ifdef DOUBLE_SIDED","        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? "+c.OCa+" : "+c.T2a+";","    #else","        reflectedLight.indirectDiffuse += "+c.OCa+";","    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED","        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? "+
c.yCa+" : "+c.t2a+";","    #else","        reflectedLight.directDiffuse = "+c.yCa+";","    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>","    if(useDiffuseAsColor == 1 || "+g+") {","        gl_FragColor = diffuseColor;\n    } else {\n        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}"].join("\n");
b.N3d=function(n,p){p&&(a(n),p.hasOwnProperty("wireframe")&&(n.uniforms[g].value=p.wireframe),p.hasOwnProperty("data")&&p.data.hasOwnProperty("nullvalue")&&(n.uniforms[f].value=p.data.nullvalue,n.uniforms[f].needsUpdate=!0),p.hasOwnProperty("smoothshadingfactor")&&(n.uniforms[c.kta].value=p.smoothshadingfactor,n.uniforms[c.oDa].value=1!==n.uniforms[c.kta].value))};b.LId=function(n){a(n);return{data:{nullvalue:n.uniforms[f].value}}};var h="#ifndef HEIGHTMAP_SHADER_UTILS\n   #define HEIGHTMAP_SHADER_UTILS\n   const vec3 cgheightmapTextureOffset = vec3(-1.0, 0.0, 1.0);\n   const vec2 cgheightmapDirection = vec2(2.0,0.0);\n#endif";
h=["#ifndef REGULAR_HEIGHTMAP_FORMULA\n   #define REGULAR_HEIGHTMAP_FORMULA",h,"   vec4 computeRegularHeightValue(sampler2D cgheightmap, vec2 tex_coord, vec2 cgheightmapSize, float cgzOrient,\n       float cgOSMShaderOffset) {\n       float s11 = texture2D(cgheightmap, tex_coord).x * cgzOrient - cgOSMShaderOffset;\n       float s01 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.xy / cgheightmapSize).x * cgzOrient;\n       float s21 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.zy / cgheightmapSize).x * cgzOrient;\n       float s10 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.yx / cgheightmapSize).x * cgzOrient;\n       float s12 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.yz / cgheightmapSize).x * cgzOrient;\n       vec3 va = normalize(vec3(cgheightmapDirection.xy, s21 - s01));\n       vec3 vb = normalize(vec3(cgheightmapDirection.yx, s12 - s10));\n       return vec4(cross(va, vb), s11);\n   }\n#endif"].join("\n");
var k="USE_VALUE_MAP";h=["uniform sampler2D cgheightmap;\nuniform sampler2D cgvaluemap;\nuniform vec2 cgheightmapSize;\nuniform vec2 cggridStart;\nuniform vec2 cggridSteps;\nuniform float cgzOrient;\nuniform int cgvalueMode;\nuniform bool useOSMShader;",h].join("\n");var l=["#ifdef "+k,"vec4 color = texture2D(cgvaluemap, uv);","float "+Ty.Km+" = 0.0;","if (cgvalueMode == "+zy.qLb+") {","\t"+Ty.Km+" = color.x;","} else if (cgvalueMode == "+zy.Rqc+") {","\t"+Ty.Km+" = color.r * 2.0 + color.g / 128.0 + color.b / 32768.0 - 1.0;",
"} else if (cgvalueMode == "+zy.kC+") {","\t"+Ty.Km+" = 1.0 - color.w;","}\n#endif"].join("\n"),m="vec3 alteredPosition = vec3(position);\nfloat cgOSMShaderOffset = useOSMShader ? 0.5 : 0.0;\nvec4 bump = computeRegularHeightValue(cgheightmap, uv, cgheightmapSize, cgzOrient, cgOSMShaderOffset);\nalteredPosition.z += bump.w;\ntransformedNormal = normalMatrix * normalize(-bump.xyz);\n#ifdef USE_SKINNING\n   vec4 mvPosition = modelViewMatrix * skinned;\n#elif defined( USE_MORPHTARGETS )\n   vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#else\n   vec4 mvPosition = modelViewMatrix * vec4( alteredPosition, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;";
b.MCa=b.eqc;b.NMb=b.dqc;b.MCa=e.iu(b.MCa,Ty.qF,h,!1,!0);b.MCa=e.iu(b.MCa,Ty.Knb,l,!1,!1);b.MCa=e.iu(b.MCa,Ty.Dqc,m,!0);b.NMb=e.iu(b.NMb,Ty.qF,"varying vec2 vTextCoord;",!1,!0);b.J5c=function(n,p){if(p&&p.hasOwnProperty("data")){d(n);var q=null;p.data.hasOwnProperty("surface")?(q=p.data.surface.getAttributes().heightmap,null==q&&(n.uniforms.useOSMShader.value=!0)):p.data.hasOwnProperty("texture")&&(q=p.data.texture);null!=q&&q!==n.uniforms.cgheightmap.value&&(n.uniforms.cgheightmap.value=q,n.uniforms.cgheightmapSize.value.set(q.image.width,
q.image.height),n.uniforms.cgheightmap.needsUpdate=!0,n.uniforms.cgheightmapSize.needsUpdate=!0);p.data.hasOwnProperty("xmin")&&(n.uniforms.cggridStart.value.setX(p.data.xmin),n.uniforms.cggridStart.needsUpdate=!0);p.data.hasOwnProperty("ymin")&&(n.uniforms.cggridStart.value.setY(p.data.ymin),n.uniforms.cggridStart.needsUpdate=!0);p.data.hasOwnProperty("xstep")&&(n.uniforms.cggridSteps.value.setX(p.data.xstep),n.uniforms.cggridSteps.needsUpdate=!0);p.data.hasOwnProperty("ystep")&&(n.uniforms.cggridSteps.value.setY(p.data.ystep),
n.uniforms.cggridSteps.needsUpdate=!0);p.data.hasOwnProperty("zsign")&&(n.uniforms.cgzOrient.value=p.data.zsign,n.uniforms.cgzOrient.needsUpdate=!0);p.data.hasOwnProperty("values")&&p.data.values instanceof Bx&&(n.defines[k]=1,n.uniforms.cgvaluemap.value=p.data.values,n.uniforms.cgvaluemap.needsUpdate=!0);p.data.hasOwnProperty("valuemode")&&p.data.valuemode!==n.uniforms.cgvalueMode.value&&(n.uniforms.cgvalueMode.value=p.data.valuemode,n.uniforms.cgvaluemap.needsUpdate=!0)}};b.CId=function(n){d(n);
return{data:{xmin:n.uniforms.cggridStart.value.x,ymin:n.uniforms.cggridStart.value.y,xstep:n.uniforms.cggridSteps.value.x,ystep:n.uniforms.cggridSteps.value.y,zsign:n.uniforms.cgzOrient.value,valuemode:n.uniforms.cgvalueMode.value,values:n.uniforms.cgvaluemap.value}}};return b}();var Oz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{vertexShader:Ty.Xsa,fragmentShader:Ty.$da,uniforms:Yx.clone(Kw.lambert.uniforms),unlit:0});Cz.call(this,a);this.type="MeshColorMapLambertMaterial";this.clipping=this.lights=this.isMeshBasicMaterial=!0;this.setOptions(a)}D(d,Cz);L(d,"geotoolkit3d.scene.MeshColorMapLambertMaterial");d.prototype.setOptions=function(a){a=G(a,{alphaMap:this.alphaMap,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,color:this.color,map:this.map,wireframe:this.wireframe,wireframeLinecap:this.wireframeLinecap,
wireframeLinejoin:this.wireframeLinejoin,emissive:this.emissive,emissiveMap:this.emissiveMap,emissiveintensity:this.emissiveIntensity});this.alphaMap=a.alphaMap;this.aoMap=a.aoMap;this.aoMapIntensity=null!=a.aoMapIntensity?a.aoMapIntensity:1;this.color=new Pq(a.color);this.map=a.map;this.wireframe=null!=a.wireframe?a.wireframe:!1;this.wireframeLinecap=a.wireframeLinecap||"round";this.wireframeLinejoin=a.wireframeLinejoin||"round";this.emissive=a.emissive||new Pq(0);this.emissiveMap=a.emissiveMap;
this.emissiveIntensity=null!=a.emissiveintensity?a.emissiveintensity:1;Ty.M5c(this,a);Cz.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=xb(Cz.prototype.ta.call(this),Ty.MId(this));a.alphaMap=this.alphaMap;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.color=this.color;a.map=this.map;a.wireframe=this.wireframe;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.emissive=this.emissive;a.emissiveMap=this.emissiveMap;a.emissiveintensity=
this.emissiveIntensity;return a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(Oz.Pa(),mz);var Pz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,{});this.type="SurfaceMaterial";b=G(b,{},!0);this.vertexShader=a.eqc;this.fragmentShader=a.dqc;this.polygonOffset=!0;this.polygonOffsetFactor=this.polygonOffsetUnits=.5;this.setOptions(b)}var a=Nz;D(d,Oz);L(d,"geotoolkit3d.scene.surface.SurfaceMaterial");d.Ujd=Ty.Km+"NullValue";d.K8=Oz.K8;d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.N3d(this,b);return this};d.prototype.ta=function(){return xb(a.LId(this),Oz.prototype.ta.call(this))};
return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(Pz.Pa(),mz);var Qz=/*#__PURE__*/function(){function d(a){a=G(a,{interleaved:!1,nullvalue:-999.25,bufferpadding:0});a.trianglestrip&&hb("TriangleStrip is deprecated in GeoToolkit and Three.js");this.gva=a.interleaved;this.Fsc=a.bufferpadding}L(d,"geotoolkit3d.data.surface.AbstractSurfaceData");d.prototype.getAttributes=Fb;d.prototype.wAb=function(){return{geometry:Lz,material:Pz}};return d}();var Rz=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.surface.ContourLineTriangulator ");d.oM=function(a){a=G(a,{applydepth:!0});for(var b=a.data.lines,c=a.applydepth,e=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,m=[],n=[],p=0;p<b.length;p++){var q=b[p],r=q.x.length,t=0;for(q.x[t]===q.x[r-1]&&q.y[t]===q.y[r-1]&&(r=q.x.length-1);t<r;t++)e=Math.min(q.x[t],e),f=Math.max(q.x[t],f),g=Math.min(q.y[t],
g),h=Math.max(q.y[t],h),m.push(q.x[t]),m.push(q.y[t]),c?m.push(q.z):m.push(0),n.push(q.z);k=Math.min(q.z,k);l=Math.max(q.z,l)}try{var u=null!=a.triangulator?new Uint32Array(a.triangulator(m)):new Uint32Array(bp.oM(m))}catch(w){rb(this.Pa()+" failed to Triangulate")}return a={triangles:{position:new Float32Array(m),index:u},xmin:e,xmax:f,ymin:g,ymax:h,zmin:c?k:0,zmax:c?l:0,valuemin:k,valuemax:l,values:n}};return d}();var Sz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Qz.call(this,a);a=d.wda(a);this.qc={};var b=a.triangles.position;b=b instanceof Float32Array?b:new Float32Array(b);var c=a.triangles.index;c=c instanceof Uint32Array?c:new Uint32Array(c);this.qc.vertices=new zq(b,3);this.qc.indices=new zq(c,1);this.yWb=a.xmin;this.UVb=a.xmax;this.zWb=a.ymin;this.VVb=a.ymax;this.AWb=a.zmin;this.WVb=a.zmax;this.uod=a.valuemin;this.mod=a.valuemax;this.Cb=a.values}D(d,Qz);L(d,"geotoolkit3d.data.surface.ContourLineData");d.wda=Rz.oM;d.prototype.getAttributes=
function(){var a={position:this.qc.vertices,index:this.qc.indices,interleaved:!1,xmin:this.yWb,xmax:this.UVb,ymin:this.zWb,ymax:this.VVb,zmin:this.AWb,zmax:this.WVb,valuemin:this.uod,valuemax:this.mod,values:this.Cb};return a};return d}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoid2RhIn0g");var Tz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Qz.call(this,a);var b=G(a,{interleaved:!0,bufferpadding:this.Fsc,surfacesmooth:!0});null!=a.data.values&&(b.bufferpadding+=1);var c=d.wda(b),e=c.triangles.vertexcount;if(null!=a.data.values)for(a=a.data.values,this.PHa=Number.POSITIVE_INFINITY,this.OHa=Number.NEGATIVE_INFINITY,this.Cb=b.interleaved?new Xs(c.buffer,1,c.bufferused):new ds(Array(e),1),e=0;e<a.length;e++)this.PHa=Math.min(this.PHa,a[e]),this.OHa=Math.max(this.OHa,a[e]),this.Cb.setX(e,a[e]);this.lab=c.triangles.position;
this.wq=c.triangles.index;this.Ur=c.triangles.normal;this.Fab=c.xmin;this.Eab=c.xmax;this.Iab=c.ymin;this.Hab=c.ymax;this.ST=c.zmin;this.RT=c.zmax;this.lA=b.data.nullvalue;this.gva=b.interleaved}D(d,Qz);L(d,"geotoolkit3d.data.surface.GridSurfaceData");d.wda=Kz.oM;d.prototype.getAttributes=function(){var a={position:this.lab,index:this.wq,normal:this.Ur,nullvalue:this.lA,xmin:this.Fab,xmax:this.Eab,ymin:this.Iab,ymax:this.Hab,zmin:this.ST,zmax:this.RT,interleaved:this.gva};this.Cb&&(a.values=this.Cb,
a.valuemin=this.PHa,a.valuemax=this.OHa);return a};return d}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoid2RhIn0g");var Uz=/*#__PURE__*/function(){function d(b){Lz.call(this,b)}var a=new Hp(1,1,1);D(d,Lz);L(d,"geotoolkit3d.scene.surface.HeightMapSurfaceGeometry");d.prototype.computeBoundingBox=function(){Lz.prototype.computeBoundingBox.call(this);this.boundingBox.expandByVector(a)};d.prototype.computeVertexNormals=function(){var b=this.getAttribute("position");if(b){var c=this.getAttribute("uv");if(void 0===c){c=new zq(new Float32Array(2*b.count),2);this.setAttribute("uv",c);this.computeBoundingBox();var e=new Hp;this.boundingBox.getSize(e);
for(var f=0;f<b.count;f++){var g=(b.getX(f)-this.boundingBox.min.x)/e.x,h=(b.getY(f)-this.boundingBox.min.y)/e.y;c.setX(f,g);c.setY(f,h)}}}};return d}();var Vz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Pz.call(this);this.type="HeightMapSurfaceMaterial";null==b&&(b={});null==b.data&&(b.data={});b.data=G(b.data,{xmin:0,ymin:0,xstep:1,ystep:1,zsign:1},!0);if(!b.data.surface)throw Error("Height Map Surface Material has no Data");this.vertexShader=a.MCa;this.fragmentShader=a.NMb;var c=b.data.surface.getAttributes();this.nnd=b.data.surface;this.jrb=new U(0,0,c.width,c.height);this.rQa={};this.HT={};this.setOptions(b)}var a=Nz;D(d,Pz);L(d,"geotoolkit3d.scene.surface.HeightMapSurfaceMaterial");
d.prototype.setOptions=function(b){Pz.prototype.setOptions.call(this,b);a.J5c(this,b);b.texture&&this.QNa(b.texture,0,0,this.jrb.ca()/b.texture.image.width,this.jrb.da()/b.texture.image.height,"material");return this};d.prototype.ta=function(){var b=xb(a.CId(this),Pz.prototype.ta.call(this));b.texture=this.HT.material;return b};d.prototype.QNa=function(b,c,e,f,g,h){if(null==this.rQa[h]){var k=wc(this.jrb.ca()/bc(),this.jrb.da()/bc());this.rQa[h]=k.getContext("2d");this.HT[h]=new Hq(k);"material"===
h&&(this.uniforms.map.value=this.HT[h],this.map=this.HT[h]);"geometry"===h&&a.J5c(this,{data:{surface:this.nnd.O1d(this.HT[h]),values:this.HT[h]}});this.needsUpdate=!0}this.rQa[h].drawImage(b.image,c,e,b.image.width*f,b.image.height*g);this.HT[h].needsUpdate=!0;return this};d.prototype.dispose=function(){for(var b in this.rQa)this.rQa.hasOwnProperty(b)&&(this.rQa[b]=null,this.HT[b].dispose(),this.HT[b]=null);Pz.prototype.dispose.call(this)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(Vz.Pa(),mz);var Wz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a.data=G(a.data,{xmin:0,ymin:0,xstep:1,ystep:1,width:a.data.heightmap?a.data.heightmap.image.width:256,height:a.data.heightmap?a.data.heightmap.image.height:256,normals:!1},!0);Qz.call(this,a);var b=d.wda(a),c=b.triangles.position;this.qc={};var e=c instanceof zq||c instanceof Xs?c:c instanceof Float32Array?new zq(c,3):new zq(new Float32Array(c),3);b=b.triangles.index;c=b instanceof zq?b:c instanceof Uint32Array||c instanceof Uint16Array?new zq(b,1):new zq(new Uint32Array(b),
1);this.qc.vertices=e;this.qc.indices=c;this.Quc=a.data.heightmap;this.jd=a.data.width;this.td=a.data.height}D(d,Qz);L(d,"geotoolkit3d.data.surface.HeightMapSurfaceData");d.wda=Kz.oM;d.prototype.getAttributes=function(){return{position:this.qc.vertices,index:this.qc.indices,heightmap:this.Quc,width:this.jd,height:this.td}};d.prototype.wAb=function(){return{geometry:Uz,material:Vz}};d.prototype.O1d=function(a){this.Quc=a;return this};return d}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoid2RhIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0Q29uc3RydWN0b3JzIjoid0FiIn19fSAg");var Xz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.surface.PillarTriangulator");d.Y_c=function(){var a=new Hp,b=new Hp;return function(c,e){var f=0;if(Number.isInteger(e))f=e;else for(e=0;e<c.length;e++)f=Math.max(f,c[e].x.length);for(e=0;e<c.length;e++){var g=c[e],h=g.x,k=g.y;g=g.z;for(var l=f-h.length,m=0;m<l;m++){for(var n=0,p=0,q=0;q<h.length-1;q++){a.set(h[q],k[q],g[q]);a.set(h[q+1],k[q+1],g[q+1]);var r=a.distanceTo(b);r>n&&(a.add(b).multiplyScalar(.5),n=r,p=q)}h.splice(p+1,0,a.x);k.splice(p+
1,0,a.y);g.splice(p+1,0,a.z)}}return c}}();d.Bec=null;d.D1b=!0;d.C1b=!0;d.setOptions=function(a){a=G(a,{resamplingpointcount:d.Bec,autosortpillars:d.D1b,autosortpillarpoints:d.C1b});d.Bec=a.resamplingPointCount;d.D1b=a.autosortpillars;d.C1b=a.autosortpillarpoints};d.r6d=function(a){a.forEach(function(b){for(var c=[],e=[],f=[],g=-1,h=Number.MAX_VALUE,k=0;k<b.z.length;k++)b.z[k]<h&&(g=k,h=b.z[k]);c.push(b.x[g]);e.push(b.y[g]);f.push(b.z[g]);g=[g];h=new Hp;for(k=0;k<b.z.length-1;k++){for(var l=new Hp(c[c.length-
1],e[c.length-1],f[c.length-1]),m=Number.MAX_VALUE,n=-1,p=0;p<b.z.length;p++)if(-1===g.indexOf(p)){var q=l.distanceTo(h.set(b.x[p],b.y[p],b.z[p]));m>q&&(m=q,n=p)}g.push(n);c.push(b.x[n]);e.push(b.y[n]);f.push(b.z[n])}b.x=c;b.y=e;b.z=f});return a};d.q6d=function(a){for(var b=Number.MAX_VALUE,c=-Number.MAX_VALUE,e=[],f=0;f<a.length;f++)b=Math.min(b,a[f].x[0]),c=Math.max(c,a[f].x[0]),e.push([a[f].x[0],a[f].y[0]]);f=Wy.rGc(e);var g=f.a,h=f.b;f=[];for(var k=0;k<e.length;k++){var l=e[k],m=l[0],n=l[1];l=
g*b+h;var p=g*c+h,q=c-b;p-=l;var r=q*q+p*p;m=((m-b)*q+(n-l)*p)/r;q=b+m*q;l+=m*p;f.push([q,l,k])}f.sort(function(t,u){return 0===t[0]-u[0]?t[1]-u[1]:0>t[0]-u[0]?-1:1});b=[];for(c=0;c<f.length;c++)b.push(a[f[c][2]]);return b};d.oM=function(a){var b=G(a.data,{}),c=G(a,{resamplingpointcount:d.Bec,autosortpillars:d.D1b,autosortpillarpoints:d.C1b});a=[];b=b.pillars;c.autosortpillarpoints&&(b=d.r6d(b));c.autosortpillars&&(b=d.q6d(b));0<c.resamplingpointcount&&(b=d.Y_c(b,c.resamplingpointcount));for(var e=
0,f=0;f<b.length;f++){c=b[f];c.indices=[];for(var g=0;g<c.x.length;g++)a.push(c.x[g]),a.push(c.y[g]),a.push(c.z[g]),c.indices.push(e++)}e=[];for(f=0;f<b.length-1;f++){c=b[f];g=b[f+1];for(var h=0,k=0,l=new Hp(c.x[h],c.y[h],c.z[h]),m=new Hp(g.x[k],g.y[k],g.z[k]);h<c.indices.length-1||k<g.indices.length-1;)if(h+1>=c.indices.length)e.push(c.indices[h],g.indices[k],g.indices[k+1]),k+=1,m=new Hp(g.x[k],g.y[k],g.z[k]);else if(k+1>=g.indices.length)e.push(c.indices[h],g.indices[k],c.indices[h+1]),h+=1,l=
new Hp(c.x[h],c.y[h],c.z[h]);else{var n=new Hp(c.x[h+1],c.y[h+1],c.z[h+1]);var p=new Hp(g.x[k+1],g.y[k+1],g.z[k+1]);var q=l.distanceTo(n)+m.distanceTo(n),r=l.distanceTo(p)+m.distanceTo(p);q<r?(e.push(c.indices[h],g.indices[k],c.indices[h+1]),h+=1,l=n):(e.push(c.indices[h],g.indices[k],g.indices[k+1]),k+=1,m=p)}}return a={triangles:{position:new Float32Array(a),index:new Uint32Array(e)}}};return d}(),1,"eyJyZXNhbXBsZVBpbGxhcnMiOiJZX2MiLCJ0cmlhbmd1bGF0ZSI6Im9NIn0g");var Yz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Qz.call(this,a);a=jc(a,!0);var b=d.oM(a);this.qc={};var c=b.triangles.position;c=c instanceof Float32Array?c:new Float32Array(c);b=b.triangles.index;b=b instanceof Uint32Array?b:new Uint32Array(b);this.qc.vertices=new zq(c,3);this.qc.indices=new zq(b,1);this.dpd=a.data.pillars;this.Ib=a.data.xyoffset||new Hp(0,0,0)}D(d,Qz);L(d,"geotoolkit3d.data.surface.PillarSurfaceData");d.oM=function(a){return Xz.oM(a)};d.prototype.getAttributes=function(){var a={position:this.qc.vertices,
index:this.qc.indices,interleaved:!1};return a};d.prototype.eJd=function(){return this.dpd};d.prototype.fq=function(){return this.Ib};return d}(),2,"eyJ0cmlhbmd1bGF0ZSI6Im9NIn0g");var Zz=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Qz.call(this,a);a=xb(a,{interleaved:!0,bufferpadding:this.Fsc,unorderedtriangulation:{enable:!0,enablefiltergaps:!0,filtergapsthreshold:5}});a.data.value&&(a.data.values=a.data.value,hb("SurfaceData: value is deprecated, use values instead."));a.bufferpadding+=3;null!=a.data.values&&(a.bufferpadding+=1);var b=d.wda(a),c=b.triangles.position,e=c.length/3;if(!0===a.interleaved){var f=new Float32Array(e*a.bufferpadding);f=new Ws(f,a.bufferpadding);var g=new Xs(f,3,0);
for(var h=0;h<e;h++){var k=3*h;g.setXYZ(h,c[k],c[k+1],c[k+2])}}else g=new zq(c,3);if(null!=a.data.values)for(c=a.data.values,this.PHa=Number.POSITIVE_INFINITY,this.OHa=Number.NEGATIVE_INFINITY,this.Cb=!0===a.interleaved?new Xs(f,1,3):new ds(Array(e),1),e=0;e<c.length;e++)this.PHa=Math.min(this.PHa,c[e]),this.OHa=Math.max(this.OHa,c[e]),this.Cb.setX(e,c[e]);this.lab=g;this.wq=new zq(b.triangles.index,1);this.lA=a.data.nullvalue;this.gva=a.interleaved;this.AWb=b.zmin;this.WVb=b.zmax;this.yWb=b.xmin;
this.UVb=b.xmax;this.zWb=b.ymin;this.VVb=b.ymax}D(d,Qz);L(d,"geotoolkit3d.data.surface.SurfaceData");d.wda=function(a){var b=a.data.x,c=a.data.y,e=a.data.z,f,g,h,k;var l=f=g=Number.POSITIVE_INFINITY;var m=h=k=Number.NEGATIVE_INFINITY;for(var n=Array(3*b.length),p=0;p<b.length;p++){var q=3*p;n[q]=b[p];n[q+1]=c[p];n[q+2]=e[p];l=Math.min(l,b[p]);m=Math.max(m,b[p]);f=Math.min(f,c[p]);h=Math.max(h,c[p]);g=Math.min(g,e[p]);k=Math.max(k,e[p])}a=a.unorderedtriangulation.enable?bp.d$c(n,a.unorderedtriangulation):
bp.oM(n);return{triangles:{position:new Float32Array(n),index:new Uint32Array(a)},xmin:l,xmax:m,ymin:f,ymax:h,zmin:g,zmax:k}};d.prototype.getAttributes=function(){var a={position:this.lab,index:this.wq,nullvalue:this.lA,interleaved:this.gva,xmin:this.yWb,xmax:this.UVb,ymin:this.zWb,ymax:this.VVb,zmin:this.AWb,zmax:this.WVb};this.Cb&&(a.values=this.Cb,a.valuemin=this.PHa,a.valuemax=this.OHa);return a};return d}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoid2RhIn0g");var $z=/*#__PURE__*/function(){function d(a){var b=G(a,{interleaved:!1});Qz.call(this,b);a=b.data.xyz;a=a instanceof zq?a:a instanceof Float32Array?new zq(a,3):new zq(new Float32Array(a),3);var c=b.data.indices;c=c instanceof zq?c:c instanceof Uint32Array||c instanceof Uint16Array?new zq(c,1):new zq(new Uint32Array(c),1);var e=b.data.normal;null!=e&&(this.RI=e=e instanceof zq?e:e instanceof Uint32Array||e instanceof Uint16Array?new zq(e,3):new zq(new Uint32Array(e),3));this.Cb=b.data.values;this.lab=a;this.wq=
c;this.lA=b.data.nullvalue;this.gva=b.interleaved;this.ST=this.Iab=this.Fab=Number.POSITIVE_INFINITY;this.RT=this.Hab=this.Eab=Number.NEGATIVE_INFINITY;for(b=0;b<a.count;b++){c=a.getX(b);e=a.getY(b);var f=a.getZ(b);this.Fab=Math.min(c,this.Fab);this.Eab=Math.max(c,this.Eab);this.Iab=Math.min(e,this.Iab);this.Hab=Math.max(e,this.Hab);isNaN(f)||(this.ST=Math.min(f,this.ST),this.RT=Math.max(f,this.RT))}}D(d,Qz);L(d,"geotoolkit3d.data.surface.TrimeshSurfaceData");d.prototype.getAttributes=function(){var a=
{position:this.lab,index:this.wq,nullvalue:this.lA,interleaved:this.gva,xmin:this.Fab,xmax:this.Eab,ymin:this.Iab,ymax:this.Hab,zmin:this.ST,zmax:this.RT};this.RI&&(a.normal=this.RI);this.Cb&&(a.values=this.Cb);return a};return d}();var aA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b,c){this.Gfa=12500;this.Om=b;this.J4a=c;this.Me=[];this.We=null}var a=new uq;L(d,"geotoolkit3d.data.util.Octree");d.prototype.Qra=function(b){this.Gfa=b;return this};d.prototype.split=function(){this.We=Array(8);var b=new Hp;this.J4a.getSize(b).divideScalar(2);var c=this.J4a.min,e=this.J4a.max,f=b.x,g=b.y,h=b.z;this.We[0]=(new d(this.Om+1,new uq(c,(new Hp).addVectors(c,b)))).Qra(this.Gfa);this.We[1]=(new d(this.Om+1,new uq(new Hp(c.x+f,c.y,c.z),new Hp(e.x,c.y+g,c.z+h)))).Qra(this.Gfa);
this.We[2]=(new d(this.Om+1,new uq(new Hp(c.x,c.y+g,c.z),new Hp(c.x+f,e.y,c.z+h)))).Qra(this.Gfa);this.We[3]=(new d(this.Om+1,new uq(new Hp(c.x+f,c.y+g,c.z),new Hp(e.x,e.y,e.z-h)))).Qra(this.Gfa);this.We[4]=(new d(this.Om+1,new uq(new Hp(c.x,c.y,c.z+h),new Hp(c.x+f,c.y+g,e.z)))).Qra(this.Gfa);this.We[5]=(new d(this.Om+1,new uq(new Hp(c.x+f,c.y,c.z+h),new Hp(e.x,c.y+g,e.z)))).Qra(this.Gfa);this.We[6]=(new d(this.Om+1,new uq(new Hp(c.x,c.y+g,c.z+h),new Hp(c.x+f,e.y,e.z)))).Qra(this.Gfa);this.We[7]=
(new d(this.Om+1,new uq(new Hp(c.x+f,c.y+g,c.z+h),e))).Qra(this.Gfa)};d.prototype.v8b=function(b){if(null==this.We)return[];var c;for(c=0;8>c;c++){var e=this.We[c].pAb();if(e.containsBox(b))return[c]}var f=[];for(c=0;8>c;c++)e=this.We[c].pAb(),e.intersectsBox(b)&&f.push(c);return f};d.prototype.vo=function(b){var c=b;a.min.set(c[0],c[1],c[2]);a.max.set(c[3],c[4],c[5]);if(null!=this.We){c=this.v8b(a);for(var e=0;e<c.length;e++)this.We[c[e]].vo(b)}else if(this.Me.push(b),this.Me.length>this.Gfa){this.split();
for(b=0;b<this.Me.length;++b)this.vo(this.Me[b]);this.Me=[]}};d.prototype.intersectsPlane=function(b){return this.J4a.intersectsPlane(b)};d.prototype.Iec=function(b){function c(f,g){if(f.pAb().intersectsPlane(g)){var h=f.Qpa();if(null==h)for(g=f.Js(),h=0;h<g.length;++h)e.push(g[h]);else for(f=0;f<h.length;++f){var k=h[f];c(k,g)}}}var e=[];c(this,b);return e};d.prototype.Hec=function(){function b(e){var f=e.Js();if(f&&0<f.length)c.push(f);else if(e=e.Qpa(),null!=e)for(f=0;f<e.length;f++)b(e[f])}var c=
[];b(this);return c};d.prototype.bQc=function(){function b(e){var f=e.Js();if(f&&0<f.length)c++;else if(e=e.Qpa(),null!=e)for(f=0;f<e.length;f++)b(e[f])}var c=0;b(this);return c};d.prototype.GZc=function(){function b(c){for(var e=c.Js(),f=0;f<e.length;f++)e[f]=e[f][6];c=c.Qpa();if(null!=c)for(e=0;e<c.length;e++)b(c[e])}b(this)};d.prototype.Qpa=function(){return this.We};d.prototype.Js=function(){return this.Me};d.prototype.pAb=function(){return this.J4a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDYXBhY2l0eSI6IlFyYSIsImluc2VydCI6InZvIiwicmV0cmlldmVCeVBsYW5lIjoiSWVjIiwicmV0cmlldmUiOiJIZWMiLCJnZXROdW1iZXJPZk5vZGVzIjoiYlFjIiwicmVkdWNlU2l6ZSI6IkdaYyIsImdldE5vZGVzIjoiUXBhIiwiZ2V0RWxlbWVudHMiOiJKcyIsImdldEJvdW5kIjoicEFiIn19fSAg");var bA=/*#__PURE__*/function(){function d(b){var c=b.material,e=G(b,{uniforms:c.uniforms,vertexshader:a.wEc(c),fragmentshader:a.vEc(c),defines:c.defines},!0);Xy.call(this,e);this.rGa=b.object;this.type="DefaultPointSetPickingMaterial";this.transparent=!1;this.lights=c.lights;this.side=c.side;this.blending=yu}var a=Uy;D(d,Xy);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultPointSetPickingMaterial");d.prototype.n4b=function(b){return b/this.rGa.geometry.instanceCount};d.prototype.ncb=function(b){return Math.round(b*
this.rGa.geometry.instanceCount)};d.Cfd=100;d.prototype.cBb=function(){var b=this;return[{pickingmode:a.voc,callback:function(c,e){c=b.ncb(Sy.Okb(c));e.pointindex=c;var f=b.rGa.parent&&b.rGa.parent.Pa&&"geotoolkit3d.scene.pointset.PointSet"===b.rGa.parent.Pa();f&&(b.rGa.parent.I$b(c),e.point&&(c=b.rGa.parent.QXa(c),null!=c&&(c=c.position,e.point.x=c[0],e.point.y=c[1],e.point.z=c[2])))}}]};return d}();var cA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.data.reservoir.AbstractReservoirData");d.prototype.getAttributes=Fb;d.prototype.KXa=function(){return 0};d.prototype.Ueb=function(){return 1};d.prototype.Gsd=function(a,b,c,e,f){a[3*b]=c;a[3*b+1]=e;a[3*b+2]=f};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROdW1iZXJPZkNlbGxzIjoiS1hhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6IlVlYiIsImFwcGVuZFBvaW50IjoiR3NkIn19fSAg");var dA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f){Ms.call(this);this.type="ReservoirGeometry";this.sOd();f.data instanceof cA?(this.ja=f.data.getAttributes(),this.Xub=f.data):this.ja=f.data;this.zQb=0;this.Avc=!1;this.j_b=this.swb=this.Xna=0;this.HTa=[];this.D9a=[];this.Cf=this.FEa=this.Mtb=this.Ltb=null;this.lA=void 0;this.Y_=new Ip(this.ja.mini,this.ja.minj,this.ja.mink,Number.NEGATIVE_INFINITY);this.X_=new Ip(this.ja.maxi,this.ja.maxj,this.ja.maxk,Number.POSITIVE_INFINITY);this.iSb=!1;this.Src=new Hp(0,0,0);this.Trc=
new Hp(0,0,0);this.f_=this.Y_.clone();this.e_=this.X_.clone();this.setOptions(f)}function a(){this.array=null}var b=8,c=3*b,e=1E-7;D(d,Ms);L(d,"geotoolkit3d.scene.reservoir.instanced.ReservoirGeometry");d.prototype.setOptions=function(f){var g=!1;if(null!=f.data){g=!0;var h;this.ja=h=f.data instanceof cA?f.data.getAttributes():f.data;this.yIe=this.zQb=this.ja.cellcount;this.Nrd(h);null!=this.ja.boundingbox?this.boundingBox=this.ja.boundingbox:this.computeBoundingBox(this.ja.positions.array)}this.fgc(f,
g);return this};d.prototype.hBb=function(){this.ja.volume||(this.Xub.yyb(),this.ja.volume=this.Xub.getAttributes().volume,this.J$c());return this.swb};d.prototype.gBb=function(){return this.j_b};d.prototype.Nrd=function(f){this.setValues(f.values.array);this.D9a=f.additionaldata;this.Xna=this.ja.positions.array.length/c;this.userData.V9c=this.Xna;this.Avc=hz.aVc(this.ja.positions.array);this.Kvd()};d.prototype.sOd=function(){var f=this.USc(),g=this.nLc();this.setAttribute("position",(new ds(f,3)).onUpload(a));
this.setAttribute("barycentric",(new ds(g,3)).onUpload(a))};d.prototype.fgc=function(f,g){g=!!g;f.hasOwnProperty("minbound")&&(this.f_=f.minbound);f.hasOwnProperty("maxbound")&&(this.e_=f.maxbound);f.hasOwnProperty("minvalue")&&(this.f_.w=f.minvalue);f.hasOwnProperty("maxvalue")&&(this.e_.w=f.maxvalue);f.hasOwnProperty("mini")&&(this.f_.x=+f.mini);f.hasOwnProperty("minj")&&(this.f_.y=+f.minj);f.hasOwnProperty("mink")&&(this.f_.z=+f.mink);f.hasOwnProperty("maxi")&&(this.e_.x=+f.maxi);f.hasOwnProperty("maxj")&&
(this.e_.y=+f.maxj);f.hasOwnProperty("maxk")&&(this.e_.z=+f.maxk);if(this.Y_.x!==this.f_.x||this.Y_.y!==this.f_.y||this.Y_.z!==this.f_.z)g=!0;this.Y_.w!==this.f_.w&&(g=!0);this.Y_.set(this.f_.x,this.f_.y,this.f_.z,this.f_.w);if(this.X_.x!==this.e_.x||this.X_.y!==this.e_.y||this.X_.z!==this.e_.z)g=!0;this.X_.w!==this.e_.w&&(g=!0);this.X_.set(this.e_.x,this.e_.y,this.e_.z,this.e_.w);f.hasOwnProperty("nullvalue")&&this.ppd!==f.nullvalue&&(this.lA=this.ppd=f.nullvalue,g=!0);f.hasOwnProperty("excludemode")&&
this.iSb!==f.excludemode&&(this.iSb=f.excludemode,g=!0);f.hasOwnProperty("filter")&&this.Cf!==f.filter&&(this.Cf=f.filter,g=!0);g&&this.Mf();return this};d.prototype.J$c=function(){var f,g=0,h=[];this.j_b=this.swb=0;var k=!!this.ja.volume;for(f=0;f<this.Xna;f++)if(!this.FEa[f]){this.j_b++;k&&(this.swb+=this.ja.volume[f]);var l=!1;if(this.Ltb[f]){l=!0;for(var m=0;6>m;m++){var n=this.Mtb[f][m];if(this.FEa[n]){l=!1;break}}}l||(h.push(f),g++)}this.instanceCount=g;k=(new Ns(new Float32Array(g*c),c)).onUpload(a);
l=(new Ls(new Float32Array(g),1)).onUpload(a);m=(new Ls(new Float32Array(g),1)).onUpload(a);for(f=0;f<g;f++){n=h[f];for(var p=n*b,q=f*c,r=0;r<b;r++){var t=3*r;k.array[q+t]=this.ja.positions.getX(p+r);k.array[q+t+1]=this.ja.positions.getY(p+r);k.array[q+t+2]=this.ja.positions.getZ(p+r)}l.array[f]=this.HTa[n];m.array[f]=n/this.Xna}h.length=0;this.setAttribute("positionA",new Xs(k,3,0));this.setAttribute("positionB",new Xs(k,3,3));this.setAttribute("positionC",new Xs(k,3,6));this.setAttribute("positionD",
new Xs(k,3,9));this.setAttribute("positionE",new Xs(k,3,12));this.setAttribute("positionF",new Xs(k,3,15));this.setAttribute("positionG",new Xs(k,3,18));this.setAttribute("positionH",new Xs(k,3,21));this.setAttribute("cgcolormapValue",l);this.setAttribute("cgcellindex",m)};d.prototype.Ivd=function(){this.FEa=this.FEa||Array(this.Xna);for(var f=this.ja.ijk,g=0;g<this.Xna;g++)this.FEa[g]=this.HPd(f.getX(g),f.getY(g),f.getZ(g),this.HTa[g],this.D9a[g])};d.prototype.GPd=function(f){return 0>f||f>=this.Xna?
!0:this.FEa[f]};d.prototype.HPd=function(f,g,h,k,l){return this.IPd(f,g,h)||this.JPd(k)||null!=this.Cf&&this.Cf(f,g,h,k,l)};d.prototype.IPd=function(f,g,h){return this.iSb?f>=this.Y_.x&&f<=this.X_.x&&g>=this.Y_.y&&g<=this.X_.y&&h>=this.Y_.z&&h<=this.X_.z:f<this.Y_.x||f>this.X_.x||g<this.Y_.y||g>this.X_.y||h<this.Y_.z||h>this.X_.z};d.prototype.JPd=function(f){return!Number.isFinite(f)||f<this.Y_.w||f>this.X_.w||f===this.lA};d.prototype.Kvd=function(){this.Ltb=Array(this.Xna).fill(!1);this.Mtb=[];for(var f=
Array(6),g=Array(3*b).fill(0),h=Array(6).fill().map(function(){return Array(3*b).fill(0)}),k=this.ja.cellmap,l=0;l<this.Xna;l++){var m=!0,n=this.ja.ijk.getX(l),p=this.ja.ijk.getY(l),q=this.ja.ijk.getZ(l),r=[[n+1,p,q],[n-1,p,q],[n,p+1,q],[n,p-1,q],[n,p,q+1],[n,p,q-1]],t;for(t=0;6>t;t++){var u=r[t][0],w=r[t][1],y=r[t][2];if(null!=k[u]&&null!=k[u][w]&&null!=k[u][w][y])f[t]=k[u][w][y];else{m=!1;break}}if(m){m=k[n][p][q];this.DLc(m,g);for(t=0;6>t;t++)this.DLc(f[t],h[t]);this.Pud(g,h)&&(this.Ltb[l]=!0,
this.Mtb[l]=f.slice())}}};d.prototype.Pud=function(f,g){return this.DB("B","A",f,g[0])&&this.DB("D","C",f,g[0])&&this.DB("F","E",f,g[0])&&this.DB("H","G",f,g[0])&&this.DB("A","B",f,g[1])&&this.DB("C","D",f,g[1])&&this.DB("E","F",f,g[1])&&this.DB("G","H",f,g[1])&&this.DB("C","A",f,g[2])&&this.DB("D","B",f,g[2])&&this.DB("G","E",f,g[2])&&this.DB("H","F",f,g[2])&&this.DB("A","C",f,g[3])&&this.DB("B","D",f,g[3])&&this.DB("E","G",f,g[3])&&this.DB("F","H",f,g[3])&&this.DB("E","A",f,g[4])&&this.DB("F","B",
f,g[4])&&this.DB("G","C",f,g[4])&&this.DB("H","D",f,g[4])&&this.DB("A","E",f,g[5])&&this.DB("B","F",f,g[5])&&this.DB("C","G",f,g[5])?this.DB("D","H",f,g[5]):!1};d.prototype.DLc=function(f,g){f*=b;for(var h=0;h<b;h++)g[3*h]=this.ja.positions.getX(f+h),g[3*h+1]=this.ja.positions.getY(f+h),g[3*h+2]=this.ja.positions.getZ(f+h)};d.prototype.DB=function(f,g,h,k){this.D1c(f,h,this.Src);this.D1c(g,k,this.Trc);return this.Src.manhattanDistanceTo(this.Trc)<e};d.prototype.D1c=function(f,g,h){switch(f){case "A":var k=
0;break;case "B":k=1;break;case "C":k=2;break;case "D":k=3;break;case "E":k=4;break;case "F":k=5;break;case "G":k=6;break;case "H":k=7;break;default:hb("Not a valid cell corner!")}f=3*k;h.set(g[f],g[f+1],g[f+2])};d.prototype.setValues=function(f){this.HTa=f instanceof zq?f.array:f};d.prototype.USc=function(){var f=[0,0,1],g=[1,0,1],h=[0,1,1],k=[1,1,1],l=[0,0,0],m=[1,0,0],n=[0,1,0],p=[1,1,0],q=[];q=q.concat(h,k,n,k,p,n);q=q.concat(f,l,g,l,m,g);q=q.concat(g,m,k,m,p,k);q=q.concat(f,h,l,h,n,l);q=q.concat(f,
g,h,g,k,h);return q=q.concat(m,l,p,l,n,p)};d.prototype.nLc=function(){for(var f=12,g=[],h=0;h<f;h++){var k=0===h%2;k?g.push(0,0,1,0,1,0,1,0,1):g.push(0,1,0,0,0,1,1,0,1)}return g};d.prototype.computeBoundingBox=function(f){this.boundingBox=(new uq).setFromArray(f)};d.prototype.BDd=function(f){var g=[],h=[],k=[],l={index:f,positions:{}};if(0>f||f>=this.zQb)return l;for(var m=f*b;m<(f+1)*b;m++)g.push(this.ja.positions.getX(m)),h.push(this.ja.positions.getY(m)),k.push(this.ja.positions.getZ(m));l.positions.x=
g;l.positions.y=h;l.positions.z=k;f<this.HTa.length&&(l.value=this.HTa[f]);f<this.D9a.length&&(l.additionalData=this.D9a[f]);null!=this.ja.ijk&&(l.ijk={i:this.ja.ijk.getX(f),j:this.ja.ijk.getY(f),k:this.ja.ijk.getZ(f)},l.positions.ijk=[l.ijk.i,l.ijk.j,l.ijk.k]);l.volume=this.ja.volume?this.ja.volume[f]:null;return l};d.prototype.M$c=function(f,g){var h=f.positions.x,k=f.positions.y,l=f.positions.z;f=[];f.push(h[0],k[0],l[0],h[1],k[1],l[1],h[1],k[1],l[1],h[3],k[3],l[3],h[3],k[3],l[3],h[2],k[2],l[2],
h[2],k[2],l[2],h[0],k[0],l[0],h[0],k[0],l[0],h[4],k[4],l[4],h[4],k[4],l[4],h[5],k[5],l[5],h[5],k[5],l[5],h[1],k[1],l[1],h[5],k[5],l[5],h[7],k[7],l[7],h[7],k[7],l[7],h[3],k[3],l[3],h[7],k[7],l[7],h[6],k[6],l[6],h[6],k[6],l[6],h[2],k[2],l[2],h[6],k[6],l[6],h[4],k[4],l[4]);h=g.getAttribute("instanceStart");if(null==h||null==h.data||0===h.data.array.length)g.setData({positions:f});else{g=h.data.array;for(k=0;k<f.length;k++)g[k]=f[k];h.needsUpdate=!0}};d.prototype.qBd=function(f){if(!f||!f.ijk||!f.positions)return null;
var g=new ez({data:{positions:[]},color:new Pq("red"),linewidth:3,opacity:.6,polygonoffset:!0});this.M$c(f,g.geometry);f=g.geometry.getAttribute("instanceStart").data;f.setUsage(Kr);return g};d.prototype.pac=function(){return this.Avc};d.prototype.IUc=function(f){var g=!0;f.mini&&f.maxi&&(this.ja.mini<f.mini||this.ja.maxi>f.maxi)&&(g=!1);f.minj&&f.maxj&&(this.ja.minj<f.minj||this.ja.maxj>f.maxj)&&(g=!1);f.mink&&f.maxk&&(this.ja.mink<f.mink||this.ja.maxk>f.maxk)&&(g=!1);return g};d.prototype.dispose=
function(){Ms.prototype.dispose.call(this);this.Xub&&this.Xub.dispose();this.ja&&(this.ja.positions=null);this.ja.ijk&&(this.ja.ijk=null);this.ja.values&&(this.ja.values=null);this.ja.cellmap&&(this.ja.cellmap=null);this.FEa=this.Mtb=this.Ltb=this.D9a=this.HTa=null};d.prototype.Mf=function(){this.Ivd();this.J$c();return this};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGaWx0ZXJlZENlbGxzVm9sdW1lIjoiaEJiIiwiZ2V0RmlsdGVyZWRDZWxsc0NvdW50IjoiZ0JiIiwiZ2V0VW5pdFBvc2l0aW9uIjoiVVNjIiwiZ2V0QmFyeWNlbnRyaWNQZXJJbnN0YW5jZSI6Im5MYyIsImlzQ2VsbE5vcm1hbHNJbnZlcnRlZCI6InBhYyIsImlzSUpLVmFsaWQiOiJJVWMifX19");var eA=/*#__PURE__*/function(){function d(b){var c=b.material,e=G(b,{uniforms:c.uniforms,vertexshader:a.Itd(c),fragmentshader:a.Htd(c),defines:c.defines},!0);Xy.call(this,e);this.Fk=b.object;this.Ivc=this.Fk.geometry instanceof dA;this.ACc=this.Fk.geometry.getAttribute("cgcolormapValue").count;this.type="DefaultReservoirPickingMaterial";this.transparent=!1;this.lights=c.lights;this.side=c.side;this.blending=yu;this.extensions.derivatives=!0}var a=Uy;D(d,Xy);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultReservoirPickingMaterial");
d.prototype.n4b=function(b){var c=this.Ivc?this.Fk.geometry.userData.V9c:this.ACc;return b/c};d.prototype.ncb=function(b){var c=this.Ivc?this.Fk.geometry.userData.V9c:this.ACc;return Math.round(b*c)};d.prototype.cBb=function(){var b=this;return[{pickingmode:a.Dfd,callback:function(c,e,f){c=b.ncb(Sy.Okb(c));var g=b.Fk.geometry.BDd(c);for(c=b.Fk;c.type&&"ReservoirGrid"!==c.type;)c=c.parent;c.$Nd(b.Fk.geometry,g);e.value=g.value;e.ijk=g.ijk;e=c.s9b();null!=e&&(e.userData.dispose=c.a_c.bind(c),f.push(e))}}]};
return d}();var fA=/*#__PURE__*/function(){function d(a){a.material=a.material[0];iz.call(this,a);this.side=Fr}D(d,iz);L(d,"geotoolkit3d.picking.pickingrenderer.DefaultSeismicSlicePickingMaterial");return d}();var gA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){Yy.call(this)}var a=new Ud;D(d,Yy);L(d,"geotoolkit3d.picking.RayCastPicking");d.bJd=function(b,c,e){var f=b.getSize(a),g=b.T6().getContext().canvas.getBoundingClientRect();c=(c-g.left)/(g.right-g.left)*f.ca();e=(e-g.top)/(g.bottom-g.top)*f.da();return d.xQc(b,c,e)};d.xQc=function(b,c,e){b.getCamera().updateMatrixWorld(!0);b.aT().updateMatrixWorld(!0);var f=new kw,g=new gy;g.x=c/b.VX().clientWidth*2-1;g.y=2*-(e/b.VX().clientHeight)+1;f.setFromCamera(g,b.getCamera());
return f.ray};d.Vcc=function(b,c,e,f,g,h){g=b.HXa();var k=b.HXa().negate();b.aT().position.add(k);b.getCamera().position.add(k);b.getCamera().updateMatrixWorld(!0);b.aT().updateMatrixWorld(!0);k=new kw;var l=new gy;l.x=c/b.VX().clientWidth*2-1;l.y=2*-(e/b.VX().clientHeight)+1;k.setFromCamera(l,b.getCamera());null!=h&&(k.ZNe=h);c=k.intersectObjects([f],!0);e=[];f={};for(h=0;h<c.length;h++)isNaN(c[h].distance)||null!=f[c[h].object.uuid]||(c[h].point=c[h].point.clone(),b.Nca(c[h].point),e.push({object:c[h].object,
point:c[h].point,distance:c[h].distance}),f[c[h].object.uuid]=!0);e.sort(function(m,n){return m.distance-n.distance});b.aT().position.add(g);b.getCamera().position.add(g);b.getCamera().updateMatrixWorld(!0);b.aT().updateMatrixWorld(!0);return e};d.Hn=function(b,c,e){var f=b.aT();return this.Vcc(b,c,e,f)};return d}(),2,"eyJnZXRQaWNraW5nUmF5Q2xpZW50IjoiYkpkIiwiZ2V0UGlja2luZ1JheSI6InhRYyIsInBpY2tGcm9tIjoiVmNjIiwicGljayI6IkhuIn0g");var hA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}d.Qvc=!1;d.Rvc=!1;d.Yrb=!1;d.bxc=0;d.cxc=0;L(d,"geotoolkit3d.util.WebGLConstants");d.C1a=function(a){if(!d.$G){d.$G=!0;var b=!1;if(!a){try{if(!$a.WebGLRenderingContext)return;a=new qy}catch(f){return}b=!0}if(null!=a){d.Qvc=!0;d.Rvc=a.capabilities.isWebGL2;d.bxc=a.capabilities.maxTextureSize;d.cxc=a.capabilities.maxTextures;var c=a.getContext();if(vd.uac()){var e=c.getParameter(c.RENDERER);d.Yrb=0<=e.indexOf("Intel")}else if(e=c.getExtension("WEBGL_debug_renderer_info"),
!e||0<=c.getParameter(e.UNMASKED_RENDERER_WEBGL).indexOf("Intel"))d.Yrb=!0;b&&a.dispose()}}};d.TJa=function(){d.$G||d.C1a();return d.bxc};d.BHd=function(){d.$G||d.C1a();return d.cxc};d.BKb=function(){d.$G||d.C1a();return d.Qvc};d.Ggb=function(){d.$G||d.C1a();return null==d.Yrb?(hb("WebGLConstants.isIntelGPU: cannot determine the type of GPU"),null):d.Yrb};d.isWebGL2=function(){d.$G||d.C1a();return d.Rvc};d.canvas=function(){null==d.zvc&&(d.zvc=$a.CanvasRenderingContext2D&&!0);return d.zvc};return d}(),1,"eyJnZXRNYXhUZXh0dXJlU2l6ZSI6IlRKYSIsImdldE1heFRleHR1cmVzIjoiQkhkIiwid2ViZ2wiOiJCS2IiLCJpc0ludGVsR1BVIjoiR2diIn0g");var iA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.$V=[]}D(d,fz);L(d,"geotoolkit3d.scene.animation.AnimationManager");d.prototype.pFc=function(a){oc(a,qz)||hb("checkAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");return-1===this.$V.indexOf(a)?!1:!0};d.prototype.RZc=function(a){oc(a,qz)||hb("removeAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");var b=this.$V.indexOf(a);
-1!==this.$V.indexOf(a)&&this.$V.splice(b,1)};d.prototype.J0b=function(a){oc(a,qz)||hb("addAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");var b=this.$V.indexOf(a);-1===b&&this.$V.push(a);1===this.$V.length&&this.gg(new az({type:$y.Animation,source:this,args:{}}));return this};d.prototype.WBa=function(a,b){a=[];for(b=0;b<this.$V.length;b++)(oc(this.$V[b],qz)?this.$V[b].OO():this.$V[b]())&&a.push(b);for(b=a.length-1;0<=b;b--)this.$V.splice(a[b],
1);0<this.$V.length&&this.gg(new az({type:$y.Animation,source:this,args:{}}))};d.prototype.dispose=function(){this.$V=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjaGVja0FuaW1hdGlvbiI6InBGYyIsInJlbW92ZUFuaW1hdGlvbiI6IlJaYyIsImFkZEFuaW1hdGlvbiI6IkowYiJ9fX0g");var jA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(k,l,m){null==k[l]&&(k[l]=[]);-1===k[l].indexOf(m)&&k[l].push(m)}function a(k,l,m){for(var n=0;n<m;n++)if(k[n]!==l[n])return!1;return!0}function b(){if(g)return hb("geotoolkit3d.util.intersection.IntersectionManager is singleton, please avoid constructor and use getDefaultInstance() instead."),g;te.call(this);this.pob=!0;this.TW=new Map;this.r$=new Map;this.x5=new Map;this.s5=new Map;this.e0=new Map;return this}function c(k){(k=k&&k instanceof fz)||hb("geotoolkit3d.util.intersection.IntersectionManager only accepts object type of geotoolkit3d.scene.Object3D");
return k}function e(k,l,m){k.has(l.uuid)||k.set(l.uuid,new Set);k.get(l.uuid).add(m.uuid)}function f(k,l){null!=l.uuid&&null!=l.matrixWorld&&(k.has(l.uuid)||k.set(l.uuid,{object:l,matrixworld:l.matrixWorld.elements.slice()}))}var g=null,h={};L(b,"geotoolkit3d.util.intersection.IntersectionManager");D(b,te);b.tg=function(){null==g&&(g=new b);return g};b.mHb=function(k,l){h[k]=new l};b.prototype.g0d=function(k){this.pob=k};b.prototype.CPd=function(){return this.pob};b.prototype.jad=function(k,l,m){if(this.s5.has(k.uuid)&&
this.s5.get(k.uuid).has(l.uuid))var n=this.s5.get(k.uuid).get(l.uuid);else n={preservecolor:!0,linewidth:6,fillstyle:new rf("red")},this.s5.has(k.uuid)||this.s5.set(k.uuid,new Map);m=xb(m,n);this.s5.get(k.uuid).set(l.uuid,m);return m};b.prototype.iHc=function(k,l,m){var n=this.f$b(k);if(null!=n){var p=k.uuid+l.uuid,q=n[0];n=n[1];this.RJ(q,p);this.EFc(k,l)||(k=h[n].gJa(q,l,m),this.e0.set(p,k),this.S$c(k,m))}};b.prototype.f$b=function(k){var l=Object.keys(h),m,n;k.traverse(function(p){null==m&&p instanceof
fz&&l.forEach(function(q){if(q===p.Pa()){var r=p;"function"===typeof r.GA&&(m=r,n=q)}})});return null!=m?[m,n]:null};b.prototype.S$c=function(k,l){if(0!==k.length){var m,n=null,p=null;!0===l.preservecolor&&(n=ug.fd(l.fillstyle),delete l.fillstyle,p=Y.Ra(l.linestyle),delete l.linestyle);for(m=0;m<k.length;m++){k[m].xb(!1);k[m].fa(l);if(null!=n){var q=n.clone(),r=k[m].eb();null!=r&&q.setColor(r.mb());k[m].ra(q)}null!=p&&(q=p.clone(),r=k[m].Fa(),null!=r&&q.setColor(r.mb()),k[m].qa(q));k[m].xb(!0)}k[0].Lg(null,
!0)}};b.prototype.gJa=function(k,l,m){c(k)&&c(l)&&(m=this.jad(k,l,m),this.iHc(k,l,m),f(this.TW,k),f(this.TW,l),e(this.x5,k,l),e(this.r$,l,k))};b.prototype.hYd=function(k,l){if(c(k)&&c(l)){var m=this.f$b(k);if(null!=m){var n=k.uuid+l.uuid;this.RJ(m[0],n);this.x5.has(k.uuid)&&(m=this.x5.get(k.uuid),m.delete(l.uuid),0===m.size&&(this.x5.delete(k.uuid),this.s5.delete(k.uuid),this.TW.delete(k.uuid)));this.r$.has(l.uuid)&&(m=this.r$.get(l.uuid),m.delete(k.uuid),0===m.size&&(this.r$.delete(l.uuid),this.TW.delete(l.uuid)));
this.EFc(k,l)}}};b.prototype.RJ=function(k,l){if(this.e0.has(l)){var m=this.e0.get(l);this.e0.set(l,[]);0!==m.length&&(k=k.GA(),null!=k&&k.RJ(m))}};b.prototype.EFc=function(k,l){var m=k.uuid+l.uuid,n=!1,p=this;null!=k.te&&k.te()&&(this.TW.delete(k.uuid),this.x5.delete(k.uuid),this.s5.delete(k.uuid),this.r$.forEach(function(q,r,t){q.delete(k.uuid);0===q.size&&(t.delete(r),p.TW.delete(r))}),n=!0);null!=l.te&&l.te()&&(this.TW.delete(l.uuid),this.r$.delete(l.uuid),this.x5.forEach(function(q,r,t){q.delete(l.uuid);
0===q.size&&(t.delete(r),p.TW.delete(r),p.s5.delete(r))}),this.s5.forEach(function(q,r,t){q.delete(l.uuid);0===q.size&&t.delete(r)}),n=!0);n&&this.e0.delete(m);return n};b.prototype.j4d=function(k,l,m){if(c(k)&&c(l)){var n=k.uuid+l.uuid;if(this.e0.has(n)&&0!==this.e0.get(n).length){var p=this.s5.get(k.uuid).get(l.uuid).preservecolor!==m.preservecolor;m=this.jad(k,l,m);p?this.iHc(k,l,m):(k=this.e0.get(n),this.S$c(k,m))}}};b.prototype.XPd=function(k,l){if(!c(k)||!c(l))return!1;k=k.uuid+l.uuid;return!(!this.e0.has(k)||
0===this.e0.get(k).length)};b.prototype.fQd=function(){for(var k=this.TW.values(),l=k.next();!l.done;){var m=l.value.object.matrixWorld.elements;if(!a(m,l.value.matrixworld,16))return!0;l=k.next()}return!1};b.prototype.R$c=function(){for(var k=[],l=this.TW.entries(),m=l.next();!m.done;){var n=m.value[1].object.matrixWorld.elements;a(n,m.value[1].matrixworld,16)||(k.push(m.value[0]),this.pob&&(m.value[1].matrixworld=n.slice()));m=l.next()}if(0!==k.length){l=[];var p;for(p=0;p<k.length;p++){var q=[];
if(this.r$.has(k[p]))for(m=this.r$.get(k[p]).values(),n=m.next();!n.done;)q.push(n.value),n=m.next();this.x5.has(k[p])&&q.push(k[p]);for(m=0;m<q.length;m++)n=q[m],-1===l.indexOf(n)&&l.push(n)}k=this;for(m=0;m<l.length;m++)if(n=l[m],this.x5.has(n)){p=this.TW.get(n).object;q=this.x5.get(n).values();for(var r=q.next();!r.done;){var t=r.value;r=q.next();if(k.pob)t=k.TW.get(t).object,this.gJa(p,t);else if(t=n+t,k.e0.has(t)&&0!==k.e0.get(t).length){var u=k.f$b(p);null!=u&&k.RJ(u[0],t)}}}}};b.prototype.EGd=
function(){var k={};this.r$.forEach(function(l,m){l.forEach(function(n){d(k,m,n)})});return k};b.prototype.gCd=function(){var k={};this.x5.forEach(function(l,m){l.forEach(function(n){d(k,m,n)})});return k};b.prototype.gJd=function(){return this.x5};b.prototype.HHd=function(){return this.r$};b.prototype.uId=function(){return this.TW};b.prototype.dispose=function(){g=this.e0=this.s5=this.TW=this.r$=this.x5=null;te.prototype.dispose.call(this)};return b}(),2,"eyJnZXREZWZhdWx0SW5zdGFuY2UiOiJ0ZyIsInNldEJhc2VDbGFzcyI6Im1IYiIsInByb3RvdHlwZSI6eyJzIjowLCJjIjp7InNldEF1dG9SZWRyYXciOiJnMGQiLCJpc0F1dG9SZWRyYXdFbmFibGVkIjoiQ1BkIiwiZ2VuZXJhdGVJbnRlcnNlY3Rpb24iOiJnSmEiLCJyZW1vdmVJbnRlcnNlY3Rpb24iOiJoWWQiLCJzZXRQcm9wZXJ0eUJ5SW50ZXJzZWN0aW9uIjoiajRkIiwiaXNJbnRlcnNlY3Rpb25FeGlzdHMiOiJYUGQiLCJpc01hdHJpeFdvcmxkQ2hhbmdlIjoiZlFkIiwidXBkYXRlSW50ZXJzZWN0aW9uIjoiUiRjIiwiZ2V0SW50ZXJzZWN0aW9uR3JvdXAiOiJFR2QiLCJnZXRCYXNlR3JvdXAiOiJnQ2QiLCJnZXRQbGFuZU1hcCI6ImdKZCIsImdldE1lc2hNYXAiOiJISGQiLCJnZXRPYmplY3RNYXAiOiJ1SWQifX19");var kA=/*#__PURE__*/function(){function d(a){fz.call(this);1<arguments.length&&(a={origin:arguments[0],direction:arguments[1]});var b=G(a,{origin:new Hp(0,0,0),direction:new Hp(0,1,0),topcolor:new Pq(65280),bottomcolor:new Pq(16711680),outlinecolor:new Pq(0),showlabels:!0},!0),c=b.origin,e=b.direction;this.position.copy(c);c=[new Hp(0,3,-.5),new Hp(1.5,1,-.5),new Hp(.5,1,-.5),new Hp(.5,-2,-.5),new Hp(-.5,-2,-.5),new Hp(-.5,1,-.5),new Hp(-1.5,1,-.5),new Hp(0,3,0),new Hp(1.5,1,0),new Hp(.5,1,0),new Hp(.5,-2,0),
new Hp(-.5,-2,0),new Hp(-.5,1,0),new Hp(-1.5,1,0),new Hp(0,3,.5),new Hp(1.5,1,.5),new Hp(.5,1,.5),new Hp(.5,-2,.5),new Hp(-.5,-2,.5),new Hp(-.5,1,.5),new Hp(-1.5,1,.5)];var f=[20,14,15,19,16,18,17,10,16,9,15,8,14,7,20,13,19,12,18,11,10],g=[1,0,14,15,1,15,16,17,3,17,18,4,18,19,20,6,20,14,0,6,5,4,3,2,1],h=[],k=[2,1,0,5,4,3,5,6,8,15,13,11,17,9,19,9,20,19,12,10,11,11,13,12,10,4,9,9,11,10,4,6,7,7,9,4,6,5,19,19,7,6,5,3,17,17,19,5,3,0,15,15,17,3,0,1,13,13,15,0],l;for(l=0;l<k.length;l++)h.push(c[f[k[l]]]);
l=new Aq;l.setFromPoints(h);h=new Zt(l,new $t({color:b.topcolor}));h.matrixAutoUpdate=!1;this.add(h);l=l.clone();l.applyMatrix4((new Xt).makeTranslation(0,0,-.5));l=new Zt(l,new $t({color:b.bottomcolor}));l.matrixAutoUpdate=!1;this.add(l);h=new Aq;f=[];for(l=0;l<g.length;l++)f.push(c[g[l]]);h.setFromPoints(f);b=new rt(h,new tt({color:b.outlinecolor}));b.matrixAutoUpdate=!1;this.add(b);this.setDirection(e);this.scale.set(2,2,2)}D(d,fz);L(d,"geotoolkit3d.scene.compass.CompassArrow");d.prototype.setDirection=
function(a){var b=new Hp;.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(b.set(a.z,0,-a.x).normalize(),a=Math.acos(a.y),this.quaternion.setFromAxisAngle(b,a))};return d}();var lA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){var b=G(a,{container:null,camera:null,visible:!0},!0);this.Me=b.container;null==a.renderer&&(a.renderer={});null==a.renderer.parameters&&(a.renderer.parameters={});a=G(a.renderer.parameters,{canvas:b.canvas,alpha:!0});this.fn=new qy(a);this.fn.setPixelRatio(bc());this.fn.setSize(this.Me.offsetWidth,this.Me.offsetHeight);this.mt=new Jp;this.Vb=new $u(60,1,1,2E3);null!=b.camera&&(this.Vb.up=b.camera.up);this.mt.add(this.Vb);this.R1c(new kA);this.Up=b.visible;this.XM=
!0;null!=this.Me&&this.Me.appendChild(this.fn.domElement)}L(d,"geotoolkit3d.scene.compass.Compass");d.prototype.UCd=function(){return this.mpb};d.prototype.R1c=function(a){if(null==a)return this;null!=this.mpb&&this.mt.remove(this.mpb);this.mpb=a;this.mt.add(this.mpb);return this};d.prototype.render=function(a,b){!1!==this.XM&&(this.WBa(a,b),this.Up&&this.fn.render(this.mt,this.Vb))};d.prototype.gg=function(a){this.XM=!0};d.prototype.setSize=function(a,b){this.Vb instanceof $u?this.Vb.aspect=1:(this.Vb.left=
-a,this.Vb.right=a,this.Vb.top=a,this.Vb.bottom=-a);this.Vb.updateProjectionMatrix();isNaN(b)||this.fn.setPixelRatio(b);this.fn.setSize(a,a);null!=this.Me&&(this.Me.style.width=a+"px",this.Me.style.height=a+"px")};d.prototype.WBa=function(){var a=new Hp;return function(b,c){a.set(0,0,1).applyEuler(c.rotation,c.rotation.order);this.Vb.position.copy(a);this.Vb.position.setLength(18);this.Vb.rotation.copy(c.rotation);this.XM=!1}}();d.prototype.dispose=function(){null!=this.mt&&hz.dispose(this.mt.children);
this.mt=null;if(null!=this.fn){null!=this.Me&&this.Me.removeChild(this.fn.domElement);null!=this.fn.dispose&&this.fn.dispose();var a=this.fn.getContext().getExtension("WEBGL_lose_context");a&&a.loseContext()}this.Vb=this.Me=this.fn=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb21wYXNzT2JqZWN0IjoiVUNkIiwic2V0Q29tcGFzc09iamVjdCI6IlIxYyJ9fX0g");var mA=/*#__PURE__*/function(){function d(){this.Me=xc("div");this.Me.style.cssText="position:absolute;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";var b=this;this.Me.addEventListener("click",function(l){l.preventDefault();b.B8c(++a%b.Me.children.length)},!1);var c=($a.performance||Date).now(),e=c,f=0,g=this.W0b(new d.UNb("FPS","#0ff","#002")),h=this.W0b(new d.UNb("MS","#0f0","#020")),k;$a.performance&&$a.performance.memory&&(k=this.W0b(new d.UNb("MB","#f08","#201")));this.B8c(0);return{REVISION:16,
Bx:function(){c=($a.performance||Date).now()},end:function(){f++;var l=($a.performance||Date).now();h.update(l-c,200);if(l>=e+1E3&&(g.update(1E3*f/(l-e),100),e=l,f=0,k)){var m=$a.performance.memory;k.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return l},update:function(){c=this.end()},PMc:function(){return b.Me}}}var a=0;L(d,"geotoolkit3d.util.Stats");d.prototype.W0b=function(b){this.Me.appendChild(b.ezd);return b};d.prototype.B8c=function(b){for(var c=0;c<this.Me.children.length;c++)this.Me.children[c].style.display=
c===b?"block":"none";a=b};d.UNb=function(b,c,e){var f=Infinity,g=0,h=Math.round,k=h(bc()||1),l=80*k,m=48*k,n=3*k,p=2*k,q=3*k,r=15*k,t=74*k,u=30*k,w=wc(l,m,!0);w.style.cssText="width:80px;height:48px";var y=w.getContext("2d");y.font="bold "+9*k+"px Helvetica,Arial,sans-serif";y.textBaseline="top";y.fillStyle=e;y.fillRect(0,0,l,m);y.fillStyle=c;y.fillText(b,n,p);y.fillRect(q,r,t,u);y.fillStyle=e;y.globalAlpha=.9;y.fillRect(q,r,t,u);return{ezd:w,update:function(z,x){f=Math.min(f,z);g=Math.max(g,z);y.fillStyle=
e;y.globalAlpha=1;y.fillRect(0,0,l,r);y.fillStyle=c;y.fillText(h(z)+" "+b+" ("+h(f)+"-"+h(g)+")",n,p);y.drawImage(w,q+k,r,t-k,u,q,r,t-k,u);y.fillRect(q+t-k,r,k,u);y.fillStyle=e;y.globalAlpha=.9;y.fillRect(q+t-k,r,k,h((1-z/x)*u))}}};return d}();var nA=/*#__PURE__*/function(){function d(){}d.Vlb={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = opacity * texel;\n}"};d.Vhd={uniforms:{depthTexture:{value:null},cameraNearFar:{value:new gy(.5,.5)},
textureMatrix:{value:new Xt}},vertexShader:"varying vec4 projTexCoord;\nvarying vec4 vPosition;\nuniform mat4 textureMatrix;\nvoid main() {\n    vPosition = modelViewMatrix * vec4( position, 1.0 );\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    projTexCoord = textureMatrix * worldPosition;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <packing>\nvarying vec4 vPosition;\nvarying vec4 projTexCoord;\nuniform sampler2D depthTexture;\nuniform vec2 cameraNearFar;\nvoid main() {\n    float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n    float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n    float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n    gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n}"};
d.Tdd={uniforms:{maskTexture:{value:null},texSize:{value:new gy(.5,.5)},visibleEdgeColor:{value:new Hp(1,1,1)},hiddenEdgeColor:{value:new Hp(1,1,1)},hiddenLine:{value:!1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D maskTexture;\nuniform vec2 texSize;\nuniform vec3 visibleEdgeColor;\nuniform vec3 hiddenEdgeColor;\nuniform bool hiddenLine;\nvoid main() {\n    vec2 invSize = 1.0 / texSize;\n    vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n    vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n    vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n    vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n    vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n    float diff1 = (c1.r - c2.r)*0.5;\n    float diff2 = (c3.r - c4.r)*0.5;\n    float d = length( vec2(diff1, diff2) );\n    float a1 = min(c1.g, c2.g);\n    float a2 = min(c3.g, c4.g);\n    float visibilityFactor = min(a1, a2);\n    vec4 edgeColor;\n    if (1.0 - visibilityFactor > 0.001) {\n        gl_FragColor = vec4(visibleEdgeColor, 1.0) * vec4(d);\n    } else {\n        gl_FragColor = vec4(hiddenEdgeColor, hiddenLine ? 0.7 : 0.0) * vec4(d);\n    }\n}"};
d.Qid={uniforms:{colorTexture:{value:null},texSize:{value:new gy(.5,.5)},direction:{value:new gy(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <common>\nvarying vec2 vUv;\nuniform sampler2D colorTexture;\nuniform vec2 texSize;\nuniform vec2 direction;\nuniform float kernelRadius;\nfloat gaussianPdf(in float x, in float sigma) {\n    return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\nvoid main() {\n    vec2 invSize = 1.0 / texSize;\n    float weightSum = gaussianPdf(0.0, kernelRadius);\n    vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n    vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n    vec2 uvOffset = delta;\n    for( int i = 1; i <= MAX_RADIUS; i ++ ) {\n        float w = gaussianPdf(uvOffset.x, kernelRadius);\n        vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n        vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n        diffuseSum += ((sample1 + sample2) * w);\n        weightSum += (2.0 * w);\n        uvOffset += delta;\n    }\n    gl_FragColor = diffuseSum / weightSum;\n}"};
d.shd={uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D maskTexture;\nuniform sampler2D edgeTexture1;\nuniform sampler2D edgeTexture2;\nuniform sampler2D patternTexture;\nuniform float edgeStrength;\nuniform float edgeGlow;\nuniform bool usePatternTexture;\nvoid main() {\n    vec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n    vec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n    vec4 maskColor = texture2D(maskTexture, vUv);\n    vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n    float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n    vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n    vec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n    if(usePatternTexture)\n        finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n    gl_FragColor = finalColor;\n}"};
d.Bed={uniforms:{resolution:{value:new gy(1/1024,1/512)},tDiffuse:{value:null}},vertexShader:"varying vec2 vUv;\nvoid main() {\n   vUv = uv;\n   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:'precision highp float;\n\nuniform sampler2D tDiffuse;\n\nuniform vec2 resolution;\n\nvarying vec2 vUv;\n\n// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n//----------------------------------------------------------------------------------\n// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n// SDK Version: v3.00\n// Email:       gameworks@nvidia.com\n// Site:        http://developer.nvidia.com/\n//\n// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  * Redistributions of source code must retain the above copyright\n//    notice, this list of conditions and the following disclaimer.\n//  * Redistributions in binary form must reproduce the above copyright\n//    notice, this list of conditions and the following disclaimer in the\n//    documentation and/or other materials provided with the distribution.\n//  * Neither the name of NVIDIA CORPORATION nor the names of its\n//    contributors may be used to endorse or promote products derived\n//    from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS`` AND ANY\n// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n//----------------------------------------------------------------------------------\n\n#define FXAA_PC 1\n#define FXAA_GLSL_100 0\n#define FXAA_QUALITY_PRESET 39\n\n#define FXAA_GREEN_AS_LUMA 0\n\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_120\n    #define FXAA_GLSL_120 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_130\n    #define FXAA_GLSL_130 1\n#endif\n/*==========================================================================*/\n#ifndef FXAA_GREEN_AS_LUMA\n    //\n    // For those using non-linear color,\n    // and either not able to get luma in alpha, or not wanting to,\n    // this enables FXAA to run using green as a proxy for luma.\n    // So with this enabled, no need to pack luma in alpha.\n    //\n    // This will turn off AA on anything which lacks some amount of green.\n    // Pure red and blue or combination of only R and B, will get no AA.\n    //\n    // Might want to lower the settings for both,\n    //    fxaaConsoleEdgeThresholdMin\n    //    fxaaQualityEdgeThresholdMin\n    // In order to insure AA does not get turned off on colors\n    // which contain a minor amount of green.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_GREEN_AS_LUMA 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_EARLY_EXIT\n    //\n    // Controls algorithm\'s early exit path.\n    // On PS3 turning this ON adds 2 cycles to the shader.\n    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n    // Turning this off on console will result in a more blurry image.\n    // So this defaults to on.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_EARLY_EXIT 1\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_DISCARD\n    //\n    // Only valid for PC OpenGL currently.\n    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n    //\n    // 1 = Use discard on pixels which don\'t need AA.\n    //     For APIs which enable concurrent TEX+ROP from same surface.\n    // 0 = Return unchanged color on pixels which don\'t need AA.\n    //\n    #define FXAA_DISCARD 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_FAST_PIXEL_OFFSET\n    //\n    // Used for GLSL 120 only.\n    //\n    // 1 = GL API supports fast pixel offsets\n    // 0 = do not use fast pixel offsets\n    //\n    #ifdef GL_EXT_gpu_shader4\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifndef FXAA_FAST_PIXEL_OFFSET\n        #define FXAA_FAST_PIXEL_OFFSET 0\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GATHER4_ALPHA\n    //\n    // 1 = API supports gather4 on alpha channel.\n    // 0 = API does not support gather4 on alpha channel.\n    //\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifndef FXAA_GATHER4_ALPHA\n        #define FXAA_GATHER4_ALPHA 0\n    #endif\n#endif\n\n\n/*============================================================================\n                        FXAA QUALITY - TUNING KNOBS\n------------------------------------------------------------------------------\nNOTE the other tuning knobs are now in the shader function inputs!\n============================================================================*/\n#ifndef FXAA_QUALITY_PRESET\n    //\n    // Choose the quality preset.\n    // This needs to be compiled into the shader as it effects code.\n    // Best option to include multiple presets is to\n    // in each shader define the preset, then include this file.\n    //\n    // OPTIONS\n    // -----------------------------------------------------------------------\n    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n    // 39       - no dither, very expensive\n    //\n    // NOTES\n    // -----------------------------------------------------------------------\n    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n    // 13 = about same speed as FXAA 3.9 and better than 12\n    // 23 = closest to FXAA 3.9 visually and performance wise\n    //  _ = the lowest digit is directly related to performance\n    // _  = the highest digit is directly related to style\n    //\n    #define FXAA_QUALITY_PRESET 12\n#endif\n\n\n/*============================================================================\n\n                           FXAA QUALITY - PRESETS\n\n============================================================================*/\n\n/*============================================================================\n                     FXAA QUALITY - MEDIUM DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n\n\n/*============================================================================\n\n                                API PORTING\n\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n    #define FxaaBool bool\n    #define FxaaDiscard discard\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 ivec2\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTex sampler2D\n#else\n    #define FxaaBool bool\n    #define FxaaDiscard clip(-1)\n    #define FxaaFloat float\n    #define FxaaFloat2 float2\n    #define FxaaFloat3 float3\n    #define FxaaFloat4 float4\n    #define FxaaHalf half\n    #define FxaaHalf2 half2\n    #define FxaaHalf3 half3\n    #define FxaaHalf4 half4\n    #define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n    // Requires,\n    //  #version 120\n    // And at least,\n    //  #extension GL_EXT_gpu_shader4 : enable\n    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n    #if (FXAA_FAST_PIXEL_OFFSET == 1)\n        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n    #else\n        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n    #endif\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n    // Requires "#version 130\' or better\n    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*============================================================================\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n/*============================================================================\n\n                             FXAA3 QUALITY - PC\n\n============================================================================*/\n#if (FXAA_PC == 1)\n/*--------------------------------------------------------------------------*/\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy_} = upper left of pixel\n    // {_zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {__a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //   Where N ranges between,\n    //     N = 0.50 (default)\n    //     N = 0.33 (sharper)\n    // {x__} = -N/screenWidthInPixels\n    // {_y_} = -N/screenHeightInPixels\n    // {_z_} =  N/screenWidthInPixels\n    // {__w} =  N/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x__} = -2.0/screenWidthInPixels\n    // {_y_} = -2.0/screenHeightInPixels\n    // {_z_} =  2.0/screenWidthInPixels\n    // {__w} =  2.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x__} =  8.0/screenWidthInPixels\n    // {_y_} =  8.0/screenHeightInPixels\n    // {_z_} = -4.0/screenWidthInPixels\n    // {__w} = -4.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only three safe values here: 2 and 4 and 8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //   8.0 is sharper (default!!!)\n    //   4.0 is softer\n    //   2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only two safe values here: 1/4 and 1/8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //   0.125 leaves less aliasing, but is softer (default!!!)\n    //   0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3,\n    // PS3 was simplified to avoid more shader instructions.\n    //   0.06 - faster but more aliasing in darks\n    //   0.05 - default\n    //   0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //\n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immediates.\n    // Immediates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    #if (FXAA_GATHER4_ALPHA == 1)\n        #if (FXAA_DISCARD == 0)\n            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n            #if (FXAA_GREEN_AS_LUMA == 0)\n                #define lumaM rgbyM.w\n            #else\n                #define lumaM rgbyM.y\n            #endif\n        #endif\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n        #else\n            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n        #endif\n        #if (FXAA_DISCARD == 1)\n            #define lumaM luma4A.w\n        #endif\n        #define lumaE luma4A.z\n        #define lumaS luma4A.x\n        #define lumaSE luma4A.y\n        #define lumaNW luma4B.w\n        #define lumaN luma4B.z\n        #define lumaW luma4B.x\n    #else\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            #define lumaM rgbyM.w\n        #else\n            #define lumaM rgbyM.y\n        #endif\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n        #endif\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        #if (FXAA_DISCARD == 1)\n            FxaaDiscard;\n        #else\n            return rgbyM;\n        #endif\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_GATHER4_ALPHA == 0)\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n        #endif\n    #else\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    #if (FXAA_DISCARD == 1)\n        return FxaaTexTop(tex, posM);\n    #else\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n    #endif\n}\n/*==========================================================================*/\n#endif\n\nvoid main() {\n  gl_FragColor = FxaaPixelShader(\n    vUv,\n    vec4(0.0),\n    tDiffuse,\n    tDiffuse,\n    tDiffuse,\n    resolution,\n    vec4(0.0),\n    vec4(0.0),\n    vec4(0.0),\n    0.75,\n    0.166,\n    0.0833,\n    0.0,\n    0.0,\n    0.0,\n    vec4(0.0)\n  );\n\n  // TODO avoid querying texture twice for same texel\n  gl_FragColor.a = texture2D(tDiffuse, vUv).a;\n}'};
return d}();var oA=/*#__PURE__*/function(){function d(){this.type="AbstractPass";this.$Eb=this.enabled=!0;this.Fra=this.clear=!1}var a=1/256;L(d,"geotoolkit3d.postprocessing.AbstractPass");d.prototype.setSize=Fb;d.prototype.dispose=Fb;d.prototype.render=Fb;d.prototype.ukc=function(b){b.T4b&&b.Lzb&&rb("WARNING: Materials cannot have the property [forceTransparent] and [forceOpaque] both true at the same time ("+b.type+")");if(b.T4b)b.opacity=1,b.transparent=!1;else if(b.Lzb)b.transparent=!0;else{var c=b.pJe||b.defines&&b.defines.ALPHA_TO_COVERAGE,
e=b.opacity<1-a,f=null!=b.alphaMap||null!=b.map&&(b.map.format===yv||b.map.format===zv||b.map.format===Pp);b.transparent=e||c||f}};d.L2a=function(){function b(f){this.Jd=new Zt(e,f)}var c=new Pu(-1,1,1,-1,0,1),e=new bv(2,2);Object.defineProperty(b.prototype,"material",{get:function(){return this.Jd.material},set:function(f){this.Jd.material=f}});b.prototype.dispose=function(){this.Jd.geometry.dispose()};b.prototype.render=function(f){f.render(this.Jd,c)};return b}();return d}();var pA=/*#__PURE__*/function(){function d(a){oA.call(this);this.hb=G(a,{textureid:"tDiffuse"},!0);this.type="ShaderPass";a=this.hb.shader;a instanceof Lw?(this.uniforms=a.uniforms,this.material=a):null!=a&&(this.uniforms=Yx.clone(a.uniforms),this.material=new Lw({defines:Object.assign({},a.defines),uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}));this.gA=new oA.L2a(this.material);this.setOptions(this.hb)}L(d,"geotoolkit3d.postprocessing.ShaderPass");D(d,oA);d.prototype.setOptions=
function(a){this.hb=G(a,this.hb);null!=a.enabled&&(this.enabled=a.enabled);return this};d.prototype.ta=function(){return this.hb};d.prototype.setSize=function(){return this};d.prototype.dispose=function(){null!=this.material&&this.material.dispose()};d.prototype.render=function(a,b,c){this.uniforms[this.hb.textureid]&&(this.uniforms[this.hb.textureid].value=c.texture);this.gA.material=this.material;this.Fra?a.setRenderTarget(null):(a.setRenderTarget(b),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,
a.autoClearStencil));this.gA.render(a)};return d}();var qA=/*#__PURE__*/function(){function d(b,c){this.nG=b;if(void 0===c){c={minFilter:Ct,magFilter:Ct,format:yv,stencilBuffer:!1};var e=b.getSize(new gy);this.K$=b.getPixelRatio();this.jd=e.width;this.td=e.height;c=new oy(this.jd*this.K$,this.td*this.K$,c);c.texture.name="EffectComposer.rt1"}else this.K$=1,this.jd=c.width,this.td=c.height;this.iMa=c;this.jMa=c.clone();this.jMa.texture.name="EffectComposer.rt2";this.mlb=this.iMa;this.readBuffer=this.jMa;this.Fra=!0;this.I7=[];this.gKe=new pA({shader:a.Vlb});this.yvd=
new Nq}var a=nA;L(d,"geotoolkit3d.postprocessing.EffectComposer");d.prototype.setOptions=function(b){return this};d.prototype.Q6d=function(){var b=this.readBuffer;this.readBuffer=this.mlb;this.mlb=b};d.prototype.hVa=function(b){this.I7.push(b);b.setSize(this.jd*this.K$,this.td*this.K$)};d.prototype.rNe=function(b,c){this.I7.splice(c,0,b)};d.prototype.bQd=function(b){for(b+=1;b<this.I7.length;b++)if(this.I7[b].enabled)return!1;return!0};d.prototype.render=function(b){void 0===b&&(b=this.yvd.getDelta());
var c=this.nG.getRenderTarget(),e,f=this.I7.length;for(e=0;e<f;e++){var g=this.I7[e];!1!==g.enabled&&(g.Fra=this.Fra&&this.bQd(e),g.render(this.nG,this.mlb,this.readBuffer,b),g.$Eb&&this.Q6d())}this.nG.setRenderTarget(c)};d.prototype.reset=function(b){void 0===b&&(b=this.nG.getSize(new gy),this.K$=this.nG.getPixelRatio(),this.jd=b.width,this.td=b.height,b=this.iMa.clone(),b.setSize(this.jd*this.K$,this.td*this.K$));this.iMa.dispose();this.jMa.dispose();this.iMa=b;this.jMa=b.clone();this.mlb=this.iMa;
this.readBuffer=this.jMa};d.prototype.dispose=function(){this.iMa.dispose();this.jMa.dispose();this.readBuffer=this.mlb=this.render=null;for(var b=0;b<this.I7.length;b++)this.I7[b].dispose();this.I7=[]};d.prototype.setSize=function(b,c){this.jd=b;this.td=c;b=this.jd*this.K$;c=this.td*this.K$;this.iMa.setSize(b,c);this.jMa.setSize(b,c);for(var e=0;e<this.I7.length;e++)this.I7[e].setSize(b,c);return this};d.prototype.setPixelRatio=function(b){this.K$=b;this.setSize(this.jd,this.td);return this};d.prototype.BCb=
function(){return this.I7};return d}();var rA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){this.ic=b||"processor";this.Uv={};this.MD=0}L(d,"geotoolkit3d.util.ObjectProcessor");var a=null;d.prototype.Ga=function(){return this.ic};d.prototype.nb=function(b){this.ic=b;return this};d.prototype.kib=function(b,c){if(null==b||null==c)return this;this.Uv.hasOwnProperty(b)||this.MD++;this.Uv[b]=c;return this};d.prototype.sdc=function(b){for(var c,e=b;null!=b;){if("function"===typeof b.Pa&&(c=this.Uv[b.Pa()],null!=c))return c(b);b=b.parent}return e};d.tg=function(){null==
a&&(a=new d);return a};d.prototype.ia=function(){var b={};b[this.ic]=this.Uv;b.count=this.MD;return b};d.prototype.QZd=function(){this.MD=0;this.Uv={};this.ic="processor";return this};return d}(),2,"eyJnZXREZWZhdWx0SW5zdGFuY2UiOiJ0ZyIsInByb3RvdHlwZSI6eyJzIjowLCJjIjp7ImdldE5hbWUiOiJHYSIsInNldE5hbWUiOiJuYiIsInJlZ2lzdGVyT2JqZWN0Ijoia2liIiwicHJvY2Vzc09iamVjdCI6InNkYyIsImdldFByb3BlcnRpZXMiOiJpYSIsInJlc2V0UHJvY2Vzc29yIjoiUVpkIn19fSAg");var sA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){oA.call(this);this.H5=[];this.Uv=rA.tg()}D(d,oA);L(d,"geotoolkit3d.posprocessing.AbstractHighlightPass");d.prototype.Bbb=function(){this.H5=[]};d.prototype.Sab=function(a){a=this.Uv.sdc(a);if(Array.isArray(a))for(var b=0;b<a.length;b++)null!=a[b]&&this.H5.push(a[b]);else null!=a&&this.H5.push(a)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjbGVhclNlbGVjdGVkT2JqZWN0cyI6IkJiYiIsImFkZFNlbGVjdGVkT2JqZWN0cyI6IlNhYiJ9fX0g");var tA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){sA.call(this);this.hb=G(b,{resolution:new gy(256,256)},!0);this.$Eb=!1;this.type="HighlightPass";this.setOptions(this.hb)}function a(b,c){for(;null!=b&&!(b instanceof fz);)b=b.parent;null!=b&&b.T1d(c)}D(d,sA);L(d,"geotoolkit3d.posprocessing.HighlighPass");d.prototype.setOptions=function(b){if(null==b)return this;b.hasOwnProperty("highlight")&&(b=G(b,b.highlight),delete b.highlight);this.hb=G(b,this.hb);null!=b.enabled&&(this.enabled=b.enabled);return this};d.prototype.ta=
function(){return this.hb};d.prototype.Bbb=function(){this.H5.forEach(function(b){a(b,!1)});this.H5=[]};d.prototype.Sab=function(b){b=this.Uv.sdc(b);if(Array.isArray(b))for(var c=0;c<b.length;c++)null!=b[c]&&(a(b[c],!0),this.H5.push(b[c]));else null!=b&&(a(b,!0),this.H5.push(b))};d.prototype.render=function(b,c,e,f){};d.prototype.setSize=function(b,c){};d.prototype.dispose=function(){};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJjbGVhclNlbGVjdGVkT2JqZWN0cyI6IkJiYiIsImFkZFNlbGVjdGVkT2JqZWN0cyI6IlNhYiJ9fX0g");var uA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(x){oA.call(this);this.hb=G(x,{clearcolor:0,clearcoloralpha:0,depthpeeling:{enabled:!0,peelinglevel:5},antialias:{enabled:!0}},!0);this.type="DepthPeelingPass";this.hb.antialias.enabled=this.hb.antialias.mode===Ey.nOb;this.setOptions(this.hb);this.pA=x.scene;this.pN=x.camera;this.gJe=[];this.Yvb=2;this.RK=[];this.aEa=this.Rva=void 0;this.DRb=a("depthTexture_1");this.bqb=a("depthTexture_2");this.dub=a("opacity_depthTexture");x=nA.Vlb;this.$Qb=new Lw({uniforms:Yx.clone(x.uniforms),
blending:Cu,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,premultipliedAlpha:!0,transparent:!0,depthTest:!1,depthWrite:!1});this.gA=new oA.L2a(this.$Qb);this.gA.material.uniforms.tDiffuse.value=null;this.pld=new Lw({uniforms:Yx.clone(x.uniforms),blending:yu,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,premultipliedAlpha:!1,transparent:!1,depthTest:!1,depthWrite:!1});this.Lqb=new oA.L2a(this.pld);this.Lqb.material.uniforms.tDiffuse.value=null;this.rqb=new Wx(!1);this.qqb=
new Wx(!1);this.HXb=new Wx(this.bqb);this.eub=new Wx(null);this.Xzc=new Wx(new gy)}function a(x){var C=new yr(0,0,gs);C.format=wr;C.name=x;return C}function b(x,C,A,v){x=new oy(x,C,{format:yv,minFilter:Ct,magFilter:Ct,generateMipmaps:!1,stencilBuffer:!1,depthBuffer:!0,depthTexture:v});x.texture.name="RenderTarget_"+A;return x}function c(x,C){x.forEach(function(A){C?(A.blending=kr,A.blendEquation=Lp,A.blendSrc=ix,A.blendDst=xy,A.blendEquationAlpha=Lp,A.blendSrcAlpha=Ku,A.blendDstAlpha=xy):(A.blending=
A.Pxa.blending,A.blendEquation=A.Pxa.blendEquation,A.blendSrc=A.Pxa.blendSrc,A.blendDst=A.Pxa.blendDst,A.blendEquationAlpha=A.Pxa.blendEquationAlpha,A.blendSrcAlpha=A.Pxa.blendSrcAlpha,A.blendDstAlpha=A.Pxa.blendDstAlpha)})}function e(x,C){x.forEach(function(A){switch(C){case f:A.visible=!A.transparent;break;case g:A.visible=A.transparent;break;default:A.visible=A.Mld}})}var f=1,g=2,h=3,k=new Pq(0),l=vd.fZa()?.001:1E-7,m="depthPeelingEnabled",n="ignoreDepthTest",p="enablePeelingDiscard",q="peelingDepthTexture",
r="opaqueGeometryDepthTexture",t="renderResolution",u="#if __VERSION__ >= 300",w="#endif";Jw.clipping_planes_pars_fragment=[Jw.clipping_planes_pars_fragment,u,"uniform bool "+m+";","uniform bool "+n+";","uniform bool "+p+";","uniform sampler2D "+q+";","uniform sampler2D "+r+";",w,"#define VARIABLE_RENDER_RESOLUTION","uniform vec2 "+t+";"].join("\n");var y="currentDepth",z=Jw.logdepthbuf_fragment;z=z.replace("gl_FragDepthEXT",y);Jw.clipping_planes_fragment=[Jw.clipping_planes_fragment,u,"if ("+m+" || "+
p+" && "+n+") {","   float "+y+" = gl_FragCoord.z;",z,"   ivec2 intFragCoord = ivec2(gl_FragCoord.xy);\n   bool isNotDeeper = false;\n   bool isOccluded = false;","   if ("+m+") {","      isNotDeeper = "+y+" <= texelFetch("+q+", intFragCoord, 0).x + "+l+";","   }","   if ("+p+") {","      isOccluded = "+y+" >= texelFetch("+r+", intFragCoord, 0).x;","   }\n   if(isNotDeeper || isOccluded) discard;\n}",w].join("\n");L(d,"geotoolkit3d.postprocessing.DepthPeelingPass");D(d,oA);d.prototype.setOptions=
function(x){if(!x)return this;this.hb=G(x,this.hb);x.depthpeeling&&null!=x.depthpeeling.peelinglevel&&this.a1d(x.depthpeeling.peelinglevel);return this};d.prototype.ta=function(){return this.hb};d.prototype.setSize=function(x,C){this.hb.antialias.enabled&&(x*=this.Yvb,C*=this.Yvb);this.Xzc.value.set(x,C);if(this.RK)for(var A=this.RK.length,v=0;v<A;v++)this.RK[v].setSize(x,C);this.Rva&&(this.Rva.setSize(x,C),this.aEa.setSize(x,C));return this};d.prototype.dispose=function(){this.IIc();this.DRb&&this.DRb.dispose();
this.bqb&&this.bqb.dispose();this.dub&&this.dub.dispose()};d.prototype.IIc=function(){if(this.RK&&0<this.RK.length){for(var x=this.RK.length,C=0;C<x;C++)this.RK[C].dispose();this.RK=[]}this.Rva&&this.Rva.dispose();this.aEa&&this.aEa.dispose()};d.prototype.a1d=function(x){this.vtc=Math.max(x,2)};d.prototype.Uwd=function(x,C){this.hb.antialias.enabled&&(x*=this.Yvb,C*=this.Yvb);var A=this.vtc+1;if(this.RK.length!==A){this.IIc();for(var v=!0,B=0;B<A;B++){var E=v?this.DRb:this.bqb,H="transparency_target_"+
B;this.RK[B]=b(x,C,H,E);v=!v}}this.Rva||(this.Rva=b(x,C,"opacity_target",this.dub));this.aEa||(this.aEa=b(x,C,"composition_target",null))};d.prototype.QNa=function(x){if(!x.bTd){x.bTd=!0;var C=this,A=x.onBeforeCompile;x.onBeforeCompile=function(v,B){void 0===v.uniforms&&(v.uniforms={});var E=x.depthFunc===lt||x.depthFunc===kt;E=x.depthWrite&&x.depthTest&&E;v.uniforms[m]=C.rqb;v.uniforms[p]=C.qqb;v.uniforms[r]=C.eub;v.uniforms[n]={value:E};v.uniforms[q]=C.HXb;v.uniforms[t]=C.Xzc;x.needsUpdate=!0;"undefined"!==
typeof A&&"function"===typeof A&&A.apply(this,[v,B])}}};d.prototype.V7d=function(x){var C=this;x.traverse(function(A){if(void 0!==A.material)if(Array.isArray(A.material))for(var v=0;v<A.material.length;v++)C.QNa(A.material[v]);else C.QNa(A.material)})};d.prototype.cEc=function(x,C){x.push(C);C.Mld=C.visible;C.Pxa||(C.Pxa={blending:C.blending,blendEquation:C.blendEquation,blendSrc:C.blendSrc,blendDst:C.blendDst,blendEquationAlpha:C.blendEquationAlpha,blendSrcAlpha:C.blendSrcAlpha,blendDstAlpha:C.blendDstAlpha});
this.ukc(C)};d.prototype.htd=function(x){var C=[],A=this;x.traverseVisible(function(v){if(void 0!==v.material)if(Array.isArray(v.material))for(var B=0;B<v.material.length;B++)A.cEc(C,v.material[B]);else A.cEc(C,v.material)});return C};d.prototype.xib=function(x,C,A){A&&(this.HXb.value=A.depthTexture);x.setRenderTarget(C);x.clear();x.render(this.pA,this.pN)};d.prototype.render=function(x,C,A){this.V7d(this.pA);this.Uwd(A.width,A.height);A=x.autoClear;x.autoClear=!1;var v=this.pA.background;this.pA.background=
null;if(this.hb.depthpeeling.enabled){x.setClearColor(k,0);var B=this.vtc-1,E=this.htd(this.pA);this.rqb.value=!1;this.qqb.value=!1;this.eub.value=null;e(E,f);this.xib(x,this.Rva);this.eub.value=this.dub;this.qqb.value=!0;e(E,g);c(E,!0);this.xib(x,this.RK[0]);this.rqb.value=!0;for(var H=1;H<B;H++)this.xib(x,this.RK[H],this.RK[H-1]);c(E,!1);this.xib(x,this.RK[B],this.RK[B-1]);e(E,h);this.rqb.value=!1;this.qqb.value=!1;this.eub.value=null;this.HXb.value=null;x.setRenderTarget(this.aEa);x.setClearColor(this.hb.clearcolor,
this.hb.clearcoloralpha);this.pA.background=v;x.clear();this.gA.material.uniforms.tDiffuse.value=this.Rva.texture;this.gA.render(x);for(v=B;0<=v;v--)this.gA.material.uniforms.tDiffuse.value=this.RK[v].texture,this.gA.render(x);x.setRenderTarget(this.Fra?null:C);this.Lqb.material.uniforms.tDiffuse.value=this.aEa.texture}else x.setClearColor(this.hb.clearcolor,this.hb.clearcoloralpha),this.xib(x,this.RK[0]),this.pA.background=v,x.setRenderTarget(this.Fra?null:C),x.clear(),this.Lqb.material.uniforms.tDiffuse.value=
this.RK[0].texture;this.Lqb.render(x);x.autoClear=A};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var vA=/*#__PURE__*/function(){function d(c){oA.call(this);this.hb=G(c,{clearcolor:0,clearcoloralpha:0,unbiased:!0,samplelevel:2},!0);this.type="SSAARenderPass";this.pA=c.scene;this.pN=c.camera;c=b.Vlb;this.Vta=Yx.clone(c.uniforms);this.pga=null;this.$Qb=new Lw({uniforms:this.Vta,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:Op,depthTest:!1,depthWrite:!1});this.gA=new oA.L2a(this.$Qb);this.setOptions(this.hb)}var a=new Pq,b=nA;L(d,"geotoolkit3d.postprocessing.SSAARenderPass");
D(d,oA);d.prototype.setOptions=function(c){if(null==c)return this;c.hasOwnProperty("antialias")&&(c=G(c,c.antialias),delete c.antialias);this.hb=G(c,this.hb);null!=c.enabled&&(this.enabled=c.enabled);return this};d.prototype.ta=function(){return this.hb};d.prototype.setSize=function(c,e){this.pga&&this.pga.setSize(c,e);return this};d.prototype.dispose=function(){this.pga&&(this.pga.dispose(),this.pga=null)};d.prototype.F8d=function(c){var e=this;c.traverseVisible(function(f){if(void 0!==f.material)if(Array.isArray(f.material))for(var g=
0;g<f.material.length;g++)e.ukc(f.material[g]);else e.ukc(f.material)})};d.prototype.render=function(c,e,f){var g=f.width;f=f.height;this.F8d(this.pA);null==this.pga&&(this.pga=new oy(g,f,{minFilter:Ct,magFilter:Ct,format:yv}),this.pga.texture.name="SSAARenderPass.sample");var h=d.Xfd[Math.max(0,Math.min(this.hb.samplelevel,5))],k=c.autoClear;c.autoClear=!1;var l=c.getClearColor(a).getHex(),m=c.getClearAlpha(),n=1/h.length,p=.03125;this.Vta.tDiffuse.value=this.pga.texture;for(var q=0;q<h.length;q++){var r=
h[q];this.pN.setViewOffset&&this.pN.setViewOffset(g,f,.0625*r[0],.0625*r[1],g,f);r=n;if(this.hb.unbiased){var t=-.5+(q+.5)/h.length;r+=p*t}this.Vta.opacity.value=r;c.setClearColor(this.hb.clearcolor,this.hb.clearcoloralpha);c.setRenderTarget(this.pga);c.clear();c.render(this.pA,this.pN);c.setRenderTarget(this.Fra?null:e);0===q&&(c.setClearColor(0,0),c.clear());this.gA.render(c)}this.pN.clearViewOffset&&this.pN.clearViewOffset();c.autoClear=k;c.setClearColor(l,m)};d.Xfd=[[[0,0]],[[4,4],[-4,-4]],[[-2,
-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];return d}();var wA=/*#__PURE__*/function(){function d(){}d.KZ=new Hp(.5,.5,.5);d.Wlb={x:{start:new Hp(-1,-1,-1),end:new Hp(-1,1,1)},y:{start:new Hp(-1,-1,-1),end:new Hp(1,-1,1)},z:{start:new Hp(-1,-1,-1),end:new Hp(1,1,-1)}};d.Plane={right:{normal:new Hp(-1,0,0),axis:{y:"y",z:"z"}},left:{normal:new Hp(1,0,0),axis:{y:"y",z:"z"}},top:{normal:new Hp(0,0,-1),axis:{x:"x",y:"y"}},bottom:{normal:new Hp(0,0,1),axis:{x:"x",y:"y"}},front:{normal:new Hp(0,1,0),axis:{x:"x",z:"z"}},back:{normal:new Hp(0,-1,0),axis:{x:"x",z:"z"}}};d.UEb=
function(a,b){a.x=0!==b.x?b.x:a.x;a.y=0!==b.y?b.y:a.y;a.z=0!==b.z?b.z:a.z};return d}();var xA=/*#__PURE__*/function(){function d(a){Aq.call(this);this.vd=a.axis;var b=a.counts,c=a.normal,e=wA.Wlb[this.vd].start.clone(),f=wA.Wlb[this.vd].end.clone();c=c.clone().negate();wA.UEb(e,c);wA.UEb(f,c);e=(new Hp).multiplyVectors(wA.KZ,e);f=(new Hp).multiplyVectors(wA.KZ,f);a=a.isaxis?0:1;e[this.vd]+=a/(b[this.vd]-1);f[this.vd]+=a/(b[this.vd]-1);c=[];for(var g=a;g<b[this.vd]-a;g+=1)c.push(e.clone()),c.push(f.clone()),e[this.vd]+=1/(b[this.vd]-1),f[this.vd]+=1/(b[this.vd]-1);0===c.length&&(c.push(e.clone()),
c.push(e.clone()));this.setFromPoints(c)}D(d,Aq);L(d,"geotoolkit3d.scene.grid.GridAxisGeometry");d.prototype.DA=function(){return this.vd};return d}();var yA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){fz.call(this);this.Fg(!1);this.hb=G(b,{});this.vd=this.hb.axis;this.k0d(this.hb);this.name="GRIDTEXTS"}function a(b,c,e,f,g,h,k){e=new gz(e,{style:f,dontmanuallyupdate:!0,outline:k});e.position.copy(g);e.userData.anchor=c;e.visible=!1;isNaN(h)||(g[b]+=h);e.Ls=function(){return!1};return e}D(d,fz);L(d,"geotoolkit3d.scene.grid.GridAxisTexts");d.prototype.k0d=function(b){var c=b.axis,e=b.textstyles[c],f=b.start,g=b.end,h=b.formatters[c],k=b.labeldistance||3,l=wA.Wlb[c].start.clone(),
m=wA.Wlb[c].end.clone(),n=g[c]-f[c],p=(g[c]-f[c])/(b.counts[c]-1);g=b.plane.normal.clone().negate();wA.UEb(l,g);wA.UEb(m,g);l=(new Hp).multiplyVectors(wA.KZ,l);m=(new Hp).multiplyVectors(wA.KZ,m);g=l.clone();for(var q=m.clone(),r=[],t=[],u=[],w=0,y=0;y<b.counts[c];y+=1){var z=y*p;z=h(f[c]+z,n)+"";w=Math.max(w,z.length);u.push(z)}for(f=0;f<b.counts[c];f+=1)n=1/(b.counts[c]-1),2>b.counts[c]-f&&(n*=b.counts[c]-f-1),h=a(c,Dy.start,u[f],e,g,n,b.outlines[c]),n=a(c,Dy.end,u[f],e,q,n,b.outlines[c]),p=k*Math.pow(w/
u[f].length,1.2),h.Mib(new gy(p,k)),n.Mib(new gy(p,k)),r.push(h),t.push(n);this.l0d(b,r,l,m);this.qDc(r);this.qDc(t)};d.prototype.l0d=function(b,c,e,f){var g=b.axis,h=b.title.texts[g];if(0!==h.length){var k=b.title.textstyles[g],l=b.title.distance,m=c.length/2,n=new Hp(1,1,1);if(Math.floor(m)!==Math.ceil(m)){var p=c[Math.floor(m)];c=c[Math.ceil(m)];null!=p&&null!=c&&(n=p.scale.clone(),n.add(c.scale.clone()));n.multiplyScalar(1.5*l)}else{p=-1;m=Number.NEGATIVE_INFINITY;for(var q=0;q<c.length;q++){var r=
c[q].scale.lengthSq();r>m&&(p=q,m=r)}c=c[p];null!=c&&(n=c.scale.clone());n.multiplyScalar(2*l)}e=e.clone();e[g]=0;e=a(g,Dy.start,h,k,e,Number.NaN,b.title.outlines[g]);e.Mib(new gy(n.x,n.y));this.add(e);f=f.clone();f[g]=0;b=a(g,Dy.end,h,k,f,Number.NaN,b.title.outlines[g]);b.Mib(new gy(n.x,n.y));this.add(b)}};d.prototype.qDc=function(b){2<=b.length&&(this.add(b[0]),this.add(b[b.length-1]),b.splice(0,1),b.splice(b.length-1,1));0!==b.length%2&&(this.add(b[Math.floor(b.length/2)]),b.splice(Math.floor(b.length/
2),1));for(var c=0;c<b.length/2;c++)this.add(b[c]),this.add(b[b.length-1-c])};d.prototype.Yu=function(b,c,e){if(this.Up=e)for(var f=0;f<this.children.length;f++)null!=b&&this.children[f].userData.anchor!==b||null==c?this.children[f].visible=!1:(this.children[f].visible=e,this.children[f].AMa(c))};d.prototype.SLd=function(b,c,e,f){if(!this.visible)return null;for(var g=0;g<this.children.length;g++)this.children[g].ui(b,c,e,f,!0);return{children:this.children,isaxis:this.hb.isaxis}};d.prototype.lWd=
function(b,c,e,f){if(this.visible)for(var g=0;g<this.children.length;g++)this.children[g].ui(b,c,e,f,!0)};d.prototype.DA=function(){return this.hb.axis};d.prototype.jb=function(){return this.hb.textstyles[this.vd]};d.prototype.Ix=function(){return this.hb.outlines[this.vd]};d.prototype.mn=function(){return this.hb.title.texts[this.vd]};d.prototype.uia=function(){return this.hb.title.distance};d.prototype.Y6=function(){return this.hb.title.textstyles[this.vd]};d.prototype.ySc=function(){return this.hb.title.outlines[this.vd]};
d.prototype.iba=function(){return this.hb.formatters[this.vd]};d.prototype.$C=function(){return this.hb.start};d.prototype.CH=function(){return this.hb.end};d.prototype.vya=function(){return this.hb.counts};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBeGlzIjoiREEiLCJnZXRUZXh0U3R5bGUiOiJqYiIsImdldE91dGxpbmUiOiJJeCIsImdldFRpdGxlIjoibW4iLCJnZXRUaXRsZURpc3RhbmNlRmFjdG9yIjoidWlhIiwiZ2V0VGl0bGVUZXh0U3R5bGUiOiJZNiIsImdldFRpdGxlT3V0bGluZSI6InlTYyIsImdldEZvcm1hdHRlciI6ImliYSIsImdldFN0YXJ0IjoiJEMiLCJnZXRFbmQiOiJDSCIsImdldENvdW50cyI6InZ5YSJ9fX0g");var zA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{vertexShader:Ty.i3a,fragmentShader:Ty.h3a,uniforms:Yx.clone(Kw.basic.uniforms)});Cz.call(this,a);this.isMeshBasicMaterial=!0;this.type="MeshColorMapBasicMaterial";this.clipping=!0;this.setOptions(a)}D(d,Cz);L(d,"geotoolkit3d.scene.MeshColorMapBasicMaterial");d.prototype.setOptions=function(a){Cz.prototype.setOptions.call(this,a);a=G(a,{alphaMap:this.alphaMap,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,color:this.color,map:this.map,wireframe:this.wireframe,
wireframeLinecap:this.wireframeLinecap,wireframeLinejoin:this.wireframeLinejoin});this.alphaMap=a.alphaMap;this.aoMap=a.aoMap;this.aoMapIntensity=null!=a.aoMapIntensity?a.aoMapIntensity:1;this.color=a.color?new Pq(a.color):new Pq(16777215);this.map=a.map;this.wireframe=null!=a.wireframe?a.wireframe:!1;this.wireframeLinecap=a.wireframeLinecap||"round";this.wireframeLinejoin=a.wireframeLinejoin||"round";Ty.M5c(this,a);return this};d.prototype.ta=function(){var a=Cz.prototype.ta.call(this);a.alphaMap=
this.alphaMap;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.color=this.color;a.map=this.map;a.wireframe=this.wireframe;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;return a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(zA.Pa(),mz);var AA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(l){fz.call(this);this.Fg(!1);this.G$=[];a(this,l)}function a(l,m){l.en=m.plane;l.mode=m.mode;var n=wA.Plane[l.en],p=m.counts,q=m.axis.linestyles,r=m.grid.linestyles,t=Object.keys(n.axis),u=0<m.opacity,w;for(w=0;w<l.G$.length;w++)l.G$[w]&&(l.remove(l.G$[w]),hz.dispose(l.G$[w]));l.G$=[];for(w=0;w<t.length;w++)l.G$.push(e(t[w],h,n,q[t[w]],g,u)),l.G$.push(e(t[w],p,n,r[t[w]],f,u)),l.G$.push(c(t[w],n,m,p));u&&l.G$.push(b(n,m.color,m.opacity));for(w=0;w<l.G$.length;w++)l.add(l.G$[w]);
l.name="GRIDPLANE";l.userData.plane=l.en}function b(l,m,n){m instanceof Pq||(m=new Pq(m));var p=l.axis;m=new Zt(new cv,new zA({color:m,opacity:n,transparent:1>n}));m.scale.set(k,k,1);p.x&&p.z?m.rotation.set(.5*Math.PI,0,0):p.y&&p.z&&m.rotation.set(0,.5*Math.PI,0);m.position.copy(l.normal).multiplyScalar(-.5*k);return m}function c(l,m,n,p){return new yA({axis:l,plane:m,start:n.start,end:n.end,counts:p,textstyles:n.axis.textstyles,formatters:n.axis.formatters,title:n.title,labeldistance:n.axis.distance,
outlines:n.axis.outlines})}function e(l,m,n,p,q,r){m=new xA({axis:l,counts:m,normal:n.normal,isaxis:q===g});n=Pd.Rg(p.mb());var t=p.hi();Array.isArray(t)&&!t.length&&(t=null);r=new ez({data:{positions:m.getAttribute("position").array},linewidth:p.ca(),color:new Pq(n.Xj()/255,n.Wj()/255,n.Vj()/255),opacity:n.Ik()/255,dashscale:250,dashsize:t?t[0]:1,gapsize:t?t[1]:1,dashed:t?!0:!1,polygonoffset:r,polygonoffsetfactor:.75});r.userData.axis=l;r.userData.linestyle=p;r.name=q;r.computeLineDistances();r.raycast=
function(u,w){};return r}var f="GRIDLINE",g="AXISLINE",h=new Hp(2,2,2),k=1.0018;D(d,fz);L(d,"geotoolkit3d.scene.grid.GridPlane");d.prototype.setOptions=function(l){a(this,l)};d.prototype.$C=function(){var l=null;this.traverse(function(m){m instanceof yA&&(l=m.$C())});return l};d.prototype.vya=function(){var l=null;this.traverse(function(m){m instanceof yA&&(l=m.vya())});return l};d.prototype.Epa=function(){var l={};this.traverse(function(m){m instanceof ez&&m.name===f&&(l[m.userData.axis]=m.userData.linestyle)});
return l};d.prototype.ppa=function(){var l={};this.traverse(function(m){m instanceof ez&&m.name===g&&(l[m.userData.axis]=m.userData.linestyle)});return l};d.prototype.zR=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.jb())});return l};d.prototype.fKa=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.Ix())});return l};d.prototype.JL=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.mn())});return l};d.prototype.uia=function(){var l;
this.traverse(function(m){m instanceof yA&&(l=m.uia())});return l};d.prototype.Hfb=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.Y6())});return l};d.prototype.wKa=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.ySc())});return l};d.prototype.opa=function(){var l={};this.traverse(function(m){m instanceof yA&&(l[m.DA()]=m.iba())});return l};d.prototype.cq=function(){return this.mode};d.prototype.CH=function(){var l=null;this.traverse(function(m){m instanceof
yA&&(l=m.CH())});return l};d.prototype.Yu=function(l,m,n,p){for(var q=0;q<this.children.length;q++)this.children[q]instanceof yA&&(null!=l&&this.children[q].DA()!==l||this.children[q].Yu(m,n,p))};d.prototype.CZ=function(l,m){l=this.mode(this,l,m);for(m=0;m<this.children.length;m++)this.children[m]instanceof yA||(this.children[m].visible=l)};d.prototype.IFd=function(l,m,n,p){for(var q=[],r=[],t=0;t<this.children.length;t++)if(this.children[t]instanceof yA){var u=this.children[t].SLd(l,m,n,p);if(null!=
u){var w=r;u.isaxis&&(w=q);for(var y=0;y<u.children.length;y++)w.push(u.children[y])}}return{nofilter:q,filter:r}};d.prototype.lRe=function(l,m,n,p){for(var q=0;q<this.children.length;q++)this.children[q]instanceof yA&&this.children[q].lWd(l,m,n,p)};d.prototype.dispose=function(){fz.prototype.dispose.call(this);for(var l=0;l<this.children.length;l++)this.children[l]&&hz.dispose(this.children[l])};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPdXRsaW5lcyI6ImZLYSIsImdldFRpdGxlT3V0bGluZXMiOiJ3S2EifX19");var BA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){this.hL=this.PT=this.GQ=this.fL=this.hJ=this.eL=this.gJ=this.VF=this.pE=0}L(d,"geotoolkit3d.transformation.XYCoordinates");d.prototype.validate=function(){if(null==this.pE){var b=Wy.Ebb(this.gJ,this.eL,this.hJ,this.fL,this.GQ,this.PT);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.pE=b.x;this.VF=b.y}else if(null==this.gJ){b=Wy.Ebb(this.pE,this.VF,this.hJ,this.fL,this.GQ,this.PT);if(null==b)throw Error("Given XY values do not belong to a rectangle");
this.gJ=b.x;this.eL=b.y}else if(null==this.hJ){b=Wy.Ebb(this.gJ,this.eL,this.pE,this.VF,this.GQ,this.PT);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.hJ=b.x;this.fL=b.y}else if(null==this.GQ){b=Wy.Ebb(this.gJ,this.eL,this.hJ,this.fL,this.pE,this.VF);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.GQ=b.x;this.PT=b.y}null==this.hL&&(this.hL=0)};d.prototype.hBd=function(b){this.pE=b.x0;this.VF=b.y0;this.gJ=b.x1;this.eL=b.y1;this.hJ=b.x2;this.fL=
b.y2;this.GQ=b.x3;this.PT=b.y3;this.hL=null!=b.z0?b.z0:0;this.Wga=null!=b.z1?b.z1:this.hL;this.validate();return this};d.prototype.$4b=function(b){this.pE=null!=b.p0?b.p0.x:null;this.VF=null!=b.p0?b.p0.y:null;this.gJ=null!=b.p1?b.p1.x:null;this.eL=null!=b.p1?b.p1.y:null;this.hJ=null!=b.p2?b.p2.x:null;this.fL=null!=b.p2?b.p2.y:null;this.GQ=null!=b.p3?b.p3.x:null;this.PT=null!=b.p3?b.p3.y:null;this.hL=null!=b.z0?b.z0:0;this.Wga=null!=b.z1?b.z1:this.hL;this.validate();return this};d.prototype.zxa=function(){return new uq(new Hp(Math.min(Math.min(this.pE,
this.gJ),Math.min(this.hJ,this.GQ)),Math.min(Math.min(this.VF,this.eL),Math.min(this.fL,this.PT)),this.hL),new Hp(Math.max(Math.max(this.pE,this.gJ),Math.max(this.hJ,this.GQ)),Math.max(Math.max(this.VF,this.eL),Math.max(this.fL,this.PT)),this.Wga))};d.prototype.fha=function(){return new uq(new Hp(Math.min(Math.min(this.pE,this.gJ),Math.min(this.hJ,this.GQ)),Math.min(Math.min(this.VF,this.eL),Math.min(this.fL,this.PT)),-this.Wga),new Hp(Math.max(Math.max(this.pE,this.gJ),Math.max(this.hJ,this.GQ)),
Math.max(Math.max(this.VF,this.eL),Math.max(this.fL,this.PT)),-this.hL))};var a=new gy;d.myb=function(b,c,e){a.subVectors(e,b);b=c.dot(a);return 0>b};d.getNormal=function(b,c,e){a.subVectors(c,b);b=e.clone();b.x=-e.y;b.y=e.x;0>b.dot(a)&&(b.x=-b.x,b.y=-b.y);return b};d.prototype.sEb=function(b){var c=Math.min(this.hL,this.Wga),e=Math.max(this.hL,this.Wga),f=new gy(b.x,b.y);if(b.z<c||b.z>e)return!1;null==this.Wd&&(this.Wd=new gy(0,0,0),this.Wd.x=(this.pE+this.gJ+this.hJ+this.GQ)/4,this.Wd.y=(this.VF+
this.eL+this.fL+this.PT)/4);null==this.Pxc&&(b=new gy(this.gJ-this.pE,this.eL-this.VF),this.oub=new gy(this.pE,this.VF),this.Pxc=d.getNormal(this.oub,this.Wd,b));null==this.Rxc&&(b=new gy(this.hJ-this.gJ,this.fL-this.eL),this.nA=new gy(this.gJ,this.eL),this.Rxc=d.getNormal(this.nA,this.Wd,b));null==this.Sxc&&(b=new gy(this.GQ-this.hJ,this.PT-this.fL),this.nB=new gy(this.hJ,this.fL),this.Sxc=d.getNormal(this.nB,this.Wd,b));null==this.Qxc&&(b=new gy(this.GQ-this.pE,this.PT-this.VF),this.Qxc=d.getNormal(this.oub,
this.Wd,b));return d.myb(this.oub,this.Pxc,f)||d.myb(this.nA,this.Rxc,f)||d.myb(this.nB,this.Sxc,f)||d.myb(this.oub,this.Qxc,f)?!1:!0};d.prototype.G6b=function(){return-this.hL};d.prototype.H6b=function(){return-this.Wga};d.prototype.gia=function(){return new Hp(this.pE,this.VF,this.hL)};d.prototype.Qh=function(){return new Hp(this.gJ,this.eL,this.hL)};d.prototype.oi=function(){return new Hp(this.hJ,this.fL,this.hL)};d.prototype.hza=function(){return new Hp(this.GQ,this.PT,this.hL)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJmcm9tSlNPTlhZIjoiaEJkIiwiZnJvbUpTT05Qb2ludHMiOiIkNGIiLCJhc0JveDMiOiJ6eGEiLCJhc0VsZXZhdGlvbkJveDMiOiJmaGEiLCJpc1BvaW50SW5zaWRlIjoic0ViIn19fSAg");var CA=/*#__PURE__*/function(){function d(a,b){this.cr=a;this.Zea=b}L(d,"geotoolkit3d.transformation.XYToXY");d.prototype.rVa=function(a){var b=this.cr.G6b(),c=this.cr.H6b(),e=this.Zea.G6b(),f=this.Zea.H6b();b=[new Hp(this.cr.gia().x,this.cr.gia().y,b),new Hp(this.cr.Qh().x,this.cr.Qh().y,b),new Hp(this.cr.oi().x,this.cr.oi().y,c),new Hp(this.cr.hza().x,this.cr.hza().y,b)];e=[new Hp(this.Zea.gia().x,this.Zea.gia().y,e),new Hp(this.Zea.Qh().x,this.Zea.Qh().y,e),new Hp(this.Zea.oi().x,this.Zea.oi().y,f),new Hp(this.Zea.hza().x,
this.Zea.hza().y,e)];a.updateMatrix();a.applyMatrix4(Wy.Fec(b,e))};return d}();var DA=/*#__PURE__*/ta(/*#__PURE__*/{box:function(){return function(d,a,b){return!0}}(),XTd:function(){var d=new Hp,a=new Hp,b=new Hp;return function(c,e,f){c.worldToLocal(d.copy(f.position));a.copy(wA.Plane[c.userData.plane].normal);b.copy(wA.KZ).multiply(a.negate());a.copy(wA.Plane[c.userData.plane].normal);return a.dot(d)>=a.dot(b)}}(),back:function(){var d=new Hp;return function(a,b,c){a.worldToLocal(d.copy(c.position));b=wA.Plane[a.userData.plane].normal.dot(d);return"bottom"===a.userData.plane||"left"===a.userData.plane?
-.01<=b:.01<b}}()},2,"eyJvcGVuYm94IjoiWFRkIn0g"),EA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(C){fz.call(this);this.Fg(!1);null==C.axis&&(C.axis={});null==C.grid&&(C.grid={});null==C.title&&(C.title={});C.axis=G(C.axis,{textstyles:e,linestyles:b,formatters:h,outlines:f});C.title=G(C.title,{textstyles:g,texts:k,outlines:f});C.grid=G(C.grid,{linestyles:c});C.grid.linestyles=G(C.grid.linestyles,c.clone());C.axis.linestyles=G(C.axis.linestyles,b.clone());C.axis.textstyles=G(C.axis.textstyles,e.clone());C.axis.formatters=G(C.axis.formatters,h.clone());
C.axis.distance=C.axis.distance||2;C.title.texts=G(C.title.texts,k.clone());C.title.textstyles=G(C.title.textstyles,g.clone());C.title.distance=C.title.distance||1;C=G(C,{start:new Hp(-1,-1,-1),end:new Hp(1,1,1),counts:new Hp(5,5,5),modelstart:C.start?C.start:new Hp(-1,-1,-1),modelend:C.end?C.end:new Hp(1,1,1),mode:DA.back,planecolor:"transparent",planeopacity:0},!0);this.vf={};this.setOptions(C);this.name="GRID"}function a(C,A){var v=0;A=Math.abs(A);5>A&&(v=1);1>A&&(v=2);.5>A&&(v=3);return C.toFixed(v)}var b={x:new Y("white",1.5),y:new Y("white",1.5),z:new Y("white",1.5),clone:function(){return{x:b.x,y:b.y,z:b.z}}},c={x:new Y("grey",2),y:new Y("grey",2),z:new Y("grey",2),clone:function(){return{x:c.x,y:c.y,z:c.z}}},e={x:new Fi({color:"white",font:"11px Arial"}),y:new Fi({color:"white",font:"11px Arial"}),z:new Fi({color:"white",font:"11px Arial"}),clone:function(){return{x:e.x,y:e.y,z:e.z}}},f={x:null,y:null,z:null,clone:function(){return{x:f.x,y:f.y,z:f.z}}},g={x:new Fi({color:"white",font:"13px Arial"}),
y:new Fi({color:"white",font:"13px Arial"}),z:new Fi({color:"white",font:"13px Arial"}),clone:function(){return{x:g.x,y:g.y,z:g.z}}},h={x:a,y:a,z:a,clone:function(){return{x:h.x,y:h.y,z:h.z}}},k={x:"X",y:"Y",z:"Z",clone:function(){return{x:k.x,y:k.y,z:k.z}}};D(d,fz);L(d,"geotoolkit3d.scene.grid.Grid");d.prototype.yia=function(){return(new uq(new Hp(-.5,-.5,-.5),new Hp(.5,.5,.5))).applyMatrix4(this.matrixWorld)};d.prototype.setOptions=function(C){if(null==C)return this;fz.prototype.setOptions.call(this,
C);this.position.set(0,0,0);this.rotation.set(0,0,0);this.scale.set(1,1,1);this.updateMatrix();null==C.axis&&(C.axis={});null==C.grid&&(C.grid={});null==C.title&&(C.title={});C.axis=G(C.axis,{textstyles:this.zR(),linestyles:this.ppa(),formatters:this.opa(),outlines:this.fKa()});C.title=G(C.title,{textstyles:this.Hfb(),texts:this.JL(),distance:this.uia(),outlines:this.wKa()});C.grid=G(C.grid,{linestyles:this.Epa()});C.grid.linestyles=G(C.grid.linestyles,this.Epa());C.axis.linestyles=G(C.axis.linestyles,
this.ppa());C.axis.textstyles=G(C.axis.textstyles,this.zR());C.axis.formatters=G(C.axis.formatters,this.opa());C.hasOwnProperty("planecolor")&&(this.rzc=C.planecolor);C.hasOwnProperty("planeopacity")&&(this.szc=C.planeopacity);var A=G(C,{start:this.$C(),end:this.CH(),counts:this.vya(),modelstart:this.o8b(),modelend:this.j8b(),mode:this.cq(),planecolor:this.rzc,planeopacity:this.szc});C=A.start;for(var v=A.end,B=A.counts,E=Object.keys(wA.Plane),H=0;H<E.length;H++){var F={plane:E[H],start:A.modelstart,
end:A.modelend,counts:B,axis:A.axis,title:A.title,grid:A.grid,mode:A.mode,color:A.planecolor,opacity:A.planeopacity};null==this.vf[E[H]]?(F=new AA(F),this.vf[E[H]]=F,this.add(F)):this.vf[E[H]].setOptions(F)}A=new BA;A.$4b({p0:new gy(-wA.KZ.x,-wA.KZ.y),p1:new gy(wA.KZ.x,-wA.KZ.y),p2:new gy(wA.KZ.x,wA.KZ.y),z0:-wA.KZ.z,z1:wA.KZ.z});B=new BA;B.$4b({p0:new gy(C.x,C.y),p1:new gy(v.x,C.y),p3:new gy(C.x,v.y),z0:-Math.max(C.z,v.z),z1:-Math.min(C.z,v.z)});A=new CA(A,B);A.rVa(this);this.QF=C;this.Bu=v;this.gg(new az({source:this,
type:$y.m3a,args:[]}));return this};d.prototype.ta=function(){return xb({axis:{textstyles:this.zR(),formatters:this.opa(),linestyles:this.ppa(),outlines:this.fKa()},grid:{linestyles:this.Epa()},title:{textstyles:this.Hfb(),texts:this.JL(),distance:this.uia(),outlines:this.wKa()},start:this.$C(),end:this.CH(),counts:this.vya(),modelstart:this.o8b(),modelend:this.j8b(),mode:this.cq(),planecolor:this.rzc,planeopacity:this.szc},fz.prototype.ta.call(this))};d.prototype.Epa=function(){return this.vf.right?
G(this.vf.right.Epa(),this.vf.top.Epa()):{}};d.prototype.ppa=function(){return this.vf.right?G(this.vf.right.ppa(),this.vf.top.ppa()):{}};d.prototype.zR=function(){return this.vf.right?G(this.vf.right.zR(),this.vf.top.zR()):{}};d.prototype.fKa=function(){return this.vf.right?G(this.vf.right.fKa(),this.vf.top.fKa()):{}};d.prototype.opa=function(){return this.vf.right?G(this.vf.right.opa(),this.vf.top.opa()):{}};d.prototype.JL=function(){return this.vf.right?G(this.vf.right.JL(),this.vf.top.JL()):{}};
d.prototype.uia=function(){return this.vf.right?this.vf.right.uia():0};d.prototype.Hfb=function(){return this.vf.right?G(this.vf.right.Hfb(),this.vf.top.Hfb()):{}};d.prototype.wKa=function(){return this.vf.right?G(this.vf.right.wKa(),this.vf.top.wKa()):{}};d.prototype.$C=function(){return this.QF};d.prototype.CH=function(){return this.Bu};d.prototype.cq=function(){var C=Object.keys(wA.Plane)[0];return this.vf[C]?this.vf[C].cq():null};d.prototype.vya=function(){var C=Object.keys(wA.Plane)[0];return this.vf[C]?
this.vf[C].vya():null};d.prototype.o8b=function(){var C=Object.keys(wA.Plane)[0];return this.vf[C]?this.vf[C].$C():null};d.prototype.j8b=function(){var C=Object.keys(wA.Plane)[0];return this.vf[C]?this.vf[C].CH():null};d.prototype.N8b=function(){return this.vf};d.sw=DA;d.prototype.Cxb=function(C){C.tDc(this)};var l=new Hp(0,-1,-1),m=new Hp(1,0,-1),n=new Hp(-1,0,-1),p=new Hp(-1,-1,0),q=new Hp(1,-1,0),r=new Hp(0,-1,1),t=new Hp(1,0,1),u=new Hp(-1,1,0),w=new Hp(0,1,-1),y=new Hp(0,1,1),z=new Hp(1,1,0),
x=new Hp;d.prototype.ui=function(C,A,v,B){fz.prototype.ui.call(this,C,A,v,B);if(!this.visible)return this;this.worldToLocal(x.copy(A.position));var E;for(E=0;E<this.children.length;E++)this.children[E].CZ(C,A);var H=this.cq();E=H(this.vf.bottom,C,A);var F=H(this.vf.back,C,A),I=H(this.vf.left,C,A);H=H(this.vf.right,C,A);this.vf.top.Yu(null,null,null,!1);this.vf.bottom.Yu(null,null,null,!1);this.vf.front.Yu(null,null,null,!1);this.vf.back.Yu(null,null,null,!1);this.vf.left.Yu(null,null,null,!1);this.vf.right.Yu(null,
null,null,!1);var J=Dy;F?E?I?(this.vf.front.Yu("x",J.start,l,!0),this.vf.bottom.Yu("y",J.end,m,!0),this.vf.left.Yu("z",J.start,p,!0)):(this.vf.front.Yu("x",J.start,l,!0),this.vf.bottom.Yu("y",J.start,n,!0),this.vf.front.Yu("z",J.end,q,!0)):I?(this.vf.front.Yu("x",J.end,r,!0),this.vf.top.Yu("y",J.end,t,!0),this.vf.left.Yu("z",J.start,p,!0)):(this.vf.front.Yu("x",J.end,r,!0),this.vf.top.Yu("y",J.start,n,!0),this.vf.front.Yu("z",J.end,q,!0)):E?H?(this.vf.back.Yu("x",J.start,w,!0),this.vf.bottom.Yu("y",
J.start,n,!0),this.vf.back.Yu("z",J.end,z,!0)):(this.vf.back.Yu("x",J.start,w,!0),this.vf.bottom.Yu("y",J.end,m,!0),this.vf.back.Yu("z",J.start,u,!0)):H?(this.vf.back.Yu("x",J.end,y,!0),this.vf.top.Yu("y",J.start,n,!0),this.vf.back.Yu("z",J.end,z,!0)):(this.vf.back.Yu("x",J.end,y,!0),this.vf.top.Yu("y",J.end,t,!0),this.vf.back.Yu("z",J.start,u,!0));var K;F=[];I=[];for(K in this.vf){H=this.vf[K].IFd(C,A,v,B);for(E=0;E<H.filter.length;E++)F.push(H.filter[E]);for(E=0;E<H.nofilter.length;E++)I.push(H.nofilter[E])}hz.R3b(C,
A,F,6,new Ip(0,4,0,0),I);return this};d.prototype.dispose=function(){fz.prototype.dispose.call(this);for(var C=0;C<this.children.length;C++)this.children[C]&&hz.dispose(this.children[C])};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXb3JsZEJvdW5kaW5nQm94IjoieWlhIiwiZ2V0T3B0aW9ucyI6InRhIiwiZ2V0T3V0bGluZXMiOiJmS2EiLCJnZXRUaXRsZU91dGxpbmVzIjoid0thIiwiZ2V0U3RhcnQiOiIkQyIsImdldEVuZCI6IkNIIiwiZ2V0TW9kZSI6ImNxIiwiZ2V0Q291bnRzIjoidnlhIiwiZ2V0TW9kZWxTdGFydCI6Im84YiIsImdldE1vZGVsRW5kIjoiajhiIiwiZ2V0UGxhbmVzIjoiTjhiIiwiYWRkTGVnZW5kIjoiQ3hiIiwiYmVmb3JlUmVuZGVyIjoidWkifX19");var FA=/*#__PURE__*/function(){function d(e){sA.call(this);this.hb=G(e,{resolution:new gy(256,256)},!0);this.$Eb=!1;this.type="OutlinePass";this.pA=e.scene;this.pN=e.camera;this.nrd=!1;this.gqb=2;this.Uv=rA.tg();var f={minFilter:Ct,magFilter:Ct,format:yv};e=Math.round(this.hb.resolution.x/this.gqb);var g=Math.round(this.hb.resolution.y/this.gqb);this.LGa=new oy(this.hb.resolution.x,this.hb.resolution.y,f);this.LGa.texture.name="OutlinePass.mask";this.LGa.texture.generateMipmaps=!1;this.aqb=new au;this.aqb.side=
Fr;this.aqb.depthPacking=xv;this.aqb.blending=yu;this.yGa=this.wJd();this.yGa.side=Fr;this.yGa.fragmentShader=a(this.yGa.fragmentShader,this.pN);this.ETa=new oy(this.hb.resolution.x,this.hb.resolution.y,f);this.ETa.texture.name="OutlinePass.depth";this.ETa.texture.generateMipmaps=!1;this.iwa=new oy(e,g,f);this.iwa.texture.name="OutlinePass.depthDownSample";this.iwa.texture.generateMipmaps=!1;this.CTa=new oy(e,g,f);this.CTa.texture.name="OutlinePass.blur1";this.CTa.texture.generateMipmaps=!1;this.DTa=
new oy(Math.round(e/2),Math.round(g/2),f);this.DTa.texture.name="OutlinePass.blur2";this.DTa.texture.generateMipmaps=!1;this.WQa=this.BEd();this.sna=new oy(e,g,f);this.sna.texture.name="OutlinePass.edge1";this.sna.texture.generateMipmaps=!1;this.FTa=new oy(Math.round(e/2),Math.round(g/2),f);this.FTa.texture.name="OutlinePass.edge2";this.FTa.texture.generateMipmaps=!1;var h=f=4;this.Gna=this.zRc(f);this.Gna.uniforms.texSize.value=new gy(e,g);this.Gna.uniforms.kernelRadius.value=1;this.rwa=this.zRc(h);
this.rwa.uniforms.texSize.value=new gy(Math.round(e/2),Math.round(g/2));this.rwa.uniforms.kernelRadius.value=h;this.Yma=this.QId();e=c.Vlb;this.Vta=Yx.clone(e.uniforms);this.Vta.opacity.value=1;this.Vwc=new Lw({uniforms:this.Vta,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:yu,depthTest:!1,depthWrite:!1,transparent:!0});this.UWb=new Pq;this.$xc=1;this.gA=new oA.L2a(null);this.SZb=new Pq;this.TZb=new Pq;this.ewb=new Xt;this.setOptions(this.hb)}function a(e,f){f=f.isPerspectiveCamera?
"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}var b=new Pq("white"),c=nA;L(d,"geotoolkit3d.postprocessing.OutlinePass");D(d,sA);d.prototype.setOptions=function(e){if(null==e)return this;e.hasOwnProperty("highlight")&&(e=G(e,e.highlight),delete e.highlight);this.hb=G(e,this.hb);null!=e.enabled&&(this.enabled=e.enabled);return this};d.prototype.ta=function(){return this.hb};d.prototype.dispose=function(){this.LGa.dispose();this.ETa.dispose();this.iwa.dispose();this.CTa.dispose();
this.DTa.dispose();this.sna.dispose();this.FTa.dispose()};d.prototype.setSize=function(e,f){this.LGa.setSize(e,f);this.ETa.setSize(e,f);e=Math.round(e/this.gqb);f=Math.round(f/this.gqb);this.iwa.setSize(e,f);this.CTa.setSize(e,f);this.sna.setSize(e,f);this.Gna.uniforms.texSize.value=new gy(e,f);e=Math.round(e/2);f=Math.round(f/2);this.DTa.setSize(e,f);this.FTa.setSize(e,f);this.rwa.uniforms.texSize.value=new gy(e,f);return this};d.prototype.kFc=function(e){function f(k){k.isMesh&&(e?(k.visible=k.userData.SWc,
delete k.userData.SWc):(k.userData.SWc=k.visible,k.visible=e))}for(var g=0;g<this.H5.length;g++){var h=this.H5[g];h.traverse(f)}};d.prototype.jFc=function(e){function f(n){if(n.isMesh||n.isLine||n.isSprite){for(var p=!1,q=0;q<h.length;q++){var r=h[q].id;if(r===n.id){p=!0;break}}if(!p){p=n.visible;if(!e||n.ftd)n.visible=e;n.ftd=p}}k&&n instanceof EA&&(p=n.userData.oldVisible,n.Up=p)}function g(n){n.isMesh&&h.push(n)}for(var h=[],k=e,l=0;l<this.H5.length;l++){var m=this.H5[l];m.traverse(g)}this.pA.traverse(f)};
d.prototype.Iud=function(e){function f(g){g instanceof EA&&(g.userData.oldVisible=g.Up,g.Up=e)}this.pA.traverse(f)};d.prototype.T8d=function(){this.ewb.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);this.ewb.multiply(this.pN.projectionMatrix);this.ewb.multiply(this.pN.matrixWorldInverse)};d.prototype.render=function(e,f,g,h){0<this.H5.length&&(e.getClearColor(this.UWb),this.$xc=e.getClearAlpha(),f=e.autoClear,e.autoClear=!1,e.setClearColor(16777215,1),this.kFc(!1),this.Iud(!1),h=this.pA.background,this.pA.background=
null,this.pA.overrideMaterial=this.aqb,e.setRenderTarget(this.ETa),e.clear(),e.render(this.pA,this.pN),this.kFc(!0),this.T8d(),this.jFc(!1),this.pA.overrideMaterial=this.yGa,this.yGa.uniforms.cameraNearFar.value=new gy(this.pN.near,this.pN.far),this.yGa.uniforms.depthTexture.value=this.ETa.texture,this.yGa.uniforms.textureMatrix.value=this.ewb,e.setRenderTarget(this.LGa),e.clear(),e.render(this.pA,this.pN),this.pA.overrideMaterial=null,this.jFc(!0),this.pA.background=h,this.gA.material=this.Vwc,this.Vta.tDiffuse.value=
this.LGa.texture,e.setRenderTarget(this.iwa),e.clear(),this.gA.render(e),this.SZb.copy(this.hb.visiblecolor),this.TZb.copy(this.hb.hiddencolor),0<this.hb.pulseperiod&&(h=($a.performance||Date).now(),h=.625+.75*Math.cos(.01*h/this.hb.pulseperiod)/2,this.SZb.multiplyScalar(h),this.TZb.multiplyScalar(h)),this.gA.material=this.WQa,this.WQa.uniforms.maskTexture.value=this.iwa.texture,this.WQa.uniforms.texSize.value=new gy(this.iwa.width,this.iwa.height),this.WQa.uniforms.visibleEdgeColor.value=this.SZb,
this.WQa.uniforms.hiddenEdgeColor.value=this.TZb,this.WQa.uniforms.hiddenLine.value=this.hb.hiddenline,e.setRenderTarget(this.sna),e.clear(),this.gA.render(e),this.gA.material=this.Gna,this.Gna.uniforms.colorTexture.value=this.sna.texture,this.Gna.uniforms.direction.value=d.Hlc,this.Gna.uniforms.kernelRadius.value=this.hb.edgethickness,e.setRenderTarget(this.CTa),e.clear(),this.gA.render(e),this.Gna.uniforms.colorTexture.value=this.CTa.texture,this.Gna.uniforms.direction.value=d.Ilc,e.setRenderTarget(this.sna),
e.clear(),this.gA.render(e),this.gA.material=this.rwa,this.rwa.uniforms.colorTexture.value=this.sna.texture,this.rwa.uniforms.direction.value=d.Hlc,e.setRenderTarget(this.DTa),e.clear(),this.gA.render(e),this.rwa.uniforms.colorTexture.value=this.DTa.texture,this.rwa.uniforms.direction.value=d.Ilc,e.setRenderTarget(this.FTa),e.clear(),this.gA.render(e),this.Yma.blending=this.UWb.equals(b)?Cu:Op,this.gA.material=this.Yma,this.Yma.uniforms.maskTexture.value=this.LGa.texture,this.Yma.uniforms.edgeTexture1.value=
this.sna.texture,this.Yma.uniforms.edgeTexture2.value=this.FTa.texture,this.Yma.uniforms.patternTexture.value=this.yPe,this.Yma.uniforms.edgeStrength.value=this.hb.edgestrength,this.Yma.uniforms.edgeGlow.value=this.hb.edgeglow,this.Yma.uniforms.usePatternTexture.value=this.nrd,e.setRenderTarget(g),this.gA.render(e),e.setClearColor(this.UWb,this.$xc),e.autoClear=f);this.Fra&&(this.gA.material=this.Vwc,this.Vta.tDiffuse.value=g.texture,e.setRenderTarget(null),this.gA.render(e))};d.prototype.wJd=function(){var e=
c.Vhd;return new Lw({uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})};d.prototype.BEd=function(){var e=c.Tdd;return new Lw({uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})};d.prototype.zRc=function(e){var f=c.Qid;return new Lw({defines:{MAX_RADIUS:e},uniforms:f.uniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader})};d.prototype.QId=function(){var e=c.shd,f=this.hb.clearcolor,g=Op;f.equals(b)&&(g=Cu);return new Lw({uniforms:e.uniforms,
vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:g,depthTest:!1,depthWrite:!1,transparent:!0})};d.Hlc=new gy(1,0);d.Ilc=new gy(0,1);return d}();var GA=/*#__PURE__*/ta(/*#__PURE__*/{Sy:"onSelectionChanged"},2,"eyJvblNlbGVjdGlvbkNoYW5nZWQiOiJTeSJ9"),HA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"selectiontool",enabled:!0,filter:null,hover:!1});Py.call(this,a);this.Cf=a.filter;this.urb=a.hover;this.Wk=[]}D(d,Py);L(d,"geotoolkit3d.tool.SelectionTool");d.Ka=GA;d.prototype.setOptions=function(a){a=G(a,{plot:this.uc,enabled:this.Vf,filter:this.Cf,hover:this.urb});this.Cf=a.filter;this.uc=a.plot;this.urb=a.hover;this.Vf=a.enabled;Py.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=Py.prototype.ta.call(this);
a.filter=this.Cf;a.hover=this.urb;a.enabled=this.Vf;return a};d.prototype.RH=function(a){this.urb&&this.nFb(oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc,this.Cf),a)};d.prototype.LJ=function(a){this.Vf&&this.nFb(oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc,this.Cf),a)};d.prototype.nFb=function(a,b){this.notify(d.Ka.nFb,this,a);this.notify(d.Ka.Sy,this,{selection:a,event:b});for(var c=0;c<this.Wk.length;c++)this.Wk[c](a,b)};d.prototype.YL=Hb;d.prototype.EO=Hb;d.prototype.FO=Hb;d.prototype.jG=Hb;d.prototype.kq=
Hb;d.prototype.SE=Hb;d.prototype.RE=Hb;d.prototype.kG=Hb;d.prototype.PE=Hb;d.prototype.OA=Hb;d.prototype.OE=Hb;d.prototype.lG=Hb;d.prototype.UE=Hb;d.prototype.kD=Hb;d.prototype.ZL=Hb;d.prototype.$L=Hb;return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJSSCIsIm9uVGFwIjoiTEoiLCJvblNlbGVjdGlvbiI6Im5GYiIsIm9uS2V5U3RhcnQiOiJZTCIsIm9uS2V5IjoiRU8iLCJvbktleUVuZCI6IkZPIiwib25Eb3VibGVUYXAiOiJqRyIsIm9uTW91c2VXaGVlbCI6ImtxIiwib25QaW5jaFN0YXJ0IjoiU0UiLCJvblBpbmNoIjoiUkUiLCJvblBpbmNoRW5kIjoia0ciLCJvbkRyYWdTdGFydCI6IlBFIiwib25EcmFnIjoiT0EiLCJvbkRyYWdFbmQiOiJPRSIsIm9uU2xpZGVTdGFydCI6ImxHIiwib25TbGlkZSI6IlVFIiwib25TbGlkZUVuZCI6ImtEIiwib25WaXNpYmlsaXR5R2FpbmVkIjoiWkwiLCJvblZpc2liaWxpdHlMb3N0IjoiJEwifX19");var IA=/*#__PURE__*/function(){function d(a){pA.call(this,{shader:nA.Bed});this.type="FXAARenderPass";this.setOptions(a)}L(d,"geotoolkit3d.postprocessing.FXAARenderPass");D(d,pA);d.prototype.setOptions=function(a){if(!a)return this;null!=a.enabled&&(this.enabled=a.enabled);return this};d.prototype.setSize=function(a,b){this.material.uniforms.resolution.value.x=1/a;this.material.uniforms.resolution.value.y=1/b};d.prototype.render=function(a,b,c){pA.prototype.render.call(this,a,b,c)};return d}();var JA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){qz.call(this);c=c||{};this.uc=c.plot;this.QF=Date.now();this.w5a=!1;this.HVb=c.duration||1E3;this.wga=this.uc.pD(this.uc.sya());this.Vla=this.uc.pD(c.position||this.uc.sya());this.Iqd=this.uc.getCamera().quaternion.clone();this.hSb=this.uc.getCamera().quaternion.clone();this.I7a=null;if(c=c.lookat){this.I7a=this.uc.pD(c);var e=hz.OMd(this.Vla,this.I7a,this.uc);a.copy(this.Vla).sub(this.I7a).normalize();b.lookAt(this.Vla,c,e);b.decompose(a,this.hSb,a)}}var a=new Hp,
b=new Xt;D(d,qz);L(d,"geotoolkit3d.scene.animation.CameraMoveAnimation");d.prototype.OO=function(){if(!this.uc||this.w5a)return!0;var c=this.uc.getCamera(),e=this.uc.getController(),f=Date.now()-this.QF;if(f>this.HVb)return c.position.copy(this.Vla),c.quaternion.copy(this.hSb),e.setOptions({position:this.Vla,lookat:this.I7a?this.I7a:this.uc.QWa()}),this.uc.gg(new az({type:$y.Camera,source:this.uc.getCamera(),args:[]})),!0;c.position.lerpVectors(this.wga,this.Vla,f/this.HVb);c.quaternion.copy(this.Iqd).slerp(this.hSb,
f/this.HVb);e.setOptions({position:this.uc.sya(),lookat:this.uc.QWa()});this.uc.gg(new az({type:$y.Camera,source:this.uc.getCamera(),args:[]}));return!1};d.prototype.stop=function(){this.w5a=!0};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJPTyJ9fX0g");var KA=/*#__PURE__*/ta(/*#__PURE__*/{XNb:"perspective",phd:"orthographic"},2,"eyJQZXJzcGVjdGl2ZSI6IlhOYiIsIk9ydGhvZ3JhcGhpYyI6InBoZCJ9"),LA=/*#__PURE__*/ta(/*#__PURE__*/{Jc:"None",BNb:"MaintainScale"},2,"eyJOb25lIjoiSmMiLCJNYWludGFpblNjYWxlIjoiQk5iIn0g"),MA=/*#__PURE__*/ta(/*#__PURE__*/{fnb:"orbit",brc:"trackball",wnc:"firstperson",Jc:"none"},2,"eyJPcmJpdCI6ImZuYiIsIlRyYWNrQmFsbCI6ImJyYyIsIkZpcnN0UGVyc29uIjoid25jIiwiTm9uZSI6IkpjIn0g"),NA=/*#__PURE__*/ta(/*#__PURE__*/{Ep:"hover",MZ:"click"},2,"eyJIb3ZlciI6IkVwIiwiQ2xpY2siOiJNWiJ9"),OA=/*#__PURE__*/ta(/*#__PURE__*/{hfd:"HighlightTool"},2,"eyJIaWdobGlnaHRUb29sIjoiaGZkIn0g"),PA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(r){.1>r.max.x-r.min.x&&(r.min.x-=.05,r.max.x+=.05);.1>r.max.y-r.min.y&&(r.min.y-=.05,r.max.y+=.05);.1>r.max.z-r.min.z&&(r.min.z-=.05,r.max.z+=.05)}function a(r){return r.visible}function b(r){te.call(this);r=r||{};r.renderer&&null!=r.renderer.parameteres&&hb("Parameters for renderer should be camelCase, following three.js convention.");
this.hb=xb(r,{container:null,autoupdate:!0,autoupdateinterval:0,autoupdatemodellimits:!0,scale:new Hp(1,1,1),translation:new Hp(0,0,0),applyorigintranslation:!1,stats:!1,camera:{type:b.ALb.XNb,orthoresize:b.RNb.BNb,position:new Hp(0,-500,500),lookat:new Hp(0,0,0),up:new Hp(0,f,1),fov:50,near:"auto",far:"auto",minnear:1,minfar:100,nearfarscale:null,movewithscale:!1,controller:{type:b.tCa.fnb,autorotate:!1}},compass:{enabled:!0},ambientlighting:{color:"#1c1c1c",enabled:!0},cameralighting:{color:"white",
enabled:!0,intensity:1},renderer:{parameters:{precision:"highp",logarithmicDepthBuffer:!0},devicepixelratio:bc(),clearcolor:"black",clearcoloralpha:1},postprocessing:{enabled:!0,depthpeeling:{enabled:!0,peelinglevel:5},antialias:{enabled:!0,mode:Ey.yMb},highlight:{enabled:!0,mode:b.goc.MZ,edgestrength:4,edgeglow:0,edgethickness:1,pulseperiod:0,visiblecolor:new Pq("red"),hiddencolor:new Pq(11167591),hiddenline:!1,highlightedges:!0}}});"none"===this.hb.camera.controller.type&&(this.hb.renderer.parameters.antialias=
!0,this.hb.postprocessing.enabled=!1);this.fn=new qy(this.hb.renderer.parameters);hA.C1a(this.fn);if(!hA.BKb())throw Error("WebGL is not supported by this browser");hA.Ggb()&&hb("Detected Intel Graphics - rendering performance may be poor");this.Me=this.hb.container;null==this.Me?(this.jd=this.fn.domElement.width,this.td=this.fn.domElement.height,this.Me=this.fn.domElement.parentNode):(this.jd=this.Me.offsetWidth,this.td=this.Me.offsetHeight,this.Me.appendChild(this.fn.domElement));this.fn.setSize(this.jd,
this.td);this.fn.setPixelRatio(this.hb.renderer.devicepixelratio);this.mt=new Jp;this.mk=new fz;this.mk.matrixWorldNeedsUpdate=!0;this.mt.add(this.mk);this.Wwa=new fz;this.Wwa.name="ROOT";this.mk.add(this.Wwa);this.Qk=[];this.fo=this.hb.autoupdate;this.Lkd=this.hb.autoupdateinterval;this.Mkd=this.hb.autoupdatemodellimits;this.PPb=this.hb.applyorigintranslation;this.XM=!1;this.Zwa=this.Yva=null;this.C$=this.EWb=!0;this.iod=16;this.Sfa=new Hp;this.Vb=this.B1c(this.hb.camera);this.mt.add(this.Vb);r=
this.hb.camera.controller.type;var t=this.pD(this.hb.camera.position.clone()),u=this.pD(this.hb.camera.lookat.clone());null==this.q_&&(this.q_=c(r,this.Vb,this,t,u),this.b1b(this.q_));this.FZa(t,u);this.mt.userData.plot=this;this.mt.updateMatrixWorld();this.mt.add(this.job=new iA);this.gg(new az({source:this,type:$y.eP,args:[this.mt]}));this.g6=null;this.bUb=jA.tg();this.setOptions(this.hb);this.fo&&this.startRendering();return this}function c(r,t,u,w,y){return r===b.tCa.fnb?new pz({camera:t,plot:u,
position:w,lookat:y}):r===b.tCa.brc?new vz({camera:t,plot:u,position:w,lookat:y}):r===b.tCa.Jc?new Ry({camera:t,plot:u,position:w,lookat:y}):r===b.tCa.wnc?new sz({camera:t,plot:u,position:w,lookat:y}):new r({camera:t,plot:u,position:w,lookat:y})}function e(r,t){if(null!=r&&(r.visible||t)){!0===r.matrixAutoUpdate&&r.updateMatrix();if(!0===r.matrixWorldNeedsUpdate||!0===t)void 0===r.parent?r.matrixWorld.copy(r.matrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.matrix),t=!0,r.matrixWorldNeedsUpdate=
!1;for(var u=r.children.length,w=0;w<u;w++)e(r.children[w],t)}}var f=1E-7,g=new Xt,h=new gy,k=new Pq,l=new Hp,m=new Hp,n=null,p=100;D(b,te);L(b,"geotoolkit3d.Plot");b.prototype.setOptions=function(r){r=r||{};this.hb=xb(r,this.hb);var t=this;if(null==this.ESa){var u=10*this.hb.camera.lookat.distanceTo(this.hb.camera.position),w=this.hb.camera.lookat;this.hb.modellimits=new uq(w.clone().addScalar(-u),w.clone().addScalar(u));this.ESa=this.hb.modellimits}else r.modellimits&&(this.ESa=r.modellimits);u=
!1;!r.renderer||null==r.renderer.clearcolor&&null==r.renderer.clearcoloralpha||(u=r.renderer.clearcolor||this.fn.getClearColor(k),w=r.renderer.clearcoloralpha||this.fn.getClearAlpha(),this.fn.setClearColor(u,w),u=!0);r.ambientlighting&&(null==this.wta&&this.hb.ambientlighting.enabled?(this.wta=new Sp,this.mt.add(this.wta)):null==this.wta||this.hb.ambientlighting.enabled||(this.mt.remove(this.wta),this.wta=null),this.wta&&r.ambientlighting.color&&(this.wta.color=new Pq(r.ambientlighting.color)));if(r.cameralighting){if(null==
this.n9&&this.hb.cameralighting.enabled){this.n9=new gv(r.cameralighting.color);var y=new Hp;this.n9.ui=function(x,C,A,v){this.position.copy(A.pD(A.sya(y)))};this.mt.add(this.n9)}else null==this.n9||this.hb.cameralighting.enabled||(this.mt.remove(this.n9),this.n9=null);null!=this.n9&&r.cameralighting.intensity&&(this.n9.intensity=r.cameralighting.intensity);null!=this.n9&&r.cameralighting.color&&(this.n9.color=new Pq(r.cameralighting.color))}w=!1;r.translation&&!this.Wwa.position.equals(r.translation)&&
(this.Wwa.position.copy(r.translation),w=this.Wwa.matrixWorldNeedsUpdate=!0);r.scale&&!this.mk.scale.equals(r.scale)&&(this.mk.scale.copy(r.scale),w=this.mk.matrixWorldNeedsUpdate=!0);w&&e(this.mk);r.camera&&(this.B1c(r.camera),(r.camera.position||r.camera.lookat)&&this.FZa(r.camera.position,r.camera.lookat),r.camera.controller&&(w=G(r.camera.controller,r.camera.controller.options),this.TPa=w.autorotate&&this.hb.camera.controller.type===b.tCa.fnb,this.q_.setOptions(w)));r.compass&&(null==this.p_&&
this.hb.compass.enabled?(null==r.compass.container&&null==r.compass.canvas?(w=Math.min(this.jd,this.td),this.s9=xc("div","__geotoolkit_compass"),this.s9.style.position="absolute",this.s9.style.bottom="0px",this.s9.style.right="0px",this.s9.style.border="none",this.s9.style.width=Math.floor(w/6)+"px",this.s9.style.height=Math.floor(w/6)+"px",this.s9.style["pointer-events"]="none",this.Me.appendChild(this.s9),this.SQb=this.s9):this.SQb=r.compass.container,this.p_=new lA({container:this.SQb,camera:this.Vb,
canvas:r.compass.canvas})):null==this.p_||this.hb.compass.enabled||(this.Me.removeChild(this.s9),this.p_=this.s9=null));null==this.Mna&&r.stats?(this.Mna=new mA,this.Me.appendChild(this.Mna.PMc())):null==this.Mna||r.stats||(this.Me.removeChild(this.Mna.PMc()),this.Mna=null);if(r.postprocessing)if(hA.isWebGL2()||(hb("geotoolkit3d: WebGL 2.0 is not supported by this browser. Effects such as highlighting is disabled."),r.postprocessing.enabled=!1),null==this.JG&&r.postprocessing.enabled){this.wzc=!0;
u=bc();r=this.hb.postprocessing;r.highlight.edgethickness*=u;r.highlight.edgestrength*=u;2>u&&1440>$a.screen.height&&2560>$a.screen.width&&(r.antialias.mode=Ey.nOb);this.JG=new qA(this.fn);u=G(r.highlight,{scene:this.mt,camera:this.Vb,clearcolor:this.fn.getClearColor(new Pq),resolution:new gy(this.jd,this.td)});w=new tA(u);this.JG.hVa(w);w=xb(r,{scene:this.mt,camera:this.Vb,unbiased:!0,clearcolor:this.fn.getClearColor(k).getHex(),clearcoloralpha:this.fn.getClearAlpha()});var z=G(this.hb.postprocessing,
w);z=new uA(z);this.JG.hVa(z);r.antialias.mode===Ey.bqc&&(w=G(this.hb.postprocessing.antialias,w),w=new vA(w),this.JG.hVa(w));u=new FA(u);this.JG.hVa(u);u=new HA({name:"HighlightTool",hover:"hover"===this.hb.postprocessing.highlight.mode});u.on(GA.Sy,function(x,C,A){var v=A.selection;t.JG.BCb().forEach(function(B){if(B instanceof sA){B.Bbb();if(v[0]&&v[0].object){var E=!1;if(t.hb.postprocessing.highlight.highlightedges){for(E=v[0].object;null!=E&&!(E instanceof fz);)E=E.parent;if(E&&E.Ikc())return;
E=null!=E&&E.kha()}(E&&B instanceof tA||!E&&B instanceof FA)&&B.Sab(v[0].object)}t.gg()}})});this.b1b(u);r.antialias.mode===Ey.yMb&&(r=new IA,this.JG.hVa(r));u=!1}else if(null!=this.JG)for(w=this.JG.BCb(),z=0;z<w.length;z++)w[z].setOptions(r.postprocessing);u&&null!=this.JG&&this.JG.BCb().forEach(function(x){x.setOptions({clearcolor:t.fn.getClearColor(k).getHex(),clearcoloralpha:t.fn.getClearAlpha()})});this.gg();this.os();return this};b.prototype.ta=function(){return this.hb};b.prototype.startRendering=
function(){function r(){if(t.XM||t.TPa)t.XM=!1,t.WBa(),t.render()}var t=this,u=this.Lkd;$a.requestAnimationFrame||(u=this.iod);if(0===u){var w=function(){null!=t.Mna&&t.Mna.Bx();r();t.Zwa=$a.requestAnimationFrame(w);null!=t.Mna&&t.Mna.end()};this.Zwa=$a.requestAnimationFrame(w)}else this.Zwa=new Kl(u,r),this.Zwa.start()};b.ALb=KA;b.RNb=LA;b.tCa=MA;b.goc=NA;b.ldd=OA;b.prototype.pD=function(r){e(this.mk);g.copy(this.Wwa.matrixWorld);return r.applyMatrix4(g)};b.prototype.Nca=function(r){e(this.mk);g.copy(this.Wwa.matrixWorld).invert();
return r.applyMatrix4(g)};b.prototype.B1c=function(r){r=xb(r,this.hb.camera);this.Tod=r.orthoresize;this.GWb=r.nearfarscale;this.rod=r.minnear;this.qod=r.minfar;"auto"===r.near&&(this.nsc=!0,r.near=1);"auto"===r.far&&(this.lsc=!0,r.far=1E5);null==this.Vb?this.Vb=r.type===b.ALb.XNb?new $u(r.fov,this.jd/this.td,r.near,r.far):new Pu(-this.jd/2,this.jd/2,this.td/2,-this.td/2,r.near,r.far):(this.Vb.near=r.near,this.Vb.far=r.far,this.Vb.fov=r.fov);this.Vb.up=r.up;this.Vb.updateProjectionMatrix();return this.Vb};
b.prototype.sya=function(r){null==r?r=this.Vb.position.clone():r.copy(this.Vb.position);return this.Nca(r)};b.prototype.QWa=function(){var r=new Hp;return function(t){null==t&&(t=new Hp);return oc(this.q_,Qy)?this.Nca(t.copy(this.q_.LH())):this.sya(t).add(this.xLc(r))}}();b.prototype.IZd=function(r,t){this.qKc(new Hp(0,1,0),r,t);return this};b.prototype.qKc=function(r,t,u,w){var y=hz.Ibb(this.mk,function(v){return v.visible});if(null==y)return this;this.Nca(y.min);this.Nca(y.max);var z=new gy;y.getSize(z);
var x=new Hp;null==r&&(r=this.Nca(this.Vb.position.clone()).sub(y.getCenter(x)),r=r.normalize());w=null!=w?w:1;if(this.Vb instanceof $u){var C=this.Vb.fov;z=.65*z.length();C=z/Math.sin(Math.PI/180*C*.5)}else{C=z.length()/2;z=this.getSize().ca();var A=this.getSize().da();this.Vb.left=-C*z/A;this.Vb.right=C*z/A;this.Vb.top=C;this.Vb.bottom=-C}C*=w;r.multiplyScalar(C).add(y.getCenter(x));this.FZa(r,x,t,u);return this};b.prototype.xLc=function(r){null==r?r=new Hp(0,0,-1):r.set(0,0,-1);return r.applyEuler(this.Vb.rotation,
this.Vb.rotation.order)};b.prototype.DLe=function(r){null==r&&(r=new Xt);this.Vb.updateMatrix();return r.copy(this.Vb.matrix)};b.prototype.x0d=function(r,t,u){this.FZa(r,null,t,u);return this};b.prototype.rfc=function(r,t,u){this.FZa(null,r,t,u);return this};b.prototype.FZa=function(r,t,u,w){null!=this.O4a&&(this.O4a.stop(),this.idb().RZc(this.O4a),this.O4a=null);if(null==r&&null==t)return this;!0===u?(this.O4a=new JA({plot:this,position:r,lookat:t,duration:w}),this.idb().J0b(this.O4a)):(null!=r&&
this.Vb.position.copy(this.pD(r.clone())),null!=t&&this.Vb.lookAt(this.pD(t.clone())),null!=this.q_&&this.q_.setOptions({position:null!=r?this.pD(r.clone()):void 0,lookat:null!=t?this.pD(t.clone()):void 0}),this.gg(new az({type:$y.Camera,source:this.Vb,args:[]})));return this};b.prototype.rJe=function(r,t){null!=r&&this.Vb.position.copy(this.pD(r.clone()));null!=t&&this.Vb.lookAt(this.pD(t.clone()));this.q_.setOptions({position:null!=r?this.pD(r.clone()):void 0,lookat:null!=t?this.pD(t.clone()):void 0});
this.gg(new az({type:$y.Camera,source:this.Vb,args:[]}));return this};b.prototype.getRoot=function(){return this.Wwa};b.prototype.UCb=function(){return this.mt};b.prototype.idb=function(){return this.job};b.prototype.TCd=function(){return this.p_};b.prototype.WBa=function(){var r=this.mt,t=this.Vb;this.mt.traverse(function(u){null!=u.WBa&&u.WBa(r,t)})};var q=function(){for(var r=[],t=0;8>t;t++)r.push(new Hp);var u=new Hp;return function(w,y,z){r[0].set(w.min.x,w.min.y,w.min.z);r[1].set(w.max.x,w.min.y,
w.min.z);r[2].set(w.max.x,w.max.y,w.min.z);r[3].set(w.max.x,w.max.y,w.max.z);r[4].set(w.max.x,w.min.y,w.max.z);r[5].set(w.min.x,w.max.y,w.min.z);r[6].set(w.min.x,w.max.y,w.max.z);r[7].set(w.min.x,w.min.y,w.max.z);for(var x=w=-1,C=Number.MAX_VALUE,A=-Number.MAX_VALUE,v=0;8>v;v++){var B=u.subVectors(r[v],y).dot(z);B<C&&(w=v,C=B);B>A&&(x=v,A=B)}return{min:r[w],MIc:C,max:r[x],LIc:A}}}();b.prototype.rsd=function(r){m.copy(this.Vb.position);this.xLc(l);var t=q(r,m,l),u=t.MIc;r=t.LIc;var w=(t.LIc-t.MIc)/
100;t=(r+u)/2;var y=t/4;u-=w;r+=w;r-u<y&&(u=t-y,r=t+y);this.GWb&&u<r/this.GWb&&(u=r/this.GWb);this.Vb.near=this.nsc?Math.max(u,this.rod):this.Vb.near;this.Vb.far=this.lsc?Math.max(r,this.qod):this.Vb.far;this.Vb.updateProjectionMatrix()};b.prototype.Evd=function(){if(!n){n=[];for(var r=0;8>r;r++)n.push(new Hp)}r=n;r[0].set(-1,-1,-1);r[1].set(-1,-1,1);r[2].set(-1,1,-1);r[3].set(-1,1,1);r[4].set(1,-1,-1);r[5].set(1,-1,1);r[6].set(1,1,-1);r[7].set(1,1,1);for(var t=new uq,u=0;8>u;u++)r[u].unproject(this.Vb),
t.expandByPoint(r[u]);return t};b.prototype.$Fb=function(r){var t=null;r&&r.Wcc&&(t=r.Wcc.tSd,d(t),r=hz.cJd(t,this,this.Vb,r.Wcc.RVd),t.copy(r));t||(t=this.oa(!0,a).clone());!0!==this.nsc&&!0!==this.lsc||this.rsd(t);r=this.Evd();t.intersectsBox(r)&&t.intersect(r);d(t);this.PPb&&(t.getCenter(this.Sfa).negate(),this.mk.position.add(this.Sfa),this.Vb.position.add(this.Sfa),t.min.add(this.Sfa),t.max.add(this.Sfa));this.Vb.updateMatrixWorld();e(this.mk,!0);t=this.zYa();if(null!=t){this.Vb.near>p&&(this.Vb.near=
p,this.Vb.updateProjectionMatrix());if(null==this.g6){if(this.Vb instanceof $u){r=2*this.Vb.near*Math.tan(this.Vb.fov*Math.PI/360)/this.Vb.zoom;var u=r*this.Vb.aspect}else r=(this.Vb.top-this.Vb.bottom)/this.Vb.zoom,u=(this.Vb.right-this.Vb.left)/this.Vb.zoom;r=new bv(u,r);u=new $t({transparent:!0});this.g6=new Zt(r,u);this.g6.Ls=function(){return!1}}this.g6.userData.u9d!==t&&(this.g6.material.map=(new Cx).load(Aj.tWa(t,this.jd*bc(),this.td*bc(),!1,!1,t.ga())),this.g6.userData.u9d=t);this.g6.parent!==
this.mt&&this.mt.add(this.g6);this.Vb.getWorldDirection(this.g6.position);this.g6.position.multiplyScalar(this.Vb.near+1);this.g6.position.add(this.Vb.position);this.g6.setRotationFromQuaternion(this.Vb.quaternion)}};b.prototype.Hzb=function(){return function(){this.PPb&&(this.mk.position.sub(this.Sfa),this.Vb.position.sub(this.Sfa),this.Sfa.set(0,0,0));this.Vb.updateProjectionMatrix();this.Vb.updateMatrixWorld();e(this.mk,!0)}}();b.prototype.render=function(){return function(){this.notify($y.wlc,
this);this.$Fb();var r=this;this.mt.traverseVisible(function(t){null!=t.ui&&t.ui(r.mt,r.Vb,r,r.fn)});null!=this.p_&&this.p_.render(r.mt,r.Vb);this.wzc?this.JG.render():this.fn.render(this.mt,this.Vb);this.TPa&&(this.Vb.position.sub(this.Sfa),this.q_.CV(),this.Vb.position.add(this.Sfa));this.bUb&&this.bUb.R$c();this.Hzb();this.mt.traverseVisible(function(t){null!=t.n6&&t.n6(r.mt,r.Vb,r,r.fn)});this.notify($y.T1a,this)}}();b.prototype.setSize=function(r,t,u){var w=this.fn.getSize(h),y=this.fn.getPixelRatio();
u=isNaN(u)?bc():u;if(w.width===r&&w.height===t&&u===y)return this;if(this.Vb instanceof $u)this.Vb.aspect=r/t;else if(this.Vb instanceof Pu&&this.Tod===b.RNb.BNb){if(w.width!==r){var z=(this.Vb.right-this.Vb.left)/2;y=this.Vb.left+z;z=z/w.width*r;this.Vb.left=y-z;this.Vb.right=y+z}w.height!==t&&(z=(this.Vb.top-this.Vb.bottom)/2,y=this.Vb.bottom+z,w=z/w.height*t,this.Vb.bottom=y-w,this.Vb.top=y+w)}this.Vb.updateProjectionMatrix();this.fn.setSize(r,t);this.wzc&&this.JG.setSize(r,t);isNaN(u)||this.fn.setPixelRatio(u);
null!=this.p_&&(w=Math.min(r,t),this.p_.setSize(Math.floor(w/6),u));u=this.jd;w=this.td;this.jd=r;this.td=t;this.gg(new az({type:$y.ata,source:this,args:{JPe:new Ud(u,w),current:new Ud(r,t)}}));return this};b.prototype.csd=function(r){null!=this.JG&&r instanceof oA&&this.JG.hVa(r)};b.prototype.KPc=function(){return null==this.JG?[]:this.JG.BCb()};b.prototype.getSize=function(r){return r?r.setSize(this.jd,this.td):new Ud(this.jd,this.td)};b.prototype.HXa=function(){var r=new Hp;return this.oa().getCenter(r)};
b.prototype.oa=function(r,t){null==t&&(t=a);if(r||t!==a)return this.mk.updateMatrixWorld(!0),r=hz.Ibb(this.mk,t,r),null==r&&(r=new uq),r;this.EWb&&this.os(t);return this.ESa.clone()};b.prototype.project=function(r){this.Vb.updateMatrixWorld();r.project(this.Vb);return r};b.prototype.b1b=function(r){this.Qk.push(r);r.setOptions({plot:this,domelement:this.fn.domElement});return this};b.prototype.$b=function(r){for(var t=0;t<this.Qk.length;t++)if(this.Qk[t].Ga()===r)return this.Qk[t];return null};b.prototype.xYd=
function(r){var t=this.Qk.indexOf(r);-1!==t&&this.Qk.splice(t,1)[0].dispose();r===this.q_&&(this.q_=null);return this};b.prototype.pRd=function(){return this.Qk};b.prototype.gg=function(r){var t=$y;this.XM=!0;if(this.C$)if(r instanceof az){var u=r.sr();u!==t.eP&&u!==t.CG&&u!==t.m3a||!this.Mkd||(this.EWb=!0);null==this.p_||u!==t.Camera&&u!==t.ata||this.p_.gg(r);this.notify(u,this,{source:r.hs(),args:r.bLc()});r.dispose()}else this.notify(t.ib,this);return this};b.prototype.os=function(r,t){r=r||a;
this.mk.updateMatrixWorld(!0);r=hz.Ibb(this.mk,r,t);null==r?null==this.ESa&&(r=10*this.QWa().distanceTo(this.Vb.position),t=this.QWa(),this.ESa=new uq(t.clone().addScalar(-r),t.clone().addScalar(r))):(this.Nca(r.min),this.Nca(r.max),this.ESa.copy(r));this.EWb=!1;return this};b.prototype.T6=function(){return this.fn};b.prototype.QMd=function(){return this.fn.info};b.prototype.dJd=function(){if(null==this.Yva){var r=new yr(this.jd,this.td,ay);this.Yva=new oy(this.jd,this.td,{depthTexture:r})}this.Yva.width===
this.jd&&this.Yva.height===this.td||this.Yva.setSize(this.jd,this.td);return this.Yva};b.prototype.dispose=function(){ve.ya().aKb(this.mk);this.Zwa&&(this.Zwa instanceof Kl?this.Zwa.stop():$a.cancelAnimationFrame(this.Zwa));this.Qk.forEach(function(t){t.dispose()});this.Qk=[];null!=this.p_&&this.p_.dispose();this.p_=null;null!=this.mt&&hz.dispose(this.mt.children);this.mt=null;null!=this.job&&this.job.dispose();this.job=null;null!=this.Yva&&this.Yva.dispose();if(null!=this.fn){this.Me.removeChild(this.fn.domElement);
null!=this.fn.dispose&&this.fn.dispose();var r=this.fn.getContext().getExtension("WEBGL_lose_context");r&&r.loseContext();this.fn=null}null!=this.JG&&(this.JG.dispose(),this.JG=null);this.SQb=this.bUb=this.q_=this.n9=this.wta=this.Vb=this.mk=this.Me=null;te.prototype.dispose.call(this)};b.prototype.getCamera=function(){return this.Vb};b.prototype.getController=function(){return this.q_};b.prototype.aT=function(){return this.mk};b.prototype.VX=function(){return this.Me};b.prototype.YPd=function(){return this.XM};
b.prototype.Mic=function(r){ve.ya().bec(this.mk,r);return this};b.prototype.zYa=function(){return ve.ya().zYa(this.mk)};b.prototype.N5c=function(r){this.PPb=r};return b}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyb290U2NhbGUiOiJwRCIsInJvb3RTY2FsZUludiI6Ik5jYSIsImdldENhbWVyYUxvY2F0aW9uIjoic3lhIiwiZ2V0Q2FtZXJhTG9va0F0IjoiUVdhIiwicmVzZXRDYW1lcmEiOiJJWmQiLCJmaXRDYW1lcmEiOiJxS2MiLCJzZXRDYW1lcmFMb2NhdGlvbiI6IngwZCIsInNldENhbWVyYUxvb2tBdCI6InJmYyIsIm1vdmVDYW1lcmEiOiJGWmEiLCJnZXRTY2VuZSI6IlVDYiIsImdldEFuaW1hdGlvbk1hbmFnZXIiOiJpZGIiLCJnZXRDb21wYXNzIjoiVENkIiwicHJlcGFyZVJlbmRlciI6IiRGYiIsImZpbmlzaFJlbmRlciI6Ikh6YiIsImFkZE11bHRpcGFzcyI6ImNzZCIsImdldE11bHRpcGFzcyI6IktQYyIsImdldE1vZGVsT3JpZ2luIjoiSFhhIiwiZ2V0TW9kZWxMaW1pdHMiOiJvYSIsImFkZFRvb2wiOiJiMWIiLCJnZXRUb29sQnlOYW1lIjoiJGIiLCJyZW1vdmVUb29sIjoieFlkIiwibGlzdFRvb2wiOiJwUmQiLCJpbnZhbGlkYXRlT2JqZWN0IjoiZ2ciLCJ1cGRhdGVNb2RlbExpbWl0cyI6Im9zIiwiZ2V0UmVuZGVyZXIiOiJUNiIsImdldFVzYWdlU3RhdGlzdGljcyI6IlFNZCIsImdldENvbnRhaW5lciI6IlZYIiwic2V0V2F0ZXJtYXJrIjoiTWljIn19fSAg");var RA=/*#__PURE__*/function(){function d(b){oA.call(this);this.hb=G(b,{clearalpha:0},!0);this.kvd=this.hb.clearalpha;this.clear=!0;this.$Eb=!1;this.type="RenderPass";this.pA=b.scene;this.pN=b.camera;this.W8a=b.overridematerial;this.ald=!1;this.setOptions(this.hb)}var a=new Pq;L(d,"geotoolkit3d.postprocessing.RenderPass");D(d,oA);d.prototype.setOptions=function(b){this.hb=G(b,this.hb);b.overridematerial&&(this.W8a=b.overridematerial,this.W8a.needsUpdate=!0);null!=b.enabled&&(this.enabled=b.enabled);return this};
d.prototype.ta=function(){return this.hb};d.prototype.setSize=function(){return this};d.prototype.dispose=function(){null!=this.W8a&&this.W8a.dispose()};d.prototype.render=function(b,c,e){c=b.autoClear;b.autoClear=!1;this.pA.overrideMaterial=this.W8a;if(this.hb.clearcolor){var f=b.getClearColor(a).getHex();var g=b.getClearAlpha();b.setClearColor(this.hb.clearcolor,this.kvd)}this.ald&&b.clearDepth();b.setRenderTarget(this.Fra?null:e);this.clear&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil);
b.render(this.pA,this.pN);this.hb.clearcolor&&b.setClearColor(f,g);this.pA.overrideMaterial=null;b.autoClear=c};return d}();var SA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){Aq.call(this);var a=new Nw;a.moveTo(0,0);var b=Xg.zJa(0,0,1,1),c=b[0];a.moveTo(c.mqa(),c.pqa());for(var e=0;e<b.length;++e)c=b[e],a.bezierCurveTo(c.nqa(),c.qqa(),c.oqa(),c.rqa(),c.zia(),c.Aia());a.closePath();a=a.extractPoints().shape;b=[];for(c=0;c<a.length;c++)b.push(new Hp(a[c].x,a[c].y,0));this.setFromPoints(b)}D(d,Aq);L(d,"geotoolkit3d.scene.ellipse.EllipseGeometry");d.prototype.GJc=function(){for(var a=this.getAttribute("position").array,b=[],c=0;c<a.length/3-
1;c++)b.push(a[3*c],a[3*c+1],a[3*c+2],a[3*(c+1)],a[3*(c+1)+1],a[3*(c+1)+2]);return b};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleHRyYWN0U2VnbWVudFBvaW50cyI6IkdKYyJ9fX0g");var TA=/*#__PURE__*/ta(/*#__PURE__*/{Oa:"center",cmc:"closest"},2,"eyJDZW50ZXIiOiJPYSIsIkNsb3Nlc3QiOiJjbWMifSAg"),UA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(k){fz.call(this);k=k||{};this.re=new gz("Missing Label!!!",k.hasOwnProperty("titlestyle")?null:{style:new Fi({font:"12px Arial",color:"white"})});this.re.visible=!0;this.add(this.re);this.lwb=1;var l=new Aq,m=[];m.push(new Hp(0,0,0));m.push(new Hp(1,1,1));l.setFromPoints(m);m=k.hasOwnProperty("linestyle")?null:Az.JIa(new Y);this.im=new rt(l,m);this.add(this.im);this.uI=new rt(new SA,m);this.uI.scale.set(0,0,0);this.add(this.uI);this.Be=TA.Oa;
this.gv=null;this.MPa=50;this.sl=new uq;this.SDa=new Hp;this.GPb=null;this.setOptions(k)}for(var a,b=[],c=[],e=0;8>e;e++)b.push(new Hp),c.push(new Hp);var f=new Hp,g=new Hp,h=new Hp;D(d,fz);L(d,"geotoolkit3d.scene.AnnotationBase");d.prototype.ui=function(k,l,m,n){if(this.visible){fz.prototype.ui.call(this,k,l,m,n);this.gv||(this.parent.getBoundingBox?this.sl.copy(this.parent.getBoundingBox()).getCenter(this.SDa):this.parent.geometry&&(this.parent.geometry.boundingBox||"function"!==typeof this.parent.geometry.computeBoundingBox||
this.parent.geometry.computeBoundingBox(),this.sl.copy(this.parent.geometry.boundingBox).getCenter(this.SDa)));b[0].set(this.sl.min.x,this.sl.min.y,this.sl.min.z);b[1].set(this.sl.min.x,this.sl.min.y,this.sl.max.z);b[2].set(this.sl.min.x,this.sl.max.y,this.sl.min.z);b[3].set(this.sl.min.x,this.sl.max.y,this.sl.max.z);b[4].set(this.sl.max.x,this.sl.min.y,this.sl.min.z);b[5].set(this.sl.max.x,this.sl.min.y,this.sl.max.z);b[6].set(this.sl.max.x,this.sl.max.y,this.sl.min.z);b[7].set(this.sl.max.x,this.sl.max.y,
this.sl.max.z);var p,q=0;for(p=0;p<c.length;p++)hz.R1a(b[p],l,m.getSize(),c[p]);g.set(0,0,1).applyEuler(l.rotation);switch(this.re.jb().Lj()){case Ai.tc:f.set(-g.y,g.x,0);h.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(p=0;p<c.length;p++)h.x<c[p].x&&h.z<c[p].z&&(h.x=c[p].x,h.y=c[p].y,q=p);break;case Ai.cc:for(f.set(g.y,-g.x,0),h.set(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE),p=0;p<c.length;p++)h.x>c[p].x&&h.z<c[p].z&&(h.x=c[p].x,h.y=c[p].y,q=p)}this.re.AMa(f.normalize());
1!==this.lwb?(g.subVectors(this.GPb||b[q],this.SDa),g.setLength(g.length()*this.lwb),g.add(this.SDa),this.re.position.copy(g)):this.re.position.copy(this.GPb||b[q]);this.re.ui(k,l,m,n);this.uI.visible=0<this.uI.scale.x&&0<this.mn().length;if(this.Be===d.sw.cmc&&!this.uI.visible&&(a=a||new kw,h.copy(this.SDa),this.parent.localToWorld(h),g.subVectors(h,l.position).normalize(),a.set(l.position,g),k=a.intersectObject(this.parent,!0),0<k.length)){l=Number.MAX_VALUE;for(p=q=0;p<k.length;p++)m=k[p],null!=
m.face&&l>m.distance&&(l=m.distance,q=p);this.JEc(this.parent.worldToLocal(k[q].point));return}this.JEc(this.SDa)}};d.prototype.Fr=function(k){this.re.Eb(k);return this};d.prototype.mn=function(){return this.re.me()};d.prototype.H7c=function(k){this.lwb=k;return this};d.prototype.uia=function(){return this.lwb};d.prototype.K7c=function(k){this.re.kb(k);return this};d.prototype.ASc=function(){return this.re.jb()};d.prototype.qa=function(k){k=Az.JIa(k);this.im.material=k;this.im.needsUpdate=!0;this.uI.material=
k;this.uI.needsUpdate=!0;return this};d.prototype.Fa=function(){return this.im.material.userData.LY};d.prototype.setMode=function(k){this.Be=k;return this};d.prototype.cq=function(){return this.Be};d.prototype.M_a=function(k){this.gv=k;this.re.position.copy(k);this.im.position.copy(k);this.uI.position.copy(k);this.Y1b();return this};d.prototype.Gy=function(){return this.gv};d.prototype.W2=function(k){this.re.W2(k);return this};d.prototype.setOptions=function(k){if(null==k)return this;fz.prototype.setOptions.call(this,
k);k.hasOwnProperty("title")&&this.Fr(k.title);k.hasOwnProperty("titledistancefactor")&&this.H7c(k.titledistancefactor);k.hasOwnProperty("titlestyle")&&this.K7c(k.titlestyle);k.hasOwnProperty("linestyle")&&this.qa(k.linestyle);k.hasOwnProperty("mode")&&this.setMode(k.mode);k.hasOwnProperty("anchorpoint")&&this.M_a(k.anchorpoint);k.hasOwnProperty("outline")&&this.W2(k.outline);return this};d.prototype.ta=function(){return xb({title:this.mn(),titledistancefactor:this.uia(),titlestyle:this.ASc(),linestyle:this.Fa(),
mode:this.cq(),anchorpoint:this.Gy()},fz.prototype.ta.call(this))};d.prototype.Wib=function(k,l){this.uI.scale.copy(k);this.uI.rotation.copy(l);return this};d.prototype.Nib=function(k){this.GPb=k;return this};d.sw=TA;d.prototype.Y1b=function(){this.sl.min.x=this.gv.x-this.MPa-this.uI.scale.x;this.sl.min.y=this.gv.y-this.MPa-this.uI.scale.y;this.sl.min.z=this.gv.z-this.MPa;this.sl.max.x=this.gv.x+this.MPa+this.uI.scale.x;this.sl.max.y=this.gv.y+this.MPa+this.uI.scale.y;this.sl.max.z=this.gv.z+this.MPa;
this.sl.getCenter(this.SDa)};d.prototype.JEc=function(k){h.copy(k);var l=.75;if(this.uI.visible){this.uI.position.copy(k);g.set(0,0,1);g.applyEuler(this.uI.rotation);var m=Math.asin(g.x),n=Math.asin(g.y),p=Math.sign(this.re.oba().x-k.x);k=Math.sign(this.re.oba().y-k.y);var q=this.uI.scale.x*l*.5,r=this.uI.scale.y*l*.5;g.set(p*q*Math.cos(m),k*r*Math.cos(n),-p*q*Math.sin(m)-k*r*Math.sin(n));h.add(g);this.re.oba().add(g)}this.im.position.copy(h);g.subVectors(this.re.position,this.re.oba()).multiplyScalar(l);
g.subVectors(this.re.position,g);this.im.scale.copy(h.sub(g)).negate()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJ1aSIsInNldFRpdGxlIjoiRnIiLCJnZXRUaXRsZSI6Im1uIiwic2V0VGl0bGVEaXN0YW5jZUZhY3RvciI6Ikg3YyIsImdldFRpdGxlRGlzdGFuY2VGYWN0b3IiOiJ1aWEiLCJzZXRUaXRsZVN0eWxlIjoiSzdjIiwiZ2V0VGl0bGVTdHlsZSI6IkFTYyIsInNldExpbmVTdHlsZSI6InFhIiwiZ2V0TGluZVN0eWxlIjoiRmEiLCJnZXRNb2RlIjoiY3EiLCJzZXRBbmNob3JQb2ludCI6Ik1fYSIsImdldEFuY2hvclBvaW50IjoiR3kiLCJzZXRPdXRsaW5lIjoiVzIiLCJnZXRPcHRpb25zIjoidGEifX19");var nja=/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{zaxiscolor:new Pq(255),yaxiscolor:new Pq(65280),xaxiscolor:new Pq(16711680)},!0);var b=new Hp(0,0,0),c=new Hp(0,0,1);this.add(new eq(c,b,8,a.zaxiscolor,2,1));c=new Hp(0,1,0);this.add(new eq(c,b,8,a.yaxiscolor,2,1));c=new Hp(1,0,0);this.add(new eq(c,b,8,a.xaxiscolor,2,1))}D(d,fz);L(d,"geotoolkit3d.scene.compass.CompassAxis");return d}();var VA=/*#__PURE__*/function(){function d(){var a=new Nw,b=Xg.zJa(0,0,1,1),c=b[0];a.moveTo(c.mqa(),c.pqa());for(var e=0;e<b.length;++e)c=b[e],a.bezierCurveTo(c.nqa(),c.qqa(),c.oqa(),c.rqa(),c.zia(),c.Aia());Pw.call(this,a)}D(d,Pw);L(d,"geotoolkit3d.scene.ellipse.FilledEllipseGeometry");return d}();var WA=/*#__PURE__*/ta(/*#__PURE__*/{qb:"top",Ed:"bottom",Oa:"center"},2,"eyJUb3AiOiJxYiIsIkJvdHRvbSI6IkVkIiwiQ2VudGVyIjoiT2EifSAg");var XA=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f,g,h,k){e.set(0,0,0);f.min.x<g.min.x&&(e.x=(g.min.x-f.min.x)/h.x);f.max.x>g.max.x&&(e.x=(g.max.x-f.max.x)/h.x);f.min.y<g.min.y&&(e.y=(g.min.y-f.min.y)/h.y);f.max.y>g.max.y&&(e.y=(g.max.y-f.max.y)/h.y);f.min.z<g.min.z&&(e.z=(g.min.z-f.min.z)/h.z);f.max.z>g.max.z&&(e.z=(g.max.z-f.max.z)/h.z);k.add(e)}function a(){fz.call(this);this.eQb=new Hp;this.Nsc=this.Ruc=!0}var b=new Hp,c=new Hp;D(a,fz);L(a,"geotoolkit3d.scene.grid.legend.PlaneLegendContainer");a.prototype.setOptions=
function(f){fz.prototype.setOptions.call(this,f);f.legendlabel!==this.XP&&(this.XP&&(this.remove(this.XP),hz.dispose(this.XP)),this.XP=f.legendlabel,this.add(this.XP));this.Vc=f.grid;this.eQb.copy(f.position);this.position.copy(this.eQb);this.scale.copy(f.scale);this.Ruc=f.hideiftoolarge;this.Nsc=f.centerbeforehiding;return this};var e=new Hp;a.prototype.ui=function(f,g,h,k){fz.prototype.ui.call(this,f,g,h,k);if(!this.Vc||!this.XP||!this.visible)return this;this.position.copy(this.eQb);this.updateMatrixWorld();
this.XP.visible=!0;if(!this.Ruc)return this;this.XP.ui(f,g,h,k);this.XP.n6(f,g,h,k);this.XP.computeBoundingBox();f=this.XP.getBoundingBox();f.getSize(b);g=this.Vc.yia();g.getSize(c);this.XP.visible=!1;if(b.x>c.x||b.y>c.y||b.z>c.z)return this;if(g.containsBox(f))return this.XP.visible=!0,this;this.Nsc&&(d(f,g,c,this.position),this.updateMatrixWorld(),this.XP.visible=!0);return this};a.prototype.dispose=function(){fz.prototype.dispose.call(this);hz.dispose(this.XP);this.Vc=this.XP=null};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJ1aSJ9fX0g");var YA=/*#__PURE__*/function(){function d(b){b.defines.hasOwnProperty("addedLabelShaders")||(b.defines.addedLabelShaders=!0,b.uniforms.map={value:new Bx},b.uniforms.uColor={value:new Pq("white")})}function a(){}L(a,"geotoolkit3d.util.shaders.LabelShaders");a.fgd="attribute vec2 texcoord;\nattribute vec2 texcoordInv;\nvarying vec2 vTexcoord;\nvarying vec2 vTexcoordInv;\n#include <common>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n    vTexcoord = texcoord;\n    vTexcoordInv = texcoordInv;\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    vec4 mvPosition = vec4( position, 1.0 );\n    mvPosition = modelViewMatrix * mvPosition;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";a.egd=
"uniform vec3 uColor;\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D map;\nvarying vec2 vTexcoord;\nvarying vec2 vTexcoordInv;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <aomap_fragment>\n    #include <envmap_fragment>\n    vec4 textColor = vec4(uColor, 1);\n    if (gl_FrontFacing) {\n        gl_FragColor = textColor * texture2D(map, vTexcoord);\n    } else {\n        gl_FragColor = textColor * texture2D(map, vTexcoordInv);\n    }\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
a.setOptions=function(b,c){null!=c&&(d(b),null!=c.map&&(b.uniforms.map.value=c.map),null!=c.textcolor&&(b.uniforms.uColor.value=new Pq(c.textcolor),b.uniforms.uColor.needsUpdate=!0))};return a}();var ZA=/*#__PURE__*/function(){function d(a){Lw.call(this);this.type="LabelMaterial";var b=xb(a,{opacity:1,renderside:Fr},!0);this.side=a.renderside;this.opacity=b.opacity;this.transparent=!0;this.vertexShader=YA.fgd;this.fragmentShader=YA.egd;this.map=b.map;this.setOptions(b)}D(d,Lw);L(d,"geotoolkit3d.scene.label.LabelMaterial");d.prototype.setOptions=function(a){a.hasOwnProperty("renderside")&&(this.side=a.renderside);a.hasOwnProperty("opacity")&&(this.opacity=a.opacity);YA.setOptions(this,a)};return d}();var $A=/*#__PURE__*/function(){function d(c,e){Aq.call(this);this.type="LabelGeometry";var f=c/2,g=e/2,h=a+1,k=b+1,l=c/a,m=e/b;e=[];c=[];for(var n=[],p=[],q=[],r=0;r<k;r++)for(var t=r*m-g,u=0;u<h;u++){var w=u*l-f;c.push(w,-t,0);n.push(0,0,1);p.push(u/a);p.push(1-r/b);q.push(1-u/a);q.push(1-r/b)}for(f=0;f<a;f++)for(g=0;g<b;g++)k=g+h*g,l=g+h*(f+1),m=g+1+h*(f+1),r=g+1+h*f,e.push(k,l,r),e.push(l,m,r);this.setIndex(e);this.setAttribute("position",new ds(c,3));this.setAttribute("normal",new ds(n,3));this.setAttribute("texcoord",
new ds(p,2));this.setAttribute("texcoordInv",new ds(q,2))}var a=1,b=1;D(d,Aq);L(d,"geotoolkit3d.scene.label.LabelGeometry");return d}();var aB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(w,y,z){this.Wd=w;this.cT=y;this.xna=z}for(var a=null,b=[new Hp,new Hp,new Hp],c=[],e=null,f=[new Hp,new Hp,new Hp],g=[],h=[[],[],[]],k=[[],[],[]],l=[],m=new Hp,n=new Hp,p=new Hp,q=new Hp,r=new Hp,t=Array(8),u=0;u<t.length;u++)t[u]=new Hp;L(d,"geotoolkit3d.util.OrientedBoundingBox");d.prototype.set=function(w,y,z){this.Wd=w;this.cT=y;this.xna=z;return this};d.prototype.aI=function(w){this.Wd=w;return this};d.prototype.K1d=function(w){this.cT=w;return this};d.prototype.v4d=
function(w){this.xna=w;return this};d.prototype.copy=function(w){this.Wd.copy(w.getCenter());this.cT.copy(w.Yha());this.xna.copy(w.mza());return this};d.prototype.clone=function(){return(new d).copy(this)};d.prototype.equals=function(w){return w.getCenter().equals(this.Wd)&&w.Yha().equals(this.cT)&&w.mza().equals(this.xna)};d.prototype.containsPoint=function(w){q.subVectors(w,this.Wd);this.xna.extractBasis(m,n,p);return Math.abs(q.dot(m))<=this.cT.x&&Math.abs(q.dot(n))<=this.cT.y&&Math.abs(q.dot(p))<=
this.cT.z};d.prototype.FKc=function(w){w.getCenter(this.Wd);w.getSize(this.cT).multiplyScalar(.5);this.xna.identity();return this};d.prototype.vPd=function(w){w=(new d).FKc(w);return this.lUc(w)};d.prototype.intersectsPlane=function(w){this.xna.extractBasis(m,n,p);var y=this.cT.x*Math.abs(w.normal.dot(m))+this.cT.y*Math.abs(w.normal.dot(n))+this.cT.z*Math.abs(w.normal.dot(p));w=w.normal.dot(this.Wd)-w.constant;return Math.abs(w)<=y};d.prototype.lUc=function(w,y){null==y&&(y=Number.EPSILON);a=this.Wd;
c[0]=this.cT.x;c[1]=this.cT.y;c[2]=this.cT.z;this.xna.extractBasis(b[0],b[1],b[2]);e=w.getCenter();var z=w.Yha();g[0]=z.x;g[1]=z.y;g[2]=z.z;w.mza().extractBasis(f[0],f[1],f[2]);for(w=0;3>w;w++)for(z=0;3>z;z++)h[w][z]=b[w].dot(f[z]);q.subVectors(e,a);l[0]=q.dot(b[0]);l[1]=q.dot(b[1]);l[2]=q.dot(b[2]);for(w=0;3>w;w++)for(z=0;3>z;z++)k[w][z]=Math.abs(h[w][z])+y;for(w=0;3>w;w++)if(y=c[w],z=g[0]*k[w][0]+g[1]*k[w][1]+g[2]*k[w][2],Math.abs(l[w])>y+z)return!1;for(w=0;3>w;w++)if(y=c[0]*k[0][w]+c[1]*k[1][w]+
c[2]*k[2][w],z=g[w],Math.abs(l[0]*h[0][w]+l[1]*h[1][w]+l[2]*h[2][w])>y+z)return!1;y=c[1]*k[2][0]+c[2]*k[1][0];z=g[1]*k[0][2]+g[2]*k[0][1];if(Math.abs(l[2]*h[1][0]-l[1]*h[2][0])>y+z)return!1;y=c[1]*k[2][1]+c[2]*k[1][1];z=g[0]*k[0][2]+g[2]*k[0][0];if(Math.abs(l[2]*h[1][1]-l[1]*h[2][1])>y+z)return!1;y=c[1]*k[2][2]+c[2]*k[1][2];z=g[0]*k[0][1]+g[1]*k[0][0];if(Math.abs(l[2]*h[1][2]-l[1]*h[2][2])>y+z)return!1;y=c[0]*k[2][0]+c[2]*k[0][0];z=g[1]*k[1][2]+g[2]*k[1][1];if(Math.abs(l[0]*h[2][0]-l[2]*h[0][0])>
y+z)return!1;y=c[0]*k[2][1]+c[2]*k[0][1];z=g[0]*k[1][2]+g[2]*k[1][0];if(Math.abs(l[0]*h[2][1]-l[2]*h[0][1])>y+z)return!1;y=c[0]*k[2][2]+c[2]*k[0][2];z=g[0]*k[1][1]+g[1]*k[1][0];if(Math.abs(l[0]*h[2][2]-l[2]*h[0][2])>y+z)return!1;y=c[0]*k[1][0]+c[1]*k[0][0];z=g[1]*k[2][2]+g[2]*k[2][1];if(Math.abs(l[1]*h[0][0]-l[0]*h[1][0])>y+z)return!1;y=c[0]*k[1][1]+c[1]*k[0][1];z=g[0]*k[2][2]+g[2]*k[2][0];if(Math.abs(l[1]*h[0][1]-l[0]*h[1][1])>y+z)return!1;y=c[0]*k[1][2]+c[1]*k[0][2];z=g[0]*k[2][1]+g[1]*k[2][0];
return Math.abs(l[1]*h[0][2]-l[0]*h[1][2])>y+z?!1:!0};d.prototype.N9c=function(w){q.set(0,0,0).sub(this.Yha());r.copy(this.Yha());var y=this.mza(),z=this.getCenter();t[0].set(q.x,q.y,q.z).applyMatrix3(y).add(z);t[1].set(q.x,r.y,q.z).applyMatrix3(y).add(z);t[2].set(r.x,r.y,q.z).applyMatrix3(y).add(z);t[3].set(r.x,q.y,q.z).applyMatrix3(y).add(z);t[4].set(q.x,q.y,r.z).applyMatrix3(y).add(z);t[5].set(q.x,r.y,r.z).applyMatrix3(y).add(z);t[6].set(r.x,r.y,r.z).applyMatrix3(y).add(z);t[7].set(r.x,q.y,r.z).applyMatrix3(y).add(z);
w=w?w:new uq;w.setFromPoints(t);return w};d.prototype.getCenter=function(){return this.Wd};d.prototype.Yha=function(){return this.cT};d.prototype.mza=function(){return this.xna};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDZW50ZXIiOiJhSSIsInNldEhhbGZTaXplIjoiSzFkIiwic2V0Um90YXRpb24iOiJ2NGQiLCJmcm9tQm94MyI6IkZLYyIsImludGVyc2VjdHNCb3gzIjoidlBkIiwiaW50ZXJzZWN0c09yaWVudGVkQm91bmRpbmdCb3giOiJsVWMiLCJ0b1RocmVlQm94IjoiTjljIiwiZ2V0SGFsZlNpemUiOiJZaGEiLCJnZXRSb3RhdGlvbiI6Im16YSJ9fX0g");var bB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(x){fz.call(this);this.Fg(!1);this.CC=new Zt(new $A(1,1),a(x.canvas));this.add(this.CC);var C=xb(x,{enabled:!0,style:new Fi({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)",alignment:b,baseline:c}),outline:{enabled:!1,innercolor:"white",outlinecolor:"black",thickness:6},issizeindevice:!0,renderside:Fr,opacity:1,scale:new Hp(1,1,1),normal:h,freeorientation:!1,enforcetextupright:!0,facingoffset:0,verticalanchor:WA.Oa});null==x.origin&&hb("geotoolkit3d.scene.label.Label: origin cannot be null");
this.lj=C.canvas;this.Tg=this.lj.getContext("2d");this.cr=C.origin instanceof Hp?C.origin:(new Hp).fromArray(C.origin);this.ST=C.zmin;this.RT=C.zmax;this.Bb=C.text||this.cr.z;this.RI=C.normal instanceof Hp?C.normal.clone():(new Hp).fromArray(C.normal);this.Jab=this.RI.clone();this.nUb=C.freeorientation;this.Qtc=C.enforcetextupright;this.L5a=C.facingoffset;this.af=C.style;this.e0b=C.verticalanchor;this.CC.scale.copy(C.scale);this.zob=this.CC.scale.clone();this.visible=C.enabled;this.Zqa=this.boundingSphere=
this.boundingBox=null;this.Evb=C.issizeindevice;this.uXb=C.outline.enabled||!1;this.vXb=C.outline;this.Hwb=!0;this.r3();this.t0=!1;this.Evb=C.issizeindevice;this.GT=this.lj.width;this.FT=this.lj.height;this.D$a=new Hp(this.GT,this.FT,1);this.Fvb=1;this.hUb=new Hp(1,1,1);this.luc=new sv;this.dYb=new sv;this.h7a=new Hp;this.i7a=new Xt;this.A0b=new Hp;this.CC.material.setOptions({opacity:C.opacity,renderside:C.renderside,textcolor:this.af.DE().m8()});this.position.copy(this.cr);this.frustumCulled=!1;
this.name="label";this.V$c();this.computeBoundingSphere()}function a(x){x=new Hq(x);x.minFilter=Ct;x.generateMipmaps=!1;return new ZA({map:x})}var b=Ai.tc,c=zi.Ed,e=new Hp(1,0,0),f=new Hp(0,1,0),g=new Hp(0,0,1),h=e,k=/<br\s*\/?>|\r\n|\n|\r/g,l=new Ud,m=new Hp,n=new Hp,p=new sv,q=new Hp,r=new Hp,t=new Xt,u=new sv,w=new sv,y=new sv,z=new Hp;D(d,fz);L(d,"geotoolkit3d.scene.label.Label");d.prototype.Q3d=function(x){this.setOptions({origin:x});return this};d.prototype.v1d=function(x){this.setOptions({normal:x});
return this};d.prototype.V$c=function(){this.RI.normalize();this.Jab.copy(this.RI);this.Jab.z=0;this.Jab.normalize();var x=e.angleTo(this.Jab);r.crossVectors(e,this.Jab);0>r.z&&(x=-x);u.setFromAxisAngle(g,x);x=this.nUb?g.angleTo(this.RI):Math.PI/2;w.setFromAxisAngle(f,x);y.setFromAxisAngle(g,Math.PI/2);this.dYb.copy(u).multiply(w).multiply(y).normalize();this.CC.quaternion.copy(this.dYb);y.setFromAxisAngle(g,-Math.PI/2);this.luc.copy(u).multiply(w).multiply(y).normalize()};d.prototype.setOptions=
function(x){x=x||{};null!=x.style&&(this.af=x.style,this.CC.material.setOptions({textcolor:this.af.DE().m8()}),this.Hwb=!0);null!=x.doublesided&&(this.CC.material.side=x.doublesided?Fr:ls);null!=x.enforcetextupright&&(this.Qtc=x.enforcetextupright);var C=!1;x.origin&&(Array.isArray(x.origin)?this.cr.fromArray(x.origin):this.cr.copy(x.origin),this.position.copy(this.cr),C=!0);var A=!1;x.normal&&(Array.isArray(x.normal)?this.RI.fromArray(x.normal):this.RI.copy(x.normal),A=!0);null!=x.freeorientation&&
x.freeorientation!==this.nUb&&(this.nUb=x.freeorientation,A=!0);null!=x.facingoffset&&x.facingoffset!==this.L5a&&(this.L5a=x.facingoffset,C=!0);A&&this.V$c();(C||A)&&this.computeBoundingSphere();return this};d.prototype.r3=function(){var x=sg.measureText(this.Bb,this.af),C=x.ca(),A=x.da();x=(this.Bb+"").split(k);var v=0;this.uXb&&(v=this.vXb.thickness,C+=2*v,A+=2*v*x.length);var B=A/x.length;this.Tg.clearRect(0,0,this.lj.width,this.lj.height);this.lj.width=C;this.lj.height=A;this.Tg.font=this.af.wt();
this.uXb?(this.Tg.strokeStyle=this.vXb.outlinecolor,this.Tg.lineWidth=v,this.Tg.lineJoin="miter",this.Tg.miterLimit=3):this.Tg.fillStyle="white";this.Tg.textBaseline=c;this.Tg.textAlign=b;C=B;for(A=0;A<x.length;A++)this.uXb?(this.Tg.strokeText(x[A],v,C-v),this.Tg.fillStyle=this.vXb.innercolor,this.Tg.fillText(x[A],v,C-v)):this.Tg.fillText(x[A],0,C),C+=B;this.t0=!1;this.position.copy(this.cr);this.CC.material.map.needsUpdate=!0};d.prototype.computeBoundingBox=function(){this.Ayb();this.boundingBox||
(this.boundingBox=new uq);this.rCb().N9c(this.boundingBox)};d.prototype.computeBoundingSphere=function(){this.computeBoundingBox();this.boundingSphere||(this.boundingSphere=new Xw);this.boundingBox.getBoundingSphere(this.boundingSphere)};d.prototype.Ayb=function(){this.Zqa||(this.Zqa=new aB(new Hp,new Hp,new Wt));this.zob.copy(this.CC.scale);this.CC.scale.multiply(this.D$a);this.Evb&&this.CC.scale.multiplyScalar(this.Fvb);this.updateMatrixWorld();this.CC.matrixWorld.decompose(q,p,n);this.Zqa.getCenter().copy(q);
this.CC.geometry.boundingBox||this.CC.geometry.computeBoundingBox();var x=this.CC.geometry.boundingBox;this.Zqa.Yha().copy(x.max).sub(x.min).divideScalar(2);this.Zqa.Yha().multiply(n);t.makeRotationFromQuaternion(p);this.Zqa.mza().setFromMatrix4(t);this.CC.scale.copy(this.zob)};d.prototype.getBoundingBox=function(){this.boundingBox||this.computeBoundingBox();return this.boundingBox};d.prototype.getBoundingSphere=function(){this.boundingSphere||this.computeBoundingSphere();return this.boundingSphere};
d.prototype.rCb=function(){this.Zqa||this.Ayb();return this.Zqa};d.prototype.Eb=function(x){this.Bb!==x&&(this.Bb=x,this.Hwb=!0)};d.prototype.me=function(){return this.Bb};d.prototype.usd=function(x,C,A){x=x.distanceTo(C.position);C instanceof $u?(C=C.fov*Math.PI/180,C=2*Math.tan(C/2)*x):C=C.top-C.bottom;A=A.userData.plot.getSize(l).da();this.Fvb=C/A};d.prototype.xCd=function(x){this.h7a.equals(x.position)&&this.i7a.equals(x.projectionMatrix)||(this.h7a.copy(x.position),this.i7a.copy(x.projectionMatrix),
x.getWorldDirection(this.A0b),this.A0b.z=0);return this.A0b};d.prototype.ui=function(x,C,A,v){if(!this.visible)return this;this.position.copy(this.cr);fz.prototype.ui.call(this,x,C,A,v);this.zob.copy(this.CC.scale);this.Hwb&&(this.Hwb=!1,this.r3());this.t0||(fz.prototype.gg.call(this),this.GT=this.lj.width,this.FT=this.lj.height,this.t0=!0);this.D$a.set(this.GT,this.FT,1);this.Evb&&(A=this.parent.localToWorld(m.copy(this.position)),this.usd(A,C,x));m.setFromMatrixScale(this.parent.matrixWorld);this.hUb.set(1/
m.x,1/m.y,1/m.z);x=0!==this.L5a||this.e0b!==WA.Oa;z.set(0,0,0);0!==this.L5a&&(z.z=this.L5a*this.D$a.y);this.e0b!==WA.Oa&&(z.y=this.D$a.y/2,this.e0b===WA.qb&&(z.y*=-1));x&&(z.applyQuaternion(this.CC.quaternion),z.multiply(this.hUb));this.CC.scale.multiply(this.D$a);this.Evb&&(x&&z.multiplyScalar(this.Fvb),this.CC.scale.multiplyScalar(this.Fvb));this.position.add(z);this.Qtc&&(C=this.xCd(C),m.copy(this.RI),m.z=0,C=this.RI.angleTo(C)<Math.PI/2,this.CC.quaternion.copy(C?this.luc:this.dYb));this.scale.copy(this.hUb);
return this};d.prototype.n6=function(x,C,A,v){if(!this.visible)return this;fz.prototype.n6.call(this,x,C,A,v);this.CC.scale.copy(this.zob);return this};d.prototype.Z1=function(){return new gy(this.GT,this.FT)};d.prototype.dispose=function(){fz.prototype.dispose.call(this);hz.dispose(this.CC);this.Zqa=this.boundingSphere=this.boundingBox=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPcmlnaW4iOiJRM2QiLCJzZXRGYWNpbmdEaXJlY3Rpb24iOiJ2MWQiLCJjb21wdXRlT3JpZW50ZWRCb3VuZGluZ0JveCI6IkF5YiIsImdldE9yaWVudGVkQm91bmRpbmdCb3giOiJyQ2IiLCJzZXRUZXh0IjoiRWIiLCJnZXRUZXh0IjoibWUiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImFmdGVyUmVuZGVyIjoibjYiLCJnZXRUZXh0dXJlRGltZW5zaW9uIjoiWjEifX19");var cB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(k){this.hb={};this.Vc=null;this.Zva=Array(4);for(var l=0;4>l;l++)this.Zva[l]=new XA;this.lj=Array(4);this.setOptions(k)}var a={front:{name:"front",arraypos:0,labelToGrid:(new Xt).set(-1,0,0,.5,0,0,1,0,0,1,0,-.5,0,0,0,1),normal:new Hp(0,1,0)},back:{name:"back",arraypos:1,labelToGrid:(new Xt).set(1,0,0,-.5,0,0,-1,0,0,1,0,-.5,0,0,0,1),normal:new Hp(0,-1,0)},left:{name:"left",arraypos:2,labelToGrid:(new Xt).set(0,0,1,0,1,0,0,-.5,0,1,0,-.5,0,0,0,1),normal:new Hp(1,0,0)},right:{name:"right",
arraypos:3,labelToGrid:(new Xt).set(0,0,-1,0,-1,0,0,.5,0,1,0,-.5,0,0,0,1),normal:new Hp(-1,0,0)}},b=new gy(.5,.5),c=WA.Oa,e=new Ip,f=new Ip,g=new Ip,h=new gy(1,1);d.prototype.setOptions=function(k){this.hb=xb(k,this.hb);this.gKb()};d.prototype.tDc=function(k){var l=k.scale.x,m=k.scale.y;this.Vc=k;h.x=Math.max(1,m/l);h.y=Math.max(1,l/m);this.gKb()};d.prototype.gKb=function(){if(this.hb.planes&&this.Vc){var k=this.hb.planes;k.front&&this.EZ(k.front,a.front,this.Vc);k.back&&this.EZ(k.back,a.back,this.Vc);
k.left&&this.EZ(k.left,a.left,this.Vc);k.right&&this.EZ(k.right,a.right,this.Vc)}};d.prototype.EZ=function(k,l,m){var n=l.arraypos,p=l.name;p=m.N8b()[p];p.remove(this.Zva[n]);this.lj[n]||(this.lj[n]=wc(0,0,!0));var q=k.textoffset?k.textoffset:b,r=k.text?k.text:"Missing Text Option",t=null!=k.enable?k.enable:!0,u=null!=k.nearside?k.nearside:!1,w=null!=k.hideiftoolarge?k.hideiftoolarge:!0,y=null!=k.textscale?k.textscale:1,z=null!=k.centerbeforehiding?k.centerbeforehiding:!0,x=null!=k.verticalanchor?
k.verticalanchor:c;e.set(q.x,q.y,.49,1);u||(e.z-=.98);f.set(0,0,e.z,1);g.set(1,1,e.z,1);e.applyMatrix4(l.labelToGrid);f.applyMatrix4(l.labelToGrid);g.applyMatrix4(l.labelToGrid);q=null!=k.sizeindevice?k.sizeindevice:!0;q||(u=Math.abs(m.scale.x)+Math.abs(m.scale.y)+Math.abs(m.scale.z)/3,y*=u/500);r={canvas:this.lj[n],origin:new Hp(0,0,0),normal:l.normal,text:r,enabled:t,issizeindevice:q,renderside:ls,verticalanchor:x,scale:new Hp(y,y,1)};k.style&&(r.style=k.style);k.outline&&(r.outline=k.outline);
t=k=1;switch(l.name){case "front":case "back":k*=h.x;break;case "left":case "right":t*=h.y}this.Zva[n].setOptions({legendlabel:new bB(r),grid:m,position:new Hp(e.x,e.y,e.z),scale:new Hp(k,t,1),hideiftoolarge:w,centerbeforehiding:z});p.add(this.Zva[n]);this.Zva[n].gg();m.gg()};d.prototype.dispose=function(){if(this.Zva)for(var k=0;k<this.Zva.length;k++)hz.dispose(this.Zva[k]);this.lj=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRUb0dyaWQiOiJ0RGMifX19");var dB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(n){fz.call(this);null==n.axis&&(n.axis={});null==n.grid&&(n.grid={});n.axis=G(n.axis,{textstyle:m,linestyle:k,formatter:c,outline:null});n.grid=G(n.grid,{linestyle:l});n=G(n,{count:3,modelcenter:0,modelsize:10});this.mo=this.Or=this.jc=null;this.setOptions(n);this.name=f}function a(n,p,q){n=new gz(n,{style:p});n.W2(q);return n}function b(n,p){var q=p.DE();return new ez({data:{positions:n},color:new Pq(q.Xj()/255,q.Wj()/255,q.Vj()/255),linewidth:p.ca(),opacity:q.Ik()/255,
polygonoffset:!0,polygonoffsetfactor:.75})}function c(n){return n.toFixed(0)}var e="POLAR_AXIS",f="POLAR_GRID",g="POLAR_HORIZON",h="POLAR_VERTICAL",k=new Y("white"),l=new Y("grey"),m=new Fi({color:"white",font:"11px Arial"});D(d,fz);L(d,"geotoolkit3d.scene.grid.PolarGrid");d.prototype.setOptions=function(n){if(null==n)return this;fz.prototype.setOptions.call(this,n);for(var p=this.children.length-1;0<=p;p--)this.remove(this.children[p]);null==n.axis&&(n.axis={});null==n.grid&&(n.grid={});n.axis=G(n.axis,
{textstyle:this.zR(),linestyle:this.ppa(),formatter:this.opa(),outline:this.Ix()});n.grid=G(n.grid,{linestyle:this.Epa()});p=G(n,{count:this.Qo(),modelcenter:this.i8b(),modelsize:this.n8b()});this.vxc=p.modelcenter;this.ntb=p.modelsize;n=null!=n.axis.formatter&&"function"===typeof n.axis.formatter?n.axis.formatter:function(y){return y};for(var q=p.count,r=(new SA).GJc(),t=0;t<p.count;t++){var u=0===t||t===q-1,w=u?p.axis.linestyle:p.grid.linestyle;w=b(r,w);w.name=u?e:f;w.scale.set((q-t)/q,(q-t)/q,
(q-t)/q);this.add(w)}q=[-.5,0,0,.5,0,0];q=b(q,p.grid.linestyle);q.name=g;this.add(q);q=[0,-.5,0,0,.5,0];q=b(q,p.grid.linestyle);q.name=h;this.add(q);this.Or=n;this.jc=p.axis.textstyle;this.mo=p.axis.outline;t=n(this.ntb-this.vxc)+"";n=a(t,p.axis.textstyle,p.axis.outline);n.position.set(0,-.5,0);n.AMa(new Hp(0,-1,0));q=a(t,p.axis.textstyle,p.axis.outline);q.position.set(0,.5,0);q.AMa(new Hp(0,1,0));r=a(t,p.axis.textstyle,p.axis.outline);r.position.set(.5,0,0);r.AMa(new Hp(1,0,0));p=a(t,p.axis.textstyle,
p.axis.outline);p.position.set(-.5,0,0);p.AMa(new Hp(-1,0,0));this.add([n,q,r,p]);return this};d.prototype.ta=function(){return xb({axis:{textstyle:this.zR(),formatter:this.opa(),linestyle:this.ppa(),outline:this.Ix()},grid:{linestyles:this.Epa()},count:this.Qo(),modelcenter:this.i8b(),modelsize:this.n8b()},fz.prototype.ta.call(this))};d.prototype.Epa=function(){var n=null;this.traverse(function(p){p.name===f&&(p=p.material[0]||p.material,n=p.userData.LY)});return n};d.prototype.ppa=function(){var n=
null;this.traverse(function(p){p.name===e&&(p=p.material[0]||p.material,n=p.userData.LY)});return n};d.prototype.zR=function(){return this.jc};d.prototype.opa=function(){return this.Or};d.prototype.Ix=function(){return this.mo};d.prototype.Qo=function(){var n=0;this.traverse(function(p){p.name!==f&&p.name!==e||n++});return n};d.prototype.i8b=function(){return this.vxc};d.prototype.n8b=function(){return this.ntb};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRPdXRsaW5lIjoiSXgiLCJnZXRDb3VudCI6IlFvIiwiZ2V0TW9kZWxDZW50ZXIiOiJpOGIiLCJnZXRNb2RlbFNpemUiOiJuOGIifX19");var eB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e){e=xb(e,{texturewidth:a,textureheight:a,backgroundfillstyle:null});zA.call(this,e);this.type="PlaneMaterial";this.ZPb=this.mA=this.FT=this.GT=null;this.setOptions(e)}var a=256,b=128,c=4096;D(d,zA);L(d,"geotoolkit3d.scene.plane.PlaneMaterial");d.prototype.setOptions=function(e){if(null==e)return this;zA.prototype.setOptions.call(this,e);null!=e.texturewidth&&(this.GT=this.xGc(e.texturewidth));null!=e.textureheight&&(this.FT=this.xGc(e.textureheight));if(e.hasOwnProperty("backgroundfillstyle")){var f=
e.backgroundfillstyle;this.ZPb=null==f||f instanceof rf?f:new rf(f)}null!=e.overlay&&(this.mA=e.overlay,this.DHc(e.overlay));return this};d.prototype.xGc=function(e){return Math.min(c,Math.max(b,e))};d.prototype.DHc=function(e){if(this.GT&&this.FT){null==this.map&&(this.map=new Bx);var f=this.map.image;null==f&&(f=wc(this.GT,this.FT,!0));if(f.getContext){var g=f;var h=f.getContext("2d");var k=Fh.Doa({context:h,viewport:new U(0,0,g.width,g.height),pixelscale:1});h.clearRect(0,0,g.width,g.height);this.ZPb&&
(k.ra(this.ZPb),h.fillRect(0,0,g.width,g.height))}else{g=wc(this.GT,this.FT);h=g.getContext("2d");var l=bc();k=Fh.Doa({context:h,viewport:new U(0,0,g.width,g.height),pixelscale:l});k.drawImage(this.map.image,0,0,f.width,f.height,0,0,g.width/l,g.height/l)}e.sa(k.dTc());e.render(k);this.map=new Hq(g);this.map.generateMipmaps=!0;this.map.minFilter=Gt;this.map.anisotropy=4}};d.prototype.Z1=function(){return this.GT&&this.FT?new gy(this.GT,this.FT):new gy(a,a)};d.prototype.GA=function(){return this.mA};
return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVVcGRhdGVPdmVybGF5IjoiREhjIiwiZ2V0VGV4dHVyZURpbWVuc2lvbiI6IloxIn19fSAg");oz.lw(eB.Pa(),mz);var fB=/*#__PURE__*/function(){function d(a){fz.call(this,a);this.type="AbstractSurface"}D(d,fz);L(d,"geotoolkit3d.scene.surface.AbstractSurface");return d}();var gB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}var a="#000000",b=new Hp,c=new st,e=new uq;L(d,"geotoolkit3d.util.intersection.AbstractIntersection");d.prototype.xha=Fb;d.prototype.yha=Fb;d.prototype.gJa=function(f,g,h){var k=!1,l=!1;g.traverse(function(n){if(n.Pa)if("geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid"===n.Pa())k=!0,g=n;else if(n instanceof fB||"geotoolkit3d.scene.seismic.Horizon"===n.Pa())l=!0,g=n});"function"!==typeof g.ta||h.hasOwnProperty("preservecolor")||(h.preservecolor=null!=g.ta().colorprovider);
var m=[];k?m=this.xha(f,g,h):l?m=this.yha(f,g,h):hb("geotoolkit3d.util.intersection.AbstractIntersection: does not support this type of object.");return m};d.prototype.ddb=function(f,g,h){f=f.normal.clone().normalize();h=(new Hp).subVectors(h,g).normalize();var k=f.clone().cross(h);g=(new Xt).set(g.x,g.x+h.x,g.x+k.x,g.x+f.x,g.y,g.y+h.y,g.y+k.y,g.y+f.y,g.z,g.z+h.z,g.z+k.z,g.z+f.z,1,1,1,1);f=(new Xt).set(0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1);return f.multiply(g.invert())};d.prototype.ipa=function(f,g){var h=
new Hp,k=new Hp,l=new Hp,m=new av,n=f.geometry,p=n.getAttribute("position"),q=n.getIndex();n=q.getX(0);var r=q.getY(0);q=q.getZ(0);f.localToWorld(h.set(p.getX(n),p.getY(n),p.getZ(n)));f.localToWorld(k.set(p.getX(r),p.getY(r),p.getZ(r)));f.localToWorld(l.set(p.getX(q),p.getY(q),p.getZ(q)));g.worldToLocal(h);g.worldToLocal(k);g.worldToLocal(l);m.setFromCoplanarPoints(h,k,l);return m};d.prototype.Zcb=function(f){if(0===f.length)return null;for(var g=new og({startColor:f[0][1]||a,endColor:f[f.length-
1][1]||a,startPoint:new N(0,0),endPoint:new N(1,0)}),h=1;h<f.length-1;h++)g.Mo(f[h][0],f[h][1]||a);return g};d.prototype.Um=function(f,g,h,k){k=null==k?!0:k;h=g.GA();null==h&&(h=new ni);var l=f.coordinates.x,m=f.coordinates.y;if(k)var n=new Yn({x:l,y:m,visible:!0,linestyle:new Y({width:f.linewidth,fill:f.fillstyle})});else{n=new go;for(k=0;k<l.length-1;k+=2){var p=k,q=k+1;n.add([l[p],l[q]],[m[p],m[q]])}n.qa(new Y({width:f.linewidth,fill:f.fillstyle}))}h.kL(n);g.zIb(h);"function"===typeof g.EJa?g.EJa().yD(null,
null,!0):"function"===typeof g.vR&&g.vR().yD(null,null,!0);return[n]};d.prototype.tk=function(f,g,h){h=g.GA();null==h&&(h=new ni);var k=[],l=f.coordinates.x,m=f.coordinates.y;f=f.fillstyle;for(var n=0;n<l.length;n++)if(!(3>l[n].length)){3<l[n].length&&W.ejc(l[n],m[n]);var p=new Um({x:l[n],y:m[n],fillstyle:f[n]});h.kL(p);k.push(p)}g.zIb(h);"function"===typeof g.EJa?g.EJa().yD(null,null,!0):"function"===typeof g.vR&&g.vR().yD(null,null,!0);return k};d.prototype.D9b=function(f,g,h){function k(A,v,B,
E,H){for(var F=0;F<r.length;F++){var I=r[F];A[I[0]]!==A[I[1]]&&(c.start.set(A[I[0]],v[I[0]],B[I[0]]),c.end.set(A[I[1]],v[I[1]],B[I[1]]),H.intersectsLine(c)&&(H.intersectLine(c,b),p.push([b.x,b.y,b.z]),h&&(I=(l[E[I[1]]]*(b.x-A[I[0]])+l[E[I[0]]]*(A[I[1]]-b.x))/(A[I[1]]-A[I[0]]),q.push(n.mb(I).um()))))}}var l,m=g.ta().data,n=g.ta().colorprovider;null!=m&&null!=m.values?l=m.values:h=!1;var p=[],q=[];m=g.children[0];g=m.geometry.getIndex();m=m.geometry.getAttribute("position");for(var r=[[0,1],[1,2],[2,
0]],t=0;t<g.count;t+=3){var u=g.getX(t),w=g.getY(t),y=g.getZ(t),z=[m.getX(u),m.getX(w),m.getX(y)],x=[m.getY(u),m.getY(w),m.getY(y)],C=[m.getZ(u),m.getZ(w),m.getZ(y)];u=[u,w,y];k(z,x,C,u,f)}return f={coordinates:p,colors:q}};d.prototype.e9b=function(f,g,h){function k(u,w){for(var y=u.x,z=u.y,x=u.z,C=[],A=0;A<q.length;++A)c.start.set(y[q[A][0]],z[q[A][0]],x[q[A][0]]),c.end.set(y[q[A][1]],z[q[A][1]],x[q[A][1]]),w.intersectsLine(c)&&(w.intersectLine(c,b),C.push(b.x,b.y,b.z));n.push(C);h&&p.push(u.value)}var l=g.ta().data,m=l.B8b();m=m.Iec(f);for(var n=[],p=[],q=[[0,2],[0,1],[2,3],[1,3],[1,5],[3,7],[5,7],[6,7],[4,5],[4,6],[2,6],[0,4]],r=0;r<m.length;++r){var t=m[r];t=l.Pya(t[0],t[1],t[2]);g.xUc(t)||(t=l.CLc(t,e),e.intersectsPlane(f)&&k(t,f))}return{coordinates:n,colors:p}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoieGhhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJ5aGEiLCJnZW5lcmF0ZUludGVyc2VjdGlvbiI6ImdKYSIsImdldEFmZmluZVRyYW5zZm9ybWF0aW9uTWF0cml4IjoiZGRiIn19fSAg");var hB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){gB.call(this)}var a=new Hp;L(d,"geotoolkit3d.util.intersection.PlaneIntersection");D(d,gB);d.prototype.xha=function(b,c,e){var f=this.GNa(b,c);if(null==f.p1)return hb("geotoolkit3d.util.intersection.PlaneIntersection: cannot get bounding box."),[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.ipa(b.R1(),c);var p=this.e9b(n,c,g);var q=p.coordinates;p=p.colors;var r=b.Z1(),t=r.x;r=r.y;var u=this.ddb(n,f.p1,f.p2);for(f=0;f<q.length;f++){var w=
[],y=[];for(n=0;n<q[f].length;n+=3){var z=q[f];a.set(z[n],z[n+1],z[n+2]);a.applyMatrix4(u);z=a.x/h;var x=a.y/k;w.push(z*t);y.push(x*r)}0!==w.length&&0!==y.length&&(l.push(w),m.push(y))}h={coordinates:{x:l,y:m},fillstyle:e.fillstyle};if(g&&Array.isArray(p)&&0<p.length){e=c.ta().colorprovider;g=[];for(k=0;k<l.length;++k)m=new rf(e.mb(p[k])),g.push(m);h.fillstyle=g}else h.fillstyle=Array(l.length).fill(e.fillstyle);return this.tk(h,b,c)};d.prototype.yha=function(b,c,e){var f=this.GNa(b,c);if(null==f.p1)return hb("geotoolkit3d.util.intersection.PlaneIntersection: cannot get bounding box."),
[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.ipa(b.R1(),c);var p=this.D9b(n,c,g);var q=p.coordinates;var r=p.colors;var t=b.Z1(),u=t.x,w=t.y;t=Math.abs(n.normal.z)<W.Tb;n=this.ddb(n,f.p1,f.p2);for(f=0;f<q.length;f++){var y=q[f];a.set(y[0],y[1],y[2]);a.applyMatrix4(n);y=a.x/h;var z=a.y/k;l.push(y*u);m.push(z*w)}e={coordinates:{x:l,y:m},fillstyle:e.fillstyle,linewidth:e.linewidth};if(g&&void 0!==p.colors){g=[];for(p=0;p<l.length;p++)g.push([(l[p]-l[0])/(l[l.length-
1]-l[0]),r[p]]);e.fillstyle=this.Zcb(g)}return this.Um(e,b,c,t)};d.prototype.GNa=function(b,c){if("function"===typeof b.getBoundingBox)var e=b.getBoundingBox();else if(b.geometry)b.geometry.computeBoundingBox(),e=b.geometry.boundingBox.clone();else return{};var f=new Hp(e.min.x,e.max.y,e.max.z);f=b.localToWorld(f);var g=b.localToWorld(e.min);b=b.localToWorld(e.max);c.worldToLocal(f);c.worldToLocal(g);c.worldToLocal(b);return{p1:f,p2:g,p3:b}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoieGhhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJ5aGEiLCJ0cmFuc2Zvcm1Cb3VuZGluZ0JveENvb3JkaW5hdGUiOiJHTmEifX19");var iB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=xb(a,{width:1,height:1,widthsegments:1,heightsegments:1});fz.call(this);var b=null!=a.planegeometry&&a.planegeometry instanceof cv?a.planegeometry:new cv(a.width,a.height,a.widthsegments,a.heightsegments);this.Jd=new Zt(b,new eB(a));this.Jd.geometry.computeBoundingBox();this.add(this.Jd);this.type="Plane"}D(d,fz);L(d,"geotoolkit3d.scene.plane.Plane");d.prototype.setOptions=function(a){if(null==a)return this;this.Jd.geometry.computeBoundingBox();this.Jd.material.setOptions(a);
this.gg();return this};d.prototype.aMd=function(){return this.Jd.material&&this.Jd.material.map?this.Jd.material.map:null};d.prototype.GA=function(){return this.Jd.material.GA()};d.prototype.zIb=function(a){this.setOptions({overlay:a})};d.prototype.Z1=function(){return this.Jd.material.Z1()};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone()};d.prototype.R1=function(){return this.Jd};d.prototype.yia=function(){var a=this.Jd.geometry.boundingBox.clone();this.localToWorld(a.min);
this.localToWorld(a.max);return a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUZXh0dXJlIjoiYU1kIiwiZ2V0T3ZlcmxheSI6IkdBIiwiZ2V0VGV4dHVyZURpbWVuc2lvbiI6IloxIiwiZ2V0TWVzaCI6IlIxIiwiZ2V0V29ybGRCb3VuZGluZ0JveCI6InlpYSJ9fX0g");jA.mHb(iB.Pa(),hB);var jB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){this.uniforms={};du.call(this);this.vertexColors=!0;this.side=ls;this.Nvc=new Wx(!1);this.wvc=new Wx(new Hp(1,1,1));var b=this;this.vertexShader=this.VERTEX_SHADER;this.fragmentShader=this.FRAGMENT_SHADER;this.onBeforeCompile=function(c){c.vertexShader=b.VERTEX_SHADER;c.fragmentShader=b.FRAGMENT_SHADER;c.uniforms.isSizeInDevice=b.Nvc;c.uniforms.inversePlotScale=b.wvc;b.uniforms=G(c.uniforms,b.uniforms)};this.hb={transparent:!1,sizeindevice:!1,opacity:1};this.setOptions(a)}D(d,du);L(d,"geotoolkit3d.scene.pointset.PointsetMaterial");d.$pc=.001115;d.prototype.setOptions=function(a){a||(a={});this.hb=G(a,this.hb);this.T4b=!this.hb.transparent;this.Lzb=this.hb.transparent;this.opacity=this.hb.opacity;this.Nvc.value=this.hb.sizeindevice};d.prototype.i4c=function(a){this.wvc.value=a};d.prototype.ta=function(){return G(this.hb,{})};d.prototype.VERTEX_SHADER=["uniform bool isSizeInDevice;\nuniform vec3 inversePlotScale;\nattribute vec3 aPointCenter;\nattribute float aPointSize;\nattribute vec4 aPointColor;\nattribute float aVisible;\nvarying float vOpacity;\nvarying float vVisible;\n#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\nvarying vec3 vColor;\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    vec3 geometryPositions = position;\n    vColor = aPointColor.rgb;\n    vOpacity = aPointColor.a;\n    vVisible = aVisible;\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    objectNormal /= inversePlotScale;\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    float shaderPointSize = aPointSize;\n    if(isSizeInDevice){\n        vec4 projectedPoint = projectionMatrix * modelViewMatrix * vec4( (aPointCenter), 1.0 );",
"        shaderPointSize *= "+d.$pc+" * projectedPoint.w;","    }\n    vec4 tmpPosition = vec4(inversePlotScale * geometryPositions * shaderPointSize + aPointCenter, 1.);\n    mvPosition = modelViewMatrix * tmpPosition;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}"].join("\n");
d.prototype.FRAGMENT_SHADER="uniform vec3 diffuse;\nuniform vec3 emissive;\nvarying float vOpacity;\nvarying float vVisible;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    if(vVisible < 0.5) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity * vOpacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    #ifdef DOUBLE_SIDED\n        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n    #else\n        reflectedLight.indirectDiffuse += vIndirectFront;\n    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED\n        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n    #else\n        reflectedLight.directDiffuse = vLightFront;\n    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRJbnZlcnNlUGxvdFNjYWxlIjoiaTRjIn19fSAg");oz.lw(jB.Pa(),bA);var kB=null;function Fja(d){if(null==kB||kB.cwa!==d)kB=new Zw(1,Math.max(1.5*d,3),Math.max(d,2)),kB.cwa=d;return kB}var lB=null;function Gja(d){if(null==lB||lB.cwa!==d)lB=new Fs(1,Math.max(Math.floor(d/3),0)),lB.cwa=d;return lB}var mB=null;function Hja(){null==mB&&(mB=new xq(1,1,1,1,1,1));return mB}var nB=null;function Ija(){null==nB&&(nB=new Uq(1,1,4,1),nB.rotateX(Math.PI/2));return nB}function oB(d){return d&&null!=d.length}var pB=/*#__PURE__*/ta(/*#__PURE__*/{Sphere:Fja,pfd:Gja,LLb:Hja,Dpc:Ija},2,"eyJJY29zYWhlZHJvbiI6InBmZCIsIkN1YmUiOiJMTGIiLCJQeXJhbWlkIjoiRHBjIn0g"),qB=/*#__PURE__*/ta(/*#__PURE__*/{wsa:Fja,rha:Hja,xdc:Ija},2,"eyJzcGhlcmUiOiJ3c2EiLCJjdWJlIjoicmhhIiwicHlyYW1pZCI6InhkYyJ9"),rB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f,g){f.setAttribute("position",g.attributes.position);f.setAttribute("normal",g.attributes.normal);f.setAttribute("uv",g.attributes.uv);f.index=g.index}function a(f){f.data&&oB(f.data.x)&&oB(f.data.y)&&oB(f.data.z)?(fz.call(this),f=G(f,{opacity:1,colorprovider:"red",symbol:pB.Sphere,symbolminsize:1,symbolmaxsize:6,symbolsizeisindevice:!1,inverseplot:!0}),null==f.precision&&(f.precision=!0===f.symbolsizeisindevice?
f.symbolmaxsize+1:10),this.HF=0,this.z4=1,this.Hla=this.Wea=null,this.F9=new Ip(1,0,0,1),this.fUb=new Hp(1,1,1),this.Fzc=new Hp(1,1,1),this.Cb=null,this.rq={u2:null,g1a:null,Xl:null,visible:null},this.Vwb=this.Dvb=this.xla=this.TXb=null,this.$zc=!1,this.CN=f.symbolminsize,this.zQ=f.symbolmaxsize,this.cwa=f.precision,this.wI=f.colorprovider,this.lB=f.opacity,this.kpb=!1,this.HZb=f.symbolsizeisindevice,this.kCc=f.inverseplot,this.Uc=this.ht=this.fva=null,this.HW=new jB,this.od=null,this.t9a=-1,this.Gzc=
new Xt,this.u0b=this.Psb=!0,this.xe=new uq,this.Owc=new uq,this.setOptions(f)):hb("options['data'] is not defined or complete, cannot create PointSet without point data!")}var b="POINT",c=new Ip,e=new Ip;D(a,fz);L(a,"geotoolkit3d.scene.pointset.PointSet");a.prototype.setOptions=function(f){var g=!1,h=!1,k=!1,l=!1,m=!1,n=!1;null!=f.data&&(null!=f.data.x&&null!=f.data.y&&null!=f.data.z&&(g=!0,f.data.x.length!==this.HF&&(n=k=h=!0,this.HF=f.data.x.length)),null!=f.data.values&&(this.Cb=oB(f.data.values)?
Float32Array.from(f.data.values):f.data.values,h=!0),null!=f.data.sizes&&(this.z4=oB(f.data.sizes)?Float32Array.from(f.data.sizes):f.data.sizes,k=!0),null!=f.data.visible&&(l=!0),null!=f.data.sizemin&&(this.Wea=f.data.sizemin,k=!0),null!=f.data.sizemax&&(this.Hla=f.data.sizemax,k=!0));f.colorprovider&&(this.wI=f.colorprovider,h=!0);null!=f.symbolminsize&&this.CN!==f.symbolminsize&&(this.CN=f.symbolminsize,k=!0);null!=f.symbolmaxsize&&this.zQ!==f.symbolmaxsize&&(this.zQ=f.symbolmaxsize,this.u0b=k=
!0);if(null!=f.symbol){var p=f.symbol;"function"!==typeof p&&(p=this.JEd(p));p!==this.od&&(this.od=p,m=!0)}null!=f.precision&&this.cwa!==f.precision&&(this.cwa=f.precision,this.od===a.Aqc.Sphere&&(m=!0));m&&this.lh();n&&this.CXd();h&&this.fkc();g&&this.SNa(f.data.x,f.data.y,f.data.z);k&&this.O8d();l&&this.$8d(null!=f.data.visible?f.data.visible:!0);this.ht&&(g||k||l||n)&&(h=this.t9a,this.t9a=-1,this.I$b(h));null!=f.opacity&&(this.lB=f.opacity);this.$zc=this.kpb||1>this.lB;null!=f.symbolsizeisindevice&&
(this.HZb=f.symbolsizeisindevice);f={transparent:this.$zc,sizeindevice:this.HZb,opacity:this.lB};this.HW.setOptions(f);this.fva||(this.fva=new Zt(this.Uc,this.HW),this.fva.frustumCulled=!1,this.fva.name=b,this.clear(),this.add(this.fva));this.gg();if(g||k||l||n)this.aad(),this.Gad();return this};a.prototype.CXd=function(){this.Uc.instanceCount=this.HF;this.rq.Xl=new Float32Array(4*this.HF);this.xla=new Ls(this.rq.Xl,4);this.Uc.setAttribute("aPointColor",this.xla);this.rq.u2=new Float32Array(3*this.HF);
this.TXb=new Ls(this.rq.u2,3);this.Uc.setAttribute("aPointCenter",this.TXb);this.rq.g1a=new Float32Array(this.HF);this.Dvb=new Ls(this.rq.g1a,1);this.Uc.setAttribute("aPointSize",this.Dvb);this.rq.visible=(new Float32Array(this.HF)).fill(1);this.Vwb=new Ls(this.rq.visible,1);this.Uc.setAttribute("aVisible",this.Vwb);this.rq.index=new Float32Array(this.HF);this.kvc=new Ls(this.rq.index,1);this.Uc.setAttribute("cgpointindex",this.kvc);for(var f=0;f<this.HF;f++)this.rq.index[f]=f/this.HF;this.kvc.needsUpdate=
!0};a.prototype.setColor=function(f,g){f*=4;null!=g&&Number.isFinite(g)&&this.wI instanceof Mo?(g=this.wI.mb(g),c.set(g.Xj(),g.Wj(),g.Vj(),g.Ik()),c.divideScalar(255)):c.copy(this.F9);.9>c.w&&(this.kpb=!0);this.rq.Xl[f]=c.x;this.rq.Xl[f+1]=c.y;this.rq.Xl[f+2]=c.z;this.rq.Xl[f+3]=c.w};a.prototype.fkc=function(){this.kpb=!1;var f=oB(this.Cb)&&this.HF===this.Cb.length,g=this.wI instanceof Mo,h=!f&&Number.isFinite(this.Cb)?this.Cb:0;this.wI instanceof Pq?(h=this.wI,this.F9.set(h.r,h.g,h.b,1)):(h=g?this.wI.mb(h):
Pd.Rg(this.wI),this.F9.set(h.Xj(),h.Wj(),h.Vj(),h.Ik()),this.F9.divideScalar(255));1>this.F9.w&&(this.kpb=!0);for(h=0;h<this.HF;h++)f&&g?this.setColor(h,this.Cb[h]):this.setColor(h,null);this.xla.needsUpdate=!0};a.prototype.SNa=function(f,g,h){for(var k=0;k<this.HF;k++){var l=3*k;this.rq.u2[l]=f[k];this.rq.u2[l+1]=g[k];this.rq.u2[l+2]=h[k]}this.Psb=!0;this.TXb.needsUpdate=!0};a.prototype.O8d=function(){var f=this.z4;oB(this.z4)||(f=[this.z4]);if(null==this.Wea||null==this.Hla){null==this.Wea&&(this.Wea=
Number.POSITIVE_INFINITY);null==this.Hla&&(this.Hla=Number.NEGATIVE_INFINITY);for(var g=0;g<f.length;g++)isNaN(f[g])||(this.Wea=Math.min(this.Wea,f[g]),this.Hla=Math.max(this.Hla,f[g]))}f=Wy.rca(f,0,1,this.Wea,this.Hla);f=Wy.rca(f,this.CN,this.zQ);g=f.length===this.HF;var h;for(h=0;h<this.HF;h++)this.rq.g1a[h]=g?f[h]:f[0];this.Dvb.needsUpdate=!0};a.prototype.lh=function(){var f=this.od(this.cwa);null==this.Uc?(this.Uc=new Ms,this.Uc.copy(f)):d(this.Uc,f);this.ht&&d(this.ht.geometry,f);f.dispose()};
a.prototype.$8d=function(f){var g=!0===f||!1===f||oB(f)&&1===f.length,h=oB(f)?f[0]:f;g||oB(f)&&f.length===this.HF||(h=g=!0,hb("Invalid argument: Option 'data.visible' must be either a simple boolean, or a boolean array of size equal to number of points."));if(g)for(f=[],g=0;g<this.HF;g++)f[g]=h;for(g=0;g<this.HF;g++)this.rq.visible[g]=+f[g];this.Vwb.needsUpdate=!0};a.Aqc=pB;a.Symbol=qB;a.prototype.ta=function(){return{opacity:this.lB,colorprovider:this.wI,symbolminsize:this.CN,symbolmaxsize:this.zQ}};
a.prototype.a4d=function(f,g){this.EIb(f,{visible:g});return this};a.prototype.EIb=function(f,g){if(!this.IR(f))return this;null!=g.visible&&(this.rq.visible[f]=+g.visible,this.Vwb.needsUpdate=!0);if(null!=g.size){if(!oB(this.z4)){var h=this.z4;this.z4=(new Float32Array(this.HF)).fill(h)}this.z4[f]=g.size;this.Wea===this.Hla||this.zQ===this.CN?h=(this.zQ+this.CN)/2:(h=(g.size-this.Wea)/(this.Hla-this.Wea),h=this.CN+(this.zQ-this.CN)*h);this.rq.g1a[f]=h;this.Dvb.needsUpdate=!0}null!=g.value&&(this.Cb[f]=
g.value,this.setColor(f,g.value),this.xla.needsUpdate=!0);return this};a.prototype.QXa=function(f){if(!this.IR(f))return null;var g=3*f,h=this.rq.u2,k=1;this.Cb&&(k=oB(this.Cb)?this.Cb[f]:this.Cb);return{visible:!!this.rq.visible[f],size:oB(this.z4)?this.z4[f]:this.z4,value:k,position:[h[g],h[g+1],h[g+2]]}};a.prototype.ui=function(f,g,h,k){fz.prototype.ui.call(this,f,g,h,k);this.visible&&(this.kCc&&(f=h.aT().scale,this.Fzc.equals(f)||(this.Fzc.copy(f),this.fUb.set(1,1,1).divide(f),this.HW.i4c(this.fUb))),
this.ht&&this.ht.visible&&(f=this.ht.jtd,this.ht.scale.set(f,f,f),this.kCc&&this.ht.scale.multiply(this.fUb),this.HZb&&(f=this.ht.position,e.set(f.x,f.y,f.z,1),e.applyMatrix4(this.matrixWorld),e.applyMatrix4(g.matrixWorldInverse),e.applyMatrix4(g.projectionMatrix),g=jB.$pc*e.w,this.ht.scale.multiplyScalar(g))),this.Psb&&this.aad(),this.Psb||this.u0b||!this.matrixWorld.equals(this.Gzc))&&(this.Gad(),this.Gzc.copy(this.matrixWorld),this.u0b=this.Psb=!1)};a.prototype.QKd=function(){return this.ht};a.prototype.I$b=
function(f){this.ht||(this.ht=new Zt(this.od(this.cwa)),this.ht.Ls=function(){return!1},this.ht.material.opacity=0,this.ht.visible=!1,this.add(this.ht));if(!this.IR(f))this.ht.visible=!1,this.t9a=-1;else if(f!==this.t9a){var g=this.QXa(f),h=this.rq.g1a[f];this.ht.position.set(g.position[0],g.position[1],g.position[2]);this.ht.scale.set(h,h,h);this.ht.jtd=h;this.ht.visible=g.visible;this.t9a=f}};a.prototype.Gad=function(){this.xe.copy(this.Owc);this.localToWorld(this.xe.min);this.localToWorld(this.xe.max);
this.xe.min.subScalar(this.zQ);this.xe.max.addScalar(this.zQ);this.Uc.boundingBox||(this.Uc.boundingBox=new uq);this.Uc.boundingBox.copy(this.xe)};a.prototype.aad=function(){for(var f=this.Owc.makeEmpty(),g=this.rq.u2,h=0;h<this.HF;h++){var k=3*h,l=g[k],m=g[k+1];k=g[k+2];f.min.x=Math.min(f.min.x,l);f.min.y=Math.min(f.min.y,m);f.min.z=Math.min(f.min.z,k);f.max.x=Math.max(f.max.x,l);f.max.y=Math.max(f.max.y,m);f.max.z=Math.max(f.max.z,k)}};a.prototype.yia=function(){return this.xe};a.prototype.dispose=
function(){this.Uc=null;this.fva&&hz.dispose(this.fva);this.fva=null;this.ht&&(this.ht.geometry=null,hz.dispose(this.ht));this.Cb=this.z4=this.ht=null;this.rq.u2=null;this.rq.g1a=null;this.rq.Xl=null;this.wI=this.rq.visible=null;this.clear();fz.prototype.dispose.call(this)};a.prototype.JEd=function(f){var g=pB,h=Fz;f=f.name||"default";switch(f){case h.rha.name:case h.$0a.name:return g.LLb;case h.WJb.name:return g.Dpc;default:return g.Sphere}};a.prototype.IR=function(f){return Number.isFinite(f)&&
0<=f&&f<this.HF};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQb2ludFZpc2libGUiOiJhNGQiLCJzZXRQb2ludE9wdGlvbnMiOiJFSWIiLCJnZXRQb2ludE9wdGlvbnMiOiJRWGEiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImhpZ2h0bGlnaHRTaGFwZSI6IkkkYiIsImdldFdvcmxkQm91bmRpbmdCb3giOiJ5aWEiLCJpc1ZhbGlkSW5kZXgiOiJJUiJ9fX0g");rA.tg().kib(rB.Pa(),function(d){return d.QKd()});var tB=/*#__PURE__*/function(){function d(b,c){hb("geotoolkit3d.scene.ShapeGeometry was deprecated since 3.3, use THREE.ShapeGeometry instead");Pw.call(this,b,c);this.type="ShapeGeometry";this.parameters={kJb:b,curveSegments:c}}function a(b,c){c.kJb=[];if(Array.isArray(b))for(var e=0,f=b.length;e<f;e++){var g=b[e];c.kJb.push(g.uuid)}else c.kJb.push(b.uuid);return c}D(d,Pw);L(d,"geotoolkit3d.scene.ShapeGeometry");d.prototype.toJSON=function(){var b=Pw.prototype.toJSON.call(this),c=this.parameters.kJb;return a(c,
b)};return d}();var uB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=xb(a,{majorstep:100,minorincrement:3});this.ww=null;this.Dfa=a.majorstep;this.jWb=a.minorincrement}L(d,"geotoolkit3d.scene.surface.contour.MajorMinorStrategy");d.prototype.setOptions=function(a){if(null==a)return this;a.contour&&(this.ww=a.contour);a.majorstep&&this.RMa(a.majorstep);a.minorincrement&&this.j5c(a.minorincrement);return this};d.prototype.ta=function(){return{contour:this.ww,majorstep:this.Dfa,minorincrement:this.jWb}};d.prototype.fa=function(a){return this.setOptions(a)};
d.prototype.ia=function(){return this.ta()};d.prototype.RMa=function(a){this.Dfa=a;return this};d.prototype.j5c=function(a){this.jWb=a;return this};d.prototype.equals=function(a){if(null==a||!(a instanceof d))return!1;a=a.ta();return a.majorstep===this.Dfa&&a.minorincrement===this.jWb};d.prototype.stringify=function(){var a=this.ta();return JSON.stringify(a)};d.prototype.clone=function(){var a=this.ta();return new d({majorstep:a.majorstep,minorincrement:a.minorincrement})};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJnZXRQcm9wZXJ0aWVzIjoiaWEiLCJzZXRNYWpvclN0ZXAiOiJSTWEiLCJzZXRNaW5vckluY3JlbWVudCI6Imo1YyJ9fX0g");var vB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a,b,c,e,f){this.aj=[0,0,0];this.una=this.Ema=this.hk=this.ox=this.rj=this.RI=this.Fi=null;this.asb=!1;this.Zrb=this.dsb=null;a&&b&&c&&e&&this.fa(a,b,c,e,f)}L(d,"geotoolkit3d.scene.surface.contour.Triangle");d.prototype.fa=function(a,b,c,e,f){f=!0===f?!0:!1;this.aj[2]=e;if(this.dsb=this.avd(a,b,c))if(this.s6d(a,b,c,f),this.Zrb=e<this.rj[2]&&e>this.hk[2]){a=[this.ox[0]-this.rj[0],this.ox[1]-this.rj[1],this.ox[2]-this.rj[2]];b=[this.hk[0]-this.rj[0],this.hk[1]-this.rj[1],
this.hk[2]-this.rj[2]];c=[this.hk[0]-this.ox[0],this.hk[1]-this.ox[1],this.hk[2]-this.ox[2]];f=this.bFb(a);var g=this.bFb(b),h=this.bFb(c);this.RI=this.bFb(Wy.r3b(a,b));if(this.hk[2]===this.ox[2]===this.rj[2])this.aj[0]=(this.rj[0]+this.ox[0]+this.hk[0])/3,this.aj[1]=(this.rj[1]+this.ox[1]+this.hk[1])/3,this.Fi=(this.length(a)+this.length(b)+this.length(c))/3;else{this.asb=!0;if(e===this.ox[2]){if(e===this.rj[2]){this.aj[0]=(this.rj[0]+this.ox[0])/2;this.aj[1]=(this.rj[1]+this.ox[1])/2;this.Fi=this.length(a);
this.Ema=this.ox;this.una=this.rj;return}if(e===this.hk[2]){this.aj[0]=(this.ox[0]+this.hk[0])/2;this.aj[1]=(this.ox[1]+this.hk[1])/2;this.Fi=this.length(c);this.Ema=this.ox;this.una=this.hk;return}}if(e<=this.rj[2]&&this.ox[2]<=e){h=(e-this.rj[2])/f[2];var k=(e-this.rj[2])/g[2];e=[f[0]*h,f[1]*h,f[2]*h];h=[g[0]*k,g[1]*k,g[2]*k];e=[this.rj[0]+e[0],this.rj[1]+e[1],this.rj[2]+e[2]];h=[this.rj[0]+h[0],this.rj[1]+h[1],this.rj[2]+h[2]]}else{k=(e-this.hk[2])/h[2];var l=(e-this.hk[2])/g[2];e=[h[0]*k,h[1]*
k,h[2]*k];h=[g[0]*l,g[1]*l,g[2]*l];e=[this.hk[0]+e[0],this.hk[1]+e[1],this.hk[2]+e[2]];h=[this.hk[0]+h[0],this.hk[1]+h[1],this.hk[2]+h[2]]}this.Ema=e;this.una=h;this.aj[0]=(e[0]+h[0])/2;this.aj[1]=(e[1]+h[1])/2;this.Fi=Math.sqrt((h[0]-e[0])*(h[0]-e[0])+(h[1]-e[1])*(h[1]-e[1]));!Number.isFinite(this.Fi)&&(1-Math.abs(this.RI[2])<=W.Tb||1-Math.abs(Wy.a4b(f,g))<=W.Tb)&&(this.aj[0]=(this.rj[0]+this.ox[0]+this.hk[0])/3,this.aj[1]=(this.rj[1]+this.ox[1]+this.hk[1])/3,this.Fi=(this.length(a)+this.length(b)+
this.length(c))/3,this.asb=!1)}}};d.prototype.HQd=function(){return this.dsb};d.prototype.zac=function(){return this.Zrb};d.prototype.pEb=function(){return this.asb};d.prototype.fLd=function(){var a=(new Hp).fromArray(this.rj),b=(new Hp).fromArray(this.ox),c=(new Hp).fromArray(this.hk);return[a,b,c]};d.prototype.getPoint=function(){return new Hp(this.aj[0],this.aj[1],this.aj[2])};d.prototype.Qmd=function(){return this.aj};d.prototype.getNormal=function(){return new Hp(this.RI[0],this.RI[1],this.RI[2])};
d.prototype.Pmd=function(){return this.RI};d.prototype.qOc=function(){return this.Fi};d.prototype.K7b=function(){if(null==this.Ema)return null;var a=this.Ema[0],b=this.Ema[1],c=this.Ema[2];return new Hp(a,b,c)};d.prototype.j9b=function(){if(null==this.una)return null;var a=this.una[0],b=this.una[1],c=this.una[2];return new Hp(a,b,c)};d.prototype.MOc=function(){return this.Ema};d.prototype.cRc=function(){return this.una};d.prototype.s6d=function(a,b,c,e){e?(this.hk=a,this.ox=b,this.rj=c):a[2]>=b[2]?
a[2]>=c[2]?(this.rj=a,b[2]>=c[2]?(this.ox=b,this.hk=c):(this.ox=c,this.hk=b)):(this.rj=c,this.ox=a,this.hk=b):b[2]>=c[2]?(this.rj=b,a[2]>=c[2]?(this.ox=a,this.hk=c):(this.ox=c,this.hk=a)):(this.rj=c,this.ox=b,this.hk=a)};d.prototype.avd=function(a,b,c){a=Number.isFinite(a[0])&&Number.isFinite(a[1])&&Number.isFinite(a[2]);b=Number.isFinite(b[0])&&Number.isFinite(b[1])&&Number.isFinite(b[2]);c=Number.isFinite(c[0])&&Number.isFinite(c[1])&&Number.isFinite(c[2]);return a&&b&&c};d.prototype.length=function(a){var b=
a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};d.prototype.bFb=function(a){var b=a[0],c=a[1];a=a[2];var e=Math.sqrt(b*b+c*c+a*a);return[b/e,c/e,a/e]};d.prototype.reset=function(){this.aj=[0,0,0];this.una=this.Ema=this.hk=this.ox=this.rj=this.RI=this.Fi=null;this.asb=!1;this.Zrb=this.dsb=null};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJpc1ZlcnRpY2VzVmFsaWQiOiJIUWQiLCJpc0ludGVyc2VjdEVsZXZhdGlvbiI6InphYyIsImlzTGluZUludGVyc2VjdGlvbiI6InBFYiIsImdldFNvcnRlZFZlcnRpY2VzIjoiZkxkIiwiZ2V0SW50ZXJzZWN0ZWRMZW5ndGgiOiJxT2MiLCJnZXRMZWZ0SW50ZXJzZWN0aW9uUG9pbnQiOiJLN2IiLCJnZXRSaWdodEludGVyc2VjdGlvblBvaW50IjoiajliIiwiZ2V0TGVmdEludGVyc2VjdGlvbiI6Ik1PYyIsImdldFJpZ2h0SW50ZXJzZWN0aW9uIjoiY1JjIn19fSAg");var wB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){Aq.call(this);this.type="ContourGeometry";c=G(c,{});var e=c.data.surface.getAttributes();this.Od=e.position;this.gva=e.interleaved;this.lA=e.nullvalue;this.ST=e.zmin;this.RT=e.zmax;this.KUa=[];this.Rwc=c.label.major;this.rxc=c.label.minor;this.Bma=c.label.formatter;this.L7a=c.isoline.majorminorstrategy;this.setAttribute("position",this.Od);this.setIndex(e.index);null!=e.normal?this.setAttribute("normal",e.normal):this.computeVertexNormals();e.values&&(e.values instanceof
zq||e.values instanceof Xs?this.setAttribute(Ty.Km,e.values):e.values instanceof Float32Array?this.setAttribute(Ty.Km,new zq(e.values,1)):this.setAttribute(Ty.Km,new zq(new Float32Array(e.values),1)));if(null!=e.xmin&&e.xmax&&null!=e.ymin&&e.ymax&&null!=e.zmin&&e.zmax){var f=new Hp(e.xmin,e.ymin,e.zmin);e=new Hp(e.xmax,e.ymax,e.zmax);this.boundingBox=new uq(f,e)}else this.computeBoundingBox();this.setOptions(c)}function a(c,e){if(c[0][2]>=c[1][2])if(c[0][2]>=c[2][2]){var f=0;if(c[1][2]>=c[2][2]){c=
1;var g=2}else c=2,g=1}else f=2,c=0,g=1;else c[1][2]>=c[2][2]?(f=1,c[0][2]>=c[2][2]?(c=0,g=2):(c=2,g=0)):(f=2,c=1,g=0);e[0]=g;e[1]=c;e[2]=f}var b=new vB;D(d,Aq);L(d,"geotoolkit3d.scene.surface.contour.ContourGeometry");d.prototype.setOptions=function(c){if(null==c.data)return this;(Array.isArray(c.data.values)||c.data.values instanceof Float32Array)&&this.Gkc(c.data.values);null!=c.label&&(this.Rwc=xb(c.label.major,this.Rwc),this.rxc=xb(c.label.minor,this.rxc));return this};d.prototype.ta=function(){var c=
this.getAttribute(Ty.Km);if(null==c)return{};for(var e=new Float32Array(c.count),f=0;f<c.count;f++)e[f]=c.getX(f);return{data:{values:e}}};d.prototype.computeBoundingBox=function(){var c=this.getAttribute("position");this.boundingBox=(new uq).setFromBufferAttribute(c)};d.prototype.computeBoundingSphere=function(){null==this.boundingBox&&this.computeBoundingBox();this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere)};d.prototype.Gkc=function(c){var e=this.getAttribute("position").count;
c.length!==e&&rb("Given values array does not match vertices count: "+e+"="+e+", actual="+c.length);var f=this.getAttribute(Ty.Km);null==f&&(f=new zq(new Float32Array(e),1),this.setAttribute(Ty.Km,f));for(e=0;e<f.count;e++)f.setX(e,c[e])};d.prototype.computeVertexNormals=function(){var c=this.getAttribute("position");if(c){var e=this.getAttribute("normal");void 0===e&&(e=new zq(new Float32Array(c.count*c.itemSize),3),this.setAttribute("normal",e));Kz.Kyb(this.getIndex(),c,e);this.setAttribute("normal",
e)}};d.prototype.aZc=function(c){this.KUa=[];if(!(0>=c.length)){var e=this.Od,f=e.array,g=[];if(this.gva){var h=e.data.stride,k=e.offset;e=e.itemSize;for(var l=0;l<f.length;l++)l%h<k||l%h>=k+e||g.push(f[l])}else g=f;for(f=0;f<c.length;f++)h=Object.keys(c[f])[0],this.KUa.push([h,[],0]);f=this.index.array;c=c.map(function(z){return Object.values(z)[0]}).sort(function(z,x){return z-x});h=c[0];k=c[c.length-1];e=[[0,0,0],[0,0,0],[0,0,0]];l=[0,1,2];for(var m=0;m<f.length;m+=3){var n=3*f[m+0],p=3*f[m+1],
q=3*f[m+2];e[0][0]=g[n];e[0][1]=g[n+1];e[0][2]=g[n+2];e[1][0]=g[p];e[1][1]=g[p+1];e[1][2]=g[p+2];e[2][0]=g[q];e[2][1]=g[q+1];e[2][2]=g[q+2];if(!(isNaN(e[0][2])||isNaN(e[1][2])||isNaN(e[2][2])||(a(e,l),n=e[l[0]][2],p=e[l[2]][2],n>k||p<h)))for(q=0;q<c.length;q++){var r=c[q];if(n<=r&&r<=p){if(b.reset(),b.fa(e[l[0]],e[l[1]],e[l[2]],r,!0),b.pEb()){r=b.Qmd();var t=b.Pmd(),u=b.qOc(),w=b.MOc(),y=b.cRc();this.KUa[q][1].push([r,t,u,w,y]);this.KUa[q][2]+=u}}else if(r>p)break}}}};d.prototype.Z9b=function(){return this.KUa};
return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJwcmVwYXJlVHJpYW5nbGVzIjoiYVpjIiwiZ2V0VHJpYW5nbGVzQnlMZXZlbCI6Ilo5YiJ9fX0g");var xB=/*#__PURE__*/function(){function d(f){f.defines.hasOwnProperty("addedContourShaders")||(f.defines.addedContourShaders=!0,f.uniforms[b.oDa]=new Wx(!1),f.uniforms[b.kta]=new Wx(1),f.uniforms[e]=new Wx(f.wireframe),f.uniforms[c]={value:-999.25},f.uniforms.enableSurface={value:!0},f.uniforms.preserveSurfaceColor={value:!0},f.uniforms.enableLine={value:!1},f.uniforms.useStrategy={value:!1},f.uniforms.count={value:10},f.uniforms.zmin={value:-1E3},f.uniforms.zmax={value:1E3},f.uniforms.minorIncrement={value:3},
f.uniforms.localScale={value:1},f.uniforms.worldScale={value:1},f.uniforms.widthMajor={value:1},f.uniforms.lineColorMajor={value:new Pq("black")},f.uniforms.visibleMajor={value:!0},f.uniforms.widthMinor={value:.05},f.uniforms.lineColorMinor={value:new Pq("black")},f.uniforms.visibleMinor={value:!0})}function a(){this.L7a=null}var b=Mz,c=Ty.Km+"NullValue",e="wireframeEnabled";L(a,"geotoolkit3d.util.shaders.Contour");a.icd=["#define LAMBERT",b.rmb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\nvarying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1) {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nbool _isnan( float val ) {\n    return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\nvoid main() {\n    #ifdef CG_USE_COLOR_MAP\n        vcgdeadCell = _isnan(cgcolormapValue) || abs( cgcolormapValue - cgcolormapValueNullValue ) < 0.00001 ? 1.0 : 0.0 ;\n    #endif\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    // normalize normal vector\n    objectNormal = normalize(objectNormal);\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>",
b.Nnc,"}"].join("\n");a.hcd=["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;","uniform bool "+e+";",b.rmb,"uniform int useDiffuseAsColor;\nuniform bool enableSurface;\nuniform bool enableLine;\nuniform bool preserveSurfaceColor;\nuniform bool useStrategy;\nuniform int count;\nuniform float zmin;\nuniform float zmax;\nuniform float localScale;\nuniform float worldScale;\nuniform int minorIncrement;\nuniform float widthMajor;\nuniform float widthMinor;\nuniform vec3 lineColorMajor;\nuniform vec3 lineColorMinor;\nuniform bool visibleMajor;\nuniform bool visibleMinor;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\nvarying float vcgdeadCell;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\n// integer modular not implemented in glsl es100\nint intMod(int x, int y) {\n    return x - y * (x / y);\n}\nfloat astep(float edge, float x) {\n    return x < edge ? 0.0 : 1.0;\n}\nvoid main() {\n    if(vcgdeadCell != 0.0) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",
"    vec3 "+b.yCa+" = vLightFront;","    vec3 "+b.t2a+" = vLightBack;","    vec3 "+b.OCa+" = vIndirectFront;","    vec3 "+b.T2a+" = vIndirectBack;",b.Mnc,"    #ifdef DOUBLE_SIDED","        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? "+b.OCa+" : "+b.T2a+";","    #else","        reflectedLight.indirectDiffuse += "+b.OCa+";","    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED","        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? "+
b.yCa+" : "+b.t2a+";","    #else","        reflectedLight.directDiffuse = "+b.yCa+";","    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>\n    float elevationFactor = 0.003 * ( zmax - zmin );\n    elevationFactor /= sqrt( log2( localScale + 1.0 ));\n    vec4 finalColor, tmpColor;",
"    if(useDiffuseAsColor == 1 || "+e+") {","        finalColor = diffuseColor;\n    } else {\n        finalColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    if (!enableSurface) {\n        tmpColor = finalColor;\n        finalColor = vec4( 0., 0., 0., .0 );\n    };\n        gl_FragColor = finalColor;\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}"].join("\n");
a.B3d=function(f,g){if(null!=g){d(f);g.hasOwnProperty("data")&&g.data.hasOwnProperty("nullvalue")&&(f.uniforms[c].value=g.data.nullvalue,f.uniforms[c].needsUpdate=!0);g.hasOwnProperty("surface");g.hasOwnProperty("usestrategy")&&(f.uniforms.useStrategy.value=g.usestrategy,f.uniforms.useStrategy.needsUpdate=!0);if(g.hasOwnProperty("isoline")){null!=g.isoline.enabled&&(f.uniforms.enableLine.value=!1,f.uniforms.enableLine.needsUpdate=!0);null!=g.isoline.zmin&&(f.uniforms.zmin.value=g.isoline.zmin,f.uniforms.zmin.needsUpdate=
!0);null!=g.isoline.zmax&&(f.uniforms.zmax.value=g.isoline.zmax,f.uniforms.zmax.needsUpdate=!0);null!=g.isoline.count&&(f.uniforms.count.value=g.isoline.count,f.uniforms.count.needsUpdate=!0);if(null!=g.isoline.majorminorstrategy){this.L7a=g.isoline.majorminorstrategy;var h=this.L7a.ta();h=h.minorincrement;f.uniforms.minorIncrement.value=h;f.uniforms.minorIncrement.needsUpdate=!0}g.isoline.hasOwnProperty("major")&&(null!=g.isoline.major.width&&(f.uniforms.widthMajor.value=g.isoline.major.width,f.uniforms.widthMajor.needsUpdate=
!0),null!=g.isoline.major.color&&(f.uniforms.lineColorMajor.value=new Pq(g.isoline.major.color||"black"),f.uniforms.lineColorMajor.needsUpdate=!0),null!=g.isoline.major.visible&&(f.uniforms.visibleMajor.value=g.isoline.major.visible,f.uniforms.visibleMajor.needsUpdate=!0));g.isoline.hasOwnProperty("minor")&&(null!=g.isoline.minor.width&&(f.uniforms.widthMinor.value=g.isoline.minor.width,f.uniforms.widthMinor.needsUpdate=!0),null!=g.isoline.minor.color&&(f.uniforms.lineColorMinor.value=new Pq(g.isoline.minor.color||
"darkgrey"),f.uniforms.lineColorMinor.needsUpdate=!0),null!=g.isoline.minor.visible&&(f.uniforms.visibleMinor.value=g.isoline.minor.visible,f.uniforms.visibleMinor.needsUpdate=!0))}g.hasOwnProperty("wireframe")&&(f.uniforms[e].value=g.wireframe);g.hasOwnProperty("smoothshadingfactor")&&(f.uniforms[b.kta].value=g.smoothshadingfactor,f.uniforms[b.oDa].value=1!==f.uniforms[b.kta].value)}};a.AId=function(f){f=f.uniforms;f={data:{nullvalue:f[c].value},opacity:f.opacity.value,isoline:{zmin:f.zmin.value,
zmax:f.zmax.value,count:f.count.value,major:{visible:f.visibleMajor.value,color:f.lineColorMajor.value,width:f.widthMajor.value},minor:{visible:f.visibleMinor.value,color:f.lineColorMinor.value,width:f.widthMinor.value}}};null!=this.L7a&&(f.isoline.majorminorstrategy=this.L7a.ta());return f};a.O5d=function(f,g,h){null!=g&&(f.uniforms.widthMajor.value=g);null!=h&&(f.uniforms.widthMinor.value=h)};a.D2d=function(f,g){f.uniforms.localScale.value=g};a.Q5d=function(f,g){f.uniforms.worldScale.value=g};return a}();var yB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,{});this.type="ContourMaterial";this.vertexShader=a.icd;this.fragmentShader=a.hcd;this.extensions={derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.transparent=!0;this.opacity=b.opacity;this.setOptions(b)}var a=xB;D(d,Oz);L(d,"geotoolkit3d.scene.surface.contour.ContourMaterial");d.Ujd=Ty.Km+"NullValue";d.K8=Oz.K8;d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);b.hasOwnProperty("isoline")&&(null!=b.isoline.roundedzmin&&
null==b.isoline.zmin&&(b.isoline.zmin=b.isoline.roundedzmin),null!=b.isoline.roundedzmax&&null==b.isoline.zmax&&(b.isoline.zmax=b.isoline.roundedzmax));a.B3d(this,b);return this};d.prototype.ta=function(){var b=xb(a.AId(this),Oz.prototype.ta.call(this));return b};d.prototype.nRe=function(b,c){a.O5d(this,b,c)};d.prototype.C8d=function(b){a.D2d(this,b)};d.prototype.oRe=function(b){a.Q5d(this,b)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(yB.Pa(),mz);var zB=/*#__PURE__*/function(){function d(a){a=xb(a,{formatter:function(b,c){return 10*Math.floor(Math.abs(b*c)/10)},surfacescale:new Hp(1,1,1)});bB.call(this,a);this.Or=a.formatter;this.AZb=a.surfacescale;this.Eb(a.text||this.Or(this.cr.z,this.AZb.z));this.name="contourlabel"}D(d,bB);L(d,"geotoolkit3d.scene.surface.contour.ContourLabel");d.prototype.setOptions=function(a){a=a||{};var b=!1;null!=a.formatter&&(this.Or=a.formatter,b=!0);bB.prototype.setOptions.call(this,a);null!=a.surfacescale&&(this.AZb=a.surfacescale,
this.Eb(this.Or(this.cr.z,this.AZb.z)),b=!0);b&&this.r3();return this};return d}();var AB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(E,H){E=E.userData.jvb;H=H.userData.jvb;if(E.$ac.distanceTo(H.$ac)>E.jVc+H.jVc)return!1;for(var F=E.CFc+H.CFc,I=0;I<E.nha.length;I++)for(var J=0;J<H.nha.length;J++)if(E.nha[I].distanceTo(H.nha[J])<F)return!0;return!1}function a(E,H){for(var F=0;F<H.length;F++){var I=H[F];t.copy(I.position);I.parent.localToWorld(t);t.sub(E.position);I.userData.Ctc=t.length()}}function b(E,H){for(var F=0;F<E.length;F++){var I=E[F];x.copy(I.userData.gub);x.divide(H).normalize();t.copy(I.userData.gub);
t.z=0;I.userData.Txc=c(x,t)}}function c(E,H){var F=l.angleTo(E);0>H.dot(E)&&(F*=-1);return F}function e(E){fB.call(this);if(!E.data||!E.data.surface)throw Error("Contour has no Data, parameter options.data.surface is mandatory");this.type="Contour";var H=null;null!=E.data.values&&(H=E.data.values,E.data.values=null);this.hb=xb(E,{opacity:1,surface:{enabled:!0},isoline:{useglline:!1,count:10,majorminorstrategy:new uB,major:{visible:!0,color:"black",width:2},minor:{visible:!0,color:"darkgrey",width:1}},
label:{major:{visible:!1,style:new Fi({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)"})},minor:{visible:!1,style:new Fi({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)"})},labelmaxglobalvisibleangle:70*Math.PI/180,labelmaxverticalvisibleangle:15*Math.PI/180,labelmaxverticalrotationangle:60*Math.PI/180,formatter:function(K,M){return 10*Math.floor(Math.abs(K*M)/10)},density:2}});null!=H&&(this.hb.data.values=H,E.data.values=H);if(!this.hb.data.surface)throw Error("contour has no Data");E=E.data.surface.getAttributes();
this.ST=this.hb.isoline.roundedzmin=g(E.zmin);this.RT=this.hb.isoline.roundedzmax=g(E.zmax,!0);if("string"===typeof this.hb.colorprovider)this.hb.color=new Pq(this.hb.colorprovider),this.hb.colorprovider=null,this.hb.vertexcolors=this.hb.vertexcolors||!1;else if(this.hb.colorprovider instanceof Pq)this.hb.color=this.hb.colorprovider,this.hb.colorprovider=null,this.hb.vertexcolors=this.hb.vertexcolors||!1;else if(this.hb.colorprovider instanceof Po&&null==this.hb.data.values&&null==E.values){H=E.position;
for(var F=H.count,I=new Float32Array(F),J=0;J<F;J++)I[J]=H.getZ(J);this.hb.data.values=I;this.hb.colorprovider.PO(E.zmin,E.zmax)}this.hb.label.density=W.clamp(this.hb.label.density,1,5);this.Jd=new Zt(new wB(this.hb),new yB(this.hb));this.add(this.Jd);this.nqb=[];this.Wd=new Hp;this.sl=this.Jd.geometry.boundingBox.clone();this.sl.getCenter(this.Wd);this.TWb=new Jp;this.vpb=new zs;this.sQa=new $t;this.sQa.depthTest=!0;this.sQa.depthWrite=!0;this.sQa.colorWrite=!1;this.sQa.transparent=!1;this.sQa.side=
Fr;this.lld=new Zt(this.Jd.geometry,this.sQa);this.vpb.add(this.lld);this.vpb.matrixAutoUpdate=!1;this.TWb.add(this.vpb);this.rsb=new zs;this.b7a=new oy(1,1,{minFilter:ru,magFilter:ru,format:mw,depthBuffer:!0});this.URa=new $t;this.URa.depthTest=!0;this.URa.depthWrite=!1;this.URa.transparent=!0;this.URa.side=ls;this.gwc=new cv(2*n,2*n);this.TWb.add(this.rsb);this.x7a=this.hb.isoline.count||10;this.Kwb=this.hb.isoline.useglline;this.xwa=null;this.W_b=!1;this.sWb=this.pVb=this.ltb=this.Wsb=this.tWb=
this.qVb=null;this.nVb=new zs;this.qWb=new zs;this.add(this.nVb);this.add(this.qWb);this.t0=!1;this.Y6a=this.fwc=null;this.yFa=new zs;this.MFa=new zs;this.yFa.renderOrder=1;this.MFa.renderOrder=1;this.oWb=this.lVb=this.b8a=this.K7a=null;this.yaa=this.Etb=!1;this.hwc=["label"].labelmaxglobalvisibleangle;this.FUb=["label"].labelmaxverticalvisibleangle;this.EUb=["label"].labelmaxverticalrotationangle;this.add(this.yFa);this.add(this.MFa);this.Vt=this.scale.clone();this.ywc=new Hp;this.h7a=new Hp;this.i7a=
new Xt;this.rsc=new Pq;this.setOptions(this.hb);this.hb.data.surface=null;this.name="CONTOUR"}function f(E,H){if(null==H||E.length!==H.length)return!1;for(var F=0;F<E.length;F++)if(Object.keys(E[F])[0]!==Object.keys(H[F])[0]||Object.values(E[F])[0]!==Object.values(H[F])[0])return!1;return!0}function g(E,H){H=H||!1;var F=Math.abs(Math.floor(E)).toString().length;F=2<F?Math.pow(10,F-2):1;var I=Math.floor(E/F)*F;if(!H)return I;for(;I<E;)I+=F;return I}var h=new Hp(1,0,0),k=new Hp(0,1,0),l=new Hp(0,0,
1),m=.001,n=1.25,p=new Pq(0),q=new Xt,r=new gy,t=new Hp,u=new Hp,w=new Hp,y=new Hp,z=new sv;D(e,fB);L(e,"geotoolkit3d.scene.surface.contour.Contour");e.prototype.setOptions=function(E){if(null==E)return this;fB.prototype.setOptions.call(this,E);E=E||{};var H=!1,F=!1,I=!1,J=!1;"string"===typeof E.colorprovider?(E.color=new Pq(E.colorprovider),E.colorprovider=null,E.vertexcolors=E.vertexcolors||!1):E.colorprovider instanceof Pq&&(E.color=E.colorprovider,E.colorprovider=null,E.vertexcolors=E.vertexcolors||
!1);E.hasOwnProperty("surface")&&(this.kmd=E.surface.enabled,this.Jd.visible=this.kmd);if(E.hasOwnProperty("isoline")){var K=E.isoline;K.hasOwnProperty("useglline")&&K.useglline!==this.Kwb&&(this.Kwb=K.useglline,H=F=!0);K.hasOwnProperty("zmin")&&K.zmin!==this.ST&&(this.ST=K.zmin,K.roundedzmin=null,I=J=H=F=!0);K.hasOwnProperty("zmax")&&K.zmax!==this.RT&&(this.RT=K.zmax,K.roundedzmax=null,I=J=H=F=!0);K.hasOwnProperty("count")&&K.count!==this.x7a&&null==K.majorminorstrategy&&(this.x7a=K.count,this.W_b=
!1,H=F=!0);if(K.hasOwnProperty("majorminorstrategy")){var M=K.majorminorstrategy;M instanceof uB&&!M.equals(this.xwa)&&(this.xwa=M,I=J=H=F=this.W_b=!0)}if(H||F)M=this.cud(),f(M,this.nqb)||(this.Jd.geometry.aZc(M),this.nqb=M);K.hasOwnProperty("major")&&(M=K.major,M.width&&M.width!==this.qVb&&(this.qVb=M.width,H=!0),!M.color||null!=this.Wsb&&(new Pq(M.color)).equals(this.Wsb)||(this.Wsb=new Pq(M.color),H=!0),null!=M.visible&&M.visible!==this.pVb&&(this.pVb=M.visible,H=!0));K.hasOwnProperty("minor")&&
(K=K.minor,K.width&&K.width!==this.tWb&&(this.tWb=K.width,F=!0),!K.color||null!=this.ltb&&(new Pq(K.color)).equals(this.ltb)||(this.ltb=new Pq(K.color),F=!0),null!=K.visible&&K.visible!==this.sWb&&(this.sWb=K.visible,F=!0))}E.hasOwnProperty("label")&&(E.label.density!==this.fwc&&(this.fwc=E.label.density,I=J=!0),null!=E.label.major&&(K=E.label.major,null!=K.visible&&K.visible!==this.K7a&&(this.K7a=K.visible,I=!0),K.style&&K.style!==this.lVb&&(this.lVb=K.style,this.v8("major"))),E.label.minor&&(K=
E.label.minor,null!=K.visible&&K.visible!==this.b8a&&(this.b8a=K.visible,J=!0),K.style&&K.style!==this.oWb&&(this.oWb=K.style,this.v8("minor"))),null!=E.label.labelmaxglobalvisibleangle&&(this.hwc=E.label.labelmaxglobalvisibleangle,this.yaa=!0),null!=E.label.labelmaxverticalvisibleangle&&(this.FUb=E.label.labelmaxverticalvisibleangle,this.yaa=!0),null!=E.label.labelmaxverticalrotationangle&&(this.EUb=E.label.labelmaxverticalrotationangle,this.yaa=!0));(H||F||null==this.Y6a)&&(this.K7a||this.b8a)&&
this.Nwd();this.Jd.material.setOptions(E);this.Jd.geometry.setOptions(E);E.data&&E.data.surface&&(E.data.surface=null);this.hb=xb(E,this.hb);H&&this.byb("major");F&&this.byb("minor");I&&this.BVa("major");J&&this.BVa("minor");this.gg();return this};e.prototype.ta=function(){var E=xb(this.Jd.material.ta(),this.Jd.geometry.ta());E.name=this.name;E.isoline.useglline=this.Kwb;E.isoline.minor.width=this.hb.isoline.minor.width;E.isoline.major.width=this.hb.isoline.major.width;E.label=this.hb.label;E.surface=
this.hb.surface;E.isoline.majorminorstrategy=this.hPc();E.zmin=this.ST;E.zmax=this.RT;return xb(E,fB.prototype.ta.call(this))};e.prototype.fa=function(E){return this.setOptions(E)};e.prototype.ia=function(){return this.ta()};e.prototype.uNe=function(){this.byb("major");this.byb("minor");this.BVa("major");this.BVa("minor");this.gg()};var x=new Hp,C=new Hp;e.prototype.p2d=function(E,H){var F=E.userData.Txc-this.EUb,I=E.userData.Txc+this.EUb;C.copy(E.position);this.localToWorld(C);C.negate().add(H);
y.copy(C);y.projectOnPlane(E.userData.Rnd);t.copy(E.userData.gub);t.z=0;H=c(y,t);H+this.FUb<F||H-this.FUb>I?E.visible=!1:(H<F&&(H=F),H>I&&(H=I),F=Math.abs(H),F<m&&(H=m),F>Math.PI-m&&(H=Math.PI-m),y.copy(l),z.setFromAxisAngle(k,H),y.applyQuaternion(z),z.setFromAxisAngle(l,E.userData.G0b),y.applyQuaternion(z),F=C.angleTo(y),F>this.hwc?E.visible=!1:E.setOptions({normal:y}))};e.prototype.z8d=function(E,H,F,I){this.rsb.clear();var J;for(J=0;J<E.length;J++){var K=E[J];if(K.visible){K.userData.S7a||(K.userData.S7a=
new Zt(this.gwc,this.URa));I&&K.Ayb();var M=K.rCb();K.userData.S7a.position.copy(M.getCenter());K.userData.S7a.scale.copy(M.Yha());q.setFromMatrix3(M.mza());K.userData.S7a.rotation.setFromRotationMatrix(q);this.rsb.add(K.userData.S7a)}}this.vpb.matrix.copy(this.matrixWorld);F.getSize(r);r.divideScalar(2);this.b7a.setSize(r.x,r.y);F.setRenderTarget(this.b7a);F.getClearColor(this.rsc);F.setClearColor(p);F.clearColor();F.render(this.TWb,H);F.setRenderTarget(null);F.setClearColor(this.rsc)};e.prototype.ui=
function(E,H,F,I){fB.prototype.ui.call(this,E,H,F,I);var J=!0;this.Vt.equals(this.scale)&&this.t0||(this.Vt.copy(this.scale),this.t0=!0,this.BVa("major"),this.BVa("minor"),this.Jd.material.C8d(this.scale.z),this.yaa=!0);this.h7a.equals(H.position)&&this.i7a.equals(H.projectionMatrix)||(this.h7a.copy(H.position),this.i7a.copy(H.projectionMatrix),this.yaa=!0);F=this.yFa.children.concat(this.MFa.children);w.setFromMatrixScale(this.matrixWorld);if(this.Etb||!w.equals(this.ywc))this.ywc.copy(w),b(F,w),
this.yaa=!0;if(this.yaa){this.yaa=!1;H.getWorldPosition(u);for(J=0;J<F.length;J++)F[J].visible=!0,this.p2d(F[J],u),F[J].visible&&F[J].computeBoundingBox();J=!1;this.R3b(E,H,F)}this.Etb&&(this.Etb=!1,this.yaa=!0);this.z8d(F,H,I,J)};e.prototype.cud=function(){var E=[],H=this.ST,F=this.RT;if(null!=this.xwa||this.W_b){var I=this.xwa.ta();var J=I.majorstep;I=I.minorincrement;for(var K=J/I,M;H<=F;H+=J){for(M=1;M<I;M++)E.push({minor:H+M*K});E.push({major:H+J});if(H+2*J>F&&F-H-J>K)for(M=H+J;M<F;M+=K)E.push({minor:M+
K})}this.x7a=E.length}else for(J=this.x7a,F=(F-H)/(J+1),I=0;I<J;I++)E.push({major:H+(I+1)*F});return E};e.prototype.byb=function(E){if("major"===E){var H=this.nVb;var F=this.Wsb;var I=this.qVb;var J=this.pVb}else H=this.qWb,F=this.ltb,I=this.tWb,J=this.sWb;H.children=[];if(J){J=this.Jd.geometry.Z9b();for(var K=0;K<J.length;K++)if(0!==J[K][1].length){var M=J[K][0];if(M===E){M=J[K][1];var P,R=[];if(this.Kwb){for(P=0;P<M.length;P++){var Q=M[P];var V=(new Hp).fromArray(Q[3]);Q=(new Hp).fromArray(Q[4]);
V&&Q&&R.push(V,Q)}M=(new Aq).setFromPoints(R);P=new tt({color:F,linewidth:I});M=new zt(M,P)}else{for(P=0;P<M.length;P++)V=M[P][3],Q=M[P][4],V&&Q&&R.push(V[0],V[1],V[2],Q[0],Q[1],Q[2]);M=new ez({data:{positions:R},color:F,linewidth:I,polygonoffset:!0,polygonoffsetfactor:1,mask:this.b7a.texture})}H.add(M)}}}};e.prototype.BVa=function(E){if(this.t0&&null!=E&&(this.FIc(E),"major"!==E||this.K7a)&&("minor"!==E||this.b8a)){var H=this.Jd.geometry.Z9b(),F=Math.pow(this.hb.label.density,5);w.setFromMatrixScale(this.matrixWorld);
var I=(new Hp).copy(this.Jd.geometry.boundingBox.min).multiply(w),J=(new Hp).copy(this.Jd.geometry.boundingBox.max).multiply(w);I=Math.min(J.x-I.x,J.y-I.y);I/=3*F;J=H.map(function(tb){return tb[2]});var K=Math.max.apply(null,J);if("major"===E){var M=this.hb.label.major;var P=this.yFa}else"minor"===E&&(M=this.hb.label.minor,P=this.MFa);M=xb(M,{formatter:this.hb.label.formatter,surfacescale:this.Vt,zmin:this.ST,zmax:this.RT,renderside:ls});for(var R=0;R<H.length;R++){var Q=H[R][0];if(E===Q){var V=J[R];
Q=Math.floor(V/K*F);var Z=H[R][1];if(0!==Z.length){var aa=V/Q;V=0;aa*=.33;for(var na=[],ya=this.Y6a[R],va=null,qa=null,Ja=0,Qa=0;Ja<Z.length&&Qa<Q;Ja++){var Oa=Z[Ja];0>Oa[1][2]&&(Oa[1][0]*=-1,Oa[1][1]*=-1,Oa[1][2]*=-1);var Ua=Oa[2],bb=null==va;V+=Ua;if(V>=aa){bb?(M.canvas=ya,M.origin=Oa[0],M.normal=Oa[1],va=new zB(M),qa=va.getBoundingSphere().clone(),qa.radius*=I):qa.center.fromArray(Oa[0]);Ua=!1;for(var Ya=0;Ya<na.length;Ya++)if(na[Ya].intersectsSphere(qa)){Ua=!0;break}Ua||null==va||(bb||va.setOptions({origin:Oa[0],
normal:Oa[1]}),va.userData.gub=(new Hp).fromArray(Oa[1]),t.copy(va.userData.gub),t.z=0,t.normalize(),va.userData.G0b=h.angleTo(t),t.crossVectors(h,t),0>t.z&&(va.userData.G0b*=-1),va.userData.Rnd=(new Hp(Oa[4][0]-Oa[3][0],Oa[4][1]-Oa[3][1],Oa[4][2]-Oa[3][2])).normalize(),va.setOptions({freeorientation:!0,facingoffset:1}),Qa++,na.push(qa),P.add(va),qa=va=null)}}va&&va.dispose()}}}this.yaa=this.Etb=!0}};e.prototype.v8=function(E){if(this.t0&&null!=E&&("major"!==E||this.K7a)&&("minor"!==E||this.b8a)){var H=
[];if("major"===E){var F=this.lVb;H=this.yFa.children}else"minor"===E&&(F=this.oWb,H=this.MFa.children);for(E=0;E<H.length;E++)H[E].setOptions({style:F,surfacescale:this.scale});this.yaa=!0}};var A=new Hp,v=new Ud,B=new Hp;e.prototype.y8d=function(E,H,F){F=F.userData.plot.getSize(v);for(var I=0;I<E.length;I++){var J=E[I];if(J.visible){J.userData.jvb||(J.userData.jvb={$ac:new gy});var K=J.userData.jvb;J=J.rCb();var M=J.Yha(),P=J.getCenter(),R=J.mza(),Q=M.y,V=2*M.x,Z=Math.ceil(V/(2*Q)),aa=V/Z;J=aa/
Q;A.set(Q-V/2,0,0);if(!K.nha||K.nha.length!==Z)for(K.nha=[],Q=0;Q<Z;Q++)K.nha.push(new gy);for(Q=0;Q<Z;Q++)B.copy(A).applyMatrix3(R).add(P),hz.R1a(B,H,F,B),K.nha[Q].set(B.x,B.y),A.x+=aa;aa=P.clone();t.copy(M).applyMatrix3(R).add(P);hz.R1a(aa,H,F,aa);hz.R1a(t,H,F,t);aa.z=0;t.z=0;P=M=aa.distanceTo(t);2<Z&&(Z=K.nha[0].distanceTo(K.nha[1]),P=Z/J);K.$ac.set(aa.x,aa.y);K.jVc=M;K.CFc=P}}};e.prototype.R3b=function(E,H,F){if(null!=E.userData.plot)for(a(H,F),F.sort(function(P,R){return P.userData.Ctc-R.userData.Ctc}),
this.y8d(F,H,E),E=[],H=0;H<F.length;H++){var I=F[H];if(I.visible&&null!=I.parent)if(0===E.length)E.push(I);else{for(var J=!1,K=0;K<E.length;K++){var M=E[K];if(d(I,M)){J=!0;I.visible=!1;break}}J||E.push(I)}}};e.prototype.Nwd=function(){this.Y6a=[];for(var E=0;E<this.nqb.length;E++){var H=wc(0,0,!0);this.Y6a.push(H)}};e.prototype.dispose=function(){this.Y6a=this.hb=null;this.FIc();this.b7a&&this.b7a.dispose();this.URa.dispose();this.gwc.dispose();hz.dispose(this.rsb);hz.dispose(this.nVb);hz.dispose(this.qWb);
hz.dispose(this.Jd);fz.prototype.dispose.call(this)};e.prototype.FIc=function(E){if("major"===E||null==E)this.yFa.children.forEach(function(H){H.dispose()}),this.yFa.children=[];if("minor"===E||null==E)this.MFa.children.forEach(function(H){H.dispose()}),this.MFa.children=[]};e.prototype.hPc=function(){return this.xwa.clone()};e.prototype.GEd=function(){return this.nqb};e.prototype.gHd=function(){return this.x7a};e.prototype.R1=function(){return this.Jd};e.prototype.kha=function(){return!1};e.prototype.Opa=
function(){return[this.Jd]};return e}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJnZXRQcm9wZXJ0aWVzIjoiaWEiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImdldE1ham9yTWlub3JTdHJhdGVneSI6ImhQYyIsImdldEVsZXZhdGlvbnMiOiJHRWQiLCJnZXRMaW5lQ291bnQiOiJnSGQiLCJnZXRNZXNoIjoiUjEiLCJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJraGEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiT3BhIn19fSAg");rA.tg().kib(AB.Pa(),function(d){return d.children[0]});var BB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f,g,h){this.cr=f||new Hp;this.Mh=g||new Hp(0,1,0);this.mld=h}var a=new Hp,b=new Hp,c=new Hp,e=new Hp;L(d,"geotoolkit3d.scene.surface.contour.Ray");d.prototype.set=function(f,g){this.cr.copy(f);this.Mh.copy(g);return this};d.prototype.clone=function(){return(new d).copy(this)};d.prototype.copy=function(f){this.cr.copy(f.U1());this.Mh.copy(f.Zl());return this};d.prototype.at=function(f,g){null==g&&(g=new Hp);return g.copy(this.Mh).multiplyScalar(f).add(this.cr)};d.prototype.intersectTriangle=
function(f,g,h,k,l,m){null==m&&(m=new Hp);a.subVectors(g,f);b.subVectors(h,f);c.crossVectors(a,b);m.copy(c);g=this.Mh.dot(c);if(0<g){if(k)return null;k=1}else if(0>g)k=-1,g=-g;else return null;e.subVectors(this.cr,f);f=k*this.Mh.dot(b.crossVectors(e,b));if(0>f)return null;h=k*this.Mh.dot(a.cross(e));if(0>h||f+h>g)return null;f=-k*e.dot(c);return 0>f?null:this.at(f/g,l)};d.prototype.U1=function(){return this.cr};d.prototype.Zl=function(){return this.Mh};d.prototype.fDd=function(){return this.mld};
return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcmlnaW4iOiJVMSIsImdldERpcmVjdGlvbiI6IlpsIiwiZ2V0Q29udG91ckxldmVsIjoiZkRkIn19fSAg");var CB=/*#__PURE__*/function(){function d(a){Pz.call(this,a);this.type="FaultMaterial";this.polygonOffset=this.transparent=!0;this.polygonOffsetFactor=.1}D(d,Pz);L(d,"geotoolkit3d.scene.surface.fault.FaultMaterial");return d}();oz.lw(CB.Pa(),mz);var DB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){fB.call(this,b);this.type="Fault";b=G(b,{colorprovider:"#bbdefb",opacity:1,fault:!0,lines:!0,points:!0,linescolor:"red orange blue yellow cyan brown grey white".split(" "),pointscolor:"red orange blue yellow cyan brown grey white".split(" ")});if(null==b.data||null==b.data.surface)throw Error("Fault has no data");"string"===typeof b.colorprovider&&(b.colorprovider=new Pq(b.colorprovider));b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null,
b.vertexcolors=b.vertexcolors||!1);this.Jd=new Zt(new Lz(b),new CB(b));this.add(this.Jd);this.mh=new Gp;this.add(this.mh);this.Lc=new Gp;this.add(this.Lc);var c=this,e=b.data.surface;this.tub=this.Ksb=null;this.position.copy(e.fq());this.setOptions(b);var f=this.Ksb.ro(),g=this.tub.ro();e.eJd().forEach(function(h,k){var l=new Aq,m=new Float32Array(3*h.x.length);l.setAttribute("position",new zq(m,3));for(var n=0;n<h.x.length;n++){var p=new Zt(new xq(10,10,10),new $t({side:Fr,color:g[k%g.length].m8()}));
p.position.set(h.x[n],h.y[n],h.z[n]);p.userData.index=k;c.mh.add(p);m[3*n]=h.x[n];m[3*n+1]=h.y[n];m[3*n+2]=h.z[n]}c.Lc.add(new rt(l,new tt({color:f[k%f.length].m8()})))})}function a(b){if(oc(b,Mo))return b;Array.isArray(b)||(b=[b]);for(var c=[],e=[],f=b.length,g=0;g<f;g++)c.push(g),e.push(b[g]instanceof Pq?b[g].getHexString():b[g]);return new Ro(c,e,f)}D(d,fB);L(d,"geotoolkit3d.scene.surface.fault.Fault");d.prototype.setOptions=function(b){if(null==b)return this;fB.prototype.setOptions.call(this,
b);this.Jd.material.setOptions(b);b.hasOwnProperty("fault")&&(this.Jd.visible=b.fault);b.hasOwnProperty("lines")&&(this.Lc.visible=b.lines);b.hasOwnProperty("points")&&(this.mh.visible=b.points);if(b.hasOwnProperty("linescolor")){this.Ksb=a(b.linescolor);var c=this.Ksb.ro();this.Lc.children.forEach(function(f,g){f.material.color.set(c[g%c.length].m8())})}if(b.hasOwnProperty("pointscolor")){this.tub=a(b.pointscolor);var e=this.tub.ro();this.mh.children.forEach(function(f){f.material.color.set(e[f.userData.index%
e.length].m8())})}return this};d.prototype.ta=function(){return xb(xb({fault:this.Jd.visible,lines:this.Lc.visible,points:this.mh.visible,linescolor:this.Ksb,pointscolor:this.tub},this.Jd.material.ta()),fB.prototype.ta.call(this))};d.prototype.kha=function(){return!0};d.prototype.Opa=function(){return[this.Jd]};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJraGEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiT3BhIn19fSAg");var EB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(l){fB.call(this);this.type="Surface";l=G(l,{maxlod:10,minlod:0,extent:hz.yYa(),maplimits:hz.yYa(),opacity:1,maximumrequests:10,tilewidth:256,tileheight:256});if(!l.data.surface)throw Error("Surface has no Data");var m=l.data.surface.getAttributes();if("string"===typeof l.colorprovider)l.color=new Pq(l.colorprovider),l.colorprovider=null,l.vertexcolors=l.vertexcolors||!1;else if(l.colorprovider instanceof Pq)l.color=l.colorprovider,l.colorprovider=null,l.vertexcolors=l.vertexcolors||
!1;else if(l.colorprovider instanceof Po&&null==l.texture&&null==l.data.values&&null==m.values&&null==l.geometry){for(var n=[],p=m.position,q=p.count,r=0;r<q;r++)n.push(p.getZ(r));l.data.values=n;l.colorprovider.PO(m.zmin,m.zmax)}n=l.data.surface.wAb().material;p=l.data.surface.wAb().geometry;this.Jd=new Zt(new p(l),new n(l));this.add(this.Jd);this.Vt=(new Hp).copy(this.scale);this.wwc=this.RGc(this.Vt);this.sy=new Cx;this.sy.crossOrigin="Anonymous";this.Kl=-1;this.Zk={};this.qA=[];this.IXb=0;this.RS=
{};this.lA=m.nullvalue;this.ST=m.zmin;this.RT=m.zmax;this.setOptions(l);this.name="SURFACE"}var a=new Hp,b=new gy,c=new gy,e=new ms,f=new Xt,g=new uq,h=new Hp,k=new Hp;D(d,fB);L(d,"geotoolkit3d.scene.surface.Surface");d.prototype.setOptions=function(l){if(null==l)return this;fB.prototype.setOptions.call(this,l);var m=G(l,{});"string"===typeof m.colorprovider?(m.color=new Pq(m.colorprovider),m.colorprovider=null,m.vertexcolors=m.vertexcolors||!1):m.colorprovider instanceof Pq&&(m.color=m.colorprovider,
m.colorprovider=null,m.vertexcolors=m.vertexcolors||!1);if(null!=l.maplimits&&null!=l.extent){this.l5=l.maplimits;var n=new gy;this.l5.getCenter(n);var p=new gy;n=n.sub(l.extent.getCenter(p));p=new gy;var q=new gy;this.l5.getSize(p);l.extent.getSize(q);this.scale.set(p.x/q.x,p.y/q.y,1);this.position.set(n.x*this.scale.x,n.y*this.scale.y,0)}n=!1;null!=l.extent&&l.extent!==this.tK&&(this.tK=l.extent,n=!0);null!=l.maxlod&&l.maxlod!==this.IW&&(this.IW=l.maxlod,n=!0);null!=l.minlod&&l.minlod!==this.OW&&
(this.OW=l.minlod,n=!0);null==l.geometry||ic(l.geometry,this.RS.geometry)||(this.RS.geometry=G(l.geometry,this.RS.geometry),n=!0);null==l.material||ic(l.material,this.RS.material)||(this.RS.material=G(l.material,this.RS.material),n=!0);null!=l.tilewidth&&l.tilewidth!==this.iE&&(this.iE=l.tilewidth,n=!0);null!=l.tileheight&&l.tileheight!==this.hE&&(this.hE=l.tileheight,n=!0);n&&this.clear();null!=l.opacity&&l.opacity!==this.lB&&(n=l.opacity,p=1>n,this.lB=n,this.Jd.material.opacity=n,this.Jd.material.transparent=
p);this.TVb=l.maximumrequests||this.TVb;this.Jd.material.setOptions(m);this.Jd.geometry.setOptions(m);this.gg();return this};d.prototype.ta=function(){var l=xb(this.Jd.material.ta(),this.Jd.geometry.ta());l.maplimits=this.l5;l.extent=this.tK;l.maxlod=this.IW;l.minlod=this.OW;l.geometry=this.RS.geometry;l.material=this.RS.material;l.tilewidth=this.iE;l.tileheight=this.hE;l.opacity=this.lB;l.maximumrequests=this.TVb;l.nullvalue=this.lA;l.zmin=this.ST;l.zmax=this.RT;return xb(l,fB.prototype.ta.call(this))};
d.prototype.RGc=function(l){var m=0;0>l.x&&m++;0>l.y&&m++;0>l.z&&m++;return m%2};d.prototype.lh=function(){for(var l=this.Jd.geometry.index,m=Math.trunc(l.count/2),n=l.count-1,p=0;p<m;p++){var q=n-p,r=l.getX(p),t=l.getX(q);l.setX(q,r);l.setX(p,t)}l.needsUpdate=!0};d.prototype.clear=function(){for(var l in this.Zk)delete this.Zk[l];this.qA.length=0};d.prototype.QNa=function(l){if(!pc(this.RS)){var m=Math.abs(this.Jd.geometry.boundingBox.distanceToPoint(l.position));this.Jd.geometry.boundingBox.getSize(a);
m=Math.ceil(Math.max(a.x,a.y)/m);m=W.clamp(m,this.OW,this.IW);this.Kl!==m&&this.clear();this.Kl=m;this.l5.getSize(b);this.tK.getSize(c);var n=b.x/Math.pow(2,m),p=b.y/Math.pow(2,m),q=Math.floor((this.tK.min.x-this.l5.min.x)/n),r=Math.ceil((this.tK.max.x-this.l5.min.x)/n),t=Math.floor((this.tK.min.y-this.l5.min.y)/p),u=Math.ceil((this.tK.max.y-this.l5.min.y)/p),w=n*a.x/(this.iE*c.x),y=p*a.y/(this.hE*c.y);n=(Math.floor((this.tK.min.x-this.l5.min.x)/n)*n+this.l5.min.x-this.tK.min.x)*a.x/c.x;p=(Math.floor((this.tK.min.y-
this.l5.min.y)/p)*p+this.l5.min.y-this.tK.min.y)*a.y/c.y;l.updateMatrix();l.updateMatrixWorld();e.setFromProjectionMatrix(f.identity().multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse));for(l=q;l<r;l++)for(var z=t;z<u;z++)if(!this.Zk[l+"x"+z]&&(h.set(this.Jd.geometry.boundingBox.min.x+n+this.iE*w*(l-q),this.Jd.geometry.boundingBox.min.y+p+this.hE*y*(z-t),this.Jd.geometry.boundingBox.min.z),k.set(this.Jd.geometry.boundingBox.min.x+n+this.iE*w*(l-q+1),this.Jd.geometry.boundingBox.min.y+p+this.hE*
y*(z-t+1),this.Jd.geometry.boundingBox.max.z),g.set(h,k),e.intersectsBox(this.Jd.geometry.boundingBox))){for(var x in this.RS)this.RS.hasOwnProperty(x)&&this.RS[x].server&&this.RS[x].formatterfunction&&this.qA.push({url:this.RS[x].server+this.RS[x].formatterfunction(m,z,l),offsetX:n+this.iE*w*(l-q),offsetY:p+this.hE*y*(z-t),cM:w,QO:y,Aud:x});this.Zk[l+"x"+z]=!0}this.GGc()}};d.prototype.GGc=function(){for(;0<this.qA.length&&this.IXb<this.TVb;){var l=this.qA.shift();this.ARd(l.url,l.offsetX,l.offsetY,
l.cM,l.QO,l.Aud);this.IXb++}};d.prototype.R1=function(){return this.Jd};d.prototype.ARd=function(l,m,n,p,q,r){this.sy.load(l,function(t){null!=this.Jd.material?(this.Jd.material.QNa(t,m,n,p,q,r),t.dispose(),this.IXb--,this.gg(),this.GGc()):t.dispose()}.bind(this))};d.prototype.ui=function(l,m,n,p){fB.prototype.ui.call(this,l,m,n,p);this.QNa(m);this.Vt.equals(this.scale)||(l=this.RGc(this.scale),l!==this.wwc&&this.lh(),this.Vt.copy(this.scale),this.wwc=l)};d.prototype.kha=function(){return!(this.Jd.geometry instanceof
Uz)};d.prototype.Opa=function(){return this.kha()?[this.Jd]:[]};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRNZXNoIjoiUjEiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImNhbkVkZ2VzQmVIaWdobGlnaHRlZCI6ImtoYSIsImdldE1lc2hlc1RvSGlnaGxpZ2h0RWRnZXMiOiJPcGEifX19");var FB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){ef.call(this,a,new af({id:function(b){return b.id},uuid:function(b){return b.uuid},name:function(b){return b.name},"class":function(b){return"function"===typeof b.Pa?b.Pa():b instanceof rt?"THREE.Line":b instanceof iv?"THREE.Points":b instanceof gx?"THREE.Sprite":b instanceof Zt?"THREE.Mesh":b instanceof Gp?"THREE.Object3D":null},visible:function(b){return b.visible}}))}D(d,ef);L(d,"geotoolkit3d.selection.NodeQueryBuilder");d.prototype.dk=function(a,b){for(var c=0;c<
a.children.length;c++)b(a.children[c],c,a,this)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJlbnVtZXJhdGVOb2RlcyI6ImRrIn19fSAg");function Wja(d){return new FB(d)}var GB=/*#__PURE__*/ta(/*#__PURE__*/{gDa:"selected",Nv:"movestart",YOa:"move",jp:"moveend"},2,"eyJTZWxlY3RlZCI6ImdEYSIsIlN0YXJ0IjoiTnYiLCJNb3ZlIjoiWU9hIiwiRW5kIjoianAifSAg"),HB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"AbstractMoveTool",enabled:!0,pickenabled:!0,armingkey:17});Py.call(this,a);this.Wk=[];this.Fk=null}D(d,Py);L(d,"geotoolkit3d.tool.AbstractMoveTool");d.prototype.setOptions=function(a){a=G(a,{plot:this.uc,enabled:this.Vf,pickenabled:this.iTa,object:void 0!==a.object?null:this.Fk});this.Fk!==a.object&&this.VQ(d.S8.gDa,a.object,null);this.Fk=a.object;this.Vf=a.enabled;this.iTa=a.pickenabled;Py.prototype.setOptions.call(this,
a);return this};d.prototype.ta=function(){var a=Py.prototype.ta.call(this);a.object=this.Fk;a.enabled=this.Vf;a.pickenabled=this.iTa;return a};d.prototype.Hn=Fb;d.prototype.move=Fb;d.prototype.GO=function(a){this.Vf&&this.iTa&&this.Hn(a)};d.prototype.VQ=function(a,b,c){for(var e=0;e<this.Wk.length;e++)this.Wk[e](a,b,c)};d.S8=GB;d.prototype.gVa=function(a){-1===this.Wk.indexOf(a)&&this.Wk.push(a);return this};d.prototype.tYd=function(a){a=this.Wk.indexOf(a);-1!==a&&this.Wk.splice(a,1);return this};
d.prototype.FO=function(a){this.MS&&a.keyCode===this.Bea&&this.VQ(d.S8.jp,this.Fk,null)};d.prototype.PE=function(a){this.Vf&&(null==this.Fk&&this.GO(a),null!=this.Fk&&(this.NQe=this.Fk.position.clone()),this.VQ(d.S8.Nv,this.Fk,null))};d.prototype.OA=function(a){this.Vf&&(null!=this.Fk?this.move(a,d.S8.YOa):this.VQ(d.S8.YOa,this.Fk,null))};d.prototype.OE=function(a){this.Vf&&(null!=this.Fk?(this.move(a,d.S8.jp),this.uc.getRoot().remove(this.en),this.iTa&&this.setOptions({object:null})):this.VQ(d.S8.jp,
this.Fk,null))};d.prototype.LJ=Hb;d.prototype.RH=Hb;d.prototype.YL=Hb;d.prototype.EO=Hb;d.prototype.jG=Hb;d.prototype.kq=Hb;d.prototype.SE=Hb;d.prototype.RE=Hb;d.prototype.kG=Hb;d.prototype.lG=Hb;d.prototype.UE=Hb;d.prototype.kD=Hb;d.prototype.ZL=Hb;d.prototype.$L=Hb;d.prototype.dispose=function(){this.Fk=this.Wk=null;Py.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvblBpY2siOiJHTyIsImFkZE1vdmVMaXN0ZW5lciI6ImdWYSIsInJlbW92ZVNlbGVjdGlvbkxpc3RlbmVyIjoidFlkIiwib25LZXlFbmQiOiJGTyIsIm9uRHJhZ1N0YXJ0IjoiUEUiLCJvbkRyYWciOiJPQSIsIm9uRHJhZ0VuZCI6Ik9FIiwib25UYXAiOiJMSiIsIm9uQ3Vyc29yTW92ZSI6IlJIIiwib25LZXlTdGFydCI6IllMIiwib25LZXkiOiJFTyIsIm9uRG91YmxlVGFwIjoiakciLCJvbk1vdXNlV2hlZWwiOiJrcSIsIm9uUGluY2hTdGFydCI6IlNFIiwib25QaW5jaCI6IlJFIiwib25QaW5jaEVuZCI6ImtHIiwib25TbGlkZVN0YXJ0IjoibEciLCJvblNsaWRlIjoiVUUiLCJvblNsaWRlRW5kIjoia0QiLCJvblZpc2liaWxpdHlHYWluZWQiOiJaTCIsIm9uVmlzaWJpbGl0eUxvc3QiOiIkTCJ9fX0g");var IB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){fz.call(this);this.Fg(!1)}var a=new uq(new Hp(-Infinity,-Infinity,-Infinity),new Hp(Infinity,Infinity,Infinity));D(d,fz);L(d,"geotoolkit3d.tool.cursor.AbstractCursor");d.prototype.I2=Fb;d.prototype.yia=function(){return a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IkkyIn19fSAg");var JB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){IB.call(this);a=G(a,{});for(var b=0;b<a.cursors.length;b++)this.add(a.cursors[b])}D(d,IB);L(d,"geotoolkit3d.tool.cursor.CompositeCursor");d.prototype.I2=function(a){for(var b=0;b<this.children.length;b++)this.children[b].I2(a);return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IkkyIn19fSAg");var KB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){IB.call(this);a=G(a,{linestyle:new Y({color:"red"}),cursorsize:5});var b=new Aq;b.setAttribute("position",new zq(new Float32Array([-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1]),3));b.setIndex(new zq(new Uint32Array([0,1,2,3,4,5]),1));this.add(new zt(b,null));this.setOptions(a)}D(d,IB);L(d,"geotoolkit3d.tool.cursor.CrossCursor");d.prototype.I2=function(a){this.position.copy(a);this.gg();return this};d.prototype.setOptions=function(a){if(null==a)return this;IB.prototype.setOptions.call(this,
a);var b=this.children[0];if(null==b)return this;a=G(a,{cursorsize:b.DQa,linestyle:null!=b.material?b.material.userData.LY:null});b.material=Az.JIa(a.linestyle);b.DQa=a.cursorsize;this.gg();return this};d.prototype.ta=function(){var a={},b=this.children[0];null!=b&&(null!=b.material&&(a.linestyle=b.material.userData.LY),a.cursorsize=b.DQa);return xb(a,IB.prototype.ta.call(this))};d.prototype.ui=function(a,b,c,e){IB.prototype.ui.call(this,a,b,c,e);if(this.visible){for(c=0;c<this.children.length;c++)e=
this.children[c],e.scale.set(e.DQa,e.DQa,e.DQa);hz.y$c(this,b,a)}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IkkyIiwiZ2V0T3B0aW9ucyI6InRhIiwiYmVmb3JlUmVuZGVyIjoidWkifX19");var LB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){IB.call(this);b=G(b,{limits:null,linestyle:new Y({color:"red"}),mode:DA.back});this.add(this.Hoa("front",[-.5,0,0,.5,0,0],[0,0,-.5,0,0,.5]));this.add(this.Hoa("back",[-.5,0,0,.5,0,0],[0,0,-.5,0,0,.5]));this.add(this.Hoa("left",[0,-.5,0,0,.5,0],[0,0,-.5,0,0,.5]));this.add(this.Hoa("right",[0,-.5,0,0,.5,0],[0,0,-.5,0,0,.5]));this.add(this.Hoa("bottom",[-.5,0,0,.5,0,0],[0,-.5,0,0,.5,0]));this.add(this.Hoa("top",[-.5,0,0,.5,0,0],[0,-.5,0,0,.5,0]));this.setOptions(b)}function a(b,
c,e){var f=new Hp;e.getCenter(f);var g=new Hp;e.getSize(g);b[0].position.copy(f);b[0].children[0].position.set(0,-g.y/2,c.z-f.z);b[0].children[1].position.set(c.x-f.x,-g.y/2,0);b[1].position.copy(f);b[1].children[0].position.set(0,g.y/2,c.z-f.z);b[1].children[1].position.set(c.x-f.x,g.y/2,0);b[2].position.copy(f);b[2].children[0].position.set(-g.x/2,0,c.z-f.z);b[2].children[1].position.set(-g.x/2,c.y-f.y,0);b[3].position.copy(f);b[3].children[0].position.set(g.x/2,0,c.z-f.z);b[3].children[1].position.set(g.x/
2,c.y-f.y,0);b[4].position.copy(f);b[4].children[1].position.set(c.x-f.x,0,-g.z/2);b[4].children[0].position.set(0,c.y-f.y,-g.z/2);b[5].position.copy(f);b[5].children[1].position.set(c.x-f.x,0,g.z/2);b[5].children[0].position.set(0,c.y-f.y,g.z/2)}D(d,IB);L(d,"geotoolkit3d.tool.cursor.CrossHair2DCursor");d.prototype.Hoa=function(b,c,e){var f=new fz;f.userData.plane=b;f.add(this.eWa(c));f.add(this.eWa(e));return f};d.prototype.eWa=function(b,c){var e=new Aq;e.setAttribute("position",new zq(new Float32Array(b),
3));e.setIndex(new zq(new Uint32Array([0,1]),1));b=new zt(e,null);b.userData.plane=c;return b};d.prototype.I2=function(b){a(this.children,b,this.fe);this.gg();return this};d.prototype.setOptions=function(b){if(null==b)return this;IB.prototype.setOptions.call(this,b);var c=this.children[0];if(null==c)return this;c=G(b,{limits:this.fe,cursorsize:c.DQa,linestyle:null!=c.material?c.material.userData.LY:null,mode:this.mode});this.mode=c.mode;this.fe=c.limits;for(var e=0;e<this.children.length;e++)for(var f=
0;f<this.children[e].children.length;f++)this.fe.getSize(this.children[e].children[f].scale),null!=b.linestyle&&(this.children[e].children[f].material=Az.JIa(c.linestyle));this.gg();return this};d.prototype.ta=function(){var b=this.children[0],c={};c.mode=this.mode;c.limits=this.fe;null!=b&&null!=b.material&&(c.linestyle=b.material.userData.LY);return xb(c,IB.prototype.ta.call(this))};d.prototype.ui=function(b,c,e,f){IB.prototype.ui.call(this,b,c,e,f);if(this.visible)for(e=0;e<this.children.length;e++)this.children[e].scale.copy(this.children[e].children[0].scale),
this.children[e].updateMatrixWorld(),this.children[e].visible=this.mode(this.children[e],b,c),this.children[e].scale.set(1,1,1),this.children[e].updateMatrixWorld()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IkkyIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var MB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){IB.call(this);var c=G(b,{visiblelinestyle:new Y({color:"red"}),hiddenlinestyle:new Y({color:"rgba(255,0,0,0.99)",pattern:vg.zka})});this.B5a=!1!==b.hiddenlinestyle;this.r_=new fz;this.add(this.r_);this.r_.add(this.eWa([-.5,0,0,.5,0,0]));this.r_.add(this.eWa([0,-.5,0,0,.5,0]));this.r_.add(this.eWa([0,0,-.5,0,0,.5]));this.setOptions(c)}function a(b,c){b[0].position.set(b[0].position.x,c.y,c.z);b[1].position.set(c.x,b[1].position.y,c.z);b[2].position.set(c.x,c.y,b[2].position.z)}D(d,IB);L(d,"geotoolkit3d.tool.cursor.CrossHairCursor");d.prototype.eWa=function(b){var c=new Aq;c.setAttribute("position",new zq(new Float32Array(b),3));c.setIndex(new zq(new Uint32Array([0,1]),1));return new zt(c,null)};d.prototype.I2=function(b){a(this.r_.children,b);this.gg();return this};d.prototype.setOptions=function(b){if(null==b)return this;IB.prototype.setOptions.call(this,b);var c=this.r_.children[0];if(null==c||null==b)return this;c=G(b,{limits:this.fe,"visiblelinestyle:":null!=c.material?
c.material.userData.LY:null});this.fe=c.limits;b=(this.B5a=!1!==b.hiddenlinestyle)?c.hiddenlinestyle:c.visiblelinestyle;for(c=0;c<this.r_.children.length;c++)this.fe.getSize(this.r_.children[c].scale),this.fe.getCenter(this.r_.children[c].position),null!=b&&(this.r_.children[c].material=Az.JIa(b),this.r_.children[c].renderOrder=this.B5a?1:0,this.r_.children[c].material.depthTest=this.B5a?!1:!0);this.gg();return this};d.prototype.ta=function(){var b=this.r_.children[0],c={};c.limits=this.fe;this.B5a&&
b&&b.material&&(c.hiddenlinestyle=b.material.userData.LY);b&&b.material&&(c.visiblelinestyle=b.material.userData.LY);return xb(c,IB.prototype.ta.call(this))};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IkkyIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var NB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"CursorTool",enabled:!0,cursor:new KB});Py.call(this,a);this.Wk=[]}D(d,Py);L(d,"geotoolkit3d.tool.cursor.CursorTool");d.prototype.setOptions=function(a){a=G(a,{enabled:this.Vf,cursor:this.Xq});this.Vf=a.enabled;a.cursor!==this.Xq&&(hz.dispose(this.Xq),this.Xq=a.cursor);this.Xq.visible=this.Vf;Py.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=Py.prototype.ta.call(this);a.enabled=this.Vf;a.cursor=this.Xq;return a};d.prototype.XEb=
function(a){this.Xq.visible=null!=a;null==this.Xq.parent&&this.uc.getRoot().add(this.Xq);null!=a&&this.Xq.I2(a);this.Xq.gg()};d.prototype.VQ=function(a,b){for(var c=0;c<this.Wk.length;c++)this.Wk[c](a,b);null!=this.uc&&null!=this.Xq&&(a=0!==b.length?b[0].point:null,this.XEb(a))};d.prototype.gVa=function(a){-1===this.Wk.indexOf(a)&&this.Wk.push(a);return this};d.prototype.nYd=function(a){a=this.Wk.indexOf(a);-1!==a&&this.Wk.splice(a,1);return this};d.prototype.FO=function(a){this.MS&&a.keyCode===this.Bea&&
this.VQ(a,[])};d.prototype.LJ=function(a){if(this.Vf){var b=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc);this.VQ(a,b)}};d.prototype.RH=function(a){if(this.Vf){var b=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc);this.VQ(a,b)}};d.prototype.PE=Hb;d.prototype.OA=Hb;d.prototype.OE=Hb;d.prototype.YL=Hb;d.prototype.EO=Hb;d.prototype.jG=Hb;d.prototype.kq=Hb;d.prototype.SE=Hb;d.prototype.RE=Hb;d.prototype.kG=Hb;d.prototype.lG=Hb;d.prototype.UE=Hb;d.prototype.kD=Hb;d.prototype.ZL=Hb;d.prototype.$L=Hb;d.prototype.dispose=
function(){this.Fk=this.Wk=null;Py.prototype.dispose.call(this)};d.prototype.rDd=function(){return this.Xq};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJtb3ZlQ3Vyc29yIjoiWEViIiwiYWRkTW92ZUxpc3RlbmVyIjoiZ1ZhIiwicmVtb3ZlTW92ZUxpc3RlbmVyIjoibllkIiwib25LZXlFbmQiOiJGTyIsIm9uVGFwIjoiTEoiLCJvbkN1cnNvck1vdmUiOiJSSCIsIm9uRHJhZ1N0YXJ0IjoiUEUiLCJvbkRyYWciOiJPQSIsIm9uRHJhZ0VuZCI6Ik9FIiwib25LZXlTdGFydCI6IllMIiwib25LZXkiOiJFTyIsIm9uRG91YmxlVGFwIjoiakciLCJvbk1vdXNlV2hlZWwiOiJrcSIsIm9uUGluY2hTdGFydCI6IlNFIiwib25QaW5jaCI6IlJFIiwib25QaW5jaEVuZCI6ImtHIiwib25TbGlkZVN0YXJ0IjoibEciLCJvblNsaWRlIjoiVUUiLCJvblNsaWRlRW5kIjoia0QiLCJvblZpc2liaWxpdHlHYWluZWQiOiJaTCIsIm9uVmlzaWJpbGl0eUxvc3QiOiIkTCIsImdldEN1cnNvciI6InJEZCJ9fX0g");var OB=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.shaders.Scatter");d.VERTEX_SHADER="attribute float cgpointSize;\nattribute float cgpointVisible;\nvarying float vcgpointVisible;\nuniform float cgpixelScale;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if(cgcolormapLogValue == 1)\n        {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    vcgpointVisible = cgpointVisible;\n    gl_PointSize = cgpointSize * cgpixelScale * 2.0;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n}";d.FRAGMENT_SHADER=
"uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\nuniform bool ishighlight;\n#include <logdepthbuf_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvarying float vcgpointVisible;\nvoid main() {\n    if(vcgpointVisible < 0.1) {\n        discard;\n    }\n    vec4 diffuseColor = vec4(cgpointColor, 1.0);\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    vec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n    if(finalColor.a < 0.5) {\n        discard;\n    }\n    gl_FragColor = diffuseColor * finalColor;\n    if (ishighlight == true) {\n        gl_FragColor.a = cgpointOpacity;\n    }\n    #include <logdepthbuf_fragment>\n}";
d.zed="uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\n#include <logdepthbuf_pars_fragment>\nvarying float vcgpointVisible;\nvoid main() {\n    if(vcgpointVisible < 0.1) {\n        discard;\n    }\n    vec4 diffuseColor = vec4(cgpointColor, 1.0);\n    vec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n    if(finalColor.a < 0.5) {\n        discard;\n    }\n    gl_FragColor = diffuseColor * finalColor;\n    #include <logdepthbuf_fragment>\n}";
d.L3d=function(a,b){a.defines.hasOwnProperty("addedScatterShaders")||(a.defines.addedScatterShaders=!0,a.uniforms.cgpointTexture={type:"tv",value:null},a.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},a.uniforms.cgpointOpacity={type:"f",value:1},a.uniforms.cgpixelScale={type:"f",value:bc()},a.uniforms.ishighlight={type:"bool",value:!1});b.hasOwnProperty("colorprovider")?"string"===typeof b.colorprovider?a.uniforms.cgpointColor.value=new Pq(b.colorprovider):b.colorprovider instanceof Pq&&(a.uniforms.cgpointColor.value=
b.colorprovider):b.hasOwnProperty("color")&&("string"===typeof b.color?a.uniforms.cgpointColor.value=new Pq(b.color):b.color instanceof Pq&&(a.uniforms.cgpointColor.value=b.color));b.hasOwnProperty("symbol")&&(b.symbol.wrapS=pw,b.symbol.wrapT=pw,a.uniforms.cgpointTexture.value=b.symbol);b.hasOwnProperty("opacity")&&(a.uniforms.cgpointOpacity.value=b.opacity)};d.K3d=function(a,b){a.defines.hasOwnProperty("addedProjectionShaders")||(a.defines.addedProjectionShaders=!0,a.uniforms.cgpointTexture={type:"tv",
value:null},a.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},a.uniforms.cgpointOpacity={type:"f",value:1},a.uniforms.cgpixelScale={type:"f",value:bc()});b.hasOwnProperty("color")&&("string"===typeof b.color?a.uniforms.cgpointColor.value=new Pq(b.color):b.color instanceof Pq&&(a.uniforms.cgpointColor.value=b.color));b.hasOwnProperty("symbol")&&(b.symbol.wrapS=pw,b.symbol.wrapT=pw,a.uniforms.cgpointTexture.value=b.symbol);b.hasOwnProperty("opacity")&&(a.uniforms.cgpointOpacity.value=b.opacity)};
d.KId=function(a){return{symbol:a.uniforms.cgpointTexture.value,color:a.uniforms.cgpointColor.value,opacity:a.uniforms.cgpointOpacity.value,alphatest:a.uniforms.cgalphaTest.value,pixelscale:a.uniforms.cgpixelScale.value}};d.JId=function(a){return{projection_color:a.uniforms.cgpointColor.value,projection_opacity:a.uniforms.cgpointOpacity.value}};return d}();var PB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){fz.call(this);this.Fg(!1);this.hb=G(c,{multiplier:1.7,opacity:.4});this.Uc=new Aq;this.AW=null}var a=new uq,b=new Hp;D(d,fz);L(d,"geotoolkit3d.tool.Highlighter");d.prototype.setOptions=function(c){if(null==c)return this;fz.prototype.setOptions.call(this,c);this.hb=G(c,this.hb);return this};d.prototype.I2=function(){};d.prototype.$5c=function(c,e){null!=c&&(c instanceof iv?this.$3d(c,e):c instanceof Zt&&this.Z3d(c))};d.prototype.$3d=function(c,e){null==this.AW&&(e=c.parent.O8b(c.name,
e),this.Uc.setAttribute("position",e.position),this.Uc.setAttribute("cgpointVisible",e.cgpointVisible),this.Uc.setAttribute("cgpointSize",e.cgpointSize),this.Uc.setAttribute("cgcolormapValue",e.cgcolormapValue),this.HW=new Cz({vertexShader:OB.VERTEX_SHADER,fragmentShader:OB.FRAGMENT_SHADER,transparent:!0,uniforms:{cgpointTexture:c.material.uniforms.cgpointTexture,cgpointColor:c.material.uniforms.cgpointColor,cgpixelScale:c.material.uniforms.cgpixelScale,cgpointOpacity:{type:"f",value:this.hb.opacity},
ishighlight:{type:"bool",value:!0}}}),Ty.H5c(this.HW,{colorprovider:c.material.userData.WN}),this.AW=new iv(this.Uc,this.HW),this.AW.frustumCulled=!1,c=this.Uc.getAttribute("cgpointSize"),c.array[4]*=this.hb.multiplier,this.add(this.AW))};d.prototype.Z3d=function(c){if(null==this.AW&&null!=c.geometry&&null!=c.material){this.AW=c.clone();a.makeEmpty();a.expandByObject(c);var e=a.getCenter(b);c=c.position;this.AW.position.subVectors(c,e).multiplyScalar(this.hb.multiplier).addVectors(this.AW.position,
e);this.AW.scale.multiplyScalar(this.hb.multiplier);this.AW.userData={};this.add(this.AW)}};d.prototype.dispose=function(){null!=this.AW&&(hz.dispose(this.AW),this.AW=null)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQaWNrZWRPYmplY3QiOiIkNWMifX19");var QB=/*#__PURE__*/ta(/*#__PURE__*/{bmb:"DistanceChanged"},2,"eyJEaXN0YW5jZUNoYW5nZWQiOiJibWIifSAg"),RB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){function b(){return!1}a=G(a,{name:"measuretool",enabled:!0,armingkey:17});Py.call(this,a);this.Wk=[];this.N4=new Hp(0,0,0);this.bHa=new Hp(0,0,0);a=new xq(10,10,10);var c=new $t({color:65280});this.Eqb=new Zt(a,c);this.lvb=new Zt(a,c);this.Eqb.Ls=b;this.lvb.Ls=b;a=new tt({color:255});c=new Aq;var e=[];e.push(this.N4);e.push(this.bHa);c.setFromPoints(e);this.uSa=new rt(c,a);this.uSa.frustumCulled=!1;this.uSa.Ls=b;this.dd=!0}D(d,Py);L(d,"geotoolkit3d.tool.MeasuringTool");
d.Ka=QB;d.prototype.D0d=function(a){this.Eqb.visible=a;this.lvb.visible=a;this.uSa.visible=a;return this};d.prototype.setOptions=function(a){a=G(a,{plot:this.uc,enabled:this.Vf});this.uc=a.plot;null!=this.uc&&(this.uc.getRoot().add(this.Eqb),this.uc.getRoot().add(this.lvb),this.uc.getRoot().add(this.uSa));this.Vf=a.enabled;Py.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=Py.prototype.ta.call(this);a.enabled=this.Vf;return a};d.prototype.RH=function(a){this.MS&&this.L8d(oz.Hn(this.uc,
a.plotX,a.plotY,this.Fc,this.Fc),a,!0)};d.prototype.LJ=function(a){};d.prototype.Yc=function(a){Py.prototype.Yc.call(this,a);this.MS&&(this.dd=!this.dd)};d.prototype.xf=function(){return this.N4.distanceTo(this.bHa)};d.prototype.L8d=function(a){0<a.length&&(this.dd?(this.N4=a[0].point.clone(),this.Eqb.position.set(this.N4.x,this.N4.y,this.N4.z)):(this.bHa=a[0].point.clone(),this.lvb.position.set(this.bHa.x,this.bHa.y,this.bHa.z)),a=[],a.push(this.N4),a.push(this.bHa),this.uSa.geometry.setFromPoints(a),
this.uc.gg(),this.uSa.geometry.r9d=!0,this.notify("DistanceChanged",this,this.xf()))};d.prototype.YL=Hb;d.prototype.EO=Hb;d.prototype.FO=Hb;d.prototype.jG=Hb;d.prototype.kq=Hb;d.prototype.SE=Hb;d.prototype.RE=Hb;d.prototype.kG=Hb;d.prototype.PE=Hb;d.prototype.OA=Hb;d.prototype.OE=Hb;d.prototype.lG=Hb;d.prototype.UE=Hb;d.prototype.kD=Hb;d.prototype.ZL=Hb;d.prototype.$L=Hb;return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDaGlsZHJlblZpc2liaWxpdHkiOiJEMGQiLCJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJSSCIsIm9uVGFwIjoiTEoiLCJvbk1vdXNlVXAiOiJZYyIsImdldERpc3RhbmNlIjoieGYiLCJvbktleVN0YXJ0IjoiWUwiLCJvbktleSI6IkVPIiwib25LZXlFbmQiOiJGTyIsIm9uRG91YmxlVGFwIjoiakciLCJvbk1vdXNlV2hlZWwiOiJrcSIsIm9uUGluY2hTdGFydCI6IlNFIiwib25QaW5jaCI6IlJFIiwib25QaW5jaEVuZCI6ImtHIiwib25EcmFnU3RhcnQiOiJQRSIsIm9uRHJhZyI6Ik9BIiwib25EcmFnRW5kIjoiT0UiLCJvblNsaWRlU3RhcnQiOiJsRyIsIm9uU2xpZGUiOiJVRSIsIm9uU2xpZGVFbmQiOiJrRCIsIm9uVmlzaWJpbGl0eUdhaW5lZCI6IlpMIiwib25WaXNpYmlsaXR5TG9zdCI6IiRMIn19fSAg");var SB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this,a);this.type="MeshNormalsHelper";var b=G(a,{showsmoothnormals:!0,smoothnormalsscale:10,smoothnormalscolor:"red",showflatnormals:!1,flatnormalsscale:10,flatnormalscolor:"green"});a=a.geometry;if(b.showsmoothnormals){var c=d.mHc(a.index,a.attributes.position,a.attributes.normal,b.smoothnormalsscale);c=d.bcb(b.smoothnormalscolor,c);this.add(c)}b.showflatnormals&&(a=d.lHc(a.index,a.attributes.position,b.flatnormalsscale),b=d.bcb(b.flatnormalscolor,a),this.add(b))}D(d,fz);L(d,"geotoolkit3d.tool.MeshNormalsHelper");d.bcb=function(a,b){return new ez({data:{positions:b},color:a,linewidth:1})};d.mHc=function(a,b,c,e){for(var f=[],g,h,k,l,m,n,p,q,r=new Hp(0,0,0),t=new Hp(0,0,0),u=0;u<a.count;u+=3)n=a.getX(u),p=a.getY(u),q=a.getZ(u),g=c.getX(n),h=c.getY(n),k=c.getZ(n),g+=c.getX(p),h+=c.getY(p),k+=c.getZ(p),g+=c.getX(q),h+=c.getY(q),k+=c.getZ(q),Number.isFinite(g)&&Number.isFinite(h)&&Number.isFinite(k)&&(l=b.getX(n),m=b.getY(n),n=b.getZ(n),l+=b.getX(p),m+=b.getY(p),
n+=b.getZ(p),l+=b.getX(q),m+=b.getY(q),n+=b.getZ(q),Number.isFinite(l)&&Number.isFinite(m)&&Number.isFinite(n)&&(r.set(l/3,m/3,n/3),t.set(g,h,k),t.normalize(),t.multiplyScalar(e),f.push(r.x,r.y,r.z,r.x+t.x,r.y+t.y,r.z+t.z)));return f};d.lHc=function(a,b,c){for(var e=[],f,g,h,k,l,m,n,p,q,r=new Hp(0,0,0),t=new Hp(0,0,0),u=new Hp(0,0,0),w=0;w<a.count;w+=3)n=a.getX(w),p=a.getY(w),q=a.getZ(w),f=b.getX(n),g=b.getX(p),h=b.getX(q),k=b.getY(n),l=b.getY(p),m=b.getY(q),n=b.getZ(n),p=b.getZ(p),q=b.getZ(q),u.set((f+
g+h)/3,(k+l+m)/3,(n+p+q)/3),Number.isFinite(u.x)&&Number.isFinite(u.y)&&Number.isFinite(u.z)&&(r.set(g-f,l-k,p-n),t.set(h-f,m-k,q-n),r.cross(t),r.normalize(),r.multiplyScalar(c),e.push(u.x,u.y,u.z,u.x+r.x,u.y+r.y,u.z+r.z));return e};return d}(),2,"eyJjcmVhdGVMaW5lc0Zyb21TbW9vdGhzaGFkaW5nTm9ybWFscyI6Im1IYyIsImNyZWF0ZUxpbmVzRnJvbUZsYXRzaGFkaW5nTm9ybWFscyI6ImxIYyJ9");var TB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"planarmovetool",filter:null});HB.call(this,a);this.Cf=a.filter;this.Ata=null}D(d,HB);L(d,"geotoolkit3d.tool.PlanarMoveTool");d.prototype.kKb=function(){var a=this.nTa;null==a&&(a=this.Fk.localToWorld(this.Fk.geometry.boundingBox.getCenter(this.en.position)));this.en.position.copy(a);a=this.uc.sya();var b=this.uc.QWa();b.sub(a).negate().add(this.en.position);this.en.lookAt(b)};d.prototype.setOptions=function(a){a=G(a,{plot:this.uc,enabled:this.Vf,pickenabled:this.iTa,
object:void 0!==a.object?null:this.Fk,pickingplanecenter:void 0!==a.pickingplanecenter?null:this.nTa,filter:a.filter});this.Cf=a.filter;this.Fk!==a.object&&this.VQ(GB.gDa,a.object,null);this.Fk=a.object;this.nTa=null;null==this.uc&&null!=a.plot&&(this.uc=a.plot,this.en=new Zt(new cv(2E6,2E6,2,2),new $t({color:"white",opacity:.3,transparent:!0})),this.en.name="PICKING_PLANE",this.en.material.visible=!1);null!=this.en&&null!=this.Fk&&null!=this.uc&&(this.uc.getRoot().add(this.en),this.Fk.geometry.computeBoundingBox(),
this.nTa=a.pickingplanecenter,this.kKb());this.Vf=a.enabled;this.iTa=a.pickenabled;null==this.uc||null!=this.Fk&&!1!==this.Vf||this.uc.getRoot().remove(this.en);HB.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=HB.prototype.ta.call(this);a.filter=this.Cf;a.pickingplanecenter=this.nTa;return a};d.prototype.Hn=function(a){a=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc,this.Cf);var b=0<a.length?a[0]:null;null!=b&&b.object===this.en&&(b=1<a.length?a[1]:null);this.setOptions({object:null!=
b?b.object:null,pickingplanecenter:null!=b?b.point:null})};d.prototype.move=function(a,b){if(null!=this.en.parent){a=gA.Vcc(this.uc,a.plotX,a.plotY,this.en);for(var c=null,e=0;e<a.length;e++)if(a[e].object===this.en){c=a[e].point;break}null==c?this.VQ(b,this.Fk,new Hp):(c=this.Fk.parent.worldToLocal(c.clone()).sub(this.Fk.parent.worldToLocal(this.nTa.clone())),this.nTa=a[e].point.clone(),null!=this.Ata&&this.Ata(this.Fk,c),1E-5<c.length()&&this.Fk.position.add(c),this.VQ(b,this.Fk,c),this.kKb(),null!=
this.Fk.gg?this.Fk.gg():fz.prototype.gg.call(this.Fk),b===GB.jp&&this.setOptions({object:null}))}};d.prototype.Y_d=function(a){this.Ata=a;return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRBZGp1c3RGdW5jdGlvbiI6IllfZCJ9fX0g");var UB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"SliderMoveTool"});HB.call(this,a);this.Ata=null}D(d,HB);L(d,"geotoolkit3d.tool.SliderMoveTool");d.prototype.setOptions=function(a){a=G(a,{});this.ORa=a.initialpoint;HB.prototype.setOptions.call(this,a);return this};d.prototype.ta=function(){var a=HB.prototype.ta.call(this);a.initialpoint=this.ORa;return a};d.prototype.Hn=function(a){var b=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc);this.setOptions({object:0<b.length?b[0].object:null,initialpoint:new gy(a.plotX,
a.plotY)});return this};d.prototype.move=function(a,b){if(null==this.ORa)return this;var c=new gy(a.plotX-this.ORa.x,a.plotY-this.ORa.y);null!=this.Ata&&(!0===this.Ata(this.Fk,c,this.ORa.clone())&&this.ORa.set(a.plotX,a.plotY),null!=this.Fk.gg?this.Fk.gg():fz.prototype.gg.call(this.Fk));this.VQ(b,this.Fk,c);return this};d.prototype.p5c=function(a){this.Ata=a;return this};d.prototype.dispose=function(){this.Ata=null;HB.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRNb3ZlRnVuY3Rpb24iOiJwNWMifX19");var VB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=G(a,{name:"tooltip",enabled:!0,cursor:new PB,opacity:1,innerHTML:function(e){return e.object.type}});Py.call(this,a);this.hb=a;this.Wk=[];this.Me=null;null!=a.divelement&&(this.Vna="string"===typeof a.divelement?$a.document.getElementById(a.divelement):a.divelement);var b=null,c=this;this.gVa(function(e,f){var g=c.Vna.style;if(0===f.length||f[0].pointindex!==b||f[0].object.uuid!==b)g.display="none",b=null,null!=c.Xq&&c.Xq.dispose();if(0!==f.length){b=f[0].pointindex||
f[0].object.uuid;c.Xq instanceof PB&&c.Xq.$5c(f[0].object,f[0].pointindex);g.display="block";g.opacity=c.hb.opacity;c.Vna.innerHTML=c.hb.innerHTML(f[0]);f=c.Vna.offsetWidth;var h=c.Vna.offsetHeight;g.left=e.clientX-f/2+"px";g.top=e.clientY-h-15+"px"}})}D(d,Py);L(d,"geotoolkit3d.tool.ToolTip");d.prototype.setOptions=function(a){this.hb=G(a,this.hb);this.Vf=this.hb.enabled;this.Xq=this.hb.cursor;Py.prototype.setOptions.call(this,this.hb);null!=this.uc&&null==this.Me&&(this.Me=this.uc.VX(),null==this.Vna&&
(this.Vna=$a.document.createElement("div"),a=this.Vna.style,a.position="fixed",a["min-width"]="40px",a["text-align"]="left",a.padding="5px 10px 5px 10px",a["background-color"]="#000000",a.display="none",a.opacity="0",a.color="#ffffff",a["border-radius"]="6px",a["z-index"]="999"),this.Me.appendChild(this.Vna));return this};d.prototype.ta=function(){var a=Py.prototype.ta.call(this);return a=xb(a,this.hb)};d.prototype.C6b=function(){return this.Vna};d.prototype.XEb=function(a){this.Xq.visible=null!=
a;null==this.Xq.parent&&this.uc.getRoot().add(this.Xq);null!=a&&this.Xq.I2(a);this.Xq.gg()};d.prototype.VQ=function(a,b){for(var c=0;c<this.Wk.length;c++)this.Wk[c](a,b);null!=this.uc&&null!=this.Xq&&(a=0!==b.length?b[0].point:null,this.XEb(a))};d.prototype.gVa=function(a){-1===this.Wk.indexOf(a)&&this.Wk.push(a)};d.prototype.RH=function(a){if(this.Vf){var b=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,this.Fc);this.VQ(a,b)}};d.prototype.LJ=function(a){if(this.Vf){var b=oz.Hn(this.uc,a.plotX,a.plotY,this.Fc,
this.Fc);this.VQ(a,b)}};d.prototype.FO=Hb;d.prototype.PE=Hb;d.prototype.OA=Hb;d.prototype.OE=Hb;d.prototype.YL=Hb;d.prototype.EO=Hb;d.prototype.jG=Hb;d.prototype.kq=Hb;d.prototype.SE=Hb;d.prototype.RE=Hb;d.prototype.kG=Hb;d.prototype.lG=Hb;d.prototype.UE=Hb;d.prototype.kD=Hb;d.prototype.ZL=Hb;d.prototype.$L=Hb;d.prototype.dispose=function(){this.Wk=null;Py.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXREaXZFbGVtZW50IjoiQzZiIiwiYWRkTW92ZUxpc3RlbmVyIjoiZ1ZhIiwib25DdXJzb3JNb3ZlIjoiUkgiLCJvblRhcCI6IkxKIiwib25LZXlFbmQiOiJGTyIsIm9uRHJhZ1N0YXJ0IjoiUEUiLCJvbkRyYWciOiJPQSIsIm9uRHJhZ0VuZCI6Ik9FIiwib25LZXlTdGFydCI6IllMIiwib25LZXkiOiJFTyIsIm9uRG91YmxlVGFwIjoiakciLCJvbk1vdXNlV2hlZWwiOiJrcSIsIm9uUGluY2hTdGFydCI6IlNFIiwib25QaW5jaCI6IlJFIiwib25QaW5jaEVuZCI6ImtHIiwib25TbGlkZVN0YXJ0IjoibEciLCJvblNsaWRlIjoiVUUiLCJvblNsaWRlRW5kIjoia0QiLCJvblZpc2liaWxpdHlHYWluZWQiOiJaTCIsIm9uVmlzaWJpbGl0eUxvc3QiOiIkTCJ9fX0g");var WB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){BA.call(this);this.E0b=this.z0b=this.STa=1}D(d,BA);L(d,"geotoolkit3d.transformation.IndexCoordinates");d.prototype.validate=function(a){BA.prototype.validate.call(this);null==this.STa&&(this.STa=1);null==this.Wga&&(this.Wga=this.hL+(null!=a?this.STa*(a-1):0))};d.prototype.Yj=function(){return this.STa};d.prototype.CBb=function(){return this.z0b};d.prototype.NBb=function(){return this.E0b};d.prototype.vJe=function(){var a=this.zxa();a.min.z=0;a.max.z=(this.Wga-this.hL)/
this.STa;return a};d.prototype.gBd=function(a){this.pE=a.i0;this.VF=a.j0;this.gJ=a.i0+(a.icount-1)*a.istep;this.eL=a.j0;this.hJ=a.i0+(a.icount-1)*a.istep;this.fL=a.j0+(a.jcount-1)*a.jstep;this.PT=this.GQ=null;this.hL=null!=a.z0?a.z0:0;this.Wga=null!=a.z1?a.z1:null;this.STa=a.samplerate;this.z0b=a.istep;this.E0b=a.jstep;this.validate(a.samplecount);return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTYW1wbGVSYXRlIjoiWWoiLCJnZXRJU3RlcCI6IkNCYiIsImdldEpTdGVwIjoiTkJiIiwiZnJvbUpTT05JbmRleCI6ImdCZCJ9fX0g");var XB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a,b){this.dd=a;this.i6=b}L(d,"geotoolkit3d.transformation.IndexToXY");d.prototype.rVa=function(a){var b=this.dd.G6b(),c=this.dd.H6b(),e=[new Hp(this.dd.gia().x,this.dd.gia().y,b),new Hp(this.dd.Qh().x,this.dd.Qh().y,b),new Hp(this.dd.oi().x,this.dd.oi().y,c),new Hp(this.dd.hza().x,this.dd.hza().y,b)];b=[new Hp(this.i6.gia().x,this.i6.gia().y,b),new Hp(this.i6.Qh().x,this.i6.Qh().y,b),new Hp(this.i6.oi().x,this.i6.oi().y,c),new Hp(this.i6.hza().x,this.i6.hza().y,b)];a.updateMatrix();
a.applyMatrix4(Wy.Fec(e,b))};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhcHBseVRvTWVzaCI6InJWYSJ9fX0g");var YB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}var a=1,b=null,c=null,e=null,f=null;L(d,"geotoolkit3d.util.Detector");d.canvas=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");null==f&&(f=$a.CanvasRenderingContext2D&&!0);return f};d.SPe=function(g){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");if(null==b||null==c)if(b=!1,c=g.capabilities.isWebGL2,g=g.getContext(),vd.uac()){var h=g.getParameter(g.RENDERER);
b=0<=h.indexOf("Intel")}else if(h=g.getExtension("WEBGL_debug_renderer_info"),!h||0<=g.getParameter(h.UNMASKED_RENDERER_WEBGL).indexOf("Intel"))b=!0};d.BKb=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");if(null==e)try{e=$a.WebGLRenderingContext&&wc(a,a).getContext("experimental-webgl")&&!0}catch(g){e=!1}return e};d.Ggb=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");
return null==b?(hb("Detector.isIntelGPU: cannot determine the type of GPU"),null):b};d.isWebGL2=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");return c};return d}(),2,"eyJ3ZWJnbCI6IkJLYiIsImlzSW50ZWxHUFUiOiJHZ2IifSAg");var ZB=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){this.aRb={};this.P_b={};this.FCc=[]}var a=null;L(d,"geotoolkit3d.util.factories.SimpleFactory");d.prototype.Sz=function(b,c){null!=b&&null!=c&&(this.aRb[b]=c)};d.prototype.F5d=function(b,c){null!=b&&null!=c&&(this.P_b[b]=c)};d.prototype.createElement=function(b,c){if(null==this.aRb[c.name])return-1===this.FCc.indexOf(c.name)&&(hb("Component ("+c.name+") not registered with Factory"),this.FCc.push(c.name)),null;b=this.aRb[c.name](b,c);c.id=b.id;b.parameters=JSON.stringify(c);
return b};d.prototype.t8d=function(b,c,e){if(null==this.P_b[c.name])return this.createElement(b,c);this.P_b[c.name](b,c,e);e.parameters=JSON.stringify(c);return null};d.ya=function(){a||(a=new d);return a};return d}(),2,"eyJnZXRJbnN0YW5jZSI6InlhIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsic2V0RmFjdG9yeSI6IlN6Iiwic2V0VXBkYXRlRmFjdG9yeSI6IkY1ZCJ9fX0g");var $B=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.interpolators.AbstractInterpolator");d.prototype.interpolate=Fb;return d}();var aC=/*#__PURE__*/function(){function d(){}var a=new Hp,b=new Hp,c=new Hp;D(d,$B);L(d,"geotoolkit3d.util.interpolators.InverseDistanceWeighting");d.prototype.interpolate=function(e,f,g,h,k,l){var m=g[0]instanceof Ip,n=new Float32Array(f.x*f.y*f.z),p=0;c.subVectors(e.max,e.min).set(c.x/f.x,c.y/f.y,c.z/f.z);for(var q=.5;q<f.x;q++)for(var r=.5;r<f.y;r++)for(var t=.5;t<f.z;t++){var u=!1;a.copy(e.min).set(a.x+c.x*q,a.y+c.y*r,a.z+c.z*t);for(var w=0,y=0,z=0;z<g.length;z++){m?b.set(g[z].x,g[z].y,g[z].z):b.set(g[z],
h[z],k[z]);var x=1/b.distanceTo(a);if(Number.isFinite(x))w=m?w+x*g[z].w:w+x*l[z],y+=x;else{n[p]=m?g[z].w:l[z];u=!0;break}}u||(n[p]=w/y);p++}return n};return d}();var bC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){gB.call(this)}L(d,"geotoolkit3d.util.intersection.AbstractSeismicIntersection");D(d,gB);d.prototype.GNa=function(a,b){var c=new Hp,e=new Hp,f=new Hp,g=a.geometry,h=g.getAttribute("position"),k=g.getIndex();g=k.getX(0);var l=k.getY(0);k=k.getZ(0);c.set(h.getX(g),h.getY(g),h.getZ(g));e.set(h.getX(l),h.getY(l),h.getZ(l));f.set(h.getX(k),h.getY(k),h.getZ(k));a.localToWorld(c);a.localToWorld(e);a.localToWorld(f);b.worldToLocal(c);b.worldToLocal(e);b.worldToLocal(f);return{p1:c,
p2:e,p3:f}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ0cmFuc2Zvcm1Cb3VuZGluZ0JveENvb3JkaW5hdGUiOiJHTmEifX19");var cC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){bC.call(this)}var a=new Hp;L(d,"geotoolkit3d.util.intersection.FenceIntersection");D(d,bC);d.prototype.xha=function(b,c,e){var f=this.GNa(b.R1(),c);if(null==f.p1)return hb("geotoolkit3d.util.intersection.FenceIntersection: cannot get bounding box."),null;var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.ipa(b.R1(),c);var p=this.e9b(n,c,g);var q=p.coordinates;p=p.colors;var r=b.Z1(),t=r.ca(),u=r.da(),w=this.ddb(n,f.p1,f.p2);for(f=
0;f<q.length;f++){var y=[],z=[];for(n=0;n<q[f].length;n+=3){var x=q[f];a.set(x[n],x[n+1],x[n+2]);a.applyMatrix4(w);x=a.x/h;var C=a.y/k;y.push(x*t+r.getX());z.push(C*u+r.getY())}0!==y.length&&0!==z.length&&(l.push(y),m.push(z))}h={coordinates:{x:l,y:m},fillstyle:e.fillstyle};if(g&&Array.isArray(p)&&0<p.length){e=c.ta().colorprovider;g=[];for(k=0;k<l.length;++k)m=new rf(e.mb(p[k])),g.push(m);h.fillstyle=g}else h.fillstyle=Array(l.length).fill(e.fillstyle);return this.tk(h,b,c)};d.prototype.yha=function(b,
c,e){var f=this.GNa(b.R1(),c);if(null==f.p1)return hb("geotoolkit3d.util.intersection.FenceIntersection: cannot get bounding box."),[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.ipa(b.R1(),c);var p=this.D9b(n,c,g);var q=p.coordinates;var r=p.colors;var t=b.Z1(),u=t.ca(),w=t.da();f=this.ddb(n,f.p1,f.p2);for(n=0;n<q.length;n++){var y=q[n];a.set(y[0],y[1],y[2]);a.applyMatrix4(f);y=a.x/h;var z=a.y/k;l.push(y*u+t.getX());m.push(z*w+t.getY())}e={coordinates:{x:l,
y:m},fillstyle:e.fillstyle,linewidth:e.linewidth};if(g&&void 0!==p.colors){g=[];for(p=0;p<l.length;p++)g.push([(l[p]-l[0])/(l[l.length-1]-l[0]),r[p]]);e.fillstyle=this.Zcb(g)}return this.Um(e,b,c)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoieGhhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJ5aGEifX19");var dC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){bC.call(this)}var a=new Hp,b=new Xt;L(d,"geotoolkit3d.util.intersection.SeismicIntersection");D(d,bC);d.prototype.xha=function(c,e,f){var g=f.preservecolor,h=c.fYa(),k=h.hasOwnProperty("z"),l=c.children[0];null==l.geometry.boundingBox&&l.geometry.computeBoundingBox();var m=l.geometry.boundingBox.clone(),n=l.localToWorld(m.min.clone()),p=l.localToWorld(m.max.clone());e.worldToLocal(n);e.worldToLocal(p);var q=c.ta().data.limits;h=[];var r=[];var t=this.ipa(l,e);t=this.e9b(t,
e,g);var u=t.coordinates;t=t.colors;var w=q.ca();q=q.da();if(k)for(b.copy(l.matrixWorld).invert(),k=0;k<u.length;++k){var y=[];var z=[];for(l=0;l<u[k].length;l+=3){var x=u[k];a.set(x[l],x[l+1],x[l+2]);a.applyMatrix4(e.matrixWorld);a.applyMatrix4(b);n=a.x/(m.max.x-m.min.x)-m.min.x;p=a.y/(m.max.y-m.min.y)-m.min.y;y.push(n*w);z.push((1-p)*q)}h.push(y);r.push(z)}else for(w=(m=Math.abs(p.x-n.x)>Math.abs(p.y-n.y))?w/(p.x-n.x):w/(p.y-n.y),q=q/(p.z-n.z)/c.$X().Yj(),k=0;k<u.length;++k){y=[];z=[];for(l=0;l<
u[k].length;l+=3)x=u[k],y.push((m?x[l+0]-n.x:x[l+1]-n.y)*w),z.push((p.z-x[l+2])*q);h.push(y);r.push(z)}r={coordinates:{x:h,y:r},fillstyle:f.fillstyle};if(g&&Array.isArray(t)&&0<t.length){f=e.ta().colorprovider;g=[];for(u=0;u<h.length;++u)n=new rf(f.mb(t[u])),g.push(n);r.fillstyle=g}else r.fillstyle=Array(h.length).fill(f.fillstyle);return this.tk(r,c,e)};d.prototype.yha=function(c,e,f){var g=f.preservecolor,h=c.fYa(),k=h.hasOwnProperty("z"),l=c.children[0];null==l.geometry.boundingBox&&l.geometry.computeBoundingBox();
var m=l.geometry.boundingBox.clone(),n=l.localToWorld(m.min.clone()),p=l.localToWorld(m.max.clone());e.worldToLocal(n);e.worldToLocal(p);var q=c.ta().data.limits,r=[],t=[];if(k){var u=new Hp,w=new Hp;var y=l.geometry;var z=y.getAttribute("position");y=y.getIndex().getX(0);l.localToWorld(u.set(z.getX(y),z.getY(y),z.getZ(y)));y=e.ta();if(Number.isFinite(y.zmin)&&Number.isFinite(y.zmax)&&(z=e.localToWorld(new Hp(0,0,y.zmin)).z,y=e.localToWorld(new Hp(0,0,y.zmax)).z,u.z<z||u.z>y))return[];y=this.e5b(u.z,
e,g);var x=y.coordinates;z=y.colors;for(h=0;h<x.length;h++)w.set(x[h].x,x[h].y,u.z),l.worldToLocal(w),n=w.x/(m.max.x-m.min.x)-m.min.x,p=w.y/(m.max.y-m.min.y)-m.min.y,r.push(n*q.width),t.push((1-p)*q.height)}else{z=this.ipa(l,e);y=this.D9b(z,e,g);x=y.coordinates;z=y.colors;m=q.ca();var C=q.da();q=c.parent.parent.ta().displaymode;m=(l=Math.abs(p.x-n.x)>Math.abs(p.y-n.y))?m/(p.x-n.x):m/(p.y-n.y);C=C/(p.z-n.z)/c.$X().Yj();for(var A=0;A<x.length;A++){var v=x[A];r.push((l?v[0]-n.x:v[1]-n.y)*m);t.push((p.z-
v[2])*C)}h.hasOwnProperty("j")&&q===yy.M$b&&r.reverse();q=[];for(x=0;x<r.length;x++)l=[r[x],t[x]],g&&l.push(z[x]),q.push(l);q.sort(function(B,E){return B[0]-E[0]});r=[];t=[];z=[];for(x=0;x<q.length;x++)u!==q[x][0]&&w!==q[x][1]&&(r.push(q[x][0]),t.push(q[x][1]),g&&z.push(q[x][2]),u=q[x][0],w=q[x][1])}f={coordinates:{x:r,y:t},fillstyle:f.fillstyle,linewidth:f.linewidth};if(g&&void 0!==y.colors){g=[];for(t=0;t<r.length;t++)g.push([(r[t]-r[0])/(r[r.length-1]-r[0]),z[t]]);f.fillstyle=this.Zcb(g)}return this.Um(f,
c,e,!k)};d.prototype.e5b=function(c,e,f){var g=[],h=e.ta().colorprovider,k,l=e.ta().data;null!=l&&null!=l.values?k=l.values:f=!1;var m=e.children[0].geometry,n=m.attributes.position,p=n.array;l=[];if(n instanceof Xs){var q=n.data.stride,r=n.offset;n=n.itemSize;for(var t=0;t<p.length;t++)t%q<r||t%q>=r+n||l.push(p[t])}else l=p;p=[];q=m.index.array;m=m.getIndex();for(r=0;r<q.length;r+=3){t=3*q[r];var u=3*q[r+1];n=3*q[r+2];t=new Hp(l[t],l[t+1],l[t+2]);u=new Hp(l[u],l[u+1],l[u+2]);n=new Hp(l[n],l[n+1],
l[n+2]);e.localToWorld(t);e.localToWorld(u);e.localToWorld(n);n=new vB([t.x,t.y,t.z],[u.x,u.y,u.z],[n.x,n.y,n.z],c);n.zac()&&n.pEb()&&(p.push(n.K7b(),n.j9b()),f&&(n=m.getX(r),n=h.mb(k[n]),n=n.um(),g.push(n,n)))}return c={coordinates:p,colors:g}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoieGhhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJ5aGEifX19");var eC=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.shaders.BoundingBox");d.VERTEX_SHADER="#version 300 es\nlayout(std140, column_major) uniform;\nlayout(location=0) in vec4 position;\nuniform mat4 uModel;\nuniform mat4 uViewProj;\nvoid main() {\n    gl_Position = uViewProj * uModel * position;\n}";d.FRAGMENT_SHADER="#version 300 es\nprecision highp float;\nlayout(std140, column_major) uniform;\nout vec4 fragColor;\nvoid main() {\n    fragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}";return d}();var fC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){this.name="AbstractOcclusionManager";this.B8a=wc(1,1,!0);b=this.B8a.getContext("webgl2");if(!b)return hb("WebGL 2 not available in current browser. Occlusion cannot be enabled!"),null;var n=b.createShader(b.VERTEX_SHADER);b.shaderSource(n,c.VERTEX_SHADER);b.compileShader(n);b.getShaderParameter(n,b.COMPILE_STATUS)||hb(b.getShaderInfoLog(n));var p=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(p,c.FRAGMENT_SHADER);b.compileShader(p);b.getShaderParameter(p,b.COMPILE_STATUS)||
hb(b.getShaderInfoLog(p));var q=b.createProgram();b.attachShader(q,n);b.attachShader(q,p);b.linkProgram(q);b.useProgram(q);b.getProgramParameter(q,b.LINK_STATUS)||hb(b.getProgramInfoLog(q));e=b.getUniformLocation(q,"uModel");f=b.getUniformLocation(q,"uViewProj");this.Ib=1;this.RWb=0;this.Jj=[];this.Qwb=!1;this.Vf=!0;return this}function a(n,p){k.copy(n.userData.bboxCenter);l.copy(p.userData.bboxCenter);m.copy(g).multiply(n.matrixWorld);k.applyMatrix4(m);m.copy(g).multiply(p.matrixWorld);l.applyMatrix4(m);
return l.z-k.z}var b,c=eC,e,f,g,h,k=new Hp,l=new Hp,m=new Xt;L(d,"geotoolkit3d.util.occlusion.AbstractOcclusionManager");d.prototype.wIb=Fb;d.prototype.a8c=function(n){this.Vf=n;return this};d.prototype.GWd=function(){if(!(1>this.Jj.length)){for(var n=[],p=0;p<this.Jj.length;p++){var q=this.Jj[p];null==q.geometry.boundingBox&&q.geometry.computeBoundingBox();var r=q.geometry.boundingBox.clone(),t=new Hp,u=hz.lGc(r,this.Ib);n.push(u);q.userData.query=b.createQuery();q.userData.queryInProgress=!1;q.userData.occluded=
!1;q.userData.bboxNumVertices=u.length;q.userData.bboxCenter=r.getCenter(t);q.userData.isvalid=!0}this.utd(n.flat())}};d.prototype.render=function(n,p){if(this.Vf){if(!this.Qwb){if(!b||1>=this.Jj.length)return;this.GWd();this.Qwb=!0}var q=this.Jj;p=p.getSize();this.resize(p.ca(),p.da());b.clearColor(0,0,0,1);b.enable(b.DEPTH_TEST);b.colorMask(!0,!0,!0,!0);b.depthMask(!0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);g=n.matrixWorldInverse.clone();h=n.projectionMatrix.clone();n=h.multiply(g);q.sort(a);
b.colorMask(!1,!1,!1,!1);b.depthMask(!1);for(var r=p=0;r<q.length;r++){var t=q[r].userData;b.uniformMatrix4fv(e,!1,q[r].matrixWorld.elements);b.uniformMatrix4fv(f,!1,n.elements);t.Ddc&&b.getQueryParameter(t.query,b.QUERY_RESULT_AVAILABLE)&&(t.Pbc=!b.getQueryParameter(t.query,b.QUERY_RESULT),t.Ddc=!1,t.Pbc&&p++);var u=!0;t.hasOwnProperty("isvalid")&&!t.isvalid&&(u=!1,t.Pbc=!1);!t.Ddc&&u&&(u=t.XMe*t.mtd/3,b.beginQuery(b.ANY_SAMPLES_PASSED_CONSERVATIVE,t.query),b.drawArrays(b.TRIANGLES,u,t.mtd/3),b.endQuery(b.ANY_SAMPLES_PASSED_CONSERVATIVE),
t.Ddc=!0);t.Pbc?q[r].visible=!1:(q[r].visible=!0,b.colorMask(!0,!0,!0,!0),b.depthMask(!0))}b.flush();this.RWb!==p&&(this.RWb=p)}else this.Qwb&&(this.Jj.forEach(function(w){w.visible=!0}),this.Qwb=!1)};d.prototype.utd=function(n){var p;Array.isArray(n)&&(p=new Float32Array(n));n=b.createVertexArray();b.bindVertexArray(n);n=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,n);b.bufferData(b.ARRAY_BUFFER,p,b.STATIC_DRAW);b.vertexAttribPointer(0,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(0)};d.prototype.resize=
function(n,p){if(this.B8a.width!==n||this.B8a.height!==p)this.B8a.width=n,this.B8a.height=p,b.viewport(0,0,n,p)};d.prototype.sId=function(){return this.RWb};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPYmplY3RzIjoid0liIiwic2V0VXNhYmlsaXR5IjoiYThjIiwiZ2V0TnVtYmVyT2ZPY2NsdWRlZE9iamVjdHMiOiJzSWQifX19");var gC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){fC.call(this);this.name="ReservoirOcclusionManager";this.Ib=1;return this}L(d,"geotoolkit3d.util.occlusion.ReservoirOcclusionManager");D(d,fC);d.prototype.wIb=function(a){this.Jj=a=a?a.children:[]};d.prototype.Ap=function(a){this.Ib=a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPYmplY3RzIjoid0liIiwic2V0T2Zmc2V0IjoiQXAifX19");var hC=/*#__PURE__*/function(){function d(l){l.defines.hasOwnProperty("addedCurveShaders")||(l.defines.addedCurveShaders=!0,l.uniforms[e]={type:"f",value:0},l.uniforms[f]={type:"f",value:0},l.uniforms[k]={type:"f",value:0},l.uniforms[b.Mka]={type:"f",value:0},l.uniforms[g]={type:"f",value:0},l.uniforms[h]={type:"f",value:0})}function a(l){l.defines.hasOwnProperty("addedNormScaleShaders")||(l.defines.addedNormScaleShaders=!0,l.uniforms[b.P3]={type:"m3",value:new Wt})}function b(){}var c={};L(b,"geotoolkit3d.util.shaders.WellShaders");
var e="cgwellRadius",f="cgcurveOffset",g="cgcurveMin",h="cgcurveMax",k="cgoffsetMode";b.Mka="cgopacity";b.P3="cgnormalScaleMat";b.XCa="cgprevDirection";b.TCa="cgnextDirection";b.ala="cgnormVal";b.Tlc=["uniform float "+e+";","uniform float "+f+";","uniform float "+g+";","uniform float "+h+";","uniform float "+k+";","","attribute vec3 "+b.XCa+";","attribute vec3 "+b.TCa+";","attribute float "+b.ala+";","#ifdef USE_COLOR\n\tvarying vec3 vertexColor;\n#endif"].join("\n");b.Ulc=["\t#ifdef USE_COLOR\n\t\tvertexColor = color;\n\t#endif\n\tvec4 pos = modelViewMatrix * vec4(position, 1.0);\n\t",
"\tvec3 v0 = mat3(modelViewMatrix) * "+b.XCa+"; ","\tvec3 v1 = mat3(modelViewMatrix) * "+b.TCa+"; ","\t\n\tvec2 n0 = normalize(vec2(-v0.y, v0.x));\n\tvec2 n2 = normalize(vec2(-v1.y, v1.x));\n\tvec2 n1 = normalize(n0 + n2);\n\t","\tfloat curveValue = ("+b.ala+" - min("+g+", "+h+")) / abs("+h+" - "+g+");","\tcurveValue = clamp(curveValue, 0.0, 1.0);","\tif("+k+" == 0.0){ ","\t\tcurveValue = "+f+" > 0.0 ? curveValue : 1.0 - curveValue;","\t}","\tcurveValue = "+h+" > "+g+" ? curveValue : 1.0 - curveValue;",
"\tcurveValue -= 0.5;","\tpos.xyz = pos.xyz + ((curveValue + "+f+") * "+e+") * -vec3(n1, 0.0);","\tgl_Position = projectionMatrix * pos;"].join("\n");b.Goc="#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif";b.Vlc="reflectedLight.directDiffuse += (abs(vLightFront) + abs(vLightBack));";b.Y7c=function(l,m){m&&(a(l),m.hasOwnProperty("normscale")&&(l.uniforms[b.P3].value=m.normscale))};
b.sYa=function(l){a(l);c.normscale=l.uniforms[b.P3].value;return c};b.I5c=function(l,m){m&&(d(l),m.hasOwnProperty("radius")&&(l.uniforms[e].value=m.radius),m.hasOwnProperty("offset")&&(l.uniforms[f].value=m.offset),m.hasOwnProperty("offsetmode")&&(l.uniforms[k].value=m.offsetmode),m.hasOwnProperty("opacity")&&(l.uniforms[b.Mka].value=m.opacity),m.hasOwnProperty("normalizedcurvemin")&&(l.uniforms[g].value=m.normalizedcurvemin),m.hasOwnProperty("normalizedcurvemax")&&(l.uniforms[h].value=m.normalizedcurvemax))};
b.lQc=function(l){d(l);return{radius:l.uniforms[e].value,offset:l.uniforms[f].value,offsetmode:l.uniforms[k].value,normalizedcurvemin:l.uniforms[g].value,normalizedcurvemax:l.uniforms[h].value,opacity:l.uniforms[b.Mka].value}};return b}();var iC=/*#__PURE__*/function(){function d(f){f.defines.hasOwnProperty("addedCylinderLogShaders")||(f.defines.addedCylinderLogShaders=!0,f.uniforms.cgradiusNorm={type:"v2",value:new gy(0,1)},f.uniforms.cgradiusRange={type:"v2",value:new gy(5,10)})}function a(){}var b=Sy;L(a,"geotoolkit3d.util.shaders.CylinderLog");var c=["\tvec4 pos = (modelViewMatrix * vec4(position, 1.0)); ","\tvec3 v0 = mat3(modelViewMatrix) * "+hC.XCa+"; ","\tvec3 v1 = mat3(modelViewMatrix) * "+hC.TCa+"; ","\n\tvec2 n0 = normalize(vec2(-v0.y, v0.x)); \n\tvec2 n2 = normalize(vec2(-v1.y, v1.x)); \n\tvec2 n1 = normalize(n0 + n2); \n\n\tvec2 d = vec2(1.0 / length(v0), 1.0 / length(v1)); \n\n\td = min(vec0dot5, 0.125 * d); \n\tvec3 trajectoryPos = pos.xyz;\n\tpos.xyz += cgweight.z * d.y * v1 - cgweight.x * d.x * v0; \n\tvec2 smoothedNorm = normalize(cgweight.x * n0 + cgweight.y * n1 + cgweight.z * n2); \n\tfloat vRadius; float vmin; float vmax; float radiusScale;\n\tif(cgradiusNorm.x > cgradiusNorm.y) {",
"\t\tvRadius = 1.0 - "+hC.ala+";","\t\tvmin = cgradiusNorm.y;\n\t\tvmax = cgradiusNorm.x;\n\t} else {","\t\tvRadius = "+hC.ala+";","\t\tvmin = cgradiusNorm.x;\n\t\tvmax = cgradiusNorm.y;\n\t}\n\tradiusScale = clamp(vRadius, vmin, vmax);\n\tvRadius = (radiusScale-vmin) / (vmax - vmin);\n\tif(vmax == vmin) vRadius = 0.5;\n\tfloat transform = ((cgradiusRange.y - cgradiusRange.x) * vRadius + cgradiusRange.x);\n\tvec3 bezierNormal = normalize(cross(v0 + v1, vec3(smoothedNorm, 0.0)));\n\tpos.xyz = pos.xyz + transform * (cgangle.x * vec3(smoothedNorm, 0.0) + cgangle.y * bezierNormal); \n\n\tgl_Position = projectionMatrix * pos; \n\n\tvec4 mvPosition = pos;\n\tvec3 normal = normalize(pos.xyz - trajectoryPos);\n\ttransformedNormal = normal;"].join("\n"),
e=["uniform mat3 "+hC.P3+";","uniform vec2 cgradiusNorm;\nuniform vec2 cgradiusRange;\nattribute vec2 cgangle;","attribute vec3 "+hC.XCa+";","attribute vec3 "+hC.TCa+";","attribute float "+hC.ala+";","attribute vec3 cgweight;\nconst vec2 vec0dot5 = vec2(0.5, 0.5);"].join("\n");a.qka=Jw.meshlambert_frag;a.sCa=Jw.meshlambert_vert;a.sCa=b.iu(a.sCa,Ty.Dqc,c,!0);a.sCa=b.iu(a.sCa,Ty.Knb,Ty.m2a,!1,!1);a.sCa=b.iu(a.sCa,Ty.qF,[Ty.n2a,e].join("\n"),!1,!0);a.qka=b.iu(a.qka,Ty.qF,Ty.l2a,!1,!0);a.qka=b.iu(a.qka,
Ty.DOb,Ty.k2a,!1,!1);a.qka=b.iu(a.qka,hC.Goc,hC.Vlc,!0);a.qka=b.iu(a.qka,"default_vertex",c,!0);a.C3d=function(f,g){g&&(d(f),g.hasOwnProperty("radiusmin")&&(f.uniforms.cgradiusRange.value.setX(g.radiusmin),f.uniforms.cgradiusRange.needsUpdate=!0),g.hasOwnProperty("radiusmax")&&(f.uniforms.cgradiusRange.value.setY(g.radiusmax),f.uniforms.cgradiusRange.needsUpdate=!0),g.hasOwnProperty("radiuslogmin")&&(f.uniforms.cgradiusNorm.value.setX(g.radiuslogmin),f.uniforms.cgradiusNorm.needsUpdate=!0),g.hasOwnProperty("radiuslogmax")&&
(f.uniforms.cgradiusNorm.value.setY(g.radiuslogmax),f.uniforms.cgradiusNorm.needsUpdate=!0))};a.BId=function(f){d(f);return{radiusmin:f.uniforms.cgradiusRange.value.width,radiusmax:f.uniforms.cgradiusRange.value.height,radiuslogmin:f.uniforms.cgradiusNorm.value.width,radiuslogmax:f.uniforms.cgradiusNorm.value.height}};return a}();var jC=/*#__PURE__*/function(){function d(){}var a=100;L(d,"geotoolkit3d.util.shaders.InstancedReservoir");d.VERTEX_SHADER=["attribute vec3 barycentric;\nattribute vec3 positionA;\nattribute vec3 positionB;\nattribute vec3 positionC;\nattribute vec3 positionD;\nattribute vec3 positionE;\nattribute vec3 positionF;\nattribute vec3 positionG;\nattribute vec3 positionH;\nvarying vec3 vBarycentric;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        return (norm < 0.0 || norm >= 0.0) ? norm : 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if (cgcolormapLogValue == 1) value = log2(value)/log2(10.0);\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>","    #ifndef "+
Fy.Rve,"        vBarycentric = barycentric;\n        #ifdef CG_USE_COLOR_MAP\n            vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n        #endif\n    #endif\n    #ifdef USE_ENVMAP\n        #include <beginnormal_vertex>\n        #include <morphnormal_vertex>\n        #include <skinnormal_vertex>\n        #include <defaultnormal_vertex>\n    #endif\n    vec3 transformed = positionA;\n    transformed = position == vec3(1., 0., 1.) ? positionB : transformed;\n    transformed = position == vec3(0., 1., 1.) ? positionC : transformed;\n    transformed = position == vec3(1., 1., 1.) ? positionD : transformed;\n    transformed = position == vec3(0., 0., 0.) ? positionE : transformed;\n    transformed = position == vec3(1., 0., 0.) ? positionF : transformed;\n    transformed = position == vec3(0., 1., 0.) ? positionG : transformed;\n    transformed = position == vec3(1., 1., 0.) ? positionH : transformed;\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}"].join("\n");
d.FRAGMENT_SHADER="uniform float lineWidth;\nuniform float opacity;\nuniform int useDiffuseAsColor;\nuniform bool seeThrough;\nuniform bool hideSkeleton;\nuniform vec3 diffuse;\nuniform vec3 outlineColor;\nvarying vec3 vBarycentric;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nfloat aastep (float threshold, float dist) {\n    float afwidth = fwidth(dist) * 0.5;\n    return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\nvec4 getStyledOutline (vec3 barycentric, vec4 diffusecolor) {\n    float d = min( min( barycentric.x, barycentric.y ), barycentric.z );\n    float edge = 1.0 - aastep(lineWidth, d);\n    vec4 outColor;\n    if (seeThrough) {\n        if (edge == 0.0) {\n            discard;\n        }\n        outColor = vec4(outlineColor, edge);\n    } else {\n        vec3 stroke = mix(diffusecolor.rgb, outlineColor, edge);\n        outColor = vec4(stroke, diffusecolor.a);\n    }\n    return outColor;\n}\nvoid main() {\n    if( hideSkeleton && seeThrough ) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n        reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n    #else\n        reflectedLight.indirectDiffuse += vec3( 1.0 );\n    #endif\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n    vec3 outgoingLight = reflectedLight.indirectDiffuse;\n    #include <envmap_fragment>\n    if (!hideSkeleton) {\n        gl_FragColor = getStyledOutline( vBarycentric, diffuseColor );\n    } else {\n        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    #include <premultiplied_alpha_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n}";
d.vhc=function(b,c){null!=b&&null!=c&&(c.hasOwnProperty("skeleton")&&(b.uniforms.outlineColor="string"===typeof c.skeleton.color?{value:new Pq(c.skeleton.color)}:c.skeleton.color instanceof Pq?{value:c.skeleton.color}:{value:new Pq("darkgrey")},b.uniforms.lineWidth={value:c.skeleton.linewidth/a||.005}),c.hasOwnProperty("mode")&&(b.uniforms.seeThrough={value:!c.mode[0]},b.uniforms.hideSkeleton={value:!c.mode[1]}))};d.Qic=function(b,c){null==c||isNaN(c)||(b.uniforms.lineWidth.value=c/a)};return d}();var kC=/*#__PURE__*/ta(/*#__PURE__*/{SOb:0,ue:1,Wjd:2},2,"eyJVcE5vcnRoIjoiU09iIiwiTm9ydGgiOiJ1ZSIsIlVwIjoiV2pkIn0g"),Aka=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.well.logarray.LogArrayUtil");d.sid=kC;return d}();var lC=/*#__PURE__*/function(){function d(y){y.defines.hasOwnProperty("addedLogArrayShaders")||(y.defines.addedLogArrayShaders=!0,y.uniforms[m]={type:"f",value:1},y.uniforms[n]={type:"f",value:1},y.uniforms[k]={type:"f",value:1},y.uniforms[l]={type:"f",value:1},y.uniforms[p]={type:"f",value:1},y.uniforms[q]={type:"f",value:1},y.uniforms[r]={type:"i",value:kC.SOb})}function a(){}var b=Sy;L(a,"geotoolkit3d.util.shaders.LogArray");var c="#include <begin_vertex>",e="#include <defaultnormal_vertex>",f="cgwellPosition",
g="cgwellPathVector",h="cgarray";a.rNb=f;a.qNb=g;a.pNb=h;var k="cgradiusMin",l="cgradiusDelta",m="cgarrayMin",n="cgarrayMax",p="cgarrayNullValue",q="cgcolorNullValue",r="cgReferenceMode",t=["attribute vec3 "+f+";","attribute vec3 "+g+";","attribute float "+h+";","uniform mat3 "+hC.P3+";","uniform float "+m+";","uniform float "+n+";","uniform float "+k+";","uniform float "+l+";","uniform float "+p+";","uniform float "+q+";","uniform int "+r+";","varying float "+Ty.K8+";"].join("\n");g=["\tfloat normValue = ("+
h+" - min("+m+", "+n+")) / abs("+n+" - "+m+");","\tnormValue = clamp(normValue, 0.0, 1.0);","\tvec3 path = "+g+";","\tvec3 scale = vec3("+k+" + normValue * "+l+", "+k+" + normValue * "+l+", 1.0);","\tvec3 valuedPosition = position * vec3(2.0, 2.0, 1.0) * scale;\n\tvec3 target = vec3(path.x, path.y, path.z);","\tvec3 targetScale = vec3(1.0, 1.0, 1.0) * "+hC.P3+";","\ttarget = vec3(target.x / targetScale.x, target.y / targetScale.y, target.z / targetScale.z);"].join("\n");f=["\tvec3 zzz = normalize(-target);\n\tif(length(zzz) == 0.0) {\n\t\tzzz.z = 1.0;\n\t}\n\tvec3 xxx = normalize(cross(up, zzz));\n\tif(length(xxx) == 0.0) {\n\t\tzzz.x = zzz.x + 0.0001;\n\t\txxx = normalize(cross(up, zzz));\n\t}\n\tvec3 yyy = cross(zzz, xxx);\n\tmat3 rotationMatrix = mat3(xxx, yyy, zzz);\n\tvec3 rotatedPos = rotationMatrix * valuedPosition;",
"\tvec3 finalPos = (rotatedPos * "+hC.P3+") + "+f+";"].join("\n");h=["#ifdef "+Ty.rCa,"\t"+Ty.K8+" = "+Ty.Km+" == "+q+" ? 1.0 : 0.0;","#else","\t"+Ty.K8+" = 0.0;","#endif","\t"+Ty.K8+" = "+h+" == "+p+" ? 1.0 : "+Ty.K8+";"].join("\n");var u=["varying float "+Ty.K8+";"].join("\n"),w=[" if("+Ty.K8+" > 0.0) discard;"].join("\n");a.Hka=Ty.Xsa;a.e3a=Ty.$da;a.Hka=b.iu(a.Hka,Ty.qF,[t,Ty.qF,g,"\tvec3 up = vec3(0.0, 0.0, 1.0);","if( "+r+" == 0) { ","\tfloat angle = atan((path.x * path.x + path.y * path.y), (path.z * path.z));\n\tif(angle > 0.1745 ) up = vec3(0.0, 0.0, 1.0);\n\telse up = vec3(0.0, 1.0, 0.0);",
"} else if( "+r+" == 1) { ","\tup = vec3(0.0, 1.0, 0.0);\n}",f].join("\n"),!0);a.Hka=b.iu(a.Hka,Ty.qjd,h,!1,!1);a.Hka=b.iu(a.Hka,c,"\nvec3 transformed = vec3( finalPos );\n",!0);a.Hka=b.iu(a.Hka,e,"   vec3 transformedNormal = normalMatrix * normalize(rotatedPos * "+hC.P3+");",!0);a.e3a=b.iu(a.e3a,Ty.qF,[u,Ty.qF,w].join("\n"),!0);a.e3a=b.iu(a.e3a,hC.Goc,hC.Vlc,!0);a.F3d=function(y,z){z&&(d(y),z.hasOwnProperty("logarraymin")&&(y.uniforms[m].value=z.logarraymin),z.hasOwnProperty("logarraymax")&&(y.uniforms[n].value=
z.logarraymax),z.hasOwnProperty("radiusmin")&&(y.uniforms[k].value=z.radiusmin),z.hasOwnProperty("radiusdelta")&&(y.uniforms[l].value=z.radiusdelta),z.hasOwnProperty("logarraynullvalue")&&(y.uniforms[p].value=z.logarraynullvalue),z.hasOwnProperty("valuesnullvalue")&&(y.uniforms[q].value=z.valuesnullvalue),z.hasOwnProperty("referencemode")&&(y.uniforms[r].value=z.referencemode))};a.FId=function(y){d(y);return{logarraymin:y.uniforms[m].value,logarraymax:y.uniforms[n].value,radiusmin:y.uniforms[k].value,
radiusdelta:y.uniforms[l].value,logarraynullvalue:y.uniforms[p].value,valuesnullvalue:y.uniforms[q].value,referencemode:y.uniforms[r].value}};return a}();var mC=/*#__PURE__*/function(){function d(c){c.defines.hasOwnProperty("addedLogCurve2DShaders")||(c.defines.addedLogCurve2DShaders=!0,c.uniforms[b]={type:"c",value:new Pq})}function a(){}L(a,"geotoolkit3d.util.shaders.LogCurve2D");var b="cgdiffuse";a.kgd=["#include <common>\n#include <logdepthbuf_pars_vertex>",hC.Tlc,"varying float cginvalid;",Ty.qF,hC.Ulc,"#include <logdepthbuf_vertex>","\tcginvalid = "+hC.ala+" == "+Ty.bnb+" ? -1.0 : 0.0;","}"].join("\n");a.jgd=["uniform vec3 "+b+";","uniform float "+hC.Mka+
";","varying vec3 vertexColor;\nvarying float cginvalid;\n#include <logdepthbuf_pars_fragment>",Ty.qF,"\t#ifdef USE_COLOR","\t\tgl_FragColor = vec4(vertexColor.rgb, "+hC.Mka+");","\t#else","\t\tgl_FragColor = vec4("+b+", "+hC.Mka+");","\t#endif\n\tif (cginvalid < 0.0) discard;\n#include <logdepthbuf_fragment>\n}"].join("\n");a.E3d=function(c,e){e&&(d(c),e.hasOwnProperty("color")&&(e.color===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.color in LogCurve2D.setOptions"),
e.color=null),e.color instanceof Pq?(c.vertexColors=!1,c.uniforms[b].value=e.color):c.vertexColors=!0))};a.EId=function(c){d(c);return{color:c.vertexColors?null:c.uniforms[b].value}};return a}();var nC=/*#__PURE__*/function(){function d(e){e.defines.hasOwnProperty("addedLogFill2DShaders")||(e.defines.addedLogFill2DShaders=!0,e.uniforms[b]={type:"c",value:new Pq("red")},e.uniforms[c]={type:"c",value:new Pq("red")})}function a(){}var b="cgpositiveColor",c="cgnegativeColor";a.QCa="cgposnegFlag";a.igd=["#include <common>\n#include <logdepthbuf_pars_vertex>",hC.Tlc,"attribute float "+a.QCa+";","varying float v"+a.QCa+";","",Ty.qF,hC.Ulc,"\tv"+a.QCa+" = "+a.QCa+";","#include <logdepthbuf_vertex>\n}"].join("\n");
a.hgd=["uniform vec3 "+b+";","uniform vec3 "+c+";","uniform float "+hC.Mka+";","#include <logdepthbuf_pars_fragment>\nvarying vec3 vertexColor;","varying float v"+a.QCa+";",Ty.qF,"\t#ifdef USE_COLOR","\t\tgl_FragColor = vec4(vertexColor.rgb, "+hC.Mka+");","\t#else","\t\tgl_FragColor = vec4(v"+a.QCa+" >= 0.0 ? "+b+" : "+c+", "+hC.Mka+");","\t#endif\n#include <logdepthbuf_fragment>\n}"].join("\n");a.G3d=function(e,f){f&&(d(e),f.hasOwnProperty("positivecolor")&&(e.uniforms[b].value=new Pq(f.positivecolor)),
f.hasOwnProperty("negativecolor")&&(e.uniforms[c].value=new Pq(f.negativecolor)))};a.GId=function(e){d(e);return{positivecolor:e.vertexColors?null:e.uniforms[b].value,negativecolor:e.vertexColors?null:e.uniforms[c].value}};return a}();var oC=/*#__PURE__*/function(){function d(k){k.defines.hasOwnProperty("addedPipeShaders")||(k.defines.addedPipeShaders=!0,k.uniforms[e]={type:"f",value:1},k.uniforms[f]={type:"f",value:0},k.uniforms[g]={type:"f",value:0})}function a(){}var b=Sy;L(a,"geotoolkit3d.util.shaders.Pipe");var c="cgRadius";a.zhd=c;var e="cgScale",f="cgUseGlobalRadius",g="cgGlobalRadius",h=["\tattribute float "+c+";","uniform mat3 "+hC.P3+";","uniform float "+e+";","uniform float "+f+";","uniform float "+g+";"].join("\n");c=["vec3 vecPos = (modelMatrix * vec4(position, 1.0)).xyz;",
"vec3 vecNormal = normalize(normal * "+hC.P3+");","float localscale = "+e+";","if("+f+" > 0.0) {","\tlocalscale *= "+g+";","} else {","\tlocalscale *= "+c+";","}\ngl_Position = projectionMatrix * viewMatrix * vec4(vecPos + (vecNormal * localscale), 1.0);"].join("\n");a.s3a=Ty.Xsa;a.yhd=Ty.$da;a.s3a=b.iu(a.s3a,Ty.qF,h,!1,!0);a.s3a=b.iu(a.s3a,Ty.Cqc,c,!1,!0);a.I3d=function(k,l){l&&(d(k),l.hasOwnProperty("radiusscale")&&(k.uniforms[e].value=l.radiusscale),l.hasOwnProperty("globalradius")&&(0===l.globalradius?
(k.uniforms[g].value=l.globalradius,k.uniforms[f].value=0):(k.uniforms[g].value=l.globalradius,k.uniforms[f].value=1)))};a.HId=function(k){d(k);return{radiusscale:k.uniforms[e].value,globalradius:k.uniforms[g].value}};return a}();var pC=/*#__PURE__*/function(){function d(b){b.defines.hasOwnProperty("addedProjectionWidgetShaders")||(b.uniforms.tDiffuse={type:"tv",value:null},b.defines.addedProjectionWidgetShader=!0)}function a(){}L(a,"geotoolkit3d.util.shaders.ProjectionWidget");a.VERTEX_SHADER="varying vec2 vUv;\n#include <common>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n    vUv = uv;\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";a.FRAGMENT_SHADER=
"varying vec2 vUv;\n\nuniform sampler2D tDiffuse;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n    #include <clipping_planes_fragment>\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <aomap_fragment>\n    #include <envmap_fragment>\n    #ifndef textureLoaded\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    #else\n        gl_FragColor = vec4(0.5, 0.5, 0.5, texture2D(tDiffuse, vUv).a * 0.5);\n    #endif\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
a.setTexture=function(b,c){d(b);b.defines.textureLoaded=!0;b.uniforms.tDiffuse.value=c};return a}();var qC=/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.shaders.Reservoir");d.VERTEX_SHADER="varying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1)\n        {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    vcgdeadCell = 0.0;\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n        if(cgcolormapValue == cgcolormapValueNullValue) {\n            vcgdeadCell = 1.0;\n            return;\n        }\n    #endif\n    #ifdef USE_ENVMAP\n        #include <beginnormal_vertex>\n        #include <morphnormal_vertex>\n        #include <skinnormal_vertex>\n        #include <defaultnormal_vertex>\n    #endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";d.FRAGMENT_SHADER=
"uniform float opacity;\nuniform int useDiffuseAsColor;\nuniform vec3 diffuse;\nvarying float vcgdeadCell;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvoid main() {\n    if( vcgdeadCell == 1.0 ) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n        reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n    #else\n        reflectedLight.indirectDiffuse += vec3( 1.0 );\n    #endif\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n    vec3 outgoingLight = reflectedLight.indirectDiffuse;\n    #include <envmap_fragment>\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <premultiplied_alpha_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n}";
d.vhc=function(a,b){};return d}();var rC=/*#__PURE__*/function(){function d(g){g.defines.hasOwnProperty("addedTrajectoryTubeShaders")||(g.defines.addedTrajectoryTubeShaders=!0,g.uniforms[c]={type:"f",value:1})}function a(){}var b=Sy;L(a,"geotoolkit3d.util.shaders.TrajectoryTube");var c="cgtubeSize",e=["uniform float "+c+";","uniform mat3 "+hC.P3+";"].join("\n"),f=["vec3 vecPos = (modelMatrix * vec4(position, 1.0)).xyz;","vec3 vecNormal = normalize(normal * "+hC.P3+");","gl_Position = projectionMatrix * viewMatrix * vec4(vecPos + (vecNormal * vec3("+
c+", "+c+", "+c+")), 1.0);"].join("\n");a.qPa=Ty.Xsa;a.Eqc=Ty.$da;a.qPa=b.iu(a.qPa,Ty.qF,e,!1,!0);a.qPa=b.iu(a.qPa,Ty.Cqc,f,!1,!0);a.L5c=function(g,h){h&&(d(g),null!=g.uniforms[c]&&h.size&&(g.uniforms[c].value=h.size,g.userData.size=h.size))};a.nQc=function(g){d(g);return{size:g.uniforms[c].value}};return a}();var Jka=/*#__PURE__*/function(){function d(q){q.defines.hasOwnProperty("addedRenderingVolumeShaders")||(q.defines.addedRenderingVolumeShaders=!0,q.uniforms=Yx.merge([Xx.ambient,Xx.lights,{tex:{type:"t",value:void 0},alphaCorrection:{type:"1f",value:void 0},sizeInScene:{type:"v3",value:void 0},sizeData:{type:"v3",value:void 0},dataTex:{type:"tv",value:void 0},textureSize:{type:"1i",value:hA.TJa()},textureArea:{type:"1i",value:hA.TJa()*hA.TJa()},minData:{type:"1f",value:void 0},maxData:{type:"1f",value:void 0},
flipZ:{type:"b",value:!1},switchLights:{type:"b",value:!1},scale:{type:"v3",value:new Hp(1,1,1)},transfertTex:{type:"t",value:void 0},delta:{type:"1f",value:void 0},maxStep:{type:"1i",value:4096}}]))}function a(){}var b={},c="tex alphaCorrection sizeInScene sizeData dataTex textureSize textureArea minData maxData flipZ switchLights scale transfertTex delta maxStep".split(" "),e="varying vec3 localCubeCoords;\nvarying vec4 projectedCoords;\nvarying mat4 mMatrix;",f="uniform sampler2D tex;\nuniform float alphaCorrection;\nuniform int textureSize;\nuniform int textureArea;\nuniform float minData;\nuniform float maxData;\nuniform vec3 sizeData;\nuniform vec3 sizeInScene;\nuniform vec3 scale;\nuniform sampler2D transfertTex;\nuniform sampler2D dataTex[12];\nuniform bool flipZ;  \nuniform bool switchLights;\nuniform float delta;\nuniform int maxStep;\nconst int MAX_STEPS = 4096;",
g="vec3 floorSpecial(vec3 a){\n\treturn max(min(floor(a), sizeData -0.5) , 0.);\n}",h="float getIntensity(vec3 pos) {\n       pos.z = flipZ ? pos.z : sizeData.z - pos.z;\n       vec3 position_1 = floorSpecial(pos);\n       float intensity = 0.0;\n       int textureIndex = 0;\n       int sizeDataX = int(sizeData.x);\n       int sizeDataZ = int(sizeData.z);\n       int pos1Y = int(position_1.y);\n\n       textureIndex += (sizeDataZ * sizeDataX / textureSize) * pos1Y / textureSize;\n       int ypart = sizeDataZ * sizeDataX * pos1Y - textureIndex * textureArea;\n       int xpart =  sizeDataZ * int(position_1.x);\n       int totalCoord = int(position_1.z) + xpart + ypart;\n\n       int textureIndex2 = totalCoord / textureArea;\n       totalCoord = totalCoord - (textureIndex2 * (textureArea));\n       textureIndex += textureIndex2;\n       int Ycomp = totalCoord / textureSize;\n       int Xcomp = totalCoord - Ycomp * textureSize;\n\n       float coordX = float(Xcomp) / float(textureSize);\n       float coordY = float(Ycomp) / float(textureSize);\n\n       if(textureIndex == 0)\n           intensity = float(texture2D(dataTex[0], vec2(coordX, coordY)).r);\n       else if(textureIndex == 1)\n           intensity = float(texture2D(dataTex[1], vec2(coordX, coordY)).r);\n       else if(textureIndex == 2)\n           intensity = float(texture2D(dataTex[2], vec2(coordX, coordY)).r);\n       else if(textureIndex == 3)\n           intensity = float(texture2D(dataTex[3], vec2(coordX, coordY)).r);\n       else if(textureIndex == 4)\n           intensity = float(texture2D(dataTex[4], vec2(coordX, coordY)).r);\n       else if(textureIndex == 5)\n           intensity = float(texture2D(dataTex[5], vec2(coordX, coordY)).r);\n       else if(textureIndex == 6)\n           intensity = float(texture2D(dataTex[6], vec2(coordX, coordY)).r);\n       else if(textureIndex == 7)\n           intensity = float(texture2D(dataTex[7], vec2(coordX, coordY)).r);\n       else if(textureIndex == 8)\n           intensity = float(texture2D(dataTex[8], vec2(coordX, coordY)).r);\n       else if(textureIndex == 9)\n           intensity = float(texture2D(dataTex[9], vec2(coordX, coordY)).r);\n       else if(textureIndex == 10)\n           intensity = float(texture2D(dataTex[10], vec2(coordX, coordY)).r);\n       else if(textureIndex == 11)\n           intensity = float(texture2D(dataTex[11], vec2(coordX, coordY)).r);\n       else\n           intensity = 0.0;\n       return intensity;\n}",
k="vec3 transfromCoordinates(vec3 position_2) {\n\treturn (((position_2)/ sizeInScene + 0.5) * (sizeData));\n}",l="void neighbor(in vec3 pos, out vec3 inf, out vec3 supp){\n\tif (pos.x == 0. ) {\n\t\tinf.x = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x +1.,pos.y,pos.z));\n\t} else if (pos.x == sizeData.x -1.) {\n\t\tinf.x = getIntensity(vec3(pos.x - 1.,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.x = getIntensity(vec3(pos.x -1.,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x +1.,pos.y,pos.z));\n\t}\n\tif (pos.y == 0. ) {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y +1.,pos.z));\n\t} else if (pos.y == sizeData.y -1.) {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y - 1.,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y -1.,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y +1.,pos.z));\n\t}\n\tif (pos.z == 0. ) {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z +1.));\n\t} else if (pos.z == sizeData.z -1.) {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z - 1.));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z -1.));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z +1.));\n\t}\n}",
m="\t\t\t\tvec3 inf;\n\t\t\t\tvec3 supp;\n\t\t\t\tneighbor(currentPositionTransformed,inf,supp);\n\t\t\t\tvec4 addedLights = vec4(0.0,0.0,0.0, 0.0);\n\t\t\t\tfor(int l = 0; l < NUM_POINT_LIGHTS; l++) {\n\t\t\t\t\tPointLight pointLight = pointLights[ l ];\n\t\t\t\t\tvec3 lightDirection = normalize((mMatrix*vec4(currentPosition,1.) - mMatrix*vec4(pointLight.position,1.) ).xyz);\n\t\t\t\t\taddedLights.rgb += clamp(-dot(-lightDirection, -normalize(supp-inf)), 0.0, 1.0) * pointLight.color;\n\t\t\t\t\taddedLights.rgb += clamp(-dot(-normalize(currentPosition - frontPos), -normalize(supp-inf)), 0.0, 1.0) * addedLights.rgb;\n\t\t\t\t}\n\t\t\t\tcolorSample = vec4(mix(colorSample, addedLights, addedLights).rgb,colorSample.a);",
n="vec4 transform(float intensity){\n\treturn texture2D(transfertTex,vec2(intensity,0.5));\n}",p="vec4 transform(float intensity){\n\treturn texture2D(transfertTex,vec2((intensity-minData)/(maxData-minData),0.5));\n}";f=[e,f,"#include <common>\n#include <packing>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>"].join("\n");g=[g,h,k,l,"void main() {\n\tvec2 texc = ((projectedCoords.xy / projectedCoords.ww) + 1.0) / 2.0;\n\tvec3 backPos = texture2D(tex, texc).xyz;\n\tvec3 frontPos = localCubeCoords;\n\tvec3 dir = backPos - frontPos;\n\tvec3 deltaDirection = dir * delta;\n\tvec3 dirTransformed = transfromCoordinates(backPos) - transfromCoordinates(frontPos);\n\tvec3 deltaDirectionTransformed = dirTransformed * delta;\n\tvec3 currentPosition = frontPos;\n\tvec3 currentPositionTransformed = transfromCoordinates(currentPosition);\n\tvec3 accumulatedColor = vec3(0.0);\n\tfloat accumulatedAlpha = 0.0;\n\tvec4 colorSample;\n\tfloat alphaSample;\n\tfor (int i = 0; i < MAX_STEPS; i++) {\n\t\tcolorSample = transform(getIntensity(currentPositionTransformed));\n\t\tif (switchLights) {\n\t\t\tif (colorSample.a > 0.2 && switchLights) {",
m,"\t\t\t}\n\t\t\tcurrentPosition += deltaDirection;\n\t\t}\n\t\tif (colorSample.a > 0.0) {\n\t\t\talphaSample = colorSample.a * alphaCorrection;\n\t\t\talphaSample *= (1.0 - accumulatedAlpha);\n\t\t\taccumulatedColor += colorSample.rgb * alphaSample;\n\t\t\taccumulatedAlpha += alphaSample ;\n\t\t\tif(accumulatedAlpha >= 0.9999) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(i >= maxStep) {\n\t\t\tbreak;\n\t\t}\n\t\tcurrentPositionTransformed += deltaDirectionTransformed;\n\t}\n\tgl_FragColor = vec4(accumulatedColor,accumulatedAlpha);\n}"].join("\n");
L(a,"geotoolkit3d.util.shaders.Volumetric");a.hAe="varying vec3 localCubeCoords;\nvoid main() {\n\tlocalCubeCoords = (modelMatrix * vec4(position , 0.0)).xyz ;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}";a.eAe="varying vec3 localCubeCoords;\nvoid main() {\n\tgl_FragColor = vec4(localCubeCoords.x , localCubeCoords.y, localCubeCoords.z, 1);\n}";a.iAe=[e,"void main() {\n\tlocalCubeCoords = (modelMatrix * vec4(position , 0.0)).xyz;\n\tmMatrix = modelMatrix;\n\tprojectedCoords = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tgl_Position = projectedCoords;\n}"].join("\n");
a.gAe=[f,n,g].join("\n");a.fAe=[f,p,g].join("\n");a.sQe=function(q,r){if(!r)return!1;d(q);var t=!1;c.forEach(function(u){if(null!=r[u]&&q.uniforms[u].value!==r[u]){if("dataTex"===u&&q.uniforms.dataTex.value)for(var w in q.uniforms.dataTex.value){var y=q.uniforms.dataTex.value[w];null!=y&&(delete y.image.data,y.dispose())}q.uniforms[u].value=r[u];t=!0}});return t};a.rMe=function(q){d(q);for(var r in b)delete b[r];if(!q.defines.hasOwnProperty("addedRenderingVolumeShaders"))return b;c.forEach(function(t){b[t]=
q.uniforms[t].value});return b};return a}();var sC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a,b,c,e,f,g){te.call(this);if(!a||1>a.length||!b||1>b.length||a.length!==b.length)throw Error();this.dc=a;this.rc=b;this.Kl=c;this.Ag=f;this.jo=a[0];this.it=a[0];this.ko=b[0];this.jt=b[0];this.Gva=c[0];this.Bva=c[0];var h;if(null==this.Ag||this.Ag.length<this.dc.length)for(this.Ag=[0],f=1,h=a.length;f<h;f++){var k=a[f-1]-a[f],l=b[f-1]-b[f],m=c[f-1]-c[f];this.Ag.push(this.Ag[f-1]+Math.sqrt(k*k+l*l+m*m))}k=!1;null!=e?(this.cr=e.clone(),k=!0):0<a.length?(this.cr=new Hp(a[0],
b[0],c[0]),this.dc[0]-=this.cr.x,this.rc[0]-=this.cr.y,this.Kl[0]-=this.cr.z):this.cr=new Hp(0,0,0);this.Rr=this.Ag[0];this.As=this.Ag[0];this.Cb=null!=g?g:[];this.i5b(k);f=1;for(h=a.length;f<h;f++)k||(this.dc[f]-=this.cr.x,this.rc[f]-=this.cr.y,this.Kl[f]-=this.cr.z)}L(d,"geotoolkit3d.geodata.Trajectory3d");D(d,te);d.prototype.i5b=function(){for(var a=this.dc,b=this.rc,c=this.Kl,e=1,f=a.length;e<f;e++)a[e]<this.jo?this.jo=a[e]:a[e]>this.it&&(this.it=a[e]),b[e]<this.ko?this.ko=b[e]:b[e]>this.jt&&
(this.jt=b[e]),c[e]<this.Gva?this.Gva=c[e]:c[e]>this.Bva&&(this.Bva=c[e]),c[e]<this.Gva?this.Gva=c[e]:c[e]>this.Bva&&(this.Bva=c[e]),this.Ag[e]<this.Rr?this.Rr=this.Ag[e]:this.Ag[e]>this.As&&(this.As=this.Ag[e])};d.prototype.getX=function(a){return this.dc[a]};d.prototype.getY=function(a){return this.rc[a]};d.prototype.getZ=function(a){return this.Kl[a]};d.prototype.Ub=function(a){return this.Ag[a]};d.prototype.count=function(){return this.dc?this.dc.length:0};d.prototype.Zf=function(){return this.Rr};
d.prototype.Yf=function(){return this.As};d.prototype.mR=function(){return this.jo};d.prototype.nR=function(){return this.ko};d.prototype.qU=function(){return this.it};d.prototype.rU=function(){return this.jt};d.prototype.SHd=function(){return this.Gva};d.prototype.CHd=function(){return this.Bva};d.prototype.Gf=function(){return this.Rr};d.prototype.vg=function(){return this.As};d.prototype.U1=function(){return this.cr};d.prototype.gMc=function(a,b,c){var e=0,f=this.dc.length-1;if(a>b){var g=a;a=
b;b=g}for(;this.Ag[e]<a||this.Ag[f]>b;){if(this.Ag[e]<a&&(e++,e>=this.dc.length))throw Error("Depth outside of range");if(this.Ag[f]>b&&(f--,0>f))throw Error("Depth outside of range");}g={x:this.dc.slice(e,f+1),y:this.rc.slice(e,f+1),z:this.Kl.slice(e,f+1)};if(null!=c){for(var h=!0,k=1;k<c.length;k++)if(c[k].depth<c[k-1].depth){h=!1;break}if(c[0].depth===a&&c[c.length-1].depth===b&&h){g.widths=[];k=h=0;for(var l=e;l<f+1;l++){for(;this.Ag[l]>c[h].depth;){var m=this.fMc(c[h].depth);g.x.splice(k,0,m.x);
g.y.splice(k,0,m.y);g.z.splice(k,0,m.z);g.widths.push(c[h].radius);k++;h++}k++;if(this.Ag[l]===c[h].depth)g.widths.push(c[h].radius),h++;else{m=c[h].radius;var n=c[h].depth,p=c[h+1].radius,q=c[h+1].depth;g.widths.push(m+Math.sign(p-m)*Math.abs(m-p)*(this.Ag[l]-n)/(q-n))}}}else hb("Wrong depths of radii! It must be sorted interval from start depth to end depth."),c=null}if(null!=a&&this.Ag[e]!==a){var r=this.Ag[e-1];k=(a-r)/(this.Ag[e]-r);a=(this.dc[e]-this.dc[e-1])*k;h=(this.rc[e]-this.rc[e-1])*k;
k*=this.Kl[e]-this.Kl[e-1];r={x:a+this.dc[e-1],y:h+this.rc[e-1],z:k+this.Kl[e-1]};null!=c&&(r.widths=c[0].radius)}if(null!=b&&this.Ag[f]!==b){var t=this.Ag[f];k=(b-t)/(this.Ag[f+1]-t);a=(this.dc[f+1]-this.dc[f])*k;h=(this.rc[f+1]-this.rc[f])*k;k*=this.Kl[f+1]-this.Kl[f];t={x:a+this.dc[f],y:h+this.rc[f],z:k+this.Kl[f]};null!=c&&(t.widths=c[c.length-1].radius)}null!=r&&(g.x.unshift(r.x),g.y.unshift(r.y),g.z.unshift(r.z),null!=c&&g.widths.unshift(r.widths));null!=t&&(g.x.push(t.x),g.y.push(t.y),g.z.push(t.z),
null!=c&&g.widths.push(t.widths));g.origin=this.cr.clone();null!=c&&(g.heights=g.widths);return g};d.prototype.nEd=function(a,b){if(null==a)return null;null==b&&(b=!0);for(var c=0;this.Ag[c]<a;)if(this.Ag[c]<a&&(c++,c>=this.dc.length))throw Error("Depth outside of range");if(this.Ag[c]!==a){a=c-1;var e=c}else a=b?c:c-1,e=b?c+1:c;e>=this.Ag.length&&(e=this.Ag.length-1,a=e-1);0>a&&(a=0,e=1);b=this.dc[e]-this.dc[a];c=this.rc[e]-this.rc[a];a=this.Kl[e]-this.Kl[a];return(new Hp(b,c,a)).normalize()};d.prototype.fMc=
function(a){for(var b=0;this.Ag[b]<a;)if(this.Ag[b]<a&&(b++,b>=this.dc.length))throw Error("Depth outside of range");var c=new Hp(this.dc[b],this.rc[b],this.Kl[b]);if(null!=a&&this.Ag[b]!==a){c=this.Ag[b-1];var e=(a-c)/(this.Ag[b]-c);a=(this.dc[b]-this.dc[b-1])*e;c=(this.rc[b]-this.rc[b-1])*e;e*=this.Kl[b]-this.Kl[b-1];c=new Hp(a+this.dc[b-1],c+this.rc[b-1],e+this.Kl[b-1])}return c};d.prototype.$Sc=function(a,b,c,e){for(var f,g=0;g<this.Cb.length;g++)if(this.Cb[g].Ga()===a){f=this.Cb[g];break}if(null==
f)return null;g=0;a=this.dc.length-1;if(b>c){var h=b;b=c;c=h}for(;this.Ag[g]<b&&this.Ag[a]>c;){if(this.Ag[g]<b&&(g++,g>=this.dc.length))throw Error("Depth outside of range");if(this.Ag[a]>c&&(a++,0>a))throw Error("Depth outside of range");}f=f.ie();if(null!=b&&this.Ag[g]!==b&&this.Ag[g]>b){var k=this.Ag[g-1];h=(b-k)/(this.Ag[g]-k);h*=f[g]-f[g-1];k=h+f[g]}if(null!=c&&this.Ag[a]!==c&&this.Ag[a]<c){var l=this.Ag[a];h=(c-l)/(this.Ag[a+1]-l);h*=f[a+1]-f[a];l=h+f[a]}h=f.slice(g,a);if(null!=e){for(var m=
!0,n=1;n<e.length;n++)if(e[n].depth<e[n-1].depth){m=!1;break}if(e[0].depth===b&&e[e.length-1].depth===c&&m)for(c=b=0;g<a+1;g++){for(this.Ag[g]===e[b].depth&&b++;this.Ag[g]>e[b].depth;){m=f[c];n=f[c+1];var p=e[b].depth,q=e[b+1].depth;m+=Math.sign(n-m)*Math.abs(m-n)*(this.Ag[g]-p)/(q-p);h.splice(c,0,m);b++;c++}c++}else hb("Wrong depths of radii! It must be sorted interval from start depth to end depth.")}null!=k&&h.unshift(k);null!=l&&h.push(l);return h};d.prototype.vNd=function(){return this.Kl};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREZXB0aCI6IlViIiwibWluRGVwdGgiOiJaZiIsIm1heERlcHRoIjoiWWYiLCJnZXRNaW5YIjoibVIiLCJnZXRNaW5ZIjoiblIiLCJnZXRNYXhYIjoicVUiLCJnZXRNYXhZIjoiclUiLCJnZXRNaW5aIjoiU0hkIiwiZ2V0TWF4WiI6IkNIZCIsImdldE1pbkRlcHRoIjoiR2YiLCJnZXRNYXhEZXB0aCI6InZnIiwiZ2V0T3JpZ2luIjoiVTEiLCJnZXRDb29yZGluYXRlc0ZvckRlcHRocyI6ImdNYyIsImdldERpcmVjdGlvbkF0RGVwdGgiOiJuRWQiLCJnZXRDb29yZGluYXRlRm9yRGVwdGgiOiJmTWMiLCJnZXRWYWx1ZXNGb3JEZXB0aHMiOiIkU2MifX19");var tC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a,b){this.ic=a;this.Cb=b}L(d,"geotoolkit3d.geodata.TrajectoryValue");d.prototype.Ga=function(){return this.ic};d.prototype.ie=function(){return this.Cb};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROYW1lIjoiR2EiLCJnZXRWYWx1ZXMiOiJpZSJ9fX0g");var uC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){this.c4=this.a4=this.lK=Number.NaN;this.setOptions(a)}L(d,"geotoolkit3d.scene.reservoir.IJKIndex");d.prototype.fromArray=function(a){this.lK=a[0];this.a4=a[1];this.c4=a[2];return this};d.prototype.toArray=function(){return[this.lK,this.a4,this.c4]};d.prototype.a5b=function(a){a=G(a,{I:this.lK,J:this.a4,K:this.c4},!0);this.lK=a.i;this.a4=a.j;this.c4=a.k;return this};d.prototype.toJSON=function(){return{I:this.lK,J:this.a4,K:this.c4}};d.prototype.set=function(a,b,c){this.lK=
a;this.a4=b;this.c4=c;return this};d.prototype.setOptions=function(a,b,c){a instanceof Array?this.fromArray(a):"object"===typeof a?this.a5b(a):"number"===typeof a&&this.set(a,b,c);return this};d.prototype.ta=function(){return{i:this.lK,j:this.a4,k:this.c4}};d.prototype.h7b=function(){return this.lK};d.prototype.IGd=function(){return this.a4};d.prototype.JGd=function(){return this.c4};d.prototype.add=function(a){a=a.ta();this.lK+=a.i;this.a4+=a.j;this.c4+=a.k;return this};d.prototype.sub=function(a){a=
a.ta();this.lK-=a.i;this.a4-=a.j;this.c4-=a.k;return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJmcm9tSnNvbiI6ImE1YiIsImdldE9wdGlvbnMiOiJ0YSIsImdldEkiOiJoN2IiLCJnZXRKIjoiSUdkIiwiZ2V0SyI6IkpHZCJ9fX0g");var vC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){cA.call(this,a);this.type="MultiGridData";this.LSa=new uC([0,0,0]);this.T4a=this.xRa=0;this.Kc=Number.POSITIVE_INFINITY;this.Oc=Number.NEGATIVE_INFINITY;this.NI=Number.POSITIVE_INFINITY;this.LI=Number.NEGATIVE_INFINITY;this.OI=Number.POSITIVE_INFINITY;this.MI=Number.NEGATIVE_INFINITY;this.u$=Number.POSITIVE_INFINITY;this.p$=Number.NEGATIVE_INFINITY;this.Xvb=[];this.sl=null;this.bod=a.levels;this.Tib(a.cells,a.values)}D(d,cA);L(d,"geotoolkit3d.data.reservoir.hexahedral.MultiGridData");
d.prototype.reset=function(){this.LSa=new uC(-1,-1,-1);this.T4a=this.xRa=0;this.Kc=Number.POSITIVE_INFINITY;this.Oc=Number.NEGATIVE_INFINITY;this.NI=Number.POSITIVE_INFINITY;this.LI=Number.NEGATIVE_INFINITY;this.OI=Number.POSITIVE_INFINITY;this.MI=Number.NEGATIVE_INFINITY;this.u$=Number.POSITIVE_INFINITY;this.p$=Number.NEGATIVE_INFINITY;this.Xvb=[];return this};d.prototype.getAttributes=function(){return{grids:this.Xvb,boundingbox:this.sl,cellcount:this.T4a,gridcount:this.xRa,minvalue:this.Kc,maxvalue:this.Oc,
mini:this.NI,maxi:this.LI,minj:this.OI,maxj:this.MI,mink:this.u$,maxk:this.p$,levels:this.bod}};d.prototype.FFd=function(a){return 0>a||a>=this.xRa?(hb("Grid does not exist at index "+a),null):this.Xvb[a]};d.prototype.Tib=function(a,b){if(null==a||0===a.length)return this;this.xRa=a.length;for(var c=0;c<this.xRa;c++){var e=a[c].length,f=8*e;f={gridindex:c,cellcount:e,positions:new zq(new Float32Array(3*f),3),ijk:new zq(new Float32Array(3*f),3),normals:new zq(new Float32Array(3*f),3),values:new zq(new Float32Array(3*
f),3),numijk:new uC([-1,-1,-1]),boundingbox:null,minvalue:Number.POSITIVE_INFINITY,maxvalue:Number.NEGATIVE_INFINITY,mini:Number.POSITIVE_INFINITY,maxi:Number.NEGATIVE_INFINITY,minj:Number.POSITIVE_INFINITY,maxj:Number.NEGATIVE_INFINITY,mink:Number.POSITIVE_INFINITY,maxk:Number.NEGATIVE_INFINITY};for(var g=0;g<e;g++)this.tfc(a[c][g],g,f),null!=b&&null!=b[c]&&this.tfc(b[c][g],g,f);this.T4a+=e;this.NI=Math.min(this.NI,f.mini);this.LI=Math.max(this.LI,f.maxi);this.OI=Math.min(this.OI,f.minj);this.MI=
Math.max(this.MI,f.maxj);this.u$=Math.min(this.u$,f.mink);this.p$=Math.max(this.p$,f.maxk);this.Kc=Math.min(this.Kc,f.minvalue);this.Oc=Math.max(this.Oc,f.maxvalue);this.LSa.add(f.numijk);this.Xvb.push(f);e=(new uq).setFromBufferAttribute(f.positions);f.boundingbox=e.clone();null==this.sl?this.sl=e:this.sl.union(e)}return this};d.prototype.tfc=function(){var a=new uC([-1,-1,-1]);return function(b,c,e){if(null!=b&&null!=b.ijk){var f=b.ijk;f instanceof uC||(f=a.setOptions(f));var g=f.ta(),h=e.positions,
k=e.ijk,l=e.normals;f=e.values;var m=e.numijk,n=e.mini,p=e.maxi,q=e.minj,r=e.maxj,t=e.mink,u=e.maxk;c*=8;var w=b.x,y=b.y,z=b.z,x=[],C=[],A=[],v=[],B=[],E=[];null!=w&&null!=y&&null!=z&&(h.setXYZ(c+0,w[0],y[0],z[0]),h.setXYZ(c+1,w[1],y[1],z[1]),h.setXYZ(c+2,w[2],y[2],z[2]),h.setXYZ(c+3,w[3],y[3],z[3]),h.setXYZ(c+4,w[4],y[4],z[4]),h.setXYZ(c+5,w[5],y[5],z[5]),h.setXYZ(c+6,w[6],y[6],z[6]),h.setXYZ(c+7,w[7],y[7],z[7]),k.setXYZ(c+0,g.i,g.j,g.k),k.setXYZ(c+1,g.i,g.j,g.k),k.setXYZ(c+2,g.i,g.j,g.k),k.setXYZ(c+
3,g.i,g.j,g.k),k.setXYZ(c+4,g.i,g.j,g.k),k.setXYZ(c+5,g.i,g.j,g.k),k.setXYZ(c+6,g.i,g.j,g.k),k.setXYZ(c+7,g.i,g.j,g.k),n=Math.min(g.i,n),p=Math.max(g.i,p),q=Math.min(g.j,q),r=Math.max(g.j,r),t=Math.min(g.k,t),u=Math.max(g.k,u),Wy.xAa(h,c+1,c+0,c+3,x),Wy.xAa(h,c+4,c+5,c+6,C),Wy.xAa(h,c+3,c+2,c+6,A),Wy.xAa(h,c+0,c+5,c+4,v),Wy.xAa(h,c+2,c+6,c+0,B),Wy.xAa(h,c+7,c+3,c+5,E),this.BBa(l,c+0,x,B,v),this.BBa(l,c+1,x,E,v),this.BBa(l,c+2,x,B,A),this.BBa(l,c+3,x,E,A),this.BBa(l,c+4,C,B,v),this.BBa(l,c+5,C,E,v),
this.BBa(l,c+6,C,B,A),this.BBa(l,c+7,C,E,A),m.set(p-n+1,r-q+1,u-t+1),e.mini=n,e.maxi=p,e.minj=q,e.maxj=r,e.mink=t,e.maxk=u,e.numijk=m);b=b.value;null!=b&&(f.setX(c+0,b),f.setX(c+1,b),f.setX(c+2,b),f.setX(c+3,b),f.setX(c+4,b),f.setX(c+5,b),f.setX(c+6,b),f.setX(c+7,b),e.minvalue=Math.min(b,e.minvalue),e.maxvalue=Math.max(b,e.maxvalue))}}}();d.prototype.BBa=function(a,b,c,e,f){a.setX(b,(c[0]+e[0]+f[0])/3);a.setY(b,(c[1]+e[1]+f[1])/3);a.setZ(b,(c[2]+e[2]+f[2])/3)};d.prototype.KXa=function(){return this.T4a};
d.prototype.Ueb=function(){return this.xRa};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHcmlkQXR0cmlidXRlcyI6IkZGZCIsInNldENlbGxzT3B0aW9ucyI6IlRpYiIsInNldENlbGwiOiJ0ZmMiLCJnZXROdW1iZXJPZkNlbGxzIjoiS1hhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6IlVlYiJ9fX0g");var wC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e){cA.call(this);this.type="ReservoirData";this.LSa=new uC(-1,-1,-1);this.z5=0;this.VDa=this.Cb=this.Brb=this.Od=null;this.lA=null!=e.nullvalue?e.nullvalue:-999.25;this.k4a=[];this.r5=null;this.Kc=Number.POSITIVE_INFINITY;this.Oc=Number.NEGATIVE_INFINITY;this.NI=Number.POSITIVE_INFINITY;this.LI=Number.NEGATIVE_INFINITY;this.OI=Number.POSITIVE_INFINITY;this.MI=Number.NEGATIVE_INFINITY;this.u$=Number.POSITIVE_INFINITY;this.p$=Number.NEGATIVE_INFINITY;this.EP={};this.o8a=
0;this.Tib(e.cells,e.values);e.computecellsvolume&&this.yyb()}var a=new uC,b=8,c=Wy;D(d,cA);L(d,"geotoolkit3d.data.reservoir.hexahedral.ReservoirData");d.prototype.getAttributes=function(){return{position:this.Od,positions:this.Od,values:this.Cb,volume:this.VDa,ijk:this.Brb,boundingbox:this.sl,cellcount:this.z5,minvalue:this.Kc,maxvalue:this.Oc,mini:this.NI,maxi:this.LI,minj:this.OI,maxj:this.MI,mink:this.u$,maxk:this.p$,numijk:this.LSa,cellmap:this.EP,octree:this.r5,additionaldata:this.k4a}};d.prototype.Pya=
function(e,f,g){return null!=this.EP[e]&&null!=this.EP[e][f]&&null!=this.EP[e][f][g]?this.EP[e][f][g]:null};d.prototype.Lmd=function(e,f,g){if(null!=this.EP[e]){if(null!=this.EP[e][f])return null!=this.EP[e][f][g]?this.EP[e][f][g]:this.EP[e][f][g]=this.o8a++;this.EP[e][f]={};return this.EP[e][f][g]=this.o8a++}this.EP[e]={};this.EP[e][f]={};return this.EP[e][f][g]=this.o8a++};d.prototype.reset=function(){this.z5=0;this.k4a=this.VDa=this.Cb=this.Brb=this.Od=null;this.Kc=Number.POSITIVE_INFINITY;this.Oc=
Number.NEGATIVE_INFINITY;this.NI=Number.POSITIVE_INFINITY;this.LI=Number.NEGATIVE_INFINITY;this.OI=Number.POSITIVE_INFINITY;this.MI=Number.NEGATIVE_INFINITY;this.u$=Number.POSITIVE_INFINITY;this.p$=Number.NEGATIVE_INFINITY;this.EP={};this.r5=null;this.o8a=0;return this};d.prototype.Tib=function(e,f){if(null!=e){this.NI=Number.POSITIVE_INFINITY;this.LI=Number.NEGATIVE_INFINITY;this.OI=Number.POSITIVE_INFINITY;this.MI=Number.NEGATIVE_INFINITY;this.u$=Number.POSITIVE_INFINITY;this.p$=Number.NEGATIVE_INFINITY;
if(0===this.z5&&Array.isArray(e)){this.z5=e.length;var g=8*this.z5;this.Od=new zq(new Float32Array(3*g),3);this.Brb=new zq(new Int16Array(3*this.z5),3);this.Cb=new zq(new Float32Array(this.z5),1)}for(g=0;g<e.length;g++)this.A0d(e[g]);this.sl=(new uq).setFromBufferAttribute(this.Od);this.r5=new aA(0,this.sl);var h=function(l){for(var m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,u=0;8>
u;u++)m=Math.min(m,l.x[u]),n=Math.min(n,l.y[u]),p=Math.min(p,l.z[u]),q=Math.max(q,l.x[u]),r=Math.max(r,l.y[u]),t=Math.max(t,l.z[u]);return[m,n,p,q,r,t,l.ijk]};for(g=0;g<e.length;g++)if(e[g].x&&e[g].y&&e[g].z){var k=h(e[g]);this.r5.vo(k)}this.r5.GZc()}if(null!=f)for(this.Kc=Number.POSITIVE_INFINITY,this.Oc=Number.NEGATIVE_INFINITY,e=0;e<f.length;e++)this.setValues(f[e]);return this};d.prototype.A0d=function(){var e=new uC([-1,-1,-1]);return function(f){if(null!=f){var g=f.ijk;if(null!=g){g instanceof
uC||(g=e.setOptions(g));var h=g.ta();g=this.o8a<this.z5?this.Lmd(h.i,h.j,h.k):this.Pya(h.i,h.j,h.k);var k=8*g,l=f.x,m=f.y;f=f.z;null!=l&&null!=m&&null!=f&&(this.Od.setXYZ(k+0,l[0],m[0],f[0]),this.Od.setXYZ(k+1,l[1],m[1],f[1]),this.Od.setXYZ(k+2,l[2],m[2],f[2]),this.Od.setXYZ(k+3,l[3],m[3],f[3]),this.Od.setXYZ(k+4,l[4],m[4],f[4]),this.Od.setXYZ(k+5,l[5],m[5],f[5]),this.Od.setXYZ(k+6,l[6],m[6],f[6]),this.Od.setXYZ(k+7,l[7],m[7],f[7]),this.Brb.setXYZ(g,h.i,h.j,h.k),this.NI=Math.min(h.i,this.NI),this.LI=
Math.max(h.i,this.LI),this.OI=Math.min(h.j,this.OI),this.MI=Math.max(h.j,this.MI),this.u$=Math.min(h.k,this.u$),this.p$=Math.max(h.k,this.p$),this.LSa.set(this.LI-this.NI+1,this.MI-this.OI+1,this.p$-this.u$+1))}}}}();d.prototype.setValues=function(e){if(null!=e){var f=e.ijk,g=e.value;null!=f&&null!=g&&(f=this.Pya(f[0],f[1],f[2]),isNaN(g)||g===this.lA||(this.Kc=Math.min(g,this.Kc),this.Oc=Math.max(g,this.Oc)),this.Cb.setX(f,g),null!=e.additionaldata&&(this.k4a[f]=e.additionaldata))}};d.prototype.KXa=
function(){return this.z5};d.prototype.CLc=function(e,f){if(0>e||e>this.z5-1)return null;for(var g=Array(8),h=Array(8),k=Array(8),l=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=this.Od.array,u=0;8>u;++u)g[u]=t[24*e+3*u],h[u]=t[24*e+3*u+1],k[u]=t[24*e+3*u+2],l=Math.min(l,g[u]),m=Math.min(m,h[u]),n=Math.min(n,k[u]),p=Math.max(p,g[u]),q=Math.max(q,h[u]),r=Math.max(r,k[u]);f.min.set(l,
m,n);f.max.set(p,q,r);return{x:g,y:h,z:k,value:null!=this.Cb?this.Cb.getX(e):null}};d.prototype.Ueb=function(){return null==this.r5?1:this.r5.bQc()};d.prototype.ALc=function(e){var f=Array.isArray(e)?{i:e[0],j:e[1],k:e[2]}:e.ta();f=this.Pya(f.i,f.j,f.k);if(null==f)return null;for(var g=Array(8),h=Array(8),k=Array(8),l=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=this.Od.array,u=0;8>
u;++u)g[u]=t[24*f+3*u],h[u]=t[24*f+3*u+1],k[u]=t[24*f+3*u+2],l=Math.min(l,g[u]),m=Math.min(m,h[u]),n=Math.min(n,k[u]),p=Math.max(p,g[u]),q=Math.max(q,h[u]),r=Math.max(r,k[u]);return{index:e,x:g,y:h,z:k,value:null!=this.Cb?this.Cb.getX(f):null,volume:this.VDa?this.VDa[f]:null,bound:[l,m,n,p,q,r],additionalData:this.k4a[f]}};d.prototype.mGd=function(){return this.LSa};d.prototype.B8b=function(){return this.r5};d.prototype.UPc=function(){if(null==this.r5)return[];for(var e=this.r5.Hec(),f=[],g=0;g<e.length;g++){var h=
e[g],k=h.length,l=8*h.length;l=new zq(new Float32Array(3*l),3);var m=new zq(new Float32Array(3*k),3);k=new zq(new Float32Array(k),1);for(var n=[],p=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY,y=0;y<h.length;y++){var z=h[y];a.fromArray(z);var x=this.ALc(a),C=8*y,A=x.x,v=x.y,B=x.z;l.setXYZ(C+0,A[0],v[0],B[0]);l.setXYZ(C+1,A[1],v[1],B[1]);l.setXYZ(C+2,A[2],v[2],B[2]);l.setXYZ(C+3,A[3],
v[3],B[3]);l.setXYZ(C+4,A[4],v[4],B[4]);l.setXYZ(C+5,A[5],v[5],B[5]);l.setXYZ(C+6,A[6],v[6],B[6]);l.setXYZ(C+7,A[7],v[7],B[7]);p=Math.min(p,z[0]);q=Math.min(q,z[1]);r=Math.min(r,z[2]);t=Math.max(t,z[0]);u=Math.max(u,z[1]);w=Math.max(w,z[2]);m.setXYZ(y,z[0],z[1],z[2]);k.setX(y,x.value);n.push(this.k4a[y])}f.push({positions:l,ijk:m,values:k,cellcount:h.length,mini:p,maxi:t,minj:q,maxj:u,mink:r,maxk:w,additionalData:n})}return f};d.prototype.VPc=function(){if(null==this.r5||null==this.Cb)return[];for(var e=
this.r5.Hec(),f=[],g=0;g<e.length;g++){var h=e[g],k=h.length;k=new zq(new Float32Array(k),1);for(var l=0;l<h.length;l++){var m=h[l];m=this.Pya(m[0],m[1],m[2]);null!=m&&(m=this.Cb.getX(m),k.setX(l,m))}f.push(k)}return f};d.prototype.zCd=function(e,f){e*=b;for(var g=0;g<b;g++)f[g][0]=this.Od.getX(e+g),f[g][1]=this.Od.getY(e+g),f[g][2]=this.Od.getZ(e+g)};d.prototype.yyb=function(){if(!this.VDa){this.VDa=new Float32Array(this.z5);for(var e=Array(b).fill().map(function(){return Array(3).fill(0)}),f=0;f<
this.z5;f++)this.zCd(f,e),this.VDa[f]=c.mGc(e)}};d.prototype.dispose=function(){this.reset()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRJbmRleEZvckNlbGwiOiJQeWEiLCJzZXRDZWxsc09wdGlvbnMiOiJUaWIiLCJnZXROdW1iZXJPZkNlbGxzIjoiS1hhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6IlVlYiIsImdldENlbGxEYXRhIjoiQUxjIiwiZ2V0SUpLQ291bnQiOiJtR2QiLCJnZXRPY3RyZWUiOiJCOGIiLCJnZXROb2RlRGF0YSI6IlVQYyIsImdldE5vZGVWYWx1ZXMiOiJWUGMiLCJjb21wdXRlQ2VsbHNWb2x1bWUiOiJ5eWIifX19");var xC=/*#__PURE__*/function(){function d(a){Aq.call(this,a);this.Om=a.horizonk;this.type="HorizonGeometry"}D(d,Aq);L(d,"geotoolkit3d.scene.reservoir.AbstractHorizonGeometry");return d}();var yC=/*#__PURE__*/function(){function d(a){Aq.call(this);this.type="ReservoirGeometry"}D(d,Aq);L(d,"geotoolkit3d.scene.reservoir.AbstractReservoirGeometry");return d}();var zC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){this.Gn=[];this.stack=0;this.xNa=!1;this.notify=function(b,c,e){var f;++this.stack;var g=this.Gn.length;for(f=0;f<g;f++)null!=this.Gn[f]&&this.Gn[f].call(this.Gn[f],b,c,e);--this.stack;if(0===this.stack&&this.xNa){for(f=this.Gn.length-1;-1<f;--f)null==this.Gn[f]&&this.Gn.splice(f,1);this.xNa=!1}};this.clone=function(){for(var b=new d,c=0;c<this.Gn.length;c++)b.Gn[c]=this.Gn[c];return b}}function a(){this.gRb=this.PRb=null;this.BW=this.kYb=this.Ftb=!1;this.eN=0}L(a,"geotoolkit3d.scene.reservoir.EventDispatcher");
a.prototype.dispose=function(){this.GW=null;this.eN=0;this.BW=!0};a.prototype.JYa=function(){return 0<this.eN};a.prototype.on=function(b,c){this.PRb||(this.PRb=new a);null==this.GW&&(this.GW={});var e=this.GW[b];e||(e=new d,this.GW[b]=e);b=e.Gn.indexOf(c);-1===b?(this.eN++,e.Gn.push(c)):hb("EventDispatcher.on callback function is already in the list of event listeners for this target. It is ignored!")};a.prototype.hasEventListener=function(b,c){return this.PRb&&null!=this.GW?(b=this.GW[b])?-1!==b.Gn.indexOf(c):
!1:!1};a.prototype.za=function(b,c){if(null!=this.GW)if("string"===typeof b){if(b=this.GW[b])"function"===typeof c?(c=b.Gn.indexOf(c),-1!==c&&(--this.eN,0<b.stack?(b.Gn[c]=null,b.xNa=!0):b.Gn.splice(c,1))):(this.eN-=b.Gn.length,b.Gn=[],b.stack=0)}else this.GW=null,this.eN=0};a.prototype.notify=function(b,c,e){if(null!=this.GW&&!0!==this.ZYb){var f=this.GW[b];f&&f.notify.call(f,b,c,e);this.gRb=b;this.Ftb&&b===$y.T1a&&(this.kYb=!0,null!=c.Rdc&&c.Rdc(),this.iAd());this.Ftb||b!==$y.T1a||(this.kYb=!1,
null!=c.aOc&&null!=c.aOc()&&c.aOc().eQe(!1))}};a.prototype.NPe=function(){this.Ftb=!0};a.prototype.iAd=function(){this.Ftb=!1};a.prototype.ENe=function(){return this.kYb};a.prototype.Wo=function(){return this.ZYb};a.prototype.ze=function(b){this.ZYb!==b&&(this.ZYb=b)};a.prototype.te=function(){return this.BW};a.prototype.qDd=function(){return this.gRb};a.prototype.UJe=function(){this.gRb=null};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvZmYiOiJ6YSIsInNldFNpbGVudCI6InplIiwiaXNEaXNwb3NlZCI6InRlIiwiZ2V0Q3VycmVudEV2ZW50IjoicURkIn19fSAg");var AC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this,a);this.type="AbstractReservoirGrid";this.NM=new zC}D(d,fz);L(d,"geotoolkit3d.scene.reservoir.AbstractReservoirGrid");d.prototype.on=function(a,b){this.NM.on(a,b)};d.prototype.za=function(a,b){this.NM.za(a,b)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvZmYiOiJ6YSJ9fX0g");var BC=/*#__PURE__*/ta(/*#__PURE__*/{Inc:[!0,!0,!0],poc:[!0,!0,!1],qfd:[!1,!0,!0],rfd:[!0,!1,!0],lnb:[!1,!0,!1],Mesh:[!0,!1,!1],jfd:[!1,!1,!0],ihd:[!1,!1,!1]},2,"eyJGdWxsIjoiSW5jIiwiSWdub3JlSG9yaXpvbnMiOiJwb2MiLCJJZ25vcmVNZXNoIjoicWZkIiwiSWdub3JlUHJvcGVydHkiOiJyZmQiLCJQcm9wZXJ0eSI6ImxuYiIsIkhvcml6b25zIjoiamZkIiwiTm90aGluZyI6ImloZCJ9");var CC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){yC.call(this,a);var b=a.data.getAttributes();this.setAttribute("position",b.position);null!=b.values&&this.setAttribute("cgcolormapValue",b.values);null!=b.ijk&&this.setAttribute("ijk",b.ijk);b[!0]?this.boundingBox=b.boundingbox:this.computeBoundingBox();this.CWa(a);this.type="CellGeometry"}D(d,yC);L(d,"geotoolkit3d.scene.reservoir.hexahedral.CellGeometry");d.prototype.setOptions=function(a){};d.prototype.CWa=function(a){a=a.data.KXa();var b=new Uint32Array(36*a);this.setIndex(new zq(b,
1));for(var c=0;c<a;++c){var e=36*c,f=8*c;b[e+0]=f+0;b[e+1]=f+1;b[e+2]=f+2;b[e+3]=f+1;b[e+4]=f+3;b[e+5]=f+2;b[e+6]=f+2;b[e+7]=f+3;b[e+8]=f+6;b[e+9]=f+3;b[e+10]=f+7;b[e+11]=f+6;b[e+12]=f+5;b[e+13]=f+4;b[e+14]=f+7;b[e+15]=f+4;b[e+16]=f+6;b[e+17]=f+7;b[e+18]=f+0;b[e+19]=f+4;b[e+20]=f+1;b[e+21]=f+4;b[e+22]=f+5;b[e+23]=f+1;b[e+24]=f+0;b[e+25]=f+2;b[e+26]=f+4;b[e+27]=f+2;b[e+28]=f+6;b[e+29]=f+4;b[e+30]=f+1;b[e+31]=f+5;b[e+32]=f+3;b[e+33]=f+5;b[e+34]=f+7;b[e+35]=f+3}};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZW5lcmF0ZUluZGljaWVzIjoiQ1dhIn19fSAg");var Wka=/*#__PURE__*/function(){function d(c){Oz.call(this,c);this.type="CellMaterial";c=G(c,{nullvalue:b,side:ls},!0);this.vertexShader=a.VERTEX_SHADER;this.fragmentShader=a.FRAGMENT_SHADER;this.transparent=this.extensions.derivatives=!0;this.setOptions(c)}var a=qC,b=Ty.bnb;D(d,Oz);L(d,"geotoolkit3d.scene.reservoir.hexahedral.CellMaterial");d.prototype.setOptions=function(c){Oz.prototype.setOptions.call(this,c);c.hasOwnProperty("opacity")&&(this.opacity=c.opacity);a.vhc(this,c);return this};d.prototype.ta=function(){return xb(a.sMe(this),
Oz.prototype.ta.call(this))};return d}();var DC=/*#__PURE__*/function(){function d(a){xC.call(this,a);this.type="HorizonGeometry";var b=a.data.getAttributes();this.setAttribute("position",b.position);this.computeBoundingBox(b.position.array);null!=b.values&&this.setAttribute(Ty.Km,b.values);this.CWa(a)}D(d,xC);L(d,"geotoolkit3d.scene.reservoir.hexahedral.HorizonGeometry");d.prototype.CWa=function(a){for(var b=a.data.getAttributes(),c=[],e=this.Om===b.maxk+1?this.Om-1:this.Om,f=this.Om===b.maxk+1,g=b.mini;g<=b.maxi;++g)for(var h=b.minj;h<=b.maxj;++h){var k=
a.data.Pya(g,h,e);null!=k&&(k*=8,f&&(k+=4),Array.prototype.push.apply(c,[k+0,k+1,k+1,k+3,k+3,k+2,k+2,k+0]))}a=new Uint32Array(c);this.setIndex(new zq(a,1))};d.prototype.computeBoundingBox=function(a){this.boundingBox=(new uq).setFromArray(a)};return d}();var EC=/*#__PURE__*/ta(/*#__PURE__*/{Hnc:"frontface",Olb:"cell",Jc:"none"},2,"eyJGcm9udEZhY2UiOiJIbmMiLCJDZWxsIjoiT2xiIiwiTm9uZSI6IkpjIn0g");var FC=/*#__PURE__*/function(){function d(c){var e=G(c,{side:ls,unlit:1,seethrough:!1,nullvalue:b,skeleton:{color:"grey",linewidth:.6},excludemode:!1,minbound:new Ip(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),maxbound:new Ip(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)},!0);zA.call(this,{side:c.side});this.hb=e;this.type="ReservoirMaterial";this.vertexShader=a.VERTEX_SHADER;this.fragmentShader=a.FRAGMENT_SHADER;
this.extensions.derivatives=!0;this.transparent=!1;this.T4b=!0;this.setOptions(e)}var a=jC,b=Ty.bnb;D(d,zA);L(d,"geotoolkit3d.scene.reservoir.instanced.ReservoirMaterial");d.prototype.setOptions=function(c){zA.prototype.setOptions.call(this,c);c.mode&&!c.mode[0]&&c.mode[1]&&(c.side=Fr);a.vhc(this,c);this.hb=xb(c,this.hb)};d.prototype.Qic=function(c){a.Qic(this,c)};d.prototype.ta=function(){return xb(this.hb,zA.prototype.ta.call(this))};return d}();oz.lw(FC.Pa(),eA);var GC=/*#__PURE__*/function(){function d(a,b){fz.call(this);this.type="HorizonCluster";this.SIe=0;if(null!=a)for(var c=0;c<a.length;++c){var e=a[c],f=new Pq("black");null!=e.color&&(f=Pd.Rg(e.color),f=new Pq(f.Xj()/255,f.Wj()/255,f.Vj()/255));e=null!=e.width?e.width:1;e=new zt(b[c],new tt({color:f,linewidth:e}));e.material.polygonOffset=!0;e.material.polygonOffsetUnits=0;e.material.polygonOffsetFactor=0;this.add(e)}}L(d,"geotoolkit3d.scene.reservoir.HorizonCluster");D(d,fz);return d}();var HC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){AC.call(this);this.type="ReservoirGrid";if(null==c.data)hb("Reservoir data not found.");else{this.hb=xb(c,{mode:BC.poc,skeleton:{color:"grey",linewidth:1},highlightmode:EC.Hnc});hz.aWa(this.hb);this.vz=this.hb.skeleton.linewidth;this.z8a=!1;this.gN=[];this.AK=new zs;this.V9=new zs;this.ja=this.hb.data;c=this.ja.getAttributes();var e=[],f=xb(this.hb,{});this.z8a?e=this.hb.data.UPc():e.push(this.hb.data);null!=c.boundingbox&&(this.boundingBox=c.boundingbox);for(var g=
0;g<e.length;g++){f.data=e[g];var h=new dA(f);h.pac()&&(f.side=mq);var k=new FC(f);k=new Zt(h,k);k.userData.gridindex=g;k.frustumCulled=!1;this.V9.add(k);this.gN.push(k.material)}this.Uc=h;this.QSb=c.mini;this.RSb=c.minj;this.SSb=c.mink;this.NSb=c.maxi;this.OSb=c.maxj;this.PSb=c.maxk;this.LEa=c.minvalue;this.KEa=c.maxvalue;this.Cf=null;this.wh=!1;this.zF=null;this.Ntb=new gC(this);this.Ntb.wIb(this.V9);this.boundingBox.getCenter(a);this.add(this.V9);this.setOptions(this.hb)}}var a=new Hp,b=null;L(d,
"geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid");D(d,AC);d.prototype.Ls=function(){null===b&&((b=!1===hA.Ggb())||hb("Detected Intel Graphics - Reservoir Grid picking and cell highlight are disabled for performances and compatibility reasons."));return b};d.prototype.setOptions=function(c){if(null==c)return this;AC.prototype.setOptions.call(this,c);this.hb=xb(c,this.hb);var e=this.V9.children;null!=c.colorprovider&&hz.aWa(c);if(null!=c.data&&this.wh){var f=[];var g=c.data.getAttributes();this.LEa=
g.minvalue;this.KEa=g.maxvalue;var h={minvalue:this.LEa,maxvalue:this.KEa};g.hasOwnProperty("nullvalue")&&(h.nullvalue=g.nullvalue);this.z8a?f=c.data.VPc():f.push(c.data.getAttributes().values);for(g=0;g<e.length;g++)e[g].geometry.setValues(f[g].array),e[g].geometry.fgc(h,!0)}c.computecellsvolume&&this.ja.yyb();if(null!=c.mode)if(0<this.AK.children.length)this.AK.visible=c.mode[2];else if(c.mode[2]&&null!=c.skeleton&&null!=c.skeleton.horizons){for(g=0;g<this.V9.children.length;g++){f=[];for(h=0;h<
c.skeleton.horizons.length;h++)c.horizonk=c.skeleton.horizons[h].horizonk,f[h]=new DC(c);f=new GC(c.skeleton.horizons,f);this.AK.add(f)}this.add(this.AK)}null!=c.highlightmode&&(this.rnd=c.highlightmode);c.occlusionculled&&(this.z8a=c.occlusionculled);if(c.mini||c.minj||c.mink||c.maxi||c.maxj||c.maxk||c.filter)for(this.QSb=null!=c.mini?c.mini:this.QSb,this.RSb=null!=c.minj?c.minj:this.RSb,this.SSb=null!=c.mink?c.mink:this.SSb,this.NSb=null!=c.maxi?c.maxi:this.NSb,this.OSb=null!=c.maxj?c.maxj:this.OSb,
this.PSb=null!=c.maxk?c.maxk:this.PSb,this.Cf=void 0!==c.filter?c.filter:this.Cf,g=0;g<e.length;g++)e[g].userData.isvalid=null==this.Cf&&e[g].geometry.IUc(c);if(c.minvalue||c.maxvalue)this.LEa=null!=c.minvalue?c.minvalue:this.LEa,this.KEa=null!=c.maxvalue?c.maxvalue:this.KEa;!0===c.excludemode&&(this.z8a=!1);for(g=0;g<e.length;g++)e[g].material.setOptions(c),e[g].geometry.fgc(c);this.Ntb.a8c(this.z8a);this.wh=!0;this.a_c();this.gg();return this};d.prototype.ta=function(){var c=this.gN[0];return xb(xb(this.hb,
c.ta()),AC.prototype.ta.call(this))};d.prototype.getBoundingBox=function(){return this.boundingBox.clone()};d.prototype.getData=function(){return this.hb.data};d.prototype.hBb=function(){for(var c=0,e=this.V9.children,f=0;f<e.length;f++)e[f]&&e[f].geometry&&(c+=e[f].geometry.hBb());return c};d.prototype.gBb=function(){for(var c=0,e=this.V9.children,f=0;f<e.length;f++)e[f]&&e[f].geometry&&(c+=e[f].geometry.gBb());return c};d.prototype.vsd=function(c){c=c.position.clone();c=this.parent.localToWorld(c).negate();
var e=a.clone().multiply(this.scale);c=e.distanceTo(c);null==this.pvc&&(this.pvc=c);c=Math.min(1,c/this.pvc);for(e=0;e<this.gN.length;e++)this.gN[e].Qic(this.vz*c)};d.prototype.ui=function(c,e,f,g){AC.prototype.ui.call(this,c,e,f,g);this.vsd(e)};d.prototype.n6=function(c,e,f,g){this.Ntb.render(e,f);this.NM.notify($y.T1a,this)};d.prototype.$Nd=function(c,e){this.zF&&this.zF.userData.cellIndex===e.index||(null!=this.zF?(c.M$c(e,this.zF.geometry),this.zF.userData.cellIndex=e.index,this.zF.userData.ijk=
e.ijk):("frontface"===this.rnd&&(this.zF=c.qBd(e)),null!=this.zF&&(this.zF.name="ReservoirHelperShape",this.zF.userData.cellIndex=e.index,this.zF.userData.ijk=e.ijk,this.zF.updateMatrixWorld(!0),this.add(this.zF))))};d.prototype.a_c=function(){null!=this.zF&&(hz.dispose(this.zF),this.remove(this.zF),this.zF=null)};d.prototype.Ikc=function(){return!0};d.prototype.s9b=function(){return this.zF};d.prototype.PKd=function(){var c=new uC([0,0,0]);if(null!=this.zF&&this.zF.userData.ijk){var e=this.zF.userData.ijk;
c.a5b(e)}return c};d.prototype.TPd=function(c){c instanceof uC&&(c=c.toArray());var e=c[0],f=c[1];c=c[2];return this.QSb<=e&&e<=this.NSb&&this.RSb<=f&&f<=this.OSb&&this.SSb<=c&&c<=this.PSb};d.prototype.GQd=function(c){return isNaN(this.LEa)||isNaN(this.KEa)||!isFinite(this.LEa)||!isFinite(this.KEa)?!0:this.LEa<=c&&c<=this.KEa};d.prototype.VX=function(){return this.V9};d.prototype.xId=function(){return this.Ntb};d.prototype.xUc=function(c){return this.Uc.GPd(c)};d.prototype.dispose=function(){hz.dispose(this.AK.children);
hz.dispose(this.V9.children);this.hb=this.V9=this.AK=null;AC.prototype.dispose.call(this)};d.prototype.Mf=function(){for(var c=this.V9.children,e=0;e<c.length;e++)c[e].geometry.Mf();return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1NlbGVjdGFibGUiOiJMcyIsImdldE9wdGlvbnMiOiJ0YSIsImdldEZpbHRlcmVkQ2VsbHNWb2x1bWUiOiJoQmIiLCJnZXRGaWx0ZXJlZENlbGxzQ291bnQiOiJnQmIiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImFmdGVyUmVuZGVyIjoibjYiLCJ1c2VPd25IaWdobGlnaHQiOiJJa2MiLCJnZXRTZWxlY3RlZENlbGwiOiJzOWIiLCJnZXRTZWxlY3RlZElKS0luZGV4IjoiUEtkIiwiaXNJSktWYWxpZEluRmlsdGVyIjoiVFBkIiwiaXNWYWx1ZVZhbGlkSW5GaWx0ZXIiOiJHUWQiLCJnZXRDb250YWluZXIiOiJWWCIsImdldE9jY2x1c2lvbk1hbmFnZXIiOiJ4SWQiLCJyZWJ1aWxkIjoiTWYifX19");rA.tg().kib(HC.Pa(),function(d){return d.s9b()});var IC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){AC.call(this);this.type="ReservoirSubgrid";this.hb=G(b,{mode:BC.Inc,skeleton:{color:"grey",linewidth:1}});this.vz=this.hb.skeleton.linewidth;this.fnd=this.hb.data.gridindex;this.geometry=new dA(this.hb);this.geometry.pac()&&(this.hb.side=mq);this.material=new FC(this.hb);this.Bwa=new Zt(this.geometry,this.material);this.Bwa.frustumCulled=!1;this.add(this.Bwa);this.boundingBox=this.Bwa.geometry.boundingBox.clone();this.Bwa.geometry.boundingBox.clone().getCenter(a);if(null!=
this.hb.skeleton&&null!=this.hb.skeleton.horizons){b=[];for(var c=0;c<this.hb.skeleton.horizons.length;++c)this.hb.horizonk=this.hb.skeleton.horizons[c].horizonk,b[c]=new DC(this.hb);this.srb=new GC(this.hb.skeleton.horizons,b);this.srb.visible=this.hb.mode[2];this.add(this.srb)}}var a=new Hp;L(d,"geotoolkit3d.scene.reservoir.hexahedral.ReservoirSubgrid");D(d,AC);d.prototype.setOptions=function(b){if(null==b)return this;AC.prototype.setOptions.call(this,b);var c=G(b,this.hb);null!=c.colorprovider&&
hz.aWa(c);null!=c.mode&&null!=this.srb&&(this.srb.visible=c.mode[2]);null!=this.Bwa&&(this.Bwa.material.setOptions(b),this.Bwa.geometry.setOptions(b));this.gg();return this};d.prototype.ta=function(){return xb(xb(this.hb,this.Bwa.material.ta()),AC.prototype.ta.call(this))};d.prototype.getBoundingBox=function(){return this.boundingBox.clone()};d.prototype.getData=function(){return this.hb.data};d.prototype.GFd=function(){return this.fnd};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRHcmlkSW5kZXgiOiJHRmQifX19");var JC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){this.ja=[];this.Pnd=!1;null==a.data||0===a.data.length?hb("There is no data in options['data']"):a.data[0].hasOwnProperty("radii")?(this.Pnd=!0,this.ja=a.data):a.data.forEach(function(b){return this.yDc(b)}.bind(this))}L(d,"geotoolkit3d.data.well.MultiLateralWellData");d.prototype.p$b=function(){return this.ja};d.prototype.ta=function(){var a=[],b=[],c=[],e=[],f=[],g=[];this.ja.forEach(function(k){f.push(a.length);Array.prototype.push.apply(a,k.x);Array.prototype.push.apply(b,
k.y);Array.prototype.push.apply(c,k.z);Array.prototype.push.apply(e,k.values);g.push(a.length-1)});var h={x:a,y:b,z:c,values:e,tops:f,bots:g,num:this.ja.length};return h};d.prototype.yDc=function(a){if(null==a||null==a.x||null==a.y||null==a.z)return hb("The data in options['data'] is incomplete"),this;var b={x:a.x,y:a.y,z:a.z};null!=a.values?b.values=a.values:(a=Array.apply(null,Array(a.x.length)).map(function(){return NaN}),b.values=a);this.ja.push(b);return this};d.prototype.o$b=function(a){return a>
this.ja.length-1||0>a?(hb("The index is invalid"),null):this.ja[a]};d.prototype.EYd=function(a){if(a>this.ja.length-1||0>a)return hb("The index is invalid"),null;this.ja.splice(a,1);return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXZWxsQXJyYXkiOiJwJGIiLCJnZXRPcHRpb25zIjoidGEiLCJhZGRXZWxsIjoieURjIiwiZ2V0V2VsbCI6Im8kYiIsInJlbW92ZVdlbGwiOiJFWWQifX19");var KC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}L(d,"geotoolkit3d.util.well.CylinderLog");d.je=function(){d.Nsa=new Float32Array(d.Lka*d.bea*2);d.lCa=new Float32Array(d.Lka*d.bea*3);var a,b,c;for(b=a=0;b<d.Lka;++b)for(d.Nsa[a++]=1,d.Nsa[a++]=0,c=1;c<d.bea;c++)d.Nsa[a++]=Math.cos(2*c*Math.PI/d.bea),d.Nsa[a++]=Math.sin(2*c*Math.PI/d.bea);for(b=a=0;b<d.Lka;++b){var e=b/(d.Lka-1);c=(1-e)*(1-e);var f=2*e*(1-e),g=e*e;for(e=0;e<d.bea;e++)d.lCa[a++]=c,d.lCa[a++]=f,d.lCa[a++]=g}};d.bea=-1;d.Lka=-1;d.Nsa=null;d.lCa=null;d.s2c=
function(a,b){if(3>a)throw Error("cornerCount must be at least 3");if(2>b)throw Error("diskCount must be at least 2");d.Nsa=null;d.lCa=null;d.bea=a;d.Lka=b};d.vCd=function(){null==d.Nsa&&d.je();return d.Nsa};d.aCd=function(){null==d.lCa&&d.je();return d.lCa};d.s2c(12,3);return d}(),2,"eyJzZXRDeWxpbmRlclByZWNpc2lvbiI6InMyYyJ9");var LC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){Aq.call(this);this.type="CylinderGeometry";a=xb(a,{data:{values:[1],valuesnullvalue:-999.25,radiusnullvalue:-999.25}});this.lrd=function(){var b=KC.bea,c=KC.Lka,e=this.getAttribute("position").count,f=e/(c*b),g=this.Ssb;if(null!=g){e=new Float32Array(e);var h,k,l,m=0;for(h=0;h<f;++h)for(k=0;k<c;++k)for(l=0;l<b;l++)e[m++]=g[h%g.length];this.setAttribute(Ty.Km,new zq(e,1))}}.bind(this);this.kya(a);this.setOptions(a)}D(d,Aq);L(d,"geotoolkit3d.scene.well.CylinderLogGeometry");
d.prototype.kya=function(a){var b=KC.bea,c=KC.Lka,e=a.data.x,f=a.data.y,g=a.data.z;a=g.length;var h=a*c*b,k=new Float32Array(3*h),l=new Float32Array(2*h),m=new Float32Array(3*h),n=new Float32Array(3*h);h=new Float32Array(3*h);var p,q,r,t;for(q=p=0;q<a;++q)for(r=0;r<c;++r)for(t=0;t<b;t++)k[p++]=e[q],k[p++]=f[q],k[p++]=g[q];r=KC.vCd();for(q=p=0;q<a;++q)l.set(r,p),p+=r.length;p=0;var u=e[1]-e[0],w=f[1]-f[0],y=g[1]-g[0];for(r=0;r<c;++r)for(t=0;t<b;t++)m[p++]=u,m[p++]=w,m[p++]=y;for(q=1;q<a;++q)for(u=
e[q]-e[q-1],w=f[q]-f[q-1],y=g[q]-g[q-1],r=0;r<c;++r)for(t=0;t<b;t++)m[p++]=u,m[p++]=w,m[p++]=y;for(q=p=0;q<a-1;++q)for(r=0;r<c;++r)for(t=0;t<b;t++)n[p++]=e[q+1]-e[q],n[p++]=f[q+1]-f[q],n[p++]=g[q+1]-g[q];for(r=0;r<c;++r)for(t=0;t<b;t++)n[p++]=e[a-1]-e[a-2],n[p++]=f[a-1]-f[a-2],n[p++]=g[a-1]-g[a-2];for(r=p=0;r<c;++r)for(t=0;t<b;t++)h[p++]=0,h[p++]=1,h[p++]=0;e=KC.aCd();for(q=1;q<a-1;++q)h.set(e,p),p+=e.length;for(r=0;r<c;++r)for(t=0;t<b;t++)h[p++]=0,h[p++]=1,h[p++]=0;this.setAttribute("position",new zq(k,
3));this.setAttribute("cgangle",new zq(l,2));this.setAttribute(hC.XCa,new zq(m,3));this.setAttribute(hC.TCa,new zq(n,3));this.setAttribute("cgweight",new zq(h,3))};d.prototype.sBd=function(a){var b=KC.bea,c=KC.Lka,e=a.data.radius,f=a.data.radiusdatamin,g=a.data.radiusdatamax,h=a.data.radiusnullvalue,k=a.data.values;var l=a.data.valuesnullvalue;var m=0,n=-1,p=[],q=[];for(a=0;a<e.length;a++){var r=k[a%k.length]!==l&&!isNaN(k[a%k.length]),t=e[a]!==h&&!isNaN(e[a]);t&&r?(0===m&&(n=a),m++):(1<m&&(q.push(m),
p.push(n)),m=0)}1<m&&(q.push(m),p.push(n));k=[];for(n=0;n<p.length;n++)for(r=(q[n]-2)*c+2,m=p[n]*b*c+(c-1)*b,a=0;a<r-1;){t=a+1;for(l=0;l<b-1;l++)k.push(m+b*a+l),k.push(m+b*t+l),k.push(m+b*a+l+1),k.push(m+b*a+l+1),k.push(m+b*t+l+1),k.push(m+b*t+l);k.push(m+b*a+l);k.push(m+b*t+l);k.push(m+b*a);k.push(m+b*a);k.push(m+b*t);k.push(m+b*t+l);a=t}a=this.getAttribute("position").count;p=a/(c*b);e=Wy.rca(e,null,null,f,g,h,0);f=new Float32Array(a);for(a=m=0;a<p;++a)for(l=0;l<c;++l)for(g=0;g<b;g++)f[m++]=e[a];
this.setIndex(new zq(new Uint32Array(k),1));this.setAttribute(hC.ala,new zq(f,1))};d.prototype.setOptions=function(a){var b=!1,c=!1;a.data=G(a.data,{values:this.Ssb,valuesnullvalue:this.b0b,radius:this.Fc,radiusnullvalue:this.hYb});var e=G(a,{});null==a.data?a.data={}:b=(c=null!=a.data.x&&null!=a.data.y&&null!=a.data.z)||this.Ssb!==e.data.values||this.b0b!==e.data.valuesnullvalue||this.Fc!==e.data.radius||this.hYb!==e.data.radiusnullvalue;this.Ssb=e.data.values;this.b0b=e.data.valuesnullvalue;this.Fc=
e.data.radius;this.hYb=e.data.radiusnullvalue;c&&this.kya(e);b&&(this.sBd(e),this.lrd());return this};d.prototype.ta=function(){return{data:{values:this.Ssb,valuesnullvalue:this.b0b,radius:this.Fc,radiusnullvalue:this.hYb}}};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var MC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,b);this.vertexShader=a.sCa;this.fragmentShader=a.qka;this.type="CylinderLogMaterial";this.lights=!0;this.setOptions(b)}var a=iC;D(d,Oz);L(d,"geotoolkit3d.scene.well.CylinderLogMaterial");d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.C3d(this,b);return this};d.prototype.ta=function(){return xb(a.BId(this),Ty.kQc(this))};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");
oz.lw(MC.Pa(),mz);var NC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){fz.call(this);b=G(b,{radiusmin:5,radiusmax:10});"string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null,b.vertexcolors=b.vertexcolors||!1):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null,b.vertexcolors=b.vertexcolors||!1);this.Uea=new Zt(new LC(b),new MC(b));this.add(this.Uea);this.Vt=new Hp;this.setOptions(b)}function a(b,c){var e=Number.MAX_VALUE,f=-Number.MAX_VALUE,g;for(g=0;g<b.length;g++)isNaN(b[g])||
null==b[g]||b[g]===c||(e=Math.min(e,b[g]),f=Math.max(f,b[g]));return{min:e,max:f}}D(d,fz);L(d,"geotoolkit3d.scene.well.CylinderLog");d.prototype.setOptions=function(b){if(null==b)return this;fz.prototype.setOptions.call(this,b);var c=G(b,{radiuslogmin:this.gYb,radiuslogmax:this.fYb});if(null!=b.data&&null!=b.data.radius){var e=b.data.radius;b=b.data.radiusnullvalue;e=a(e,b);this.HM=e.max;this.tC=e.min}if(isNaN(+c.radiuslogmin)||null==c.radiuslogmin)c.radiuslogmin=this.tC;if(isNaN(+c.radiuslogmax)||
null==c.radiuslogmax)c.radiuslogmax=this.HM;this.gYb=+c.radiuslogmin;this.fYb=+c.radiuslogmax;b=this.HM-this.tC;0===b?(e=0,b=1):(e=(this.gYb-this.tC)/b,b=(this.fYb-this.tC)/b);c.radiuslogmin=e;c.radiuslogmax=b;"string"===typeof c.colorprovider?(c.color=new Pq(c.colorprovider),c.colorprovider=null):c.colorprovider instanceof Pq?(c.color=c.colorprovider,c.colorprovider=null):null==c.color&&null!=c.colorprovider&&(c.color=new Pq(16777215));this.Uea.geometry.setOptions(c);this.Uea.material.setOptions(c);
this.gg();return this};d.prototype.ta=function(){var b=xb(this.Uea.geometry.ta(),this.Uea.material.ta());b.radiuslogmin=this.gYb;b.radiuslogmax=this.fYb;return xb(b,fz.prototype.ta.call(this))};d.prototype.ui=function(b,c,e,f){fz.prototype.ui.call(this,b,c,e,f);b=e.aT().scale;this.Vt.equals(b)||hC.sYa(this.Uea.material).normscale.set(1/b.x,0,0,0,1/b.y,0,0,0,1/b.z);this.Vt.copy(b)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJ1aSJ9fX0g");var OC=/*#__PURE__*/ta(/*#__PURE__*/{FNb:0,ix:1},2,"eyJNaXJyb3IiOiJGTmIiLCJSZWd1bGFyIjoiaXgifSAg"),PC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e,f,g){for(;;){for(;e<f.length&&(b(f[e])||b(g[e%g.length]));)e++;if(e<f.length)if(e<f.length-1)if(b(f[e+1])||b(g[(e+1)%g.length]))e++;else break;else{e++;break}else break}return e}function a(e,f,g){return e[f-1]+(e[f]-e[f-1])*g}function b(e){return isNaN(e)||!isFinite(e)}function c(){}c.mhd=OC;c.yPc=function(e,f){if(null==e)return{min:0,max:1};if(!Array.isArray(e))return{min:Math.min(e,f),max:Math.max(e,f)};for(var g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,
k=0;k<e.length;k++)g=Math.min(g,e[k],f[k]),h=Math.max(h,e[k],f[k]);return{min:g,max:h}};c.I2b=function(e,f,g,h,k,l){Array.isArray(e)||(e=null==e?[1]:[e]);Array.isArray(f)||(f=null==f?e:[f]);e=c.OSd(e,f,g,h,k,l);return{w:e.uKb,h:e.vKb}};c.X2b=function(e,f,g,h,k,l){e=f.length/3+h;for(f=0;f<l;f++){h=f+e-l;k=(f+1)%l+e-l;var m=f+e-2*l,n=(f+1)%l+e-2*l;g.push(m,h,k);g.push(m,k,n)}};c.OSd=function(e,f,g,h,k,l){var m=0;if(null==k||null==l){k=Number.MAX_VALUE;for(l=-Number.MAX_VALUE;m<e.length;m++)k=Math.min(k,
e[m]),l=Math.max(l,e[m]),k=Math.min(k,f[m]),l=Math.max(l,f[m]);if(l===k)return{uKb:[h],vKb:[h]}}e=e.slice();f=f.slice();for(m=0;m<e.length;m++)e[m]=g+(e[m]-k)/(l-k)*(h-g),f[m]=g+(f[m]-k)/(l-k)*(h-g);return{uKb:e,vKb:f}};c.Z2b=function(e){var f=new Nw;f.moveTo(0,0);var g=Xg.zJa(0,0,1,1),h=g[0];f.moveTo(h.mqa(),h.pqa());for(var k=0;k<g.length;++k)h=g[k],f.bezierCurveTo(h.nqa(),h.qqa(),h.oqa(),h.rqa(),h.zia(),h.Aia());f.closePath();return f.extractPoints(e).shape};c.GZd=function(){var e=new gy,f=new gy,
g=new gy,h=new gy,k=.001;return function(l,m,n,p,q,r,t,u,w,y,z){l=Wy.rca(l,0,1,p,q,t);m=Wy.rca(m,0,1,p,q,u);t=W.sign(m[0]-l[0]);p=n.length===w.length;q=.5;for(r=0;r<l.length;r++){var x=m[r],C=l[r];b(C)||b(x)||b(n[r%n.length])?(null!=t&&(t=null,p&&n.splice(r,0,a(n,r,k)),w.splice(r,0,a(w,r,k)),y.splice(r,0,a(y,r,k)),z.splice(r,0,a(z,r,k)),m.splice(r,0,q),l.splice(r,0,q),r++),u=d(r+1,l,n),x=d(r+1,m,n),u=Math.max(u,x),u<l.length&&(w.splice(u,0,a(w,u+1,-k)),y.splice(u,0,a(y,u+1,-k)),z.splice(u,0,a(z,u+
1,-k)),l.splice(u,0,q),m.splice(u,0,q),p&&n.splice(r,0,a(n,u+1,-k))),w.splice(r,u-r),y.splice(r,u-r),z.splice(r,u-r),l.splice(r,u-r),m.splice(r,u-r),p&&n.splice(r,u-r)):null==t?t=W.sign(x-C):(u=W.sign(x-C),u!==t&&0!==u&&0!==t&&(e.set(l[r-1],z[r-1]),f.set(C,z[r]),g.set(m[r-1],z[r-1]),h.set(x,z[r]),t=Wy.intersect(e,f,g,h),x=e.distanceTo(t)/f.distanceTo(e),p&&n.splice(r,0,n[r-1]+(n[r]-n[r-1])*x),w.splice(r,0,w[r-1]+(w[r]-w[r-1])*x),y.splice(r,0,y[r-1]+(y[r]-y[r-1])*x),z.splice(r,0,z[r-1]+(z[r]-z[r-1])*
x),m.splice(r,0,t.x),l.splice(r,0,t.x)),t=u)}return{uKb:l,vKb:m}}}();c.X_c=function(){var e=new gy,f=new gy,g=new gy,h=new gy,k=.001;return function(l,m,n,p,q,r,t,u,w,y){l=p<=q?Wy.rca(l,0,1,p,q,t):Wy.rca(l,1,0,q,p,t);p=n.length===u.length;t=null;for(q=0;q<l.length;q++){var z=l[q];b(z)||b(n[q%n.length])?(null!=t&&(t=null,l[q-1]!==m&&(p&&n.splice(q,0,a(n,q,k)),u.splice(q,0,a(u,q,k)),w.splice(q,0,a(w,q,k)),y.splice(q,0,a(y,q,k)),l.splice(q,0,m),q++)),r=d(q+1,l,n),r<l.length&&l[r]!==m&&(u.splice(r,0,
a(u,r+1,-k)),w.splice(r,0,a(w,r+1,-k)),y.splice(r,0,a(y,r+1,-k)),l.splice(r,0,m),p&&n.splice(q,0,a(n,r+1,-k))),u.splice(q,r-q),w.splice(q,r-q),y.splice(q,r-q),l.splice(q,r-q),p&&n.splice(q,r-q)):null==t?t=W.sign(m-z):(r=W.sign(m-z),r!==t&&0!==r&&0!==t&&(e.set(l[q-1],y[q-1]),f.set(z,y[q]),g.set(m,y[q-1]),h.set(m,y[q]),t=Wy.intersect(e,f,g,h),z=e.distanceTo(t)/f.distanceTo(e),u.splice(q,0,a(u,q,z)),w.splice(q,0,a(w,q,z)),y.splice(q,0,a(y,q,z)),l.splice(q,0,t.x),p&&n.splice(q,0,a(n,q,z))),t=r)}return l}}();
c.qGc=function(e,f,g,h,k,l){for(l=l?l:0;l<h.length-1&&!(h[l]<=e&&e<=h[l+1]);++l);var m=h[l];h=h[l+1];h=(e-m)/(h-m);f=(1-h)*f[l]+h*f[l+1];g=(1-h)*g[l]+h*g[l+1];k=(1-h)*k[l]+h*k[l+1];return(new Ip).set(f,g,k,e)};c.FZd=function(e,f,g,h,k,l){var m=[],n=[],p=[],q=[],r=[],t=0,u=0;if(e[e.length-1]>=k[0]){for(;t<e.length&&e[t]<k[0];)++t;for(;k[u]<e[t];)p.push(g[u]),q.push(h[u]),n.push(l[u]),m.push(k[u]),r.push(Number.NaN),++u;for(var w=k[k.length-1],y;t<e.length&&e[t]<=w;++t)y=e[t],null==k[u]||isNaN(k[u])||
null==y||isNaN(y)||(y<=k[u]?(y=c.qGc(y,g,h,k,l,u-1),p.push(y.x),q.push(y.y),n.push(y.z),m.push(y.w),r.push(f[t])):(++u,--t));for(;u<k.length;++u)p.push(g[u]),q.push(h[u]),n.push(l[u]),m.push(k[u]),r.push(Number.NaN)}m.length!==r.length&&rb("Re-sampling Error!");return{x:p,y:q,tvds:n,mds:m,values:r}};return c}(),2,"eyJjb21wdXRlTGluZWFySW50ZXJwb2xhdGlvblRyYWplY3RvcnlQb2ludCI6InFHYyIsInJlc2FtcGxlTGluZWFyIjoiRlpkIn0g");var QC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Aq.call(this);this.type="DynamicTubeGeometry";b=G(b,{radiusmin:0,radiusmax:1,tubeprecision:3,openended:!1,startbuffersize:1E3,bufferresizefactor:.1});this.$Pa=b.startbuffersize;this.ja={};this.ja.vn=[];this.ja.Xy=[];this.ja.Xi=[];this.ja.values=[];this.ja.Yz=[];this.ja.GE=[];this.ja.bM=[];this.v9=0;this.setOptions(b)}var a=new Xt;D(d,Aq);L(d,"geotoolkit3d.scene.well.DynamicTubeGeometry");d.prototype.setOptions=function(b){b=G(b,{radiusmin:this.QK,radiusmax:this.nQ,
axismin:this.vob,axismax:this.uob,tubeprecision:this.lE,openended:this.IF,bufferresizefactor:this.Hob});this.Hob=b.bufferresizefactor;var c=b.radiusmin!==this.QK||this.nQ!==b.radiusmax||this.lE!==b.tubeprecision||this.IF!==b.openended||this.vob!==b.axismin||this.uob!==b.axismax;if(!c)return this;this.QK=b.radiusmin;this.nQ=b.radiusmax;this.vob=b.axismin;this.uob=b.axismax;this.lE!==b.tubeprecision&&(this.lE=b.tubeprecision,this.rub=PC.Z2b(this.lE));this.IF=b.openended;this.v9=0;this.Oab([],[],[]);
return this};d.prototype.ta=function(){return{radiusmin:this.QK,radiusmax:this.nQ,axismin:this.vob,axismax:this.uob,tubeprecision:this.lE,openended:this.IF,bufferresizefactor:this.Hob}};d.prototype.NGb=function(){this.LRa.fill(0);this.a$.needsUpdate=!0;this.ja.vn=[];this.ja.Xy=[];this.ja.Xi=[];this.ja.values=[];this.ja.Yz=[];this.ja.GE=[];this.ja.bM=[];this.v9=0;return this};d.prototype.getData=function(){var b={};b.xs=this.ja.vn.slice();b.ys=this.ja.Xy.slice();b.zs=this.ja.Xi.slice();b.values=this.ja.values.slice();
b.widths=this.ja.Yz.slice();b.heights=this.ja.GE.slice();b.rolls=this.ja.bM.slice();return b};d.prototype.BHc=function(){var b=this.rub.length-1,c=this.$Pa*b+(this.IF?0:2),e=(this.$Pa-1)*b*2+(this.IF?0:2*b);if(null==this.QHa)this.QHa=new Float32Array(3*c),this.LRa=new Uint32Array(3*e),this.fab=new Float32Array(c),this.v8a=new Float32Array(3*c),this.i0b=(new zq(this.QHa,3)).setUsage(Kr),this.a$=(new zq(this.LRa,1)).setUsage(Kr),this.Ur=(new zq(this.v8a,3)).setUsage(Kr),this.IQb=(new zq(this.fab,1)).setUsage(Kr);
else{this.dispose();b=new Float32Array(3*c);e=new Uint32Array(3*e);var f=new Float32Array(c);c=new Float32Array(3*c);b.set(this.QHa);e.set(this.LRa);f.set(this.fab);c.set(this.v8a);this.QHa=b;this.LRa=e;this.fab=f;this.v8a=c;this.i0b.aBa(this.QHa);this.a$.aBa(this.LRa);this.Ur.aBa(this.v8a);this.IQb.aBa(this.fab)}};d.prototype.FNd=function(b){null==this.QHa?(b>this.$Pa&&(this.$Pa=Math.floor(b*(1+this.Hob))),this.BHc(),this.setAttribute("position",this.i0b),this.setIndex(this.a$),this.setAttribute("normal",
this.Ur),this.setAttribute(Ty.Km,this.IQb)):(b<=this.$Pa||(this.$Pa=Math.floor(b*(1+this.Hob)),this.BHc()),this.i0b.needsUpdate=!0,this.a$.needsUpdate=!0,this.Ur.needsUpdate=!0,this.IQb.needsUpdate=!0)};d.prototype.Oab=function(b,c,e,f,g,h,k){if(null==b||null==c||null==e)return this;null==f&&(f=[]);null==g&&(g=[]);null==h&&(h=[]);null==k&&(k=[]);var l=b,m=c,n=e,p=f,q=g,r=h,t=k,u=null;0<this.v9&&(u=new Hp(this.ja.vn[this.ja.vn.length-1],this.ja.Xy[this.ja.Xy.length-1],this.ja.Xi[this.ja.Xi.length-
1]));this.v9!==this.ja.vn.length&&(l=this.ja.vn,m=this.ja.Xy,n=this.ja.Xi,p=this.ja.values,q=this.ja.Yz,r=this.ja.GE,t=this.ja.bM);for(var w=0;w<b.length;w++)this.ja.vn.push(b[w]),this.ja.Xy.push(c[w]),this.ja.Xi.push(e[w]),null!=f&&this.ja.values.push(null!=f[w]?k[w]:Number.NaN),null!=g&&this.ja.Yz.push(g[w]),null!=h&&this.ja.GE.push(h[w]),null!=k&&this.ja.bM.push(null!=k[w]?k[w]:0);if(null==u&&2>l.length)return this;b=[];w=PC.I2b(q,r,this.QK,this.nQ,this.vob,this.uob);f=w.w;g=w.h;for(w=0;w<l.length;w++)b.push(new Hp(l[w],
m[w],n[w]));l=[];m=[];n=[];q=[];h=this.rub.length;r=h-1;c=this.v9*r+(this.IF?0:1);e=(this.v9-1)*r*2+(this.IF?0:r);0===this.v9&&(e=c=0);k=new Hp(1,1,1);var y=0,z=new Hp(0,0,-1),x=new Hp,C=x.clone(),A=x.clone(),v=b.length;w=1;if(!this.IF&&0===this.v9){var B=0;l.push(b[0].x,b[0].y,b[0].z);var E=b[0].clone().sub(b[1]).normalize();m.push(E.x,E.y,E.z);E=null!=p?p[0]:Number.NaN;q.push(E);for(E=0;E<r;E++)n.push(B,w+E,w+(E+1)%r)}for(w=0;w<v;w++)if(!(0<w&&b[w].equals(b[w-1]))){k.x=2*f[w%f.length];k.y=2*g[w%
g.length];B=!1;0===k.x&&0===k.y&&(k.x=1,k.y=1,B=!0);null!=t[Math.min(w,v-1)]&&(y=t[Math.min(w,v-1)]);E=0<w?C.copy(b[w]).sub(b[w-1]).normalize():null!=u?C.copy(b[w]).sub(u).normalize():C.copy(b[w+1]).sub(b[w]).normalize();a.lookAt(x,E,A.set(-E.y,-E.z,0));for(E=1;E<h;E++){C.set(this.rub[E].x,this.rub[E].y,0);C.multiply(k);C.applyAxisAngle(z,y);C.applyMatrix4(a);C.add(b[w]);B?l.push(b[w].x,b[w].y,b[w].z):l.push(C.x,C.y,C.z);C.sub(b[w]).normalize();m.push(C.x,C.y,C.z);var H=p&&null!=p[w]?p[w]:Number.NaN;
q.push(H)}(0<w||null!=u)&&PC.X2b(this,l,n,c,v,r)}if(!this.IF)for(w=l.length/3-1+c,t=l.length/3+c,l.push(b[b.length-1].x,b[b.length-1].y,b[b.length-1].z),u=2>b.length?u:b[b.length-2],u=b[b.length-1].clone().sub(u).normalize(),m.push(u.x,u.y,u.z),p=p&&null!=p[w]?p[w]:Number.NaN,q.push(p),w-=r-1,E=0;E<r;E++)n.push(t,w+(E+1)%r,w+E);this.v9+=b.length;this.boundingSphere=this.boundingBox=null;this.FNd(this.v9);this.QHa.set(l,3*c);this.LRa.set(n,3*e);this.v8a.set(m,3*c);this.fab.set(q,c);this.computeBoundingBox();
return this};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyZXNldERhdGEiOiJOR2IiLCJhZGRHZW9tZXRyeSI6Ik9hYiJ9fX0g");var RC=/*#__PURE__*/function(){function d(a){Oz.call(this,{});this.type="DynamicTubeMaterial";a=G(a,{opacity:.85,transparent:!0,color:new Pq("blue"),name:"well"},!0);this.setOptions(a)}D(d,Oz);L(d,"geotoolkit3d.scene.well.DynamicTubeMaterial");return d}();var SC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.Jd=new Zt(new QC(a),new RC(a));this.add(this.Jd)}D(d,fz);L(d,"geotoolkit3d.scene.well.DynamicTube");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);this.Jd.geometry.setOptions(a);this.Jd.material.setOptions(a);return this};d.prototype.ta=function(){return xb(xb(this.Jd.geometry.ta(),this.Jd.material.ta()),fz.prototype.ta.call(this))};d.prototype.NGb=function(){this.Jd.geometry.NGb();return this};d.prototype.getData=
function(){return this.Jd.geometry.getData()};d.prototype.Oab=function(a,b,c,e,f,g,h){this.Jd.geometry.Oab(a,b,c,e,f,g,h);return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyZXNldERhdGEiOiJOR2IiLCJhZGRHZW9tZXRyeSI6Ik9hYiJ9fX0g");var TC=/*#__PURE__*/function(){function d(c){Aq.call(this);this.type="LineGeometry";c=G(c,{colorprovider:"blue"});this.ja=c.data;this.ja.vn=c.data.x;this.ja.Xy=c.data.y;this.ja.Xi=c.data.z;this.ja.values=c.data.values;Array.isArray(this.ja.values)||(this.ja.values=null==this.ja.values?[0]:[this.ja.values]);for(var e=Array(3*this.ja.vn.length),f=0;f<this.ja.vn.length;f++){var g=3*f;e[g]=this.ja.vn[f];e[g+1]=this.ja.Xy[f];e[g+2]=this.ja.Xi[f]}this.xla=new zq(new Float32Array(3*this.ja.vn.length),3);this.F4c(c.colorprovider);
this.setAttribute("color",this.xla);this.setAttribute("position",new zq(new Float32Array(e),3));e=c.data.values;c=Array.isArray(e)?Wy.rca(e,0,1,this.tC,this.HM,c.data.nullvalue,Ty.bnb):[e];e=new Float32Array(3*this.ja.vn.length);f=new Float32Array(3*this.ja.vn.length);g=new Float32Array(this.ja.vn.length);if(0<this.ja.vn.length){var h=function(l,m){return new Hp(this.ja.vn[l]-this.ja.vn[m],this.ja.Xy[l]-this.ja.Xy[m],this.ja.Xi[l]-this.ja.Xi[m])}.bind(this);e.set(h(0,1).toArray(),0);f.set(h(0,1).toArray(),
0);g[0]=c[0];var k;for(k=1;k<this.ja.vn.length-1;k++)e.set(h(k-1,k).toArray(),3*k),f.set(h(k,k+1).toArray(),3*k),g[k]=c[k%c.length];e.set(h(this.ja.vn.length-2,this.ja.vn.length-1).toArray(),3*(this.ja.vn.length-1));f.set(h(this.ja.vn.length-2,this.ja.vn.length-1).toArray(),3*(this.ja.vn.length-1));g[k]=c[c.length-1]}this.setAttribute(hC.XCa,new zq(e,3));this.setAttribute(hC.TCa,new zq(f,3));this.setAttribute(hC.ala,new zq(g,1))}var a=new Hp,b=new Hp;D(d,Aq);L(d,"geotoolkit3d.scene.well.LineGeometry");
d.prototype.F4c=function(c){var e=c instanceof Mo,f,g=this.xla.array;e||(f=(new Pq(c)).toArray());for(var h=0;h<this.ja.vn.length;h++){var k=3*h;e&&(f=c.mb(this.ja.values[h%this.ja.values.length]),f=[f.Xj()/255,f.Wj()/255,f.Vj()/255]);g[k]=f[0];g[k+1]=f[1];g[k+2]=f[2]}this.xla.needsUpdate=!0};d.prototype.setOptions=function(c){if(null==c)return this;c.hasOwnProperty("colorprovider")&&this.F4c(c.colorprovider);return this};d.prototype.cAb=function(c){this.qI||this.lV((this.ja.Xi[this.ja.Xi.length-
1]+this.ja.Xi[0])/2,c);return this.qI};d.prototype.lV=function(c,e){this.Dg||(this.Dg=e);this.Dg.equals(e)||this.Dg.copy(e);this.gv=this.gv||new Hp;this.qI=this.qI||new Ur;e=W.findIndex(c,this.ja.Xi,null,null,function(f,g){return g-f})||1;0>e&&(e=~e);a.set(this.ja.vn[e-1],this.ja.Xy[e-1],this.ja.Xi[e-1]);b.set(this.ja.vn[e],this.ja.Xy[e],this.ja.Xi[e]);c=(c-this.ja.Xi[e-1])/(this.ja.Xi[e]-this.ja.Xi[e-1]);this.gv.copy(b).sub(a).multiplyScalar(c).add(a);a.multiply(this.Dg);a.multiply(this.Dg);b.multiply(this.Dg);
b.multiply(this.Dg);b.sub(a).normalize();a.set(-1,0,0);a.crossVectors(b,a).normalize();this.qI=Wy.scb(a,b,this.qI);return this};d.prototype.Gy=function(c){this.gv||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/2,c);return this.gv};d.prototype.dispose=function(){this.xla=null;Aq.prototype.dispose.call(this)};return d}();var UC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e){Aq.call(this);this.type="LogArrayGeometry";var f=G(e,{});this.YTa=e.data.logarray[0].length;var g=b(this.YTa/4).slice(1,this.YTa+1);g=g.map(function(q,r,t){return t[(r+t.length/4)%t.length]});this.CXb=e.data.path.x.length;for(var h=[],k=[],l=0;l<this.CXb;l++){for(var m=0;m<this.YTa;m++)h.push(g[m].x,g[m].y,0);1<=l&&a(h,k,this.YTa)}g=new Float32Array(h);l=new Float32Array(h);m=new Float32Array(h);var n=new Float32Array(h.length),p=null;this.setAttribute("position",new zq(g,
3));this.setIndex(new zq(new Uint32Array(k),1));this.setAttribute(c.rNb,new zq(l,3));this.setAttribute(c.qNb,new zq(m,3));this.setAttribute(c.pNb,new zq(n,1));null!=e.data.values&&(p=new Float32Array(h.length),this.setAttribute(Ty.Km,new zq(p,1)));this.boundingBox=new uq;this.lh(f)}function a(e,f,g){e=e.length/3;for(var h=0;h<g;h++){var k=h+e-g,l=(h+1)%g+e-g,m=h+e-2*g,n=(h+1)%g+e-2*g;f.push(m,k,l);f.push(m,l,n)}}function b(e){var f=new Nw;f.moveTo(0,0);var g=Xg.zJa(0,0,1,1),h=g[0];f.moveTo(h.mqa(),
h.pqa());for(var k=0;k<g.length;++k)h=g[k],f.bezierCurveTo(h.nqa(),h.qqa(),h.oqa(),h.rqa(),h.zia(),h.Aia());f.closePath();return f.extractPoints(e).shape}var c=lC;D(d,Aq);L(d,"geotoolkit3d.scene.well.logarray.LogArrayGeometry");d.prototype.lh=function(e){if(null!=e.data){e=e.data;var f=e.path,g=f.x,h=f.y;f=f.z;var k=new Hp;if(this.CXb!==g.length)throw Error("Changing sample count in LogArray is not supported.");var l=this.boundingBox.min,m=this.boundingBox.max;l.set(Number.MAX_VALUE,Number.MAX_VALUE,
Number.MAX_VALUE);m.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);var n=this.getAttribute(c.rNb),p=this.getAttribute(c.qNb),q=this.getAttribute(c.pNb),r=null;null!=this.getAttribute(Ty.Km)&&(r=this.getAttribute(Ty.Km));for(var t=0;t<this.CXb;t++){var u=g[t],w=h[t],y=f[t];0<t?k.set(u-g[t-1],w-h[t-1],y-f[t-1]).normalize():k.set(g[t+1]-u,h[t+1]-w,f[t+1]-y).normalize();for(var z=0;z<this.YTa;z++){var x=t*this.YTa+z;n.setXYZ(x,u,w,y);p.setXYZ(x,k.x,k.y,k.z);q.setX(x,e.logarray[t][z]);null!=
r&&r.setX(x,e.values[t][z])}l.set(Math.min(l.x,u),Math.min(l.y,w),Math.min(l.z,y));m.set(Math.max(m.x,u),Math.max(m.y,w),Math.max(m.z,y))}this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere);this.getAttribute(c.rNb).needsUpdate=!0;this.getAttribute(c.qNb).needsUpdate=!0;this.getAttribute(c.pNb).needsUpdate=!0;null!=this.getAttribute(Ty.Km)&&(this.getAttribute(Ty.Km).needsUpdate=!0)}return this};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVHZW9tZXRyeSI6ImxoIn19fSAg");var VC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){b=G(b,{side:Fr,referencemode:kC.SOb},!0);Oz.call(this,b);this.type="LogArrayMaterial";this.vertexShader=a.Hka;this.fragmentShader=a.e3a;this.setOptions(b)}var a=lC;D(d,Oz);L(d,"geotoolkit3d.scene.well.logarray.LogArrayMaterial");d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.F3d(this,b);return this};d.prototype.ta=function(){return xb(a.FId(this),Oz.prototype.ta.call(this))};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(VC.Pa(),mz);var WC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{colorprovider:new Pq("red"),radiusmin:10,radiusdelta:10,logarraynullvalue:-999.25,colornullvalue:-999.25});"string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1);this.F7a=new Zt(new UC(a),new VC(a));this.add(this.F7a);this.Vt=new Hp;this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.well.logarray.LogArray");
d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);a=G(a,{});"string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1):null===a.color&&null!==a.colorprovider?(a.color=new Pq(16777215),a.vertexcolors=a.vertexcolors||!1):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1);this.F7a.geometry.lh(a);this.F7a.material.setOptions(a);this.gg();
return this};d.prototype.ta=function(){return xb(this.F7a.material.ta(),fz.prototype.ta.call(this))};d.prototype.ui=function(a,b,c,e){fz.prototype.ui.call(this,a,b,c,e);a=c.aT().scale;this.Vt.equals(a)||hC.sYa(this.F7a.material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Vt.copy(a)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var XC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){var c=b.data.values;c=Array.isArray(c)?W.Ol(c,void 0,b.data.nullvalue):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];b=G(b,{radius:1,opacity:1,offset:1,offsetmode:OC.FNb,curvemin:c[0],curvemax:c[1]});b.color===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.color in LogCurve2D constructor"),b.color=null);Lw.call(this,{vertexColors:null==b.color,vertexShader:a.kgd,fragmentShader:a.jgd});this.tC=c[0];this.HM=c[1];isNaN(b.curvemin)&&(b.curvemin=
this.tC);isNaN(b.curvemax)&&(b.curvemax=this.HM);this.type="LogCurve2DMaterial";this.setOptions(b)}var a=mC;D(d,Lw);L(d,"geotoolkit3d.scene.well.LogCurve2DMaterial");d.prototype.setOptions=function(b){b=G(b,this.ta());b.normalizedcurvemin=this.YPc(b.curvemin);b.normalizedcurvemax=this.YPc(b.curvemax);hC.I5c(this,b);a.E3d(this,b);return this};d.prototype.ta=function(){var b=hC.lQc(this);b.curvemin=this.KKc(b.normalizedcurvemin);b.curvemax=this.KKc(b.normalizedcurvemax);return G(b,a.EId(this))};d.prototype.YPc=
function(b){return(b-this.tC)/(this.HM-this.tC)};d.prototype.KKc=function(b){return(b+this.tC)*(this.HM-this.tC)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(XC.Pa(),mz);var YC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.type="LogCurve2D";a=G(a,{colorprovider:"red",color:a.colorprovider||"red",radius:1,offset:1});"string"===typeof a.color&&(a.color=new Pq(a.color));this.Tj=new rt(new TC(a),new XC(a));this.add(this.Tj)}D(d,fz);L(d,"geotoolkit3d.scene.well.LogCurve2D");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);a=G(a,{color:a.colorprovider});"string"===typeof a.color&&(a.color=new Pq(a.color));if(null!=a.data){var b=
this.Tj.material;if(null!=a.data.x&&null!=a.data.y&&null!=a.data.z){this.Tj.geometry.dispose();var c=new TC(a);null!=a.data.values&&(b=this.Tj.material.ta(),hz.ucb(this.Tj.material),b=new XC(G(a,b)));this.remove(this.Tj);this.add(this.Tj=new rt(c,b))}}this.Tj.material.setOptions(a);this.gg();return this};d.prototype.ta=function(){return xb(this.Tj.material.ta(),fz.prototype.ta.call(this))};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var ZC=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Aq.call(this);this.type="LogFill2DGeometry";this.wI=null;this.Cb=[]}var a=new Pq;D(d,Aq);L(d,"geotoolkit3d.scene.well.LogFill2DGeometry");d.prototype.fkc=function(){var b=[],c=this.getAttribute("position");if(null!=c&&0!==this.Cb.length){c=this.getAttribute("position").count;var e=this.Cb,f,g;if(this.wI instanceof Mo)for(f=0;f<c;f++)(g=this.wI.mb(e[f%e.length]))?(g=a.setRGB(g.Xj()/255,g.Wj()/255,g.Vj()/255).toArray(),b.push(g[0],g[1],g[2],g[0],g[1],g[2])):b.push(null,
null,null,null,null,null);else for(g=a.set(this.wI).toArray(),f=0;f<c;f++)b.push(g[0],g[1],g[2],g[0],g[1],g[2]);c=this.getAttribute("color");null==c?this.setAttribute("color",new zq(new Float32Array(b),3)):(c.array=new Float32Array(b),c.needsUpdate=!0)}};d.prototype.kya=function(b){var c=b.x,e=b.y,f=b.z;if(!Array.isArray(c)||!Array.isArray(e)||!Array.isArray(f)||2>c.length||2>e.length||2>f.length)hb("LogFill2D: cannot be created due to insufficient data points");else{var g=b.colorvalues;Array.isArray(g)||
(g=null==g?[0]:[g]);this.Cb=g;g=[];for(var h=[],k=0;k<c.length;k++)if(g.push(c[k],e[k],f[k]),g.push(c[k],e[k],f[k]),1<=k){var l=2*k;h.push(l-2,l-1,l);h.push(l,l-1,l+1)}this.setAttribute("position",new zq(new Float32Array(g),3));this.setIndex(new zq(new Uint32Array(h),1));g=null!=b.curvevalues1?b.curvevalues1:0;b=null!=b.curvevalues2?b.curvevalues2:1;var m=Array.isArray(g)?g:[g],n=Array.isArray(b)?b:[b],p=[],q=[],r=[];b=[];var t=0<f[f.length-1]-f[0]?-1:1,u=function(y,z,x,C){var A=c[y]-c[z],v=e[y]-
e[z];y=Math.abs(f[y]-f[z])<W.Tb?t*W.Tb:f[y]-f[z];x.push(A,v,y);null!=C&&C.push(A,v,y)};g=function(y,z){var x=n[y%n.length],C=m[y%m.length],A=x>C?1:-1;x===C&&(y+=z,A=n[y%n.length]>m[y%m.length]?1:-1);return A};u(0,1,p,q);r.push(m[0]);b.push(g(0,-1));u(0,1,p,q);r.push(n[0]);b.push(g(0));h=function(y,z,x,C){u(y,z,p);u(z,x,q);r.push(C)};var w;for(w=1;w<c.length-1;w++)k=m[w%m.length],l=n[w%n.length],h(w-1,w,w+1,k),b.push(g(w,-1)),h(w-1,w,w+1,l),b.push(g(w,1));u(c.length-2,c.length-1,p,q);r.push(m[m.length-
1]);b.push(g(w,-1));u(c.length-2,c.length-1,p,q);r.push(n[n.length-1]);b.push(g(w,1));this.setAttribute(hC.ala,new zq(new Float32Array(r),1));this.setAttribute(hC.TCa,new zq(new Float32Array(q),3));this.setAttribute(hC.XCa,new zq(new Float32Array(p),3));this.setAttribute(nC.QCa,new zq(new Float32Array(b),1))}};d.prototype.setOptions=function(b){if(null==b)return this;b.hasOwnProperty("data")&&this.kya(b.data);b.hasOwnProperty("colorprovider")&&b.colorprovider!==this.wI&&(this.wI=b.colorprovider,this.fkc());
return this};d.prototype.ta=function(){return{colorprovider:this.wI}};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var $C=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){b=G(b,{});Lw.call(this,{vertexShader:a.igd,fragmentShader:a.hgd});this.type="LogFill2DMaterial";this.side=Fr;this.setOptions(b)}var a=nC;D(d,Lw);L(d,"geotoolkit3d.scene.well.LogFill2DMaterial");d.prototype.ta=function(){return xb(a.GId(this),hC.lQc(this))};d.prototype.setOptions=function(b){b=G(b,{});b.positivecolor===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.positivecolor in LogFill2D.setOptions"),b.positivecolor=null);b.negativecolor===
jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.negative in LogFill2D.setOptions"),b.negativecolor=null);this.vertexColors=null==b.positivecolor&&null==b.negativecolor;b.normalizedcurvemin=0;b.normalizedcurvemax=1;a.G3d(this,b);hC.I5c(this,b);return this};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw($C.Pa(),mz);var aD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.type="LogFill2D";a=G(a,{colorprovider:"blue",radius:1,opacity:1,offset:1,offsetmode:OC.FNb});this.jxb=[];this.nxb=[];this.sxb=[];this.owa={};this.jpb=[0];this.Sea=1;this.C9=0;this.y8a=this.x8a=this.lA=null;this.tC=Number.POSITIVE_INFINITY;this.HM=Number.NEGATIVE_INFINITY;this.bua=this.cua=null;this.Mr=new Zt(new ZC(a),new $C(a));this.add(this.Mr);this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.well.LogFill2D");d.prototype.setOptions=function(a){if(null==
a)return this;fz.prototype.setOptions.call(this,a);a=G(a,{});if(a.hasOwnProperty("data")){null!=a.data.values&&(hb("data.values for LogFill2D is deprecated in GeoToolkit 3.3. Use data.colorvalues instead."),a.data.colorvalues=a.data.values);null!=a.data.values1&&(hb("data.values1 for LogFill2D is deprecated in GeoToolkit 3.3. Use data.curvevalues1 instead."),a.data.curvevalues1=a.data.values1);null!=a.data.values2&&(hb("data.values2 for LogFill2D is deprecated in GeoToolkit 3.3. Use data.curvevalues2 instead."),
a.data.curvevalues2=a.data.values2);if(null!=a.data.colorvalues){var b=a.data.colorvalues;Array.isArray(b)?this.jpb=b.slice(0):this.jpb=[b]}this.jxb=a.data.x?a.data.x:this.jxb;this.nxb=a.data.y?a.data.y:this.nxb;this.sxb=a.data.z?a.data.z:this.sxb;this.Sea=a.data.curvevalues1?a.data.curvevalues1:this.C9;this.C9=a.data.curvevalues2?a.data.curvevalues2:this.C9;this.lA=a.data.nullvalue?a.data.nullvalue:this.lA;this.x8a=a.data.nullvalue1?a.data.nullvalue1:this.x8a;this.y8a=a.data.nullvalue2?a.data.nullvalue2:
this.y8a;b=Array.isArray(this.Sea)?W.Ol(this.Sea,void 0,this.x8a):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var c=Array.isArray(this.C9)?W.Ol(this.C9,void 0,this.y8a):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];this.tC=b[0]<=c[0]?b[0]:c[0];this.HM=b[1]>=c[1]?b[1]:c[1]}if(null==this.cua||null==this.bua||"number"===typeof a.curvemin&&"number"===typeof a.curvemax&&(this.cua!==a.curvemin||this.bua!==a.curvemax)){this.cua=null!=a.curvemin?a.curvemin:this.tC;this.bua=null!=a.curvemax?
a.curvemax:this.HM;b=this.jxb.slice(0);c=this.nxb.slice(0);var e=this.sxb.slice(0),f=this.jpb.slice(0);if(!Array.isArray(b)||!Array.isArray(c)||!Array.isArray(e)||2>b.length||2>c.length||2>e.length)return hb("LogFill2D: cannot be created due to insufficient data points"),this;if(Array.isArray(this.Sea)&&Array.isArray(this.C9)){var g=this.cua;var h=this.bua;this.cua===this.tC&&this.bua===this.HM&&(h=g=null);h=PC.GZd(this.Sea,this.C9,f,g,h,this.lA,this.x8a,this.y8a,b,c,e);g=h.uKb;h=h.vKb}else Array.isArray(this.Sea)?
(g=PC.X_c(this.Sea,this.C9,f,this.cua,this.bua,this.lA,this.x8a,b,c,e),h=this.C9):(g=this.Sea,h=PC.X_c(this.C9,this.Sea,f,this.cua,this.bua,this.lA,this.y8a,b,c,e));this.owa.x=b;this.owa.y=c;this.owa.z=e;this.owa.colorvalues=f;this.owa.curvevalues1=g;this.owa.curvevalues2=h}a.data=xb(this.owa,a.data);this.Mr.geometry.setOptions(a);this.Mr.material.setOptions(a);this.gg();return this};d.prototype.ta=function(){var a=xb(this.Mr.material.ta(),this.Mr.geometry.ta());a.curvemin=this.cua;a.curvemax=this.bua;
return xb(a,fz.prototype.ta.call(this))};d.prototype.dispose=function(){this.owa=this.jpb=this.C9=this.Sea=this.sxb=this.nxb=this.jxb=null;hz.dispose(this.Mr);fz.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var bD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e){Aq.call(this);this.type="TubeGeometry";this.Wb=e.size;e=G(e,{radiusmin:0,radiusmax:1,tubeprecision:3,openended:!1,usefrenet:!0});this.ja={};this.setOptions(e);this.Dg=this.T$=this.U$=this.gv=this.EM=this.qI=null}function a(e,f){var g=1,h=e-g;e+=g;0>h&&(h=0);e>=f.length&&(e=f.length-1);h=f[h];f=f[e];f=f.clone().sub(h);return f.normalize()}var b=new Hp,c=new Hp;D(d,Aq);L(d,"geotoolkit3d.scene.well.TubeGeometry");d.prototype.setOptions=function(e){var f=G(e,{radiusmin:this.QK,
radiusmax:this.nQ,tubeprecision:this.lE,openended:this.IF,size:this.Wb,usefrenet:this.X_b}),g=f.radiusmin!==this.QK||this.nQ!==f.radiusmax||this.lE!==f.tubeprecision||this.IF!==f.openended||null!=f.data;if(!g)return this.Wb!==f.size&&(this.Wb=f.size,this.EM&&this.EM.set(2*this.Wb,2*this.Wb,1),this.computeBoundingBox()),this;null!=f.data&&(e=G(e.data,{x:this.ja.vn,y:this.ja.Xy,z:this.ja.Xi,values:this.ja.values,widths:this.ja.Yz,heights:this.ja.GE,rolls:this.ja.bM}),this.ja.vn=e.x,this.ja.Xy=e.y,this.ja.Xi=
e.z,this.ja.values=e.values,this.ja.Yz=e.widths,this.ja.GE=e.heights,this.ja.bM=e.rolls);this.X_b=f.usefrenet;this.QK=f.radiusmin;this.nQ=f.radiusmax;this.lE=f.tubeprecision;this.IF=f.openended;this.Wb=f.size;f=[];e=PC.I2b(this.ja.Yz,this.ja.GE,this.QK,this.nQ);g=Array.isArray(this.ja.bM)?this.ja.bM:null==this.ja.bM?[0]:[this.ja.bM];for(var h=0;h<this.ja.vn.length;h++)f.push(new Hp(this.ja.vn[h],this.ja.Xy[h],this.ja.Xi[h]));this.X_b?this.f5b(f,e.w,e.h,g,this.lE,this.IF):this.kya(f,e.w,e.h,g,this.lE,
this.IF);this.ZK=[];this.Ur=[];this.iz=[];this.T$=this.U$=null;return this};d.prototype.ta=function(){return{radiusmin:this.QK,radiusmax:this.nQ,tubeprecision:this.lE,openended:this.IF,size:this.Wb,usefrenet:this.X_b,data:{x:this.ja.vn,y:this.ja.Xy,z:this.ja.Xi,values:this.ja.values,widths:this.ja.Yz,heights:this.ja.GE,rolls:this.ja.bM}}};d.prototype.kya=function(e,f,g,h,k,l){var m=[],n=[],p=[],q=[],r=PC.Z2b(k),t=r.length;k=t-1;for(var u=new Hp(1,1,1),w=new Xt,y=0,z=new Hp(0,0,-1),x=new Hp,C=x.clone(),
A=x.clone(),v=e.length,B=0;B<v;B++)if(!(0<B&&e[B].equals(e[B-1]))){u.x=2*f[B%f.length];u.y=2*g[B%g.length];var E=!1;0===u.x&&0===u.y&&(u.x=1,u.y=1,E=!0);null!=h[Math.min(B,v-1)]&&(y=h[Math.min(B,v-1)]);var H=0<B?C.copy(e[B]).sub(e[B-1]).normalize():C.copy(e[B+1]).sub(e[B]).normalize();1===Math.abs(H.y)?A.set(0,0,-1):A.set(0,1,0);w.lookAt(x,H,A);for(H=1;H<t;H++)C.set(r[H].x,r[H].y,0),C.multiply(u),C.applyAxisAngle(z,y),C.applyMatrix4(w),C.add(e[B]),E?m.push(e[B].x,e[B].y,e[B].z):m.push(C.x,C.y,C.z),
C.sub(e[B]).normalize(),n.push(C.x,C.y,C.z),null==this.ja.values||isNaN(this.ja.values[B])?q.push(0):q.push(this.ja.values[B]);0<=m.length/3-2*k&&PC.X2b(this,m,p,0,v,k)}if(!l){H=m.length/3-1;f=m.length/3;g=m.length/3+1;m.push(e[0].x,e[0].y,e[0].z);m.push(e[e.length-1].x,e[e.length-1].y,e[e.length-1].z);h=e[0].clone().sub(e[1]).normalize();n.push(h.x,h.y,h.z);h=e[e.length-1].clone().sub(e[e.length-2]).normalize();n.push(h.x,h.y,h.z);null!=this.ja.values?(q.push(isNaN(this.ja.values[e.length-1])?0:
this.ja.values[e.length-1]),q.push(isNaN(this.ja.values[0])?0:this.ja.values[0])):(q.push(0),q.push(0));e=H-(k-1);for(H=0;H<k;H++)p.push(g,e+(H+1)%k,e+H);H=k;e=H-k;for(H=0;H<k;H++)p.push(f,e+H,e+(H+1)%k)}m=new Float32Array(m);p=new Uint32Array(p);q=new Float32Array(q);n=new Float32Array(n);this.setAttribute("position",new zq(m,3));this.setIndex(new zq(p,1));this.setAttribute("normal",new zq(n,3));this.setAttribute(Ty.Km,new zq(q,1));this.computeBoundingBox()};d.prototype.f5b=function(e,f,g,h,k,l){function m(){for(v=
0;v<t;v++)n(v);q();p()}function n(R){var Q=e[R],V=B.Ur[R],Z=B.iz[R],aa=0;null!=h[Math.min(R,t-1)]&&(aa=h[Math.min(R,t-1)]);for(var na=0;na<=k;na++){var ya=na/k*Math.PI*2,va=na/k*Math.PI*2+aa,qa=Math.sin(ya);ya=-Math.cos(ya);var Ja=Math.sin(va);va=-Math.cos(va);P.x=f[R%f.length];P.y=g[R%g.length];var Qa=P.lengthSq();0===Qa?(w.x=ya*V.x+qa*Z.x,w.y=ya*V.y+qa*Z.y,w.z=ya*V.z+qa*Z.z,w.normalize(),I.push(w.x,w.y,w.z),E.x=Q.x,E.y=Q.y,E.z=Q.z):(w.x=va*V.x+Ja*Z.x,w.y=va*V.y+Ja*Z.y,w.z=va*V.z+Ja*Z.z,w.normalize(),
I.push(w.x,w.y,w.z),Ja=P.x*P.y,qa=Math.pow(P.x,2)*Math.pow(qa,2)+Math.pow(P.y,2)*Math.pow(ya,2),M=Ja/Math.sqrt(qa),E.x=Q.x+w.x*M,E.y=Q.y+w.y*M,E.z=Q.z+w.z*M);F.push(E.x,E.y,E.z)}}function p(){for(var R=1;R<=t-1;R++)for(v=1;v<=k;v++){var Q=(k+1)*(R-1)+(v-1),V=(k+1)*R+(v-1),Z=(k+1)*R+v,aa=(k+1)*(R-1)+v;K.push(Q,V,aa);K.push(V,Z,aa)}if(!l)for(R=F.length/3,Q=R-k-1,F.push(e[0].x,e[0].y,e[0].z),V=(new Hp).subVectors(e[0],e[1]).normalize(),I.push(V.x,V.y,V.z),J.push(0,.5),Z=e.length-1,F.push(e[Z].x,e[Z].y,
e[Z].z),V.subVectors(e[Z],e[Z-1]).normalize(),I.push(V.x,V.y,V.z),J.push(1,.5),v=0;v<=k-1;v++)K.push(R,v,v+1),K.push(R+1,Q+v+1,Q+v)}function q(){for(v=0;v<=t;v++)for(var R=0;R<=k;R++)H.x=v/t,H.y=R/k,J.push(H.x,H.y)}var r=[],t=e.length;if(!(2>t)){k*=4;null==this.ZK&&(this.ZK=[]);null==this.iz&&(this.iz=[]);null==this.Ur&&(this.Ur=[]);var u=new Hp,w=new Hp,y=new Xt;null==this.ZK[0]&&1<t&&(this.ZK[0]=a(0,e));if(null==this.Ur[0]&&1<t){this.Ur[0]=new Hp;var z=Number.MAX_VALUE,x=Math.abs(this.ZK[0].x),
C=Math.abs(this.ZK[0].y),A=Math.abs(this.ZK[0].z);x<=z&&(z=x,w.set(1,0,0));C<=z&&(z=C,w.set(0,1,0));A<=z&&w.set(0,0,1);u.crossVectors(this.ZK[0],w).normalize();this.Ur[0].crossVectors(this.ZK[0],u)}null==this.iz[0]&&1<t&&(this.iz[0]=new Hp,this.iz[0].crossVectors(this.ZK[0],this.Ur[0]));var v;for(v=1;v<=t;v++)this.Ur[v]=this.Ur[v-1].clone(),this.iz[v]=this.iz[v-1].clone(),null==this.ZK[v]&&(this.ZK[v]=a(v,e)),u.crossVectors(this.ZK[v-1],this.ZK[v]),u.length()>Number.EPSILON&&(u.normalize(),z=Math.acos(W.clamp(this.ZK[v-
1].dot(this.ZK[v]),-1,1)),this.Ur[v].applyMatrix4(y.makeRotationAxis(u,z))),this.iz[v].crossVectors(this.ZK[v],this.Ur[v]);var B=this,E=new Hp,H=new gy,F=[],I=[],J=[],K=[],M=0,P=new gy(1,1);m();for(v=0;v<=t;v++)for(u=0;u<=k;u++)null==this.ja.values||isNaN(this.ja.values[v])?r.push(0):r.push(this.ja.values[v]);l||(null!=this.ja.values?(r.push(isNaN(this.ja.values[0])?0:this.ja.values[0]),r.push(isNaN(this.ja.values[e.length-1])?0:this.ja.values[e.length-1])):(r.push(0),r.push(0)));u=new Float32Array(F);
y=new Uint32Array(K);r=new Float32Array(r);z=new Float32Array(I);this.setAttribute("position",new zq(u,3));this.setIndex(new zq(y,1));this.setAttribute("normal",new zq(z,3));this.setAttribute(Ty.Km,new zq(r,1));this.setAttribute("uv",new ds(J,2));this.computeBoundingBox()}};d.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Wb&&this.boundingBox.expandByScalar(this.Wb)};d.prototype.Gy=function(e){this.gv||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/
2,e);return this.gv};d.prototype.w5b=function(e){this.EM||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/2,e);return this.EM};d.prototype.cAb=function(e){this.qI||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/2,e);return this.qI};d.prototype.lV=function(e,f){this.Dg||(this.Dg=f);this.Dg.equals(f)||this.Dg.copy(f);if(null==this.U$||null==this.T$)f=PC.yPc(this.ja.Yz,this.ja.GE),this.U$=(this.nQ-this.QK)/(f.max-f.min),this.T$=this.QK-f.min;this.gv=this.gv||new Hp;this.EM=this.EM||
new Hp(0,0,1);this.qI=this.qI||new Ur;f=!0;for(var g=1;g<this.ja.Xi.length;g++){if(this.ja.Xi[g]>this.ja.Xi[g-1]){f=!1;break}if(this.ja.Xi[g]<this.ja.Xi[g-1])break}f=W.findIndex(e,this.ja.Xi,null,null,f?function(h,k){return k-h}:null);0>f&&(f=~f);f=f||1;b.set(this.ja.vn[f-1],this.ja.Xy[f-1],this.ja.Xi[f-1]);c.set(this.ja.vn[f],this.ja.Xy[f],this.ja.Xi[f]);g=(e-this.ja.Xi[f-1])/(this.ja.Xi[f]-this.ja.Xi[f-1]);this.gv.copy(c).sub(b).multiplyScalar(g).add(b);this.ja.Yz&&this.ja.GE?(e=2*((this.ja.Yz[f]-
this.ja.Yz[f-1])*g+this.ja.Yz[f-1]),f=2*((this.ja.GE[f]-this.ja.GE[f-1])*g+this.ja.GE[f-1]),e=e*this.U$+this.T$,f=f*this.U$+this.T$,this.EM.setX(e).setY(f)):this.EM.setX(2*this.Wb).setY(2*this.Wb);b.multiply(this.Dg);b.multiply(this.Dg);c.multiply(this.Dg);c.multiply(this.Dg);c.sub(b).normalize();b.set(-1,0,0);b.crossVectors(c,b).normalize();this.qI=Wy.scb(b,c,this.qI);return this};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var cD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,{});this.type="TrajectoryTubeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.qPa;this.fragmentShader=a.Eqc;this.setOptions(b)}var a=rC;D(d,Oz);L(d,"geotoolkit3d.scene.well.TrajectoryTubeMaterial");d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.L5c(this,b);hC.Y7c(this,b);return this};d.prototype.ta=function(){return xb(a.nQc(this),Oz.prototype.ta.call(this))};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(cD.Pa(),mz);var dD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(e,f){for(var g=new gy,h=[],k=0;k<=e;k++)for(var l=0;l<=f;l++)g.x=k/e,g.y=l/f,h.push(g.x,g.y);return h}function a(e){Aq.call(this);this.type="MultiLateralTubeGeometry";this.Wb=e.size;e=G(e,{radiusmin:0,radiusmax:1,tubeprecision:3});this.ja={};this.setOptions(e);this.Dg=this.T$=this.U$=this.gv=this.EM=this.qI=null;this.qrd=[]}var b=new Hp,c=new Hp;D(a,Aq);L(a,"geotoolkit3d.scene.well.MultiLateralTubeGeometry");a.prototype.setOptions=function(e){var f=G(e,{radiusmin:this.QK,
radiusmax:this.nQ,tubeprecision:this.lE,size:this.Wb}),g=f.radiusmin!==this.QK||this.nQ!==f.radiusmax||this.lE!==f.tubeprecision||null!=f.data;if(!g)return this.Wb!==f.size&&(this.Wb=f.size,this.EM&&this.EM.set(2*this.Wb,2*this.Wb,1),this.computeBoundingBox()),this;null!=f.data&&(e=G(e.data,{x:this.ja.vn,y:this.ja.Xy,z:this.ja.Xi,values:this.ja.values,widths:this.ja.Yz,heights:this.ja.GE,rolls:this.ja.bM,bots:this.ja.ayb,tops:this.ja.Ekb}),this.ja.vn=e.x,this.ja.Xy=e.y,this.ja.Xi=e.z,this.ja.values=
e.values,this.ja.Yz=e.widths,this.ja.GE=e.heights,this.ja.bM=e.rolls,this.ja.ayb=e.bots,this.ja.Ekb=e.tops);this.QK=f.radiusmin;this.nQ=f.radiusmax;this.lE=f.tubeprecision;this.Wb=f.size;f=[];e=PC.I2b(this.ja.Yz,this.ja.GE,this.QK,this.nQ);g=Array.isArray(this.ja.bM)?this.ja.bM:null==this.ja.bM?[0]:[this.ja.bM];for(var h=0;h<this.ja.vn.length;h++)f.push(new Hp(this.ja.vn[h],this.ja.Xy[h],this.ja.Xi[h]));this.kya(f,e.w,e.h,g,this.lE);this.ZK=[];this.Ur=[];this.iz=[];this.T$=this.U$=null;return this};
a.prototype.ta=function(){return{radiusmin:this.QK,radiusmax:this.nQ,tubeprecision:this.lE,size:this.Wb,uvs:this.qrd,data:{x:this.ja.vn,y:this.ja.Xy,z:this.ja.Xi,values:this.ja.values,widths:this.ja.Yz,heights:this.ja.GE,rolls:this.ja.bM,bots:this.ja.ayb,tops:this.ja.Ekb}}};a.prototype.kya=function(e,f,g,h,k){var l=[],m=[],n=[],p=[];k=PC.Z2b(k);for(var q=k.length,r=q-1,t=new Hp(1,1,1),u=new Xt,w=0,y=new Hp(0,0,-1),z=new Hp,x=z.clone(),C=z.clone(),A=e.length,v=0,B=[],E=[],H=0;H<A;H++)if(0<H&&e[H].equals(e[H-
1]))v+=1;else{-1<this.ja.ayb.indexOf(H)&&B.push(H-v);-1<this.ja.Ekb.indexOf(H)&&E.push(H-v);t.x=2*f[H%f.length];t.y=2*g[H%g.length];var F=!1;0===t.x&&0===t.y&&(t.x=1,t.y=1,F=!0);null!=h[Math.min(H,A-1)]&&(w=h[Math.min(H,A-1)]);var I=-1<this.ja.Ekb.indexOf(H)?x.copy(e[H+1]).sub(e[H]).normalize():x.copy(e[H]).sub(e[H-1]).normalize();1===Math.abs(I.y)?C.set(0,0,-1):C.set(0,1,0);u.lookAt(z,I,C);for(I=1;I<q;I++)x.set(k[I].x,k[I].y,0),x.multiply(t),x.applyAxisAngle(y,w),x.applyMatrix4(u),x.add(e[H]),F?
l.push(e[H].x,e[H].y,e[H].z):l.push(x.x,x.y,x.z),x.sub(e[H]).normalize(),m.push(x.x,x.y,x.z),null==this.ja.values||isNaN(this.ja.values[H])?p.push(0):p.push(this.ja.values[H]);-1===this.ja.Ekb.indexOf(H)&&0<=l.length/3-2*r&&PC.X2b(this,l,n,0,A,r)}f=new Float32Array(l);n=new Uint32Array(n);p=new Float32Array(p);m=new Float32Array(m);this.setAttribute("position",new zq(f,3));this.setIndex(new zq(n,1));this.setAttribute("normal",new zq(m,3));this.setAttribute(Ty.Km,new zq(p,1));this.computeBoundingBox();
d(e.length,this.lE)};a.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Wb&&this.boundingBox.expandByScalar(this.Wb)};a.prototype.Gy=function(e){this.gv||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/2,e);return this.gv};a.prototype.w5b=function(e){this.EM||this.lV((this.ja.Xi[this.ja.Xi.length-1]+this.ja.Xi[0])/2,e);return this.EM};a.prototype.cAb=function(e){this.qI||this.lV((this.ja.Xi[this.ja.ayb[0]]+this.ja.Xi[0])/2,e);return this.qI};a.prototype.lV=
function(e,f){this.Dg||(this.Dg=f);this.Dg.equals(f)||this.Dg.copy(f);if(null==this.U$||null==this.T$)f=PC.yPc(this.ja.Yz,this.ja.GE),this.U$=(this.nQ-this.QK)/(f.max-f.min),this.T$=this.QK-f.min;this.gv=this.gv||new Hp;this.EM=this.EM||new Hp(0,0,1);this.qI=this.qI||new Ur;f=W.findIndex(e,this.ja.Xi,null,null,function(h,k){return k-h})||1;0>f&&(f=~f);b.set(this.ja.vn[f-1],this.ja.Xy[f-1],this.ja.Xi[f-1]);c.set(this.ja.vn[f],this.ja.Xy[f],this.ja.Xi[f]);var g=(e-this.ja.Xi[f-1])/(this.ja.Xi[f]-this.ja.Xi[f-
1]);this.gv.copy(c).sub(b).multiplyScalar(g).add(b);this.ja.Yz&&this.ja.GE?(e=2*((this.ja.Yz[f]-this.ja.Yz[f-1])*g+this.ja.Yz[f-1]),f=2*((this.ja.GE[f]-this.ja.GE[f-1])*g+this.ja.GE[f-1]),e=e*this.U$+this.T$,f=f*this.U$+this.T$,this.EM.setX(e).setY(f)):this.EM.setX(2*this.Wb).setY(2*this.Wb);b.multiply(this.Dg);b.multiply(this.Dg);c.multiply(this.Dg);c.multiply(this.Dg);c.sub(b).normalize();b.set(-1,0,0);b.crossVectors(c,b).normalize();this.qI=Wy.scb(b,c,this.qI);return this};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var eD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,{});this.type="MultiLateralTubeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.qPa;this.fragmentShader=a.Eqc;this.setOptions(b)}var a=rC;D(d,Oz);L(d,"geotoolkit3d.scene.well.MultiLateralTubeMaterial");d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.L5c(this,b);hC.Y7c(this,b);return this};d.prototype.ta=function(){return xb(a.nQc(this),Oz.prototype.ta.call(this))};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");oz.lw(eD.Pa(),mz);var fD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(f){fz.call(this);this.csb=!1;f.data instanceof Array&&(f.data=new JC({data:f.data}));if(f.data instanceof JC)this.csb=!0,this.CSd(f);else{f=G(f,{size:100});this.Asc=this.DBc=this.DP=this.rj=null;this.GUa=new Xt;this.YPa=new Xt;this.Vt=new Hp;f.width=f.width||0;f.radiusmin=f.radiusmin||0;f.radiusmax=f.radiusmax||0;if(f.closed){var g=new VA,h=new VA;this.rj=new Zt(g,new $t({color:"white",side:Fr}));this.DP=new Zt(h,new $t({color:"white",side:Fr}));g=f.data.x;h=f.data.y;
var k=f.data.z,l=g.length-1;this.rj.position.set(g[0],h[0],k[0]);this.DP.position.set(g[l],h[l],k[l]);this.DBc=new Hp(g[1],h[1],k[1]);this.Asc=new Hp(g[l-1],h[l-1],k[l-1]);this.add(this.rj);this.add(this.DP)}f.hasOwnProperty("openended")||(f.openended=!0);"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);this.Wv=new Zt(new bD(f),
new cD(f));this.add(this.Wv);this.MHa=function(){var m=this.Wv.material.userData.WN,n=this.Wv.geometry.getAttribute(Ty.Km);this.rj.material.color=Az.yza(m.mb(n.getX(0))).color;this.DP.material.color=Az.yza(m.mb(n.getX(n.count-1))).color;this.gg()}.bind(this);this.setOptions(f);this.yea=this.Vk=null}}D(d,fz);L(d,"geotoolkit3d.scene.well.TrajectoryTube");d.prototype.CSd=function(f){f=G(f,{size:100});f.data=f.data.ta();var g=f.data;this.aJ=[];this.k_=[];this.FBc=[];this.Bsc=[];this.GUa=new Xt;this.YPa=
new Xt;this.Vt=new Hp;f.width=f.width||0;f.radiusmin=f.radiusmin||0;f.radiusmax=f.radiusmax||0;this.Tkd=function(q,r,t,u,w){var y=new VA,z=new VA;y=new Zt(y,new $t({color:"white",side:Fr}));this.aJ.push(y);z=new Zt(z,new $t({color:"white",side:Fr}));this.k_.push(z);y.position.set(t[q],u[q],w[q]);z.position.set(t[r],u[r],w[r]);q=new Hp(t[q+1],u[q+1],w[q+1]);r=new Hp(t[r-1],u[r-1],w[r-1]);this.FBc.push(q);this.Bsc.push(r);this.add(y);this.add(z)}.bind(this);var h=g.x,k=g.y,l=g.z;if(f.closed)for(var m=
0;m<g.num;m++){var n=g.tops[m],p=g.bots[m];this.Tkd(n,p,h,k,l)}"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);this.Wv=new Zt(new dD(f),new eD(f));this.add(this.Wv);this.MHa=function(){for(var q=this.Wv.material.userData.WN,r=this.Wv.geometry.getAttribute(Ty.Km),t=r.count/this.Wv.geometry.ta().data.x.length,u=0;u<
this.aJ.length;u++){var w=Math.round(this.Wv.geometry.ta().data.tops[u]*t),y=Math.round(this.Wv.geometry.ta().data.bots[u]*t);this.aJ[u].material.color=Az.yza(q.mb(r.getX(w))).color;this.k_[u].material.color=Az.yza(q.mb(r.getX(y))).color}this.gg()}.bind(this);this.setOptions(f);this.yea=this.Vk=null};d.prototype.setOptions=function(f){if(null==f)return this;fz.prototype.setOptions.call(this,f);if(this.csb)return this.H3d(f);if(null==f)return this;"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),
f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):null==f.color&&null!=f.colorprovider?(f.color=new Pq(16777215),f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);if(null!=this.rj&&null!=this.DP){var g=this.Wv.material.userData.WN;g instanceof Po&&g.za(Oo.ib,this.MHa)}this.Wv.geometry.setOptions(f);this.Wv.material.setOptions(f);null!=this.rj&&null!=this.DP&&(null==f.colorprovider&&null!=f.color?
(this.rj.material.color=f.color,this.DP.material.color=f.color):f.colorprovider instanceof Po&&(this.MHa(),f.colorprovider.on(Oo.ib,this.MHa)),null!=f.opacity&&(this.rj.material.opacity=f.opacity,this.DP.material.opacity=f.opacity),null!=f.transparent&&(this.rj.material.transparent=f.transparent,this.DP.material.transparent=f.transparent),null!=f.size&&(f=2*(Number(f.size)+1),this.rj.scale.set(f,f,f),this.DP.scale.set(f,f,f),0!==this.Vt.x&&0!==this.Vt.y&&0!==this.Vt.z&&(this.rj.scale.divide(this.Vt),
this.DP.scale.divide(this.Vt))));this.gg();return this};d.prototype.H3d=function(f){if(null==f)return this;"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):null==f.color&&null!=f.colorprovider?(f.color=new Pq(16777215),f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);if(0!==this.aJ.length&&0!==this.k_.length){var g=this.Wv.material.userData.WN;
g instanceof Po&&g.za(Oo.ib,this.MHa)}this.Wv.geometry.setOptions(f);this.Wv.material.setOptions(f);if(0!==this.aJ.length&&0!==this.k_.length){if(null==f.colorprovider&&null!=f.color)for(g=0;g<this.aJ.length;g++)this.aJ[g].material.color=f.color,this.k_[g].material.color=f.color;else f.colorprovider instanceof Po&&(this.MHa(),f.colorprovider.on(Oo.ib,this.MHa));if(null!=f.opacity)for(g=0;g<this.aJ.length;g++)this.aJ[g].material.opacity=f.opacity,this.k_[g].material.opacity=f.opacity;if(null!=f.transparent)for(g=
0;g<this.aJ.length;g++)this.aJ[g].material.transparent=f.transparent,this.k_[g].material.transparent=f.transparent;if(null!=f.size)for(f=2*(Number(f.size)+1),g=0;g<this.aJ.length;g++)this.aJ[g].scale.set(f,f,f).divide(this.Vt),this.k_[g].scale.set(f,f,f).divide(this.Vt)}this.gg();return this};d.prototype.ta=function(){return xb(xb(this.Wv.geometry.ta(),this.Wv.material.ta()),fz.prototype.ta.call(this))};var a=new Xt,b=new Hp,c=new Hp,e=new Hp(0,0,1);d.prototype.ui=function(f,g,h,k){fz.prototype.ui.call(this,
f,g,h,k);this.csb?this.otd(f,g,h,k):(f=h.aT().scale,this.Vk&&(null!=this.yea&&this.Wv.geometry.lV(this.yea,f),this.Vk.M_a(this.Wv.geometry.Gy(f)),this.Vk.Wib(this.Wv.geometry.w5b(f),this.Wv.geometry.cAb(f))),this.Vt.equals(f)||(hC.sYa(this.Wv.material).normscale.set(1/f.x,0,0,0,1/f.y,0,0,0,1/f.z),null!=this.rj&&null!=this.DP&&(g=2*(this.Wv.material.userData.size+1),this.rj.scale.set(g,g,g).divide(f),this.DP.scale.set(g,g,g).divide(f),this.DP.geometry.applyMatrix4(a.copy(this.YPa).invert()),h.pD(b.copy(this.DP.position)),
h.pD(c.copy(this.Asc)),this.DP.geometry.applyMatrix4(this.YPa.identity().lookAt(b,c,e.set(0,0,1))),this.rj.geometry.applyMatrix4(a.copy(this.GUa).invert()),h.pD(b.copy(this.rj.position)),h.pD(c.copy(this.DBc)),this.rj.geometry.applyMatrix4(this.GUa.identity().lookAt(b,c,e.set(0,0,1)))),this.Vt.copy(f)))};d.prototype.otd=function(f,g,h,k){f=h.aT().scale;this.Vk&&(null!=this.yea&&this.Wv.geometry.lV(this.yea,f),this.Vk.M_a(this.Wv.geometry.Gy(f)),this.Vk.Wib(this.Wv.geometry.w5b(f),this.Wv.geometry.cAb(f)));
if(!this.Vt.equals(f)){hC.sYa(this.Wv.material).normscale.set(1/f.x,0,0,0,1/f.y,0,0,0,1/f.z);if(0!==this.aJ.length&&0!==this.k_.length)for(g=2*(this.Wv.material.userData.size+1),k=0;k<this.aJ.length;k++)this.aJ[k].scale.set(g,g,g).divide(f),this.k_[k].scale.set(g,g,g).divide(f),this.k_[k].geometry.applyMatrix4(a.copy(this.YPa).invert()),h.pD(b.copy(this.k_[k].position)),h.pD(c.copy(this.Bsc[k])),this.k_[k].geometry.applyMatrix4(this.YPa.identity().lookAt(b,c,e.set(0,0,1))),this.aJ[k].geometry.applyMatrix4(a.copy(this.GUa).invert()),
h.pD(b.copy(this.aJ[k].position)),h.pD(c.copy(this.FBc[k])),this.aJ[k].geometry.applyMatrix4(this.GUa.identity().lookAt(b,c,e.set(0,0,1))),this.GUa=new Xt,this.YPa=new Xt;this.Vt.copy(f)}};d.prototype.fb=function(){return this.Vk};d.prototype.pZ=function(f,g){null!=this.Vk&&this.remove(this.Vk);this.yea=g;this.Vk=f;this.add(this.Vk);this.gg();return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJ1aSIsImdldEFubm90YXRpb24iOiJmYiIsInNldEFubm90YXRpb24iOiJwWiJ9fX0g");var Ala=/*#__PURE__*/function(){function d(a){hb("geotoolkit3d.scene.well.MultiLateralTube is deprecated since 3.3 use geotoolkit3d.scene.well.TrajectoryTube instead");fD.call(this,a)}D(d,fD);L(d,"geotoolkit3d.scene.well.MultiLateralTube");return d}();var gD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c,e,f,g,h){for(c=0;c<=e;c++)for(var k=0;k<=f;k++)g.x=c/e,g.y=k/f,h.push(g.x,g.y);return c}function a(c){Aq.call(this);this.type="PipeGeometry";this.Wb=c.size;c=G(c,{tubeprecision:4,openended:!1,hardedges:!0});this.setOptions(c)}function b(c,e){var f=1,g=c-f;c+=f;0>g&&(g=0);c>=e.length&&(c=e.length-1);g=e[g];e=e[c];e=e.clone().sub(g);return e.normalize()}D(a,Aq);L(a,"geotoolkit3d.scene.well.PipeGeometry");a.prototype.setOptions=function(c){var e=G(c,{tubeprecision:this.lE,
openended:this.IF,size:this.Wb}),f=this.lE!==e.tubeprecision||this.IF!==e.openended||null!=e.data;if(!f)return this.Wb!==e.size&&(this.Wb=e.size,this.computeBoundingBox()),this;null!=e.data&&(c=G(c.data,{positions:this.Od,tangents:this.gE,normals:this.Ur,binormals:this.iz,values:this.Cb,radii:this.S$}),this.Od=c.positions,this.Ur=c.normals,this.gE=c.tangents,this.iz=c.binormals,this.Cb=c.values,this.S$=c.radii);this.Luc=e.hardedges;this.lE=e.tubeprecision;this.IF=e.openended;this.f5b();return this};
a.prototype.ta=function(){return{tubeprecision:this.lE,openended:this.IF,hardedges:this.Luc,size:this.Wb,data:{positions:this.Od,tangents:this.gE,normals:this.Ur,binormals:this.iz,values:this.Cb,radii:this.S$}}};a.prototype.Mvd=function(){var c=this.Od.length,e=new Xt,f=0,g=new Hp,h=new Hp;if(this.iz.length!==this.Od.length||this.Ur.length!==this.Od.length){null==this.gE[0]&&(this.gE[0]=b(0,this.Od));if(null==this.Ur[0]){this.Ur[0]=new Hp;f=Number.MAX_VALUE;var k=Math.abs(this.gE[0].x),l=Math.abs(this.gE[0].y),
m=Math.abs(this.gE[0].z);k<=f&&(f=k,h.set(1,0,0));l<=f&&(f=l,h.set(0,1,0));m<=f&&h.set(0,0,1);g.crossVectors(this.gE[0],h).normalize();this.Ur[0].crossVectors(this.gE[0],g)}null==this.iz[0]&&(this.iz[0]=new Hp,this.iz[0].crossVectors(this.gE[0],this.Ur[0]));for(f=1;f<=c;f++)this.Ur[f]=this.Ur[f-1].clone(),this.iz[f]=this.iz[f-1].clone(),null==this.gE[f]&&(this.gE[f]=b(f,this.Od)),g.crossVectors(this.gE[f-1],this.gE[f]),g.length()>Number.EPSILON&&(g.normalize(),h=Math.acos(W.clamp(this.gE[f-1].dot(this.gE[f]),
-1,1)),this.Ur[f].applyMatrix4(e.makeRotationAxis(g,h))),this.iz[f].crossVectors(this.gE[f],this.Ur[f])}return f};a.prototype.Hwd=function(){var c,e=this.S$[0];for(c=1;c<this.S$.length;c++)this.S$[c]!==e&&(this.Od.splice(c,0,this.Od[c-1].clone()),this.S$.splice(c,0,this.S$[c]),this.gE.length>c&&this.gE.splice(c,0,this.gE[c-1]),this.Cb.length>c&&this.Cb.splice(c,0,this.Cb[c-1]),this.Ur.length>c&&this.Ur.splice(c,0,this.Ur[c-1]),this.iz.length>c&&this.iz.splice(c,0,this.iz[c-1]),e=this.S$[c]);return c};
a.prototype.CWa=function(c,e,f,g,h,k,l){for(var m=this,n=1;n<=c-1;n++)for(e=1;e<=f;e++){var p=(f+1)*(n-1)+(e-1),q=(f+1)*n+(e-1),r=(f+1)*n+e,t=(f+1)*(n-1)+e;g.push(p,q,t);g.push(q,r,t)}if(!m.IF){c=h.length/3;n=c-f-1;h.push(m.Od[0].x,m.Od[0].y,m.Od[0].z);e=(new Hp).subVectors(m.Od[0],m.Od[1]).normalize();k.push(e.x,e.y,e.z);l.push(0,.5);p=m.Od.length-1;h.push(m.Od[p].x,m.Od[p].y,m.Od[p].z);e.subVectors(m.Od[p],m.Od[p-1]).normalize();k.push(e.x,e.y,e.z);l.push(1,.5);for(e=0;e<=f-1;e++)g.push(c,e,e+1);
for(e=0;e<=f-1;e++)g.push(c+1,n+e+1,n+e)}return e};a.prototype.f5b=function(){function c(){for(h=0;h<k;h++)e(h);d(h,k,g,p,t);l.CWa(k,h,g,u,q,r,t)}function e(C){var A=l.Od[C],v=l.Ur[C],B=l.iz[C];C=l.S$[C];for(var E=0;E<=g;E++){var H=E/g*Math.PI*2,F=Math.sin(H);H=-Math.cos(H);n.x=H*v.x+F*B.x;n.y=H*v.y+F*B.y;n.z=H*v.z+F*B.z;n.normalize();r.push(n.x,n.y,n.z);m.x=A.x;m.y=A.y;m.z=A.z;null!=w&&w.push(C);q.push(m.x,m.y,m.z)}}var f=[],g=4*this.lE,h;null==this.gE&&(this.gE=[]);null==this.iz&&(this.iz=[]);null==
this.Ur&&(this.Ur=[]);null==this.S$?this.S$=[]:this.Luc&&this.Hwd();var k=this.Od.length;this.Mvd();var l=this,m=new Hp,n=new Hp,p=new gy,q=[],r=[],t=[],u=[],w=[];c();for(h=0;h<k;h++)for(var y=0;y<=g;y++)null==this.Cb||isNaN(this.Cb[h])?f.push(0):f.push(this.Cb[h]);this.IF||(null!=this.Cb?(f.push(isNaN(this.Cb[0])?0:this.Cb[0]),f.push(isNaN(this.Cb[this.Od.length-1])?0:this.Cb[this.Od.length-1])):(f.push(0),f.push(0)),w.push(0),w.push(0));0<w.length&&(y=new Float32Array(w),this.setAttribute(oC.zhd,
new zq(y,1)));y=new Float32Array(q);var z=new Uint32Array(u);f=new Float32Array(f);var x=new Float32Array(r);this.setAttribute("position",new zq(y,3));this.setIndex(new zq(z,1));this.setAttribute("normal",new zq(x,3));this.setAttribute(Ty.Km,new zq(f,1));this.setAttribute("uv",new ds(t,2));this.computeBoundingBox()};a.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Wb&&this.boundingBox.expandByScalar(this.Wb)};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var hD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){Oz.call(this,{});this.type="PipeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.s3a;this.fragmentShader=a.yhd;this.setOptions(b)}var a=oC;D(d,Oz);L(d,"geotoolkit3d.scene.well.PipeMaterial");d.prototype.setOptions=function(b){Oz.prototype.setOptions.call(this,b);a.I3d(this,b);return this};d.prototype.ta=function(){return xb(a.HId(this),Oz.prototype.ta.call(this))};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");
oz.lw(hD.Pa(),mz);var iD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){a=a||{};if(!a.hasOwnProperty("data"))throw Error("geotoolkit3d.scene.well.Pipe has no data");fz.call(this);this.Vt=new Hp;this.kTa=[];this.Jd=[];this.csb=!1;a.data instanceof Array?this.kTa=a.data:a.data instanceof JC?(a.data=a.data.p$b(),this.kTa=a.data):this.kTa.push(a.data);for(var b=0;b<this.kTa.length;b++)a.data=this.kTa[b],this.Jd.push(new Zt(new gD(a),new hD(a))),this.add(this.Jd[b]);a.data=this.kTa}D(d,fz);L(d,"geotoolkit3d.scene.well.Pipe");d.prototype.setOptions=
function(a,b){if(null==a)return this;fz.prototype.setOptions.call(this,a);b=b||0;if(b>this.Jd.length-1||0>b)return hb("The index is out of range."),this;this.Jd[b].geometry.setOptions(a);this.Jd[b].material.setOptions(a);return this};d.prototype.ta=function(a){a=a||0;if(a>this.Jd.length-1||0>a)throw Error("The index is out of range.");return xb(xb(this.Jd[a].geometry.ta(),this.Jd[a].material.ta()),fz.prototype.ta.call(this))};d.prototype.ui=function(a,b,c,e){fz.prototype.ui.call(this,a,b,c,e);a=c.aT().scale;
for(b=0;b<this.Jd.length;b++)this.Vt.equals(a)||hC.sYa(this.Jd[b].material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Vt.copy(a)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJ1aSJ9fX0g");var jD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){fz.call(this);this.ea={};this.ea.fillstyle=new rf({color:"gray"});this.Jd=this.Vk=null}D(d,fz);L(d,"geotoolkit3d.scene.well.schematic.SchematicBase");d.prototype.fb=function(){return this.Vk};d.prototype.pZ=function(a){null!=this.Vk&&this.remove(this.Vk);this.Vk=a;this.add(this.Vk);return this};d.prototype.ta=function(){return xb(this.ea,fz.prototype.ta.call(this))};d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);this.ea=
G(a,this.ea,!0);null!=this.Jd&&this.remove(this.Jd);this.Goa();return this};d.prototype.Goa=function(){};d.prototype.getBoundingBox=function(){return null};d.prototype.$d=function(){return null};d.prototype.zXa=function(){return null!=this.ea.material?this.ea.material:Az.l3b(this.ea.fillstyle)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbm5vdGF0aW9uIjoiZmIiLCJzZXRBbm5vdGF0aW9uIjoicFoiLCJnZXRPcHRpb25zIjoidGEiLCJnZXRNYXRlcmlhbCI6InpYYSJ9fX0g");var kD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){jD.call(this);null==a&&(a={});a=G(a,{radiustop:0,radiusbottom:50,height:50,radiussegments:28,heightsegments:1,openended:!1});this.setOptions(a)}D(d,jD);L(d,"geotoolkit3d.scene.well.schematic.Cone");d.prototype.Goa=function(){var a=this.ta(),b=a.data;if(2===b.x.length){this.mQa=new nr(a.radiustop,a.radiusbottom,a.height,a.radiussegments,a.heightsegments,a.openended);var c=(new Xt).makeRotationAxis((new Hp(1,0,0)).normalize(),Math.PI/2);this.mQa.applyMatrix4(c);c=(new Xt).makeTranslation(0,
0,a.height/2);this.mQa.applyMatrix4(c);this.mQa.computeBoundingBox();this.mQa.computeVertexNormals();a=new Hp(b.x[1],b.y[1],b.z[1]);this.Jd=new Zt(this.mQa,this.zXa());this.Jd.position.set(b.x[0],b.y[0],b.z[0]);this.Jd.lookAt(a);this.add(this.Jd)}};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone().applyMatrix4(this.Jd.matrix)};d.prototype.$d=function(){return this.mQa};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IiRkIn19fSAg");var lD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){jD.call(this);null==a&&(a={});a=G(a,{width:50,widthsegments:1});this.setOptions(a)}D(d,jD);L(d,"geotoolkit3d.scene.well.schematic.Cube");d.prototype.Goa=function(){var a=this.ta(),b=a.data;if(2===b.x.length){this.Cpb=new xq(a.width,a.width,a.width,a.widthsegments,a.widthsegments,a.widthsegments);this.Cpb.computeBoundingBox();this.Cpb.computeVertexNormals();var c=new Hp(b.x[1],b.y[1],b.z[1]);this.Jd=new Zt(this.Cpb,this.zXa());this.Jd.position.set(b.x[0],b.y[0],b.z[0]);
this.Jd.position.sub(c.clone().sub(this.Jd.position).setLength(-a.width/2));this.Jd.lookAt(c);this.add(this.Jd)}};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone().applyMatrix4(this.Jd.matrix)};d.prototype.$d=function(){return this.Cpb};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IiRkIn19fSAg");var mD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){jD.call(this);null==a&&(a={});var b=a.data;a=G(a,{radius:null!=a.width?a.width:30,tubeprecision:8,depth:1<b.x.length?(new Hp(b.x[1],b.y[1],b.z[1])).distanceTo(new Hp(b.x[0],b.y[0],b.z[0])):1});this.setOptions(a)}D(d,jD);L(d,"geotoolkit3d.scene.well.schematic.Cylinder");d.prototype.Goa=function(){var a=this.ta(),b=a.data;if(!(2>b.x.length)){var c=a.radius;this.VBc=2===b.x.length?new bD({data:{x:[0,0],y:[0,0],z:[0,a.depth]},radiusmax:c,colorprovider:a.fillstyle.mb(),
tubeprecision:a.tubeprecision}):new bD({data:{x:b.x,y:b.y,z:b.z},radiusmax:c,colorprovider:a.fillstyle.mb(),tubeprecision:a.tubeprecision});this.Jd=new Zt(this.VBc,this.zXa());2===b.x.length&&(this.Jd.position.copy(new Hp(b.x[0],b.y[0],b.z[0])),this.Jd.lookAt(new Hp(b.x[1],b.y[1],b.z[1])));this.add(this.Jd)}};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone().applyMatrix4(this.Jd.matrix)};d.prototype.$d=function(){return this.VBc};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IiRkIn19fSAg");var nD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){jD.call(this);var b=a.data;a=G(a,{width:50,height:50,depth:1<b.x.length?(new Hp(b.x[1],b.y[1],b.z[1])).distanceTo(new Hp(b.x[0],b.y[0],b.z[0])):1,widthsegments:1,heightsegments:1,depthsegments:1});this.setOptions(a)}D(d,jD);L(d,"geotoolkit3d.scene.well.schematic.Parallelepiped");d.prototype.Goa=function(){var a=this.ta(),b=a.data;if(!(2>b.x.length)){if(2===b.x.length)this.Y8a=new xq(a.width,a.height,a.depth,a.widthsegments,a.heightsegments,a.depthsegments);else{var c=
a.width<a.height?a.height/2:a.width/2;this.Y8a=new bD({data:{x:b.x,y:b.y,z:b.z},radiusmax:c,colorprovider:a.fillstyle.mb(),tubeprecision:1,openended:!1})}this.Y8a.computeBoundingBox();this.Y8a.computeVertexNormals();this.Jd=new Zt(this.Y8a,this.zXa());2===b.x.length&&(c=new Hp(b.x[1],b.y[1],b.z[1]),this.Jd.position.set(b.x[0],b.y[0],b.z[0]),this.Jd.position.sub(c.clone().sub(this.Jd.position).setLength(-a.depth/2)),this.Jd.lookAt(c));this.add(this.Jd)}};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone().applyMatrix4(this.Jd.matrix)};
d.prototype.$d=function(){return this.Y8a};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IiRkIn19fSAg");var oD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){jD.call(this);null==a&&(a={});a=G(a,{radius:50,widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});this.setOptions(a)}D(d,jD);L(d,"geotoolkit3d.scene.well.schematic.Sphere");d.prototype.Goa=function(){var a=this.ta(),b=a.data;this.Kvb=new Zw(a.radius,a.widthsegments,a.heightsegments,a.phistart,a.philength,a.thetastart,a.thetalength);this.Kvb.computeBoundingBox();this.Kvb.computeVertexNormals();this.Jd=new Zt(this.Kvb,
this.zXa());null!=b.x.length?(this.Jd.position.set(b.x[0],b.y[0],b.z[0]),1<b.x.length&&(a=new Hp(b.x[1],b.y[1],b.z[1]),this.Jd.lookAt(a))):null!=b.x&&this.Jd.position.set(b.x,b.y,b.z);this.add(this.Jd)};d.prototype.getBoundingBox=function(){return this.Jd.geometry.boundingBox.clone().applyMatrix4(this.Jd.matrix)};d.prototype.$d=function(){return this.Kvb};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IiRkIn19fSAg");var pD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){fz.call(this);this.type="Ellipse";b=G(b,{visible:!0,size:120,colorprovider:"blue"});b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null));b.vertexcolors=b.vertexcolors||!1;this.bA=b.color;this.oqb=new Zt(new VA,new zA({color:this.bA,transparent:!0,side:Fr,opacity:b.opacity}));this.drd=new Hp(0,1,0);this.Pwc=new Hp;this.tTa=new Xt;
this.add(this.oqb);this.setOptions(b)}var a=2;D(d,fz);L(d,"geotoolkit3d.scene.well.top.Ellipse");d.prototype.ui=function(){var b=this.parent.matrixWorld;if(!this.tTa.equals(b)){this.tTa.copy(b);var c=(new Hp).setFromMatrixScale(b),e=this.Pwc.clone().multiply(c),f=this.position.clone().multiply(c),g=new Xt;g.lookAt(e,f,0===c.lengthSq()?this.drd:c);this.oqb.setRotationFromMatrix(g);c.setFromMatrixScale(b);this.scale.set(this.Wb*a/c.x,this.Wb*a/c.y,this.Wb*a/c.z)}};d.prototype.hKb=function(b,c){this.position.copy(b);
this.Pwc.copy(c)};d.prototype.setOptions=function(b){if(null==b)return this;fz.prototype.setOptions.call(this,b);b=G(b,{visible:!0,size:this.Wb,colorprovider:this.bA});this.oqb.visible=b.visible;b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null));b.vertexcolors=b.vertexcolors||!1;null!=b.color&&b.color!==this.bA&&(this.bA=b.color);"number"!==typeof b.size||isNaN(b.size)||
b.size===this.size||(this.scale.set(b.size*a,b.size*a,b.size*a),this.Wb=b.size);this.oqb.material.setOptions(b);return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJ1aSIsInVwZGF0ZUxvY2F0aW9uIjoiaEtiIn19fSAg");var qD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.type="Sphere";a=G(a,{visible:!0,size:120,colorprovider:"blue",widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});a.color instanceof Pq||("string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null));this.bA=a.color;a.vertexcolors=a.vertexcolors||!1;this.nZb=new Zt(new Zw(1,a.widthsegments,a.heightsegments,
a.phistart,a.philength,a.thetastart,a.thetalength),new Oz({color:this.bA,transparent:!0,side:Fr,opacity:a.opacity}));this.add(this.nZb);this.tTa=new Xt;this.gg();this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.well.top.Sphere");d.prototype.ui=function(){this.parent.updateMatrixWorld(!0);var a=this.parent.matrixWorld;this.tTa.equals(a)||(this.tTa.copy(a),this.rad())};d.prototype.hKb=function(a){this.position.copy(a)};d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,
a);a=G(a,{size:this.Wb,visible:!0,colorprovider:this.bA,widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});this.nZb.visible=a.visible;a.color instanceof Pq||("string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null));a.vertexcolors=a.vertexcolors||!1;null!=a.color&&a.color!==this.bA&&(this.bA=a.color);null!=a.size&&a.size!==this.Wb&&(this.scale.set(a.size,
a.size,a.size),this.Wb=a.size,this.rad());this.nZb.material.setOptions(a);return this};d.prototype.ta=function(){var a=xb({},this.material.ta());a.size=this.Wb;return xb(a,fz.prototype.ta.call(this))};d.prototype.rad=function(){var a=(new Hp).setFromMatrixScale(this.tTa);this.scale.set(this.Wb/a.x,this.Wb/a.y,this.Wb/a.z)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJ1aSIsInVwZGF0ZUxvY2F0aW9uIjoiaEtiIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var rD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a,b){fz.call(this);this.FQ=a;this.x0b=this.FQ.ta().data.x;this.C0b=this.FQ.ta().data.y;this.W0=this.FQ.ta().data.z;this.Cs=new zs;this.Od=[];this.VEa=[];a=G(b,{visible:!0,opacity:1,type:"disk",size:30,colorprovider:"blue",heights:[]});this.visible=a.visible;this.Wb=a.size;this.VEa=a.heights;this.bA=a.colorprovider||a.color;this.lB=a.opacity;this.add(this.Cs);this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.well.top.TopSymbol");d.prototype.o$b=function(){return this.FQ};
d.prototype.cd=function(){hb("TopSymbol.getSymbol() is deprecated since 2022 (v 3.4), use getSymbols instead");return this.Cs.children};d.prototype.iYa=function(){return this.Cs.children};d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);var b=G(a,{type:this.Kj,size:this.Wb,colorprovider:this.bA,heights:this.VEa,opacity:this.lB});this.Wb=b.size;b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):
b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null),this.bA=b.color);"string"===typeof b.type&&b.type!==this.Kj&&(this.Kj=b.type,hz.dispose(this.Cs.children),a=b.heights||this.VEa,a.forEach(function(){var c="ball"===this.Kj?new qD:new pD;this.Cs.add(c)}.bind(this)),this.Od=[]);if(0===this.Od.length||this.VEa!==b.heights)this.Od=[],this.VEa.forEach(function(c){var e=Number.NaN,f=Number.NaN,g=Number.NaN;c<=this.W0[0]&&c>=this.W0[this.W0.length-1]&&(g=W.findIndex(c,this.W0,
null,null,function(h,k){return Math.abs(h-k)<=Math.Tb?0:h<k?1:-1}),0>g&&(g=~g),c=(c-this.W0[g-1])/(this.W0[g]-this.W0[g-1]),e=this.x0b[g-1]*(1-c)+this.x0b[g]*c,f=this.C0b[g-1]*(1-c)+this.C0b[g]*c,g=this.W0[g-1]*(1-c)+this.W0[g]*c);isNaN(e)||isNaN(f)||isNaN(g)||this.Od.push(new Hp(e,f,g))}.bind(this)),this.VEa=b.heights,this.ird();this.Cs.children.forEach(function(c){null!=c&&c.setOptions(b)});this.gg();return this};d.prototype.ta=function(){var a={};a.visible=this.visible;a.type=this.Kj;a.size=this.Wb;
a.heights=this.VEa;a.colorprovider=this.bA;a.well=this.FQ;a.positions=this.Od;a.opacity=this.lB;return xb(a,fz.prototype.ta.call(this))};d.prototype.ird=function(){if(1<this.W0.length)for(var a=0;a<this.Cs.children.length;a++){var b=this.Cs.children[a],c=this.Od[a],e=W.findIndex(c.z,this.W0,null,null,function(f,g){return Math.abs(f-g)<=Math.Tb?0:f<g?1:-1});0>e?e=~e:e<this.W0.length-1?++e:--e;b.hKb(c,new Hp(this.x0b[e],this.C0b[e],this.W0[e]))}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXZWxsIjoibyRiIiwiZ2V0U3ltYm9sIjoiY2QiLCJnZXRTeW1ib2xzIjoiaVlhIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var sD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.Fsb=[];this.Tj=[];this.yea=this.Vk=null;this.Vt=new Hp;a.data instanceof Array&&(a.data=new JC({data:a.data}));a.data instanceof JC?this.Fsb=a.data.p$b():this.Fsb.push(a.data);for(var b=0;b<this.Fsb.length;b++){a.data=this.Fsb[b];var c=new TC(a);this.Tj[b]=new rt(c,new tt({vertexColors:!0}));this.add(this.Tj[b])}}D(d,fz);L(d,"geotoolkit3d.scene.well.TrajectoryLine");d.prototype.A5d=function(a){if(a.hasOwnProperty("colorprovider"))for(var b=0;b<this.Tj.length;b++)this.Tj[b].geometry.setOptions(a)};
d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);this.A5d(a);this.gg();return this};d.prototype.ui=function(a,b,c,e){fz.prototype.ui.call(this,a,b,c,e);a=c.aT().scale;this.Vk&&(null!=this.yea&&this.Tj[0].geometry.lV(this.yea,a),this.Vk.M_a(this.Tj[0].geometry.Gy(a)));if(!this.Vt.equals(a)){for(b=0;b<this.Tj.length;b++)this.Tj[0].material.hasOwnProperty("defines")||(this.Tj[0].material.defines={}),this.Tj[0].material.hasOwnProperty("uniforms")||(this.Tj[0].material.uniforms=
{}),hC.sYa(this.Tj[0].material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Vt.copy(a)}};d.prototype.pZ=function(a,b){null!=this.Vk&&this.remove(this.Vk);this.yea=b;this.Vk=a;this.add(this.Vk);this.gg();return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJ1aSIsInNldEFubm90YXRpb24iOiJwWiJ9fX0g");var tD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);var b=G(a,{radius:1});"string"===typeof b.colorprovider?b.color=new Pq(b.color):b.colorprovider instanceof Pq&&(b.color=b.colorprovider);if(a.data.start instanceof Hp&&a.data.end instanceof Hp){a=[];var c=[],e=[],f=[],g=(new Hp).subVectors(b.data.start,b.data.end),h=(new Hp).subVectors(b.data.end,b.data.start),k=b.radius,l=g.length();l<b.radius&&(k=l/2);g.normalize();g.multiplyScalar(k);a.push(0);c.push(0);e.push(0);f.push(b.radius);a.push(h.x+g.x);c.push(h.y+
g.y);e.push(h.z+g.z);f.push(b.radius);a.push(h.x+g.x);c.push(h.y+g.y);e.push(h.z+g.z);f.push(1.5*b.radius);a.push(h.x);c.push(h.y);e.push(h.z);f.push(0);b.data.x=a;b.data.y=c;b.data.z=e;b.data.widths=f;b.radiusmin=0;b.radiusmax=1.5*b.radius;this.position.set(b.data.start.x,b.data.start.y,b.data.start.z)}else rb("Invalid parameters for "+this.Pa());a=new du({color:b.color,name:"well"});this.Uea=new Zt(new bD(b),a);this.add(this.Uea);this.Vt=new Hp;this.setOptions(b)}D(d,fz);L(d,"geotoolkit3d.scene.well.Vector");
d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);a=G(a,{});"string"===typeof a.color&&(a.color=new Pq(a.color));this.Uea.material.color=a.color;this.gg();return this};d.prototype.ta=function(){return xb(this.Uea.material.ta(),fz.prototype.ta.call(this))};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var uD=function(){function d(){}function a(e,f,g,h){e=Math.cos(f-e)-Math.sin(e)*Math.sin(f)*(1-Math.cos(g-h));return Math.acos(e)}function b(e,f,g,h,k,l,m){var n=a(g,h,k,l),p=2/n*Math.tan(n/2);n<m?c(e,f,g,h,k,l):(m=Math.sin(h),n=Math.sin(g),f/=2,e.gi+=f*(n*Math.sin(k)+m*Math.sin(l))*p,e.Vh+=f*(n*Math.cos(k)+m*Math.cos(l))*p,e.Woa+=f*(Math.cos(g)+Math.cos(h))*p);return e}function c(e,f,g,h,k,l){g=(h+g)/2;k=(l+k)/2;e.Vh+=f*Math.sin(g)*Math.cos(k);e.gi+=f*Math.sin(g)*Math.sin(k);e.Woa+=f*Math.cos(g);
return{zJe:g,xJe:k}}d.nhb=function(e,f,g){var h=e.md,k=e.inclination;e=e.azimuth;var l=f.x,m=f.y;f=f.tvd;var n={};n.gi=l[0];n.Vh=m[0];n.Woa=f[0];for(var p=1;p<h.length;++p)n=b(n,h[p]-h[p-1],k[p-1],k[p],e[p-1],e[p],g),l[p]=n.gi,m[p]=n.Vh,f[p]=n.Woa};d.YHc=function(e,f,g){var h=e.md,k=e.inclination;e=e.azimuth;var l=f.x,m=f.y;f=f.tvd;for(var n=1;n<h.length;n++){var p=h[n]-h[n-1];if(Math.abs(k[n]-k[n-1])<g||Math.abs(e[n]-e[n-1])<g)p=b({gi:l[n-1],Vh:m[n-1],Woa:f[n-1]},p,k[n-1],k[n],e[n-1],e[n],g),l[n]=
p.gi,m[n]=p.Vh,f[n]=p.Woa;else{p=(k[n]-k[n-1])*(e[n]-e[n-1]);var q=Math.cos(k[n-1]);m[n]=(h[n]-h[n-1])*(q-Math.cos(k[n]))*(Math.sin(e[n])-Math.sin(e[n-1]));m[n]/=p;m[n]+=m[n-1];l[n]=(h[n]-h[n-1])*(q-Math.cos(k[n]))*(Math.cos(e[n-1])-Math.cos(e[n]));l[n]/=p;l[n]+=l[n-1];f[n]=(h[n]-h[n-1])*(Math.sin(k[n])-Math.sin(k[n-1]));f[n]/=k[n]-k[n-1];f[n]+=f[n-1]}}};d.E1b=function(e,f){var g=e.md,h=e.inclination;e=e.azimuth;var k=f.x,l=f.y;f=f.tvd;var m={};m.gi=k[0];m.Vh=l[0];m.Woa=f[0];for(var n=1;n<g.length;n++){var p=
g[n]-g[n-1];c(m,p,h[n-1],h[n],e[n-1],e[n]);k[n]=m.gi;l[n]=m.Vh;f[n]=m.Woa}};d.G1b=function(e,f){var g=e.md,h=e.inclination;e=e.azimuth;var k=f.x,l=f.y;f=f.tvd;for(var m=1;m<g.length;m++){var n=(g[m]-g[m-1])/2;l[m]=l[m-1]+n*(Math.sin(h[m])*Math.cos(e[m])+Math.sin(h[m-1])*Math.cos(e[m-1]));k[m]=k[m-1]+n*(Math.sin(h[m])*Math.sin(e[m])+Math.sin(h[m-1])*Math.sin(e[m-1]));f[m]=f[m-1]+n*(Math.cos(h[m])+Math.cos(h[m-1]))}};return d}(),vD=/*#__PURE__*/ta(/*#__PURE__*/{l3a:uD.nhb,MLb:uD.YHc,UKb:uD.E1b,YKb:uD.G1b},2,"eyJNaW5pbXVtQ3VydmF0dXJlIjoibDNhIiwiQ3VydmF0dXJlUmFkaXVzIjoiTUxiIiwiQXZlcmFnZUFuZ2xlIjoiVUtiIiwiQmFsYW5jZWRUYW5nZW50aWFsIjoiWUtiIn0g"),wD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}d.Gvd=function(a,b,c){null==c&&(c={});a=G(a,{mode:vD.l3a,tolerance:1E-10});c=G(c,{x:0,y:0,tvd:b.md[0]});c={x:[c.x],y:[c.y],tvd:[c.tvd]};b={inclination:b.inclination.map(Wy.L3b),azimuth:b.azimuth.map(Wy.L3b),md:b.md};a.mode(b,c,a.tolerance);return c};d.V6d=uD.V6d;d.G1b=uD.G1b;d.E1b=uD.E1b;d.PPe=uD.YHc;d.nhb=uD.nhb;d.DNb=vD;return d}(),2,"eyJjb21wdXRlRGV2aWF0aW9uIjoiR3ZkIn0g");var xD=function(){function d(){}d.sUc=function(a,b){for(var c=1;c<a.x.length;c++){var e=a.y[c]-a.y[c-1],f=a.x[c]-a.x[c-1],g=a.tvd[c]-a.tvd[c-1],h=b.md[c-1],k=f*f,l=e*e,m=g*g;k=4*k+4*l+4*m;l=0;m=-1;m=Math.sqrt(l*l-4*k*m);k=(-l+m)/(2*k);g=Math.acos(2*g*k);f=2*f*k/Math.sin(g);e=2*e*k/Math.sin(g);e=Math.atan2(f,e);b.md.push(1/k/2+h);b.inclination.push(g);b.azimuth.push(e)}};d.jac=function(a,b){for(var c=1;c<a.x.length;c++){var e=a.y[c]-a.y[c-1],f=a.x[c]-a.x[c-1],g=a.tvd[c]-a.tvd[c-1],h=b.inclination[c-
1],k=b.azimuth[c-1],l=b.md[c-1],m=Math.sin(h)*Math.sin(k);k=Math.sin(h)*Math.cos(k);h=Math.cos(h);var n=f*f,p=e*e,q=g*g,r=k*k,t=m*m,u=h*h;n=4*n+4*p+4*q;p=-(4*f*m+4*e*k+4*g*h);r=r+t+u-1;r=Math.sqrt(p*p-4*n*r);r=(-p+r)/(2*n);g=Math.acos(2*g*r-h);f=(2*f*r-m)/Math.sin(g);e=(2*e*r-k)/Math.sin(g);e=Math.atan2(f,e);b.md.push(1/r+l);b.inclination.push(g);b.azimuth.push(e)}};d.lac=function(a,b,c){for(var e=1;e<a.x.length;e++){var f=a.y[e]-a.y[e-1],g=a.x[e]-a.x[e-1],h=a.tvd[e]-a.tvd[e-1],k=b.inclination[e-
1],l=b.azimuth[e-1],m=b.md[e-1],n=2*Math.atan2(g,f)-l,p=-(Math.cos(l)-Math.cos(n)),q=Math.sin(n)-Math.sin(l),r=q/(n-l),t=p/(n-l);if(Math.abs(n-l)<c){p=Math.sin(k)*Math.sin(l);n=Math.sin(k)*Math.cos(l);r=Math.cos(k);var u=g*g,w=f*f,y=h*h;q=n*n;t=p*p;var z=r*r;u=4*u+4*w+4*y;w=-(4*g*p+4*f*n+4*h*r);q=q+t+z-1;q=Math.sqrt(w*w-4*u*q);q=(-w+q)/(2*u);r=Math.acos(2*h*q-r);g=(2*g*q-p)/Math.sin(r);f=(2*f*q-n)/Math.sin(r);n=Math.atan2(g,f);f=Math.acos(Math.cos(r-k)-Math.sin(k)*Math.sin(r)*(1-Math.cos(n-l)));f=
2*Math.tan(f/2)/f;f=1/(q*f)}else r=-(2*Math.atan2(f-g,-h*(t+r)))-k,0>r&&(r+=2*Math.PI),r>2*Math.PI&&(r-=2*Math.PI),t=r-k,l=n-l,z=Math.sin(r)-Math.sin(k),k=-(Math.cos(k)-Math.cos(r)),f=(g+f+h)/(z/t+p*k/(l*t)-k*q/(l*t));b.md.push(f+m);b.inclination.push(r);b.azimuth.push(n)}};d.kac=function(a,b){for(var c=1;c<a.x.length;c++){var e=a.y[c]-a.y[c-1],f=a.x[c]-a.x[c-1],g=a.tvd[c]-a.tvd[c-1],h=b.inclination[c-1],k=b.azimuth[c-1],l=b.md[c-1],m=Math.sin(h)*Math.sin(k),n=Math.sin(h)*Math.cos(k),p=Math.cos(h),
q=f*f,r=e*e,t=g*g,u=n*n,w=m*m,y=p*p;q=4*q+4*r+4*t;r=-(4*f*m+4*e*n+4*g*p);u=u+w+y-1;u=Math.sqrt(r*r-4*q*u);u=(-r+u)/(2*q);g=Math.acos(2*g*u-p);f=(2*f*u-m)/Math.sin(g);e=(2*e*u-n)/Math.sin(g);e=Math.atan2(f,e);h=Math.acos(Math.cos(g-h)-Math.sin(h)*Math.sin(g)*(1-Math.cos(e-k)));h=2*Math.tan(h/2)/h;b.md.push(1/(u*h)+l);b.inclination.push(g);b.azimuth.push(e)}};d.iac=function(a,b){for(var c=1;c<a.x.length;c++){var e=a.y[c]-a.y[c-1],f=a.x[c]-a.x[c-1],g=a.tvd[c]-a.tvd[c-1],h=Math.sqrt(f*f+e*e+g*g),k=h+
b.md[c-1];e=2*Math.atan2(f,e);g=2*Math.acos(g/h);b.md.push(k);b.inclination.push(g-b.inclination[c-1]);b.azimuth.push(e-b.azimuth[c-1])}};return d}(),yD=/*#__PURE__*/ta(/*#__PURE__*/{l3a:xD.kac,MLb:xD.lac,UKb:xD.iac,YKb:xD.jac},2,"eyJNaW5pbXVtQ3VydmF0dXJlIjoibDNhIiwiQ3VydmF0dXJlUmFkaXVzIjoiTUxiIiwiQXZlcmFnZUFuZ2xlIjoiVUtiIiwiQmFsYW5jZWRUYW5nZW50aWFsIjoiWUtiIn0g"),zD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){}d.Hvd=function(a,b,c){null==c&&(c={});var e=G(a,{mode:yD.l3a,tolerance:1E-10});c=G(c,{md:b.tvd[0],inclination:0,azimuth:0});c={md:[c.md],inclination:[c.inclination],azimuth:[c.azimuth]};a.mode(b,c,e.tolerance);c.inclination=c.inclination.map(Wy.Fdc);c.azimuth=c.azimuth.map(Wy.Fdc);
return c};d.sUc=xD.sUc;d.jac=xD.jac;d.lac=xD.lac;d.kac=xD.kac;d.iac=xD.iac;d.DNb=yD;return d}(),2,"eyJjb21wdXRlRGlyZWN0aW9uIjoiSHZkIn0g");var AD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(p,q){var r=new gy;p.getSize(r);var t=(q.min.x-p.min.x)/r.x,u=(q.min.y-p.min.y)/r.y,w=(q.max.x-p.min.x)/r.x;p=(q.max.y-p.min.y)/r.y;return[[[new gy(t,p),new gy(t,u),new gy(w,p)],[new gy(t,u),new gy(w,u),new gy(w,p)]]]}function a(p){fz.call(this);this.Jld=new cv(1,1,1,1);this.As=p.maxlod;this.Rr=p.minlod;this.uVb=0;this.U5a=p.server.formatterfunction;this.ruc=new ms;this.gIe=new Xt;this.sy=new Cx;this.sy.crossOrigin="Anonymous";this.tK=p.extent;this.twa=p.server.url;this.Wqd=
hz.yYa();this.Xwb=[];this.lB=1;this.eVb=new $t({side:Fr,color:11184810});this.ht=new Zt(new cv,new $t);this.ht.geometry.setDrawRange(0,0);this.ht.parent=this;this.p_a()}D(a,fz);L(a,"geotoolkit3d.scene.map.MapTile");a.prototype.hId=function(){if(!1===Array.isArray(this.twa))return this.twa;this.uVb=(this.uVb+1)%this.twa.length;return this.twa[this.uVb]};a.prototype.bda=function(p){if(this.lB!==p){var q=1>p,r=function(t){if(null!=t.material){var u=Array.isArray(t.material)?t.material:[t.material];u.forEach(function(w){w.opacity=
p;w.transparent=q})}null!=t.userData.zoa&&t.userData.zoa.forEach(r)};this.lB=p;r(this.mk);this.eVb.opacity=p;this.eVb.transparent=q}};a.prototype.CL=function(){return this.lB};a.prototype.Hoa=function(p){var q=p.GHc,r=p.HHc,t=p.IHc,u=this.U5a(q,r,t),w=new Hp;if(Wy.containsBox(this.tK,p.UL)){var y=new Zt(this.Jld);p.UL.getCenter(y.position);y.position.z=0;p.UL.getSize(w);y.scale.set(w.x,w.y,1);y.userData.BXd=!0}else{y=new Zt(new cv(1,1,1,1));var z=Wy.$Gc(this.tK,p.UL);z.getCenter(y.position);y.position.z=
0;z.getSize(w);y.scale.set(w.x,w.y,1);y.geometry.VKe=d(p.UL,z);y.geometry.qRe=!0}y.material=this.eVb;y.parent=this;var x=this.lB;q>=this.Rr&&this.sy.load(this.hId()+u,function(C){null!=y&&null!=y.parent?(this.material=new $t({map:C,side:Fr,opacity:x,transparent:1>x}),Zy.bha(this,C),-1!==this.parent.children.indexOf(this)&&fz.prototype.gg.call(this)):C.dispose()}.bind(y),{});y.userData.UL=p.UL;y.userData.depth=q;y.userData.x=r;y.userData.y=t;return y};a.prototype.HIc=function(p){if(null!=p){if(null!=
p.userData.zoa)for(var q=0;q<p.userData.zoa.length;q++)this.HIc(p.userData.zoa[q]);null!=p.parent&&p.parent.remove(p);p instanceof Gp&&(Zy.JIc(p),hz.dispose(p.children));null!=p.dispose&&p.dispose();null!=p.geometry&&!0!==p.userData.BXd&&(p.geometry.dispose(),p.geometry=null);hz.ucb(p.material);p.material=null}};a.prototype.Zwd=function(p){var q=[],r=p.userData.UL.clone(),t=new Hp;r.getCenter(t);var u=[Math.round(r.min.x),Math.round(t.x),Math.round(r.max.x)];r=[Math.round(r.max.y),Math.round(t.y),
Math.round(r.min.y)];for(t=0;2>t;t++)for(var w=0;2>w;w++){var y={UL:new tq(new gy(u[t],r[w+1]),new gy(u[t+1],r[w])),HHc:2*p.userData.x+w,IHc:2*p.userData.y+t,GHc:p.userData.depth+1};Wy.intersectBox(this.tK,y.UL)&&(y=this.Hoa(y),q.push(y),y.userData.uPe=p)}return q};a.prototype.p_a=function(){if(null!=this.twa&&null!=this.U5a){this.HIc(this.mk);var p={UL:this.Wqd.clone(),HHc:0,IHc:0,GHc:0};this.mk=this.Hoa(p);this.add(this.mk);this.gg();this.ht.scale.copy(this.mk.scale);this.ht.rotation.copy(this.mk.rotation);
this.ht.position.copy(this.mk.position)}};a.prototype.t1d=function(p){p.equals(this.tK)||(this.tK=p,this.p_a());return this};a.prototype.SEd=function(){return this.tK};a.prototype.Q2d=function(p){p!==this.As&&(this.As=p,this.p_a());return this};a.prototype.Ieb=function(){return this.As};a.prototype.Y2d=function(p){p!==this.Rr&&(this.Rr=p,this.p_a());return this};a.prototype.Leb=function(){return this.Rr};a.prototype.L4d=function(p){p!==this.twa&&(this.twa=p,this.p_a());return this};a.prototype.VKd=
function(){return this.twa};a.prototype.C1d=function(p){p!==this.U5a&&(this.U5a=p,this.p_a());return this};a.prototype.sFd=function(){return this.U5a};a.prototype.d9d=function(p){null==p.userData.zoa&&p.userData.depth<this.As&&(p.userData.zoa=this.Zwd(p))};a.prototype.add=function(p){p instanceof Gp&&(void 0!==p.parent&&p.parent.remove(p),p.parent=this,this.children.push(p));return this};a.prototype.remove=function(p){var q=this.children.indexOf(p);-1!==q&&(p.parent=void 0,this.children.splice(q,
1))};var b=new Ud,c=new gy,e=new gy,f=new gy,g=new gy,h=new Hp(-.5,-.5,0),k=new Hp(-.5,.5,0),l=new Hp(.5,.5,0),m=new Hp(.5,-.5,0),n=new Xt;a.prototype.ui=function(p,q,r){function t(){w.d9d(y,!0);if(null!=y.userData.zoa)for(var x=0;x<y.userData.zoa.length;x++)u.push(y.userData.zoa[x]);else w.Xwb.push(y)}var u=[];null!=this.mk&&u.push(this.mk);this.Xwb=[];q.matrixWorldInverse.copy(q.matrixWorld).invert();n.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse);this.ruc.setFromProjectionMatrix(n);
var w=this;for(r.getSize(b);0<u.length;){var y=u.shift();if(y.userData.depth<this.Rr)t();else if(y.updateMatrixWorld(),this.ruc.intersectsObject(y)){h.set(y.userData.UL.min.x,y.userData.UL.min.y,0);k.set(y.userData.UL.min.x,y.userData.UL.max.y,0);l.set(y.userData.UL.max.x,y.userData.UL.max.y,0);m.set(y.userData.UL.max.x,y.userData.UL.min.y,0);h=this.localToWorld(h);k=this.localToWorld(k);l=this.localToWorld(l);m=this.localToWorld(m);hz.Fsa(h,q,b,c);hz.Fsa(k,q,b,e);hz.Fsa(l,q,b,f);hz.Fsa(m,q,b,g);
p=e.distanceTo(f);r=c.distanceTo(g);p=(p+r)/2;r=c.distanceTo(e);var z=f.distanceTo(g);r=(r+z)/2;341<p||341<r?t():this.Xwb.push(y)}}this.children=this.Xwb.slice();this.children.push(this.ht)};a.prototype.kha=function(){return!0};a.prototype.Opa=function(){return[this.ht]};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJraGEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiT3BhIn19fSAg");var BD=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{maxlod:10,minlod:0,extent:hz.yYa(),maplimits:hz.yYa(),opacity:1});this.W_=new AD(a);this.add(this.W_);this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.map.TiledMap");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);if(null!=a.maplimits&&null!=a.extent){this.Kr=a.maplimits;var b=new Hp;this.Kr.getCenter(b);var c=new Hp;b=b.sub(a.extent.getCenter(c));c=new Hp;var e=new Hp;this.Kr.getSize(c);a.extent.getSize(e);
this.scale.set(c.x/e.x,c.y/e.y,1);this.position.set(b.x*this.scale.x,b.y*this.scale.y,0)}null!=a.extent&&this.W_.t1d(a.extent);null!=a.maxlod&&this.W_.Q2d(a.maxlod);null!=a.minlod&&this.W_.Y2d(a.minlod);null!=a.server&&this.W_.L4d(a.server);null!=a.formatterfunction&&this.W_.C1d(a.formatterfunction);null!=a.opacity&&this.W_.bda(a.opacity);this.gg();return this};d.prototype.ta=function(){return xb({maplimits:this.Kr,extent:this.W_.SEd(),minlod:this.W_.Leb(),maxlod:this.W_.Ieb(),server:this.W_.VKd(),
formatterfunction:this.W_.sFd(),opacity:this.W_.CL()},fz.prototype.ta.call(this))};d.prototype.yia=function(){return new uq(new Hp(this.Kr.min.x,this.Kr.min.y,-.5),new Hp(this.Kr.max.x,this.Kr.max.y,.5))};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var DI=/*#__PURE__*/function(){function d(){fz.call(this)}D(d,fz);L(d,"geotoolkit3d.widgets.AbstractWidget");return d}();var EI=/*#__PURE__*/{qb:"top",Ed:"bottom",tc:"left",cc:"right",qmb:"front",vlb:"back"};var FI=/*#__PURE__*/function(){function d(){Lw.call(this,{vertexShader:pC.VERTEX_SHADER,fragmentShader:pC.FRAGMENT_SHADER,side:Fr,transparent:!0});this.Lzb=!0}D(d,Lw);L(d,"geotoolkit3d.widgets.ProjectionWidgetMaterial");d.prototype.setTexture=function(a){pC.setTexture(this,a);return this};return d}();oz.lw(FI.Pa(),mz);var GI=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(m){DI.call(this,m);this.Fg(!1);this.Kr=new uq;this.Vc=new EA({});this.vf={};this.Jma=[];this.ztb=!0;this.add(this.Vc);m=xb(m,{planes:{left:!0,right:!0,top:!0,bottom:!0,front:!0,back:!0}});this.setOptions(m)}var a=new Hp,b=new Hp,c=new Hp,e=new Hp,f=new Hp,g=new Pu(0,0,1,1),h=new Xt,k=new Ud,l=512;D(d,DI);L(d,"geotoolkit3d.widgets.ProjectionWidget");d.prototype.setOptions=function(m){if(null==m)return this;DI.prototype.setOptions.call(this,m);m.hasOwnProperty("grid")&&
this.Vc.setOptions(m.grid);if(m.hasOwnProperty("planes"))for(var n in m.planes){var p=m.planes[n];null!==this.vf[n]?p&&(this.vf[n]=new Zt(new cv,new FI),this.add(this.vf[n]),this.needsUpdate=!0,this.vf[n].userData.ZEb=!0):(this.vf[n].visible=p,this.vf[n].userData.ZEb=!0)}m.hasOwnProperty("meshes")&&(this.Jma=m.meshes,this.needsUpdate=!0);return this};d.prototype.ta=function(){var m={},n;for(n in EI)m[n]=null!=this.vf[n]&&this.vf[n].userData.ZEb;return xb({grid:this.Vc.ta(),planes:m,meshes:this.Jma},
DI.prototype.ta.call(this))};d.prototype.asd=function(m){for(var n=0;n<this.Jma.length;n++)if(this.Jma[n]===m)return this;this.Jma.push(m);this.needsUpdate=!0;return this};d.prototype.mYd=function(m){for(var n=0;n<this.Jma.length;n++)if(this.Jma[n]===m){this.Jma.splice(n,1);this.needsUpdate=!0;break}return this};d.prototype.Cxb=function(m){this.Vc.Cxb(m);this.needsUpdate=!0;return this};d.prototype.CZ=function(){var m=this;this.Kr.makeEmpty();this.Jma.forEach(function(p){m.Kr.expandByObject(p)});
this.Kr.applyMatrix4(h.copy(this.parent.matrixWorld).invert());var n=this.Vc.ta();(this.ztb=n.start!==this.Kr.min||n.end!==this.Kr.max)&&this.Vc.setOptions({start:this.Kr.min,end:this.Kr.max,modelstart:this.Kr.min,modelend:this.Kr.max});this.Kr.applyMatrix4(this.parent.matrixWorld)};d.prototype.K8d=function(m,n,p){var q;this.Vc.visible=!1;for(q in this.vf)this.vf[q].userData.mWc=this.bvd(q,n),this.vf[q].visible=!1;for(q in this.vf)this.kKb(m,p,q);for(q in this.vf)this.vf[q].visible=this.vf[q].userData.mWc&&
this.vf[q].userData.ZEb;this.Vc.visible=!0;this.ztb=!1};d.prototype.kKb=function(m,n,p){var q=this.vf[p];if(this.ztb){this.Kr.applyMatrix4(h.copy(this.parent.matrixWorld).invert());this.t$c(p);q.scale.set(k.ca(),k.da(),1);switch(p){case EI.qb:case EI.Ed:q.rotation.set(0,0,0);break;case EI.tc:case EI.cc:q.rotation.set(0,.5*Math.PI,0);break;case EI.qmb:case EI.vlb:q.rotation.set(.5*Math.PI,0,0)}switch(p){case EI.qb:case EI.cc:case EI.qmb:q.position.copy(c).add(e).divideScalar(2);break;case EI.Ed:case EI.tc:case EI.vlb:q.position.copy(a).add(b).divideScalar(2)}this.Kr.applyMatrix4(this.parent.matrixWorld)}if(q.userData.mWc&&
q.userData.ZEb){var r=n.renderTarget||null,t=n.getClearAlpha();q.userData.renderTarget=q.userData.renderTarget||new oy(l,l);var u=q.userData.renderTarget;n.setClearAlpha(0);n.setRenderTarget(u);this.t$c(p);g.position.copy(a).add(b).divideScalar(2);f.copy(c).add(e).divideScalar(2);g.lookAt(f);g.left=.5*-k.ca();g.right=.5*k.ca();g.top=.5*-k.da();g.bottom=.5*k.da();g.updateProjectionMatrix();n.render(m,g);n.setRenderTarget(r);n.setClearAlpha(t);q.material.setTexture(u.texture)}};d.prototype.bvd=function(m,
n){var p=this.Kr.min,q=this.Kr.max;switch(m){case EI.qb:a.set(p.x,p.y,q.z);b.set(q.x,q.y,q.z);c.set(p.x,p.y,p.z);e.set(q.x,q.y,p.z);break;case EI.Ed:a.set(p.x,p.y,p.z);b.set(q.x,q.y,p.z);c.set(p.x,p.y,q.z);e.set(q.x,q.y,q.z);break;case EI.vlb:a.set(p.x,q.y,p.z);b.set(q.x,q.y,q.z);c.set(p.x,p.y,p.z);e.set(q.x,p.y,q.z);break;case EI.qmb:a.set(p.x,p.y,p.z);b.set(q.x,p.y,q.z);c.set(p.x,q.y,p.z);e.set(q.x,q.y,q.z);break;case EI.cc:a.set(q.x,p.y,p.z);b.set(q.x,q.y,q.z);c.set(p.x,p.y,p.z);e.set(p.x,q.y,
q.z);break;case EI.tc:a.set(p.x,p.y,p.z),b.set(p.x,q.y,q.z),c.set(q.x,p.y,p.z),e.set(q.x,q.y,q.z)}f.copy(a).add(b).multiplyScalar(.5);m=n.position.distanceTo(f);f.copy(c).add(e).multiplyScalar(.5);n=n.position.distanceTo(f);return m>n};d.prototype.t$c=function(m){var n=this.Kr.min,p=this.Kr.max;switch(m){case EI.qb:case EI.Ed:g.up.set(0,-1,0);var q=p.x-n.x;var r=p.y-n.y;a.set(n.x,n.y,n.z);b.set(p.x,p.y,n.z);c.set(n.x,n.y,p.z);e.set(p.x,p.y,p.z);break;case EI.qmb:case EI.vlb:g.up.set(0,1,0);q=p.x-
n.x;r=p.z-n.z;a.set(n.x,p.y,n.z);b.set(p.x,p.y,p.z);c.set(n.x,n.y,n.z);e.set(p.x,n.y,p.z);break;case EI.cc:case EI.tc:g.up.set(0,-1,0),q=p.z-n.z,r=p.y-n.y,a.set(n.x,n.y,n.z),b.set(n.x,p.y,p.z),c.set(p.x,n.y,n.z),e.set(p.x,p.y,p.z)}k.setSize(q,r)};d.prototype.ui=function(m,n,p,q){DI.prototype.ui.call(this,m,n,p,q);this.needsUpdate&&(this.CZ(),this.K8d(m,n,q))};d.prototype.dispose=function(){for(var m in this.vf){var n=this.vf[m];null!=n.material&&n.material.dispose();null!=n.userData.renderTarget&&
n.userData.renderTarget.dispose()}this.Vc.dispose();DI.prototype.dispose.call(this)};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJhZGRNZXNoIjoiYXNkIiwicmVtb3ZlTWVzaCI6Im1ZZCIsImFkZExlZ2VuZCI6IkN4YiIsImJlZm9yZVJlbmRlciI6InVpIn19fSAg");var HI=/*#__PURE__*/function(){function d(b,c){Cz.call(this,{vertexShader:a.VERTEX_SHADER,fragmentShader:a.zed,transparent:!0,color:b?b.color:void 0,colorprovider:b?b.colorprovider:void 0});this.type="ProjectionMaterial";switch(c.name){case "sphere":b.symbol=Fz.cjc;break;case "cube":b.symbol=Fz.rha;break;case "pyramid":b.symbol=Fz.WJb;break;case "triangle":b.symbol=Fz.WJb;break;default:b.symbol=Fz.cjc}d.prototype.setOptions.call(this,b)}var a=OB;D(d,Cz);L(d,"geotoolkit3d.widgets.scatter.ProjectionMaterial");d.prototype.setOptions=
function(b){a.K3d(this,b);Cz.prototype.setOptions.call(this,b);return this};d.prototype.ta=function(){var b=Cz.prototype.ta.call(this);return xb(b,a.JId(this))};return d}();var II=/*#__PURE__*/function(){function d(b){Cz.call(this,{vertexShader:a.VERTEX_SHADER,fragmentShader:a.FRAGMENT_SHADER,transparent:!0});this.type="ScatterMaterial";d.prototype.setOptions.call(this,b)}var a=OB;D(d,Cz);L(d,"geotoolkit3d.widgets.scatter.ScatterMaterial");d.prototype.setOptions=function(b){Cz.prototype.setOptions.call(this,b);a.L3d(this,b)};d.prototype.ta=function(){var b=Cz.prototype.ta.call(this);return xb(b,a.KId(this))};return d}();oz.lw(II.Pa(),Dz);var JI=/*#__PURE__*/ta(/*#__PURE__*/{wsa:function(){var d=new Zw(1,12,8);d.name="sphere";return d}(),rha:function(){var d=new xq(1,1,1,1,1,1);d.name="cube";return d}(),xdc:function(){var d=new Uq(1,1,4,1);d.rotateX(Math.PI/2);d.name="pyramid";return d}()},2,"eyJzcGhlcmUiOiJ3c2EiLCJjdWJlIjoicmhhIiwicHlyYW1pZCI6InhkYyJ9"),KI=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(b){DI.call(this);this.hb=G(b,{colorprovider:"red",symbol:"circle",opacity:1,projection:{enable:!0,sizefactor:.66,topbottom:{color:"lightgray"},leftright:{color:"lightgray"},frontback:{color:"lightgray"}}});hz.aWa(this.hb);this.Zi=!0;this.Vc=this.Fwd(this.hb.gridoption);
this.add(this.Vc);this.dr={};this.Jj={};null!=this.hb.data&&(b=null!=this.hb.data.name?this.hb.data.name:"default",this.setData(b,this.hb.symbol,this.hb.data,this.hb.projection))}var a=5;D(d,DI);L(d,"geotoolkit3d.widgets.scatter.ScatterPlot");d.prototype.setData=function(b,c,e,f){if(null==b||null==e||null==c)hb("Missing at least one input");else{this.hb.symbol=c;null!==f&&(this.hb.projection=G(f,this.hb.projection));if(e instanceof LH){var g=e.Fh();f=e.EA("x")?e.EA("x").toArray():Array(g);var h=e.EA("y")?
e.EA("y").toArray():Array(g);var k=e.EA("z")?e.EA("z").toArray():Array(g);var l=e.EA("size")?e.EA("size").toArray():Array(g).fill(5);g=e.EA("visible")?e.EA("visible").toArray():Array(g).fill(1);e=e.EA("value")?e.EA("value").toArray():null}else g=e.x?e.x.length:e.y?e.y.length:e.z?e.z.length:0,f=e.x||Array(g),h=e.y||Array(g),k=e.z||Array(g),l=e.size||Array(g).fill(5),g=e.visible||Array(g).fill(1),e=e.value;var m=Fz;var n="ball soliddot circle cube sphere triangle".split(" ");c instanceof Bx||-1<n.indexOf(c)?
(c instanceof Bx&&(c=c.name),n=function(p){this.gg();this.hb.data=null}.bind(this),c=m[c+"Loader"](n),this.y0a(b,c,f,h,k,l,g),this.hb.symbol=c,n=new II(this.hb),m=new Aq,n=new iv(m,n),n.name=b,this.c5d(n,f,h,k,l,g,e),this.add(n),this.Jj[b]=n,this.y0a(b,c,f,h,k,l,g),this.lKb()):(n=new zs,m=c,this.d5d(n,m,f,h,k,l,g,e),this.add(n),this.Jj[b]=n,this.y0a(b,c,f,h,k,l,g),this.lKb(),this.gg(),this.hb.data=null);n.userData.HYc=b}};d.prototype.c5d=function(b,c,e,f,g,h,k){var l=0,m=c.length;if(this.Zi){var n=
new Hp(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);var p=new Hp(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);this.Zi=!1}else n=this.Vc.$C(),p=this.Vc.CH();var q=new Ws(new Float32Array(6*m),6),r=new Xs(q,3,0),t=new Xs(q,1,3),u=new Xs(q,1,4);q=new Xs(q,1,5);for(var w=0;w<m;w++)r.setXYZ(w,c[w],e[w],f[w]),n.x=Math.min(n.x,c[w]),n.y=Math.min(n.y,e[w]),n.z=Math.min(n.z,f[w]),p.x=Math.max(p.x,c[w]),p.y=Math.max(p.y,e[w]),p.z=Math.max(p.z,f[w]),u.setX(w,g[w]),t.setX(w,h[w]),null!=k&&q.setX(w,
k[w]),l+=g[w];b.geometry.setAttribute("position",r);b.geometry.setAttribute("cgpointVisible",t);b.geometry.setAttribute("cgpointSize",u);b.geometry.setAttribute("cgcolormapValue",q);a=l/m;n.subScalar(a);p.addScalar(a);this.hb.gridoption=G(this.hb.gridoption,{start:n,end:p,modelstart:n,modelend:p});this.Vc.setOptions(this.hb.gridoption)};d.prototype.d5d=function(b,c,e,f,g,h,k,l){var m=0;if(this.Zi){var n=new Hp(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);var p=new Hp(Number.MIN_VALUE,Number.MIN_VALUE,
Number.MIN_VALUE);this.Zi=!1}else n=this.Vc.$C(),p=this.Vc.CH();for(var q=0;q<e.length;q++){n.x=Math.min(n.x,e[q]);n.y=Math.min(n.y,f[q]);n.z=Math.min(n.z,g[q]);p.x=Math.max(p.x,e[q]);p.y=Math.max(p.y,f[q]);p.z=Math.max(p.z,g[q]);m+=h[q];var r=Az.l3b(new rf);r=new Zt(c,r);r.userData.GYc=q;r.userData.YVd=q;r.position.set(e[q],f[q],g[q]);r.scale.set(h[q],h[q],h[q]);r.visible=k[q];var t=this.hb.colorprovider.mb(l[q]);r.material.userData.bpa.setColor("rgba("+t.Xj()+","+t.Wj()+","+t.Vj()+","+this.hb.opacity+
")");Az.dad(r.material,r.material.userData.bpa);r.name="Point";b.add(r)}a=m/e.length;n.subScalar(a);p.addScalar(a);this.hb.gridoption=G(this.hb.gridoption,{start:n,end:p,modelstart:n,modelend:p});this.Vc.setOptions(this.hb.gridoption)};d.prototype.setOptions=function(b){if(null==b)return this;b.hasOwnProperty("colorprovider")&&hz.aWa(b);DI.prototype.setOptions.call(this,b);this.hb=xb(b,this.hb);b.gridoption&&(this.hb.gridoption=G(b.gridoption,this.hb.gridoption),this.Vc.setOptions(b.gridoption));
b.projection&&(this.hb.projection=G(b.projection,this.hb.projection),this.lKb(),b.projection.enable||this.X3b());this.gg();return this};d.prototype.ta=function(){return xb(this.hb,DI.prototype.ta.call(this))};d.prototype.O8b=function(b,c){if(null==c)return null;b=b||"default";b=this.Jj[b].geometry;var e=b.getAttribute("position").array;b=e[6*c];var f=e[6*c+1],g=e[6*c+2],h=e[6*c+3],k=e[6*c+4];c=e[6*c+5];var l=new Ws(new Float32Array(6),6);e=new Xs(l,3,0);var m=new Xs(l,1,3),n=new Xs(l,1,4);l=new Xs(l,
1,5);e.setXYZ(0,b,f,g);m.setX(0,h);n.setX(0,k);l.setX(0,c);return{position:e,cgpointVisible:m,cgpointSize:n,cgcolormapValue:l}};d.prototype.zQc=function(b,c){if(null==b)return null;c=c||"default";if(null==this.Jj[c])return null;if(this.Jj[c]instanceof iv){var e=this.Jj[c].geometry;e=e.getAttribute("position").array;if(0>b||b>=e.length/6)return null;var f=e[6*b],g=e[6*b+1],h=e[6*b+2],k=e[6*b+3],l=e[6*b+4];e=e[6*b+5];var m=this.hb.colorprovider.mb(e);return{datasetname:c,index:b,position:new Hp(f,g,
h),visible:1===k,size:l,value:e,color:m}}f=null;e=this.Jj[c].children;if(null==e)return null;for(m=0;m<e.length;m++)if(null!=e[m]&&null!=e[m].userData&&e[m].userData.GYc===b){f=e[m];break}if(null==f)return null;e=f.userData.YVd;m=this.hb.colorprovider.mb(e);return{datasetname:c,index:b,position:f.position.clone(),visible:!!f.visible,size:f.scale.x,value:e,color:m}};d.prototype.kJd=function(b){if(null==b)return null;Array.isArray(b)&&(b=b[0]);if(null==b||null==b.object)return null;var c=b.object;if(!(c instanceof
Zt||c instanceof iv))return null;if(c instanceof iv){var e=b.pointindex;if(!(Number.isSafeInteger(e)&&0<=e)||c.parent!==this)return null;b=c.userData.HYc}else{if(!(c.parent instanceof zs)||c.parent.parent!==this)return null;b=c.parent.userData.HYc;e=c.userData.GYc}return this.zQc(e,b)};d.prototype.y0a=function(b,c,e,f,g,h,k){var l=this.hb.projection;if(null!=l&&!1!==l.enable){var m=e.length;m=Array(m).fill(0);if(null!=l.topbottom){var n=new HI(l.topbottom,c);var p=new iv(new Aq,n);n=new iv(new Aq,
n);this.EWa(p,e,f,m,h,k);this.EWa(n,e,f,m,h,k);this.add(p);this.add(n);p.visible=!1;n.visible=!1}if(null!=l.leftright){var q=new HI(l.leftright,c);var r=new iv(new Aq,q);q=new iv(new Aq,q);this.EWa(r,m,f,g,h,k);this.EWa(q,m,f,g,h,k);this.add(r);this.add(q);r.visible=!1;q.visible=!1}if(null!=l.frontback){c=new HI(l.frontback,c);var t=new iv(new Aq,c);var u=new iv(new Aq,c);this.EWa(t,e,m,g,h,k);this.EWa(u,e,m,g,h,k);this.add(t);this.add(u);t.visible=!1;u.visible=!1}this.dr[b]={top:p,bottom:n,left:r,
right:q,front:t,back:u}}};d.prototype.EWa=function(b,c,e,f,g,h){var k=this.hb.projection.sizefactor||.66,l=c.length,m=new Ws(new Float32Array(5*l),5),n=new Xs(m,3,0),p=new Xs(m,1,3);m=new Xs(m,1,4);for(var q=0;q<l;q++)n.setXYZ(q,c[q],e[q],f[q]),m.setX(q,g[q]*k),p.setX(q,h[q]);b.geometry.setAttribute("position",n);b.geometry.setAttribute("cgpointVisible",p);b.geometry.setAttribute("cgpointSize",m)};d.prototype.lKb=function(){var b=this.Vc.$C(),c=this.Vc.CH(),e;for(e in this.dr)this.dr[e].top.position.setZ(c.z),
this.dr[e].bottom.position.setZ(b.z),this.dr[e].left.position.setX(b.x),this.dr[e].right.position.setX(c.x),this.dr[e].front.position.setY(b.y),this.dr[e].back.position.setY(c.y)};d.prototype.ui=function(b,c,e,f){if(0!==Object.keys(this.dr).length&&null!=this.Vc){f=this.Vc.cq();var g=this.Vc.N8b(),h;for(h in this.dr)null!=this.dr[h].top&&(e=null!=this.dr[h].top.userData.enable?this.dr[h].top.userData.enable:!0,this.dr[h].top.visible=f(g.top,b,c)&&e,this.dr[h].bottom.visible=f(g.bottom,b,c)&&e),null!=
this.dr[h].left&&(e=null!=this.dr[h].left.userData.enable?this.dr[h].left.userData.enable:!0,this.dr[h].left.visible=f(g.left,b,c)&&e,this.dr[h].right.visible=f(g.right,b,c)&&e),null!=this.dr[h].front&&(e=null!=this.dr[h].front.userData.enable?this.dr[h].front.userData.enable:!0,this.dr[h].front.visible=f(g.front,b,c)&&e,this.dr[h].back.visible=f(g.back,b,c)&&e)}};d.prototype.r7d=function(b,c){if(0!==Object.keys(this.dr).length){for(var e in this.dr)switch(b){case "topbottom":this.dr[e].top.userData.enable=
c;break;case "leftright":this.dr[e].left.userData.enable=c;break;case "frontback":this.dr[e].front.userData.enable=c}this.gg()}};d.prototype.HFd=function(){return new uq(this.Vc.$C(),this.Vc.CH())};d.prototype.LDd=function(){return Object.keys(this.Jj)};d.prototype.X3b=function(b){if(null!=b){for(var c in this.dr[b])hz.dispose(this.dr[b][c]);delete this.dr[b]}else{for(var e in this.dr)for(var f in this.dr[e])hz.dispose(this.dr[e][f]);this.dr={}}};d.prototype.dispose=function(b){if(null!=b)null!=this.Jj[b]&&
(this.X3b(b),hz.dispose(this.Jj[b]),delete this.Jj[b]);else{this.X3b();for(var c in this.Jj)hz.dispose(this.Jj[c]);this.Jj={}}};d.prototype.Fwd=function(b){b=xb(b,{start:new Hp(-1,-1,-1),end:new Hp(1,1,1),counts:new Hp(3,3,6),grid:{linestyles:{x:new Y({color:"darkgrey",pattern:vg.wka}),y:new Y({color:"darkgrey",pattern:vg.wka}),z:new Y({color:"darkgrey",pattern:vg.wka})}},axis:{linestyles:{x:new Y({color:"black"}),y:new Y({color:"black"}),z:new Y({color:"black"})},textstyles:{x:new Fi({color:"black"}),
y:new Fi({color:"black"}),z:new Fi({color:"black"})}},title:{textstyles:{x:new Fi({color:"black"}),y:new Fi({color:"black"}),z:new Fi({color:"black"})}}});return new EA(b)};d.njd=JI;return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRQb2ludERhdGEiOiJ6UWMiLCJnZXRQb2ludERhdGFCeVBpY2tpbmciOiJrSmQiLCJ1cGRhdGVQcm9qZWN0aW9uIjoibEtiIiwiYmVmb3JlUmVuZGVyIjoidWkiLCJ0b2dnbGVQcm9qZWN0aW9uIjoicjdkIiwiZ2V0R3JpZExpbWl0IjoiSEZkIiwiZ2V0RGF0YVNldE5hbWUiOiJMRGQifX19");var xL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{});var b=a.data,c=a.material,e=c.Efb();c=c.Ffb();var f=b.path;b=b.index.zxa();var g=f.i;f=f.j;for(var h=new cv(1,1,e,c),k=0;k<h.index.count;k+=3)h.addGroup(k,3,Math.floor(k/6));h.applyMatrix4((new Xt).makeTranslation(.5,.5,0));h.applyMatrix4((new Xt).makeRotationZ(Math.PI/2));h.applyMatrix4((new Xt).makeRotationY(Math.PI/2));k=new Hp;b.getSize(k);for(var l=h.getAttribute("position"),m=0;m<=c;m++)for(var n=0;n<=e;n++){var p=n+m*(e+1);l.setX(p,g[0]+
(g[1]-g[0])/e*n);l.setY(p,f[0]+(f[1]-f[0])/e*n);var q=l.getZ(n+m*(e+1));q=q*k.z+b.min.z;l.setZ(p,q)}this.HW=a.material;this.en=new Zt(h,this.HW.SJa());this.add(this.en);this.setOptions(a)}D(d,fz);L(d,"geotoolkit3d.scene.seismic.FencePanel");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);this.HW.setOptions(a);this.gg();return this};d.prototype.ta=function(){return xb(this.HW.ta(),fz.prototype.ta.call(this))};d.prototype.GA=function(){return this.HW.GA()};
d.prototype.zIb=function(a){this.setOptions({overlay:a})};d.prototype.EJa=function(){return this.HW};d.prototype.R1=function(){return this.en};d.prototype.getBoundingBox=function(){null==this.en.geometry.boundingBox&&this.en.geometry.computeBoundingBox();return this.en.geometry.boundingBox.clone()};d.prototype.Z1=function(){return this.HW.Z1()};d.prototype.ui=function(){var a=this.EJa(),b=a.ta();b.disposesurface&&a.SJa().forEach(function(c){c.userData.Fca&&(c.userData.yib=!1)})};d.prototype.n6=function(){var a=
this.EJa(),b=a.ta();b.disposesurface&&a.SJa().forEach(function(c){null!=c.userData.yib&&(c.map.image=null,delete c.userData.Fca,delete c.userData.yib)})};d.prototype.dispose=function(){hz.dispose(this.HW);fz.prototype.dispose.call(this)};return d}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRGZW5jZU1hdGVyaWFsIjoiRUphIiwiZ2V0TWVzaCI6IlIxIn19fSAg");jA.mHb(xL.Pa(),cC);var yL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(q){te.call(this);this.xHa=new ro;this.vb=null;this.gN=[];this.Rma=Number.MAX_VALUE;this.lB=1;this.Zsb={};var r=q.data.reader;null==q.pipeline&&(q.pipeline={});null==q.pipeline.options&&(q.pipeline.options={});var t=r.oa();q.data=G(q.data,{limits:new U({x:t.ka()+.5,y:t.la(),width:r.Qg(),height:t.da()})});r=hA.TJa();if(!Number.isFinite(r)||0>=r)r=k;h=Math.min(r,l);q=G(q,{maxpixelsx:l,maxpixelsy:l,pixelrenderthreshold:null,verticalresolution:1,horizontalresolution:1,loadingcolor:"rgba(255, 255, 255, 0.5)",
oninvalidate:function(){},autodecimate:!0,numberofparalleltasks:n,materialoptions:{},clearpipeline:!0,disposesurface:!1,initialtexturesize:q.tilesize||h,overlay:null});this.pXb=q.oninvalidate;q.pipeline.options=G(q.pipeline.options,{normalization:{type:LI.mnb,scale:1},plot:{type:{Wiggle:!1,InterpolatedDensity:!0},decimationSpacing:5},colors:{colorMap:TJ.lg().ccb("WhiteBlack",320)}});this.vFa=q.loadingcolor;this.mA=q.overlay;this.U8a=function(){e||this.yD(null,null,!0)}.bind(this);null!=this.mA&&this.mA.Ax(this.U8a);
this.pzc=!1;this.FHa=q.initialtexturesize;this.d_=Math.round(Math.log2(this.FHa));this.OW=Math.round(Math.log2(m));this.IW=Math.round(Math.log2(hA.TJa()/2));this.lYb=this.uDa=!1;this.setOptions(q);this.type="SliceMaterial"}function a(q,r,t,u,w,y,z){w=wc(w,y,!0);w=new Bx(w);w.generateMipmaps=!0;w.minFilter=Gt;w.anisotropy=16;if(1<t||1<u)w.wrapS=lu,w.wrapT=lu,w.repeat.set(t,u),r=(r+u)%2?0:-1,q=q%2?-1:0,w.offset.set(q,r);return z=new $t(G(z,{alphaTest:.01,side:Fr,map:w}))}function b(q,r){if(0===q)return 1;
var t=Math.max(1,Math.ceil(q/r));if(1!==t)return r;for(t=h/2;q<=t;)r=t,t/=2;t/=2;3===Math.ceil(q/t)&&(r=t);return r}function c(q,r,t,u){if(q&&q.ta().decimation&&1<=r){var w=p;r=Math.abs(Math.ceil(w-w*(r-t)/(u-t)));var y=W.clamp(r,1,w);return new Cg(function(z,x){q.update({decimation:{level:y}},function(C){if(C)x();else{C=q.tba();var A=new U(0,C.HL(),C.Qg()-1,C.HL()+(C.EE()-1)*C.Yj());C=new U({x:A.ka()+.5,y:A.la(),width:C.Qg(),height:A.da()});z(C)}})})}return Cg.resolve(null)}var e=!1,f=new hi(Number.POSITIVE_INFINITY),
g=new ki,h=null,k=2048,l=4096,m=512,n=24,p=10;D(d,te);L(d,"geotoolkit3d.scene.seismic.SliceMaterial");d.prototype.pud=function(q,r,t){r=this.IT;var u=this.Hga,w=this.DQ,y=this.U5,z=t&&this.FHa?Math.min(this.FHa,t):this.FHa,x=this.NTb,C=this.fe.ca(),A=this.h0b;q=this.fe.da()/q.Yj()+1;x=Math.min(C*x,this.MVb);t&&(x=Math.min(x,t));A=Math.min(q*A,this.NVb);t&&(A=Math.min(A,t));z?(this.U5=this.DQ=z,2*x<z&&(this.DQ=2*x),2*A<z&&(this.U5=2*A),t=Math.max(1,Math.ceil(x/z)),z=Math.max(1,Math.ceil(A/z))):(this.DQ=
b(x,h),this.U5=b(A,h),t=Math.ceil(x/this.DQ),z=Math.ceil(A/this.U5));this.IT=t;this.Hga=z;if(0>=this.IT||0>=this.Hga)throw Error("Tile count has to be > 0");if(isNaN(this.IT)||isNaN(this.Hga))throw Error("Tile count cant be NaN");return this.DQ===w&&this.U5===y&&this.IT===r&&this.Hga===u};d.prototype.CHc=function(q){var r=this;return function(t,u,w){if(!0===w.Kk()||null==q.material.map||null==q.material.map.image)t();else{var y=q.material.map,z=q.Xb.ca()/q.hbd;u=q.Xb.da()/q.jbd;var x=q.TDb*z+q.Xb.getX(),
C=q.Xac*u+q.Xb.getY(),A=Math.min((q.TDb+1)*z+q.Xb.getX(),q.Xb.na()),v=Math.min((q.Xac+1)*u+q.Xb.getY(),q.Xb.ma()),B=new U(x,C,A,v);u=new U(0,0,q.ykb,q.E9c);if(null!=q.V8c){x=q.ykb/y.image.width;var E=q.V8c*x,H=q.cAd*x;A=z/q.ykb;x=q.TDb*z+q.Xb.getX()+A*E;A=Math.min(x+A*(H-E),q.Xb.na());u.cb(E,0,H,q.ykb)}var F=q.Thb.oa().getY(),I=q.Thb.getReader().Yj();z=new U(x,C,A,v);C=function(){if(!0!==w.Kk()&&null!=q.material.map&&null!=q.material.map.image){var J=y.image.getContext("2d"),K=new U(0,0,y.image.width/
bc(),y.image.height/bc());J.clearRect(0,0,y.image.width,y.image.height);J=Fh.Doa({context:J,viewport:K});var M=q.material.userData.oZ.Sk();J.drawImage(M,0,0,M.width,M.height,0,0,y.image.width/bc(),y.image.height/bc());null!=q.Fhb&&(B.setX(Math.floor(B.getX())),B.setY((B.getY()-F)/I),B.$a(B.da()/I),e=!0,q.Fhb.Ha(B),q.Fhb.sa(K),e=!1,q.Fhb.render(J));q.material.userData.DEb--;0===q.material.userData.DEb&&(q.material.opacity=null!=q.material.userData.opacity?q.material.userData.opacity:1,q.material.transparent=
null!=q.material.userData.transparent?q.material.userData.transparent:!1,q.material.userData.XAd=!0,y.needsUpdate=null!=y.image);r.xHa.isEmpty()&&q.RFc&&q.Thb.clear();q.vXc()}t()};q.material.userData.iad&&null!=q.material.userData.oZ?C():(null==q.material.userData.oZ&&(q.material.userData.oZ=f.rm(g,y.image.width,y.image.height,!0)),q.material.userData.oZ.clear(),q.Thb.$oa(z,q.material.userData.oZ.Sk(),u,0,0,C))}}};d.prototype.setOptions=function(q){var r=xb(q,{loadingcolor:this.vFa,pipeline:null!=
q.pipeline?G({},q.pipeline):{},autodecimate:this.FDa,pixelrenderthreshold:this.lTa,clearpipeline:this.cpb,disposesurface:this.Btc,horizontalresolution:this.NTb,verticalresolution:this.h0b,numberofparalleltasks:this.Rma,maxpixelsx:this.MVb,maxpixelsy:this.NVb,materialoptions:this.Zsb,readertracedecimation:this.lYb,tilesize:this.FHa,data:{limits:this.fe,reader:this.bj},lod:this.uDa}),t=!1;this.lYb=r.readertracedecimation;this.vFa=r.loadingcolor;this.MVb=r.maxpixelsx;this.NVb=r.maxpixelsy;this.Btc=r.disposesurface;
this.FDa=r.autodecimate;this.cpb=r.clearpipeline;this.Zsb=r.materialoptions;this.fe=r.data.limits;this.lTa=r.pixelrenderthreshold;this.Rma=r.numberofparalleltasks;this.h0b=r.verticalresolution;this.NTb=r.horizontalresolution;this.xHa.mhc(this.Rma);this.FHa=r.tilesize;this.uDa=this.FDa&&r.lod;var u=!1;null!=r.data.reader&&this.bj!==r.data.reader&&(this.bj=r.data.reader,u=!0);this.cad(r.data.reader,q)&&(t=!0);r.autodecimate!==this.FDa&&this.vb&&(this.FDa=r.autodecimate,q=this.fe.ca()/(this.IT*Math.pow(2,
this.d_)),1>q&&(q=1),this.vb.$jb(q));r.pixelrenderthreshold!==this.lTa&&(this.lTa=r.pixelrenderthreshold);null!=r.data&&!this.pzc&&u?(t=this.bj.oa(),t=G(r.data,{limits:new U({x:t.ka()+.5,y:t.la(),width:this.bj.Qg(),height:t.da()})}),this.fe=t.limits,r.pipeline.options=null!=r.pipeline.options?r.pipeline.options:this.vb.ta(),this.rHc(r.pipeline.options,this.bj,this.fe,this.pXb),t=!1):null!=r.pipeline.options&&(this.uDa&&null!=this.Fla&&this.d_>this.Fla&&(this.d_=this.Fla),this.ej().setOptions(r.pipeline.options),
t=!1);t&&this.yD();return this};d.prototype.ta=function(){return{loadingcolor:this.vFa,pipeline:this.vb.ta(),autodecimate:this.FDa,pixelrenderthreshold:this.lTa,clearpipeline:this.cpb,disposesurface:this.Btc,horizontalresolution:this.NTb,verticalresolution:this.h0b,numberofparalleltasks:this.Rma,maxpixelsx:this.MVb,maxpixelsy:this.NVb,tilesize:this.FHa,data:{limits:this.fe,reader:this.bj},lod:this.uDa}};d.prototype.bda=function(q){if(null==q||0>q||1<q)throw Error("The opacity should be in [0, 1].");
this.lB=q;this.gN.forEach(function(r){r.userData.transparent=!0;r.userData.opacity=q});this.yD()};d.prototype.CL=function(){return this.lB};d.prototype.oHd=function(){return this.vFa};d.prototype.C2d=function(q){this.vFa=q;return this};d.prototype.fMd=function(){return this.DQ};d.prototype.gMd=function(){return this.U5};d.prototype.zl=function(){return this.fe};d.prototype.rHc=function(q,r,t,u){null!=this.vb&&(this.vb.za(UJ.ib,this.ena),this.vb.za(UJ.wlb,this.MXb),this.vb.za(UJ.Anb,this.LXb));var w=
r.Gq();this.vb=new WJ({name:"3D_tmp",reader:r,statistics:w});q.normalization=G(q.normalization,{limits:new Kd(w.min,w.max)});this.vb.setOptions(q);this.FDa&&(q=this.fe.ca()/(this.IT*Math.pow(2,this.d_)),1>q&&(q=1),this.vb.$jb(q));this.yD(t,u);null==this.ena&&(this.ena=function(y,z,x){this.wsc||this.yD(t,u)}.bind(this));null==this.MXb&&(this.MXb=function(y,z,x){this.wsc=!0;this.qj=this.vb.hf()}.bind(this));null==this.LXb&&(this.LXb=function(y,z,x){this.wsc=!1;this.uDa&&null!=this.Fla&&this.d_>this.Fla&&
(this.d_=this.Fla);this.qj!==this.vb.hf()&&this.yD(t,u)}.bind(this));this.vb.on(UJ.ib,this.ena);this.vb.on(UJ.wlb,this.MXb);this.vb.on(UJ.Anb,this.LXb)};d.prototype.GA=function(){return this.mA};d.prototype.ej=function(){return this.vb};d.prototype.TZd=function(){var q=this;this.gN.forEach(function(r){q.TJc(r,q.vFa)});this.pXb()};d.prototype.cad=function(q,r){var t=Math.pow(2,this.d_);if(!this.pud(q,r,this.uDa?t:null)){q=this.gN;this.gN=[];var u=this;for(r=0;r<this.IT;r++)for(t=0;t<this.Hga;t++)this.gN[r+
t*this.IT]=a(r,t,this.IT,this.Hga,this.DQ,this.U5,this.Zsb);this.gN.Pa=function(){return"geotoolkit3d.scene.seismic.SliceMaterial"};this.gN.getClassName=function(){return"geotoolkit3d.scene.seismic.SliceMaterial"};this.gN.getParent=function(){return u};null!=q&&q.forEach(function(w){w.map.dispose();w.map.version=0;w.map.image=null;w.map=null;null!=w.userData.oZ&&(f.release(w.userData.oZ),w.userData.oZ=null)});return!0}if(null!=r&&r.hasOwnProperty("materialoptions")&&(!this.Zsb.hasOwnProperty("opacity")||
r.materialoptions.hasOwnProperty("opacity")&&r.materialoptions.opacity!==this.lB))return this.bda(r.materialoptions.opacity),!0;null!=r&&null!=r.overlay&&r.overlay!==this.mA&&(null!=this.mA&&this.mA.Qz(this.U8a),this.mA=r.overlay,null!=this.mA&&this.mA.Ax(this.U8a),this.U8a());return!1};d.prototype.yD=function(q,r,t){null==q&&(q=this.fe);null==r&&(r=this.pXb);null==t&&(t=!1);this.xHa.abort();var u=Math.pow(2,this.d_);if(this.FDa){var w=q.ca()/(this.IT*this.DQ);1>w&&(w=1);this.vb.$jb(w)}for(w=this.IT-
1;0<=w;w--)for(var y=this.Hga-1;0<=y;y--){var z=this.gN[w+y*this.IT];if(null!=z&&null!=z.map){t||null==z.userData.oZ||(f.release(z.userData.oZ),z.userData.oZ=null);z.map.image=z.map.image||wc(this.DQ,this.U5,!0);var x=this.DQ;null!=this.lTa&&(x=Math.ceil(this.lTa/this.U5));z.map.image.width=this.DQ;z.map.image.height=this.U5;var C=0<z.userData.DEb&&!z.userData.iad;(null==z.userData.XAd||C)&&this.TJc(z,this.vFa);z.userData.iad=t&&!C;if(x>=this.DQ)z.userData.DEb=1,C={material:z,Thb:this.vb,Fhb:this.GA(),
Xb:q,TDb:w,Xac:y,hbd:this.IT,jbd:this.Hga,vXc:r,RFc:this.cpb,ykb:this.DQ,E9c:this.U5,Myd:u},this.xHa.eIa(this.CHc(C));else{z.userData.DEb=Math.ceil(this.DQ/x);for(var A=0;A<this.DQ;A+=x)C={V8c:A,cAd:A+x,material:z,Thb:this.vb,Fhb:this.GA(),Xb:q,TDb:w,Xac:y,hbd:this.IT,jbd:this.Hga,vXc:r,RFc:this.cpb,ykb:this.DQ,E9c:this.U5,Myd:u},this.xHa.eIa(this.CHc(C))}}}};d.prototype.TJc=function(q,r){var t=q.map;r=Pd.Rg(r);null==q.userData.opacity&&(q.userData.opacity=q.opacity);null==q.userData.transparent&&
(q.userData.transparent=q.transparent);q.opacity=r.Ik()/255;q.transparent=1!==q.opacity;q.needsUpdate=!0;null!=t.image&&(q=t.image.getContext("2d"),q.clearRect(0,0,t.image.width,t.image.height),q.fillStyle=(new xd(r.Xj(),r.Wj(),r.Vj(),r.Ik())).um(),q.fillRect(0,0,t.image.width,t.image.height),t.needsUpdate=!0)};d.prototype.Efb=function(){return this.IT};d.prototype.Ffb=function(){return this.Hga};d.prototype.dispose=function(){this.te()||(this.xHa.abort(),this.gN.forEach(function(q){q.map&&(q.map.dispose(),
q.map.version=0,q.map.image=null,q.map=null,null!=q.userData.oZ&&(f.release(q.userData.oZ),q.userData.oZ=null))}),this.gN.length=0,null!=this.vb&&(this.vb.dispose(),this.vb=null),null!=this.mA&&this.mA.Qz(this.U8a),te.prototype.dispose.call(this))};d.prototype.SJa=function(){return this.gN};d.prototype.Igc=function(q,r,t){this.Fla=q=Math.max(q,0);if(!this.uDa||this.Fla===this.d_)return Cg.resolve(null);r&&(this.OW=r);t&&(this.IW=t);if(this.Fla<this.d_)return Cg.resolve(null);this.xHa.abort();this.d_=
this.Fla;var u=this;return c(this.vb&&this.lYb?this.vb.getReader():null,u.d_,this.OW,this.IW).then(function(w){w&&(u.fe=w);u.cad(u.vb.getReader(),null);u.yD();return u.SJa()}).catch(function(w){rb(w);return Cg.resolve(null)})};d.prototype.gMe=function(){return this.d_};d.prototype.Z1=function(){var q=this.fe.clone();q.$a(q.da()/this.bj.Yj());return q};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRPcGFjaXR5IjoiYmRhIiwiZ2V0T3BhY2l0eSI6IkNMIiwiZ2V0TG9hZGluZ0NvbG9yIjoib0hkIiwic2V0TG9hZGluZ0NvbG9yIjoiQzJkIiwiZ2V0VGlsZVNpemVYIjoiZk1kIiwiZ2V0VGlsZVNpemVZIjoiZ01kIiwiZ2V0RGF0YUxpbWl0cyI6InpsIiwiY3JlYXRlUGlwZWxpbmUiOiJySGMiLCJnZXRPdmVybGF5IjoiR0EiLCJnZXRQaXBlbGluZSI6ImVqIiwicmVzZXRUaWxlcyI6IlRaZCIsInNldExPRCI6IklnYyJ9fX0g");oz.lw(yL.Pa(),fA);var zL=/*#__PURE__*/function(){function d(a){var b=a.data.reader,c=a.data.fenceindex,e=b.Vm().cG();b=b.oa();for(var f=b.ka(),g=0;g<c;g++)f+=e[g];a.data.limits=new U({x:f,y:b.la(),width:e[c],height:b.da()});yL.call(this,a)}D(d,yL);L(d,"geotoolkit3d.scene.seismic.FenceMaterial");d.prototype.setOptions=function(a){null!==this.ej()&&(this.pzc=!0);yL.prototype.setOptions.call(this,a);return this};return d}();
oz.lw(zL.Pa(),fA);var AL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);a=G(a,{oninvalidate:function(){}});var b=a.data;if(null!=b){for(var c=0;c<b.path.i.length-1;c++)this.add(new xL({data:{path:{i:[b.path.i[c],b.path.i[c+1]],j:[b.path.j[c],b.path.j[c+1]]},index:b.index},material:new zL(G({data:G({fenceindex:c},a.data),overlay:a.overlay},a))}));this.dd=b.index}}D(d,fz);L(d,"geotoolkit3d.scene.seismic.Fence");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);var b=G(a,{});this.children.forEach(function(c){c.setOptions(b)});
this.gg();return this};d.prototype.ta=function(){return xb(0<this.children.length?this.children[0].ta():{},fz.prototype.ta.call(this))};d.prototype.GA=function(){return 0<this.children.length?this.children[0].GA():null};d.prototype.gFd=function(){return this.children};d.prototype.$X=function(){return this.dd};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRPdmVybGF5IjoiR0EiLCJnZXRGZW5jZVBhbmVsIjoiZ0ZkIiwiZ2V0SW5kZXhDb29yZGluYXRlcyI6IiRYIn19fSAg");rA.tg().kib(AL.Pa(),function(d){return d.children});var BL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(a){fz.call(this);this.type=this.name="Horizon";this.$S=a.geometrymode;this.LYb=a.seismicvolume;this.lA=a.nullvalue||Number.NaN;this.i5b(a);this.EX=null;this.AK=new fz;this.setOptions(a);this.Zw(this.LYb.ta().displaymode)}D(d,fz);L(d,"geotoolkit3d.scene.seismic.Horizon");d.prototype.setOptions=function(a){if(null==a)return this;fz.prototype.setOptions.call(this,a);a=a||{};if(null!=a.colorprovider)this.EX=a.colorprovider;else{var b=a.values?this.minValue:-this.OEb,c=a.values?
this.maxValue:-this.mhb===-this.OEb?-this.mhb+1:-this.mhb;this.EX=TJ.lg().ccb("GreyOrange");this.EX.vj(b,c)}var e,f=a.elevation?a.elevation.length:0;if(0<f){this.AK.children=[];c=[];var g=[];for(b=this.Tqa;b<=this.AZa;++b)for(e=this.mca;e<=this.oAa;++e)c.push(this.lA),g.push(Number.NaN);for(b=0;b<f;++b)c[(this.oAa-this.mca+1)*(a.xline[b]-this.Tqa)+(a.inline[b]-this.mca)]=-a.elevation[b],g[(this.oAa-this.mca+1)*(a.xline[b]-this.Tqa)+(a.inline[b]-this.mca)]=null!=a.values?a.values[b]:-a.elevation[b];
if("lines"===this.$S){a=[];var h=[];for(b=this.Tqa;b<=this.AZa;++b)for(e=this.mca;e<=this.oAa;++e)a.push(e),h.push(b);e=new fz;f=this.oAa-this.mca+1;for(b=0;b<=this.AZa-this.Tqa;b++){for(var k=[],l=a[b*f],m=h[b*f],n=b*f;n<c.length&&"number"===typeof c[n]&&isNaN(c[n]);)n+=1;var p=c[n];k.push(new Hp(l,m,p));m=a[b*f+f-1];p=h[b*f+f-1];for(l=b*f+f-1;0<=l&&"number"===typeof c[l]&&isNaN(c[l]);)--l;var q=c[l];k.push(new Hp(m,p,q));k=(new Aq).setFromPoints(k);this.EX instanceof Pq?l=n=this.EX:"string"===typeof this.EX?
(n=new Pq(this.EX),l=new Pq(this.EX)):(n=new Pq(this.EX.mb(g[n]).XA()),l=new Pq(this.EX.mb(g[l]).XA()));n=n.toArray();l=l.toArray();n=new Float32Array([n[0],n[1],n[2],l[0],l[1],l[2]]);k.attributes.color=new zq(n,3);e.add(new rt(k,new tt({vertexColors:!0})))}h=e}else if("pointcloud"===this.$S){c=[];g=[];for(b=0;b<f;++b)c.push(-a.elevation[b]),null!=a.values?g.push(a.values[b]):g.push(-a.elevation[b]);h=new Hz({data:{x:a.inline,y:a.xline,z:c,sizes:1,values:g},WN:this.EX,TQe:1,SQe:5})}else"triangles"===
this.$S&&(b=new Tz({data:{elevation:c,width:this.oAa-this.mca+1,height:this.AZa-this.Tqa+1,xmin:this.mca,ymin:this.Tqa,nullvalue:this.lA,values:g}}),h=new EB({data:{surface:b,nullvalue:this.lA},colorprovider:this.EX}),h.hasOwnProperty("children")&&0<h.children.length&&(h.children[0].material.transparent=!0));if(null==h)throw Error("The geometrymode attribute is invalid");this.AK.add(h)}return this};d.prototype.ta=function(){return xb({colorprovider:this.EX,geometrymode:this.$S,seismicvolume:this.LYb,
horizoncontainer:this.AK},fz.prototype.ta.call(this))};d.prototype.i5b=function(a){var b=a.inline,c=a.xline,e=a.elevation;a=a.values;this.mca=b[0];this.oAa=b[0];this.Tqa=c[0];this.AZa=c[0];this.mhb=e[0];this.OEb=e[0];null!=a&&(this.minValue=a[0],this.maxValue=a[0]);for(var f=1;f<b.length;f++)b[f]<this.mca?this.mca=b[f]:b[f]>this.oAa&&(this.oAa=b[f]),c[f]<this.Tqa?this.Tqa=c[f]:c[f]>this.AZa&&(this.AZa=c[f]),e[f]<this.mhb?this.mhb=e[f]:e[f]>this.OEb&&(this.OEb=e[f]),null!=a&&(a[f]<this.minValue?this.minValue=
a[f]:a[f]>this.maxValue&&(this.maxValue=a[f]))};d.prototype.lGd=function(){return this.AK};d.prototype.Zw=function(a){var b=this.AK.children[0],c=this.LYb,e=c.$X(),f=e.fha().getSize(new Hp).divideScalar(2);f=Wy.Xaa(e.fha(),new uq(f.clone().negate(),f));b.scale.set(1,1,1);b.rotation.set(0,0,0);b.position.set(0,0,0);b.updateMatrix();b.applyMatrix4(f);this.AK.position.copy(e.fha().getCenter(new Hp));this.AK.scale.set(1,1,1);this.AK.rotation.set(0,0,0);a===yy.Gg?(new XB(c.$X(),c.q$b())).rVa(this.AK):
(a=a===yy.N$b?1:-1,b.scale.x=b.scale.x*a*W.sign(c.matrix.elements[5]),b.scale.y*=W.sign(c.matrix.elements[0]),b.position.x*=W.sign(b.scale.x),b.position.y*=W.sign(b.scale.y));this.AK.updateMatrixWorld(!0);this.AK.gg()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRIb3Jpem9uT2JqZWN0IjoibEdkIiwic2V0RGlzcGxheU1vZGUiOiJadyJ9fX0g");var csa=/*#__PURE__*/function(){function d(b){var c=b.index.zxa();null==b.grid&&(b.grid={});null==b.grid.linestyles&&(b.grid.linestyles={});b.grid.linestyles=G(b.grid.linestyles,a.clone());b=G(b,{start:new Hp(c.min.x,c.min.y,c.max.z),end:new Hp(c.max.x,c.max.y,c.min.z),modelstart:new Hp(c.min.x,c.min.y,c.max.z),modelend:new Hp(c.max.x,c.max.y,c.min.z),mode:DA.box});EA.call(this,b);this.name="INDEXGRID"}var a={x:new Y("transparent"),y:new Y("transparent"),z:new Y("transparent"),clone:function(){return{x:a.x,y:a.y,
z:a.z}}};D(d,EA);L(d,"geotoolkit3d.scene.seismic.IndexGrid");return d}();var CL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(u){fz.call(this);this.uwc=bc();this.vQ=u.material;this.dd=u.index;this.uQ=null;this.DHa=this.vQ.Efb();this.EHa=this.vQ.Ffb();this.en=new Zt(this.Nyb(),this.vQ.SJa());this.nA=new Hp;this.nB=new Hp;this.ina=new Hp;this.Ay=null;this.hrd=this.x8d.bind(this);this.gVb=Math.round(Math.log2(c));var w=this;this.vQ.Igc(this.gVb).then(function(y){if(y){w.en.material=y;y=w.vQ.Efb();var z=w.vQ.Ffb();if(w.DHa!==y||w.EHa!==z)w.DHa=y,w.EHa=z,w.en.geometry.dispose(),w.en.geometry=w.Nyb()}}).catch(function(y){rb(y)});
this.OW=h;this.IW=Math.round(Math.log2(hA.TJa()/2));this.HRb=null;this.add(this.en);this.setOptions(u)}var a=new Hp(0,0,1),b=1E3,c=512,e=512,f=new Hp,g=new Hp,h=Math.round(Math.log2(e));D(d,fz);L(d,"geotoolkit3d.scene.seismic.Slice");d.prototype.setOptions=function(u){if(null==u)return this;fz.prototype.setOptions.call(this,u);this.vQ.setOptions(u);u.hasOwnProperty("slicelocation")&&(this.uQ=u.slicelocation);u.hasOwnProperty("minlod")&&(this.OW=u.minlod);u.hasOwnProperty("maxlod")&&(this.IW=u.maxlod);
var w=this.vQ.Efb(),y=this.vQ.Ffb(),z=!1;if(this.DHa!==w||this.EHa!==y)this.DHa=w,this.EHa=y,this.en.geometry.dispose(),this.en.geometry=this.Nyb();if(this.uQ){w=this.dd.zxa();y=w.min.x;var x=w.min.y,C=w.min.z,A=w.max.x-y,v=w.max.y-x,B=w.max.z-C;if(null!=this.uQ.j)u.hasOwnProperty("xstart")&&(y=u.xstart),u.hasOwnProperty("ystart")&&(C=u.ystart),u.hasOwnProperty("width")&&(A=u.width),u.hasOwnProperty("height")&&(B=u.height),this.jd=A,this.td=B,this.y0b=y,this.D0b=C,this.nA.set(y,this.uQ.j+this.dd.NBb()/
2,C),this.nB.set(y+A,this.uQ.j+this.dd.NBb()/2,C),this.ina.set(y,this.uQ.j+this.dd.NBb()/2,C+B);else if(null!=this.uQ.i)u.hasOwnProperty("xstart")&&(x=u.xstart),u.hasOwnProperty("ystart")&&(C=u.ystart),u.hasOwnProperty("width")&&(v=u.width),u.hasOwnProperty("height")&&(B=u.height),this.jd=v,this.td=B,this.y0b=x,this.D0b=C,this.nA.set(this.uQ.i+this.dd.CBb()/2,x,C),this.nB.set(this.uQ.i+this.dd.CBb()/2,x+v,C),this.ina.set(this.uQ.i+this.dd.CBb()/2,x,C+B),z=!0;else if(null!=this.uQ.z)u.hasOwnProperty("xstart")&&
(y=u.xstart),u.hasOwnProperty("ystart")&&(x=u.ystart),u.hasOwnProperty("width")&&(A=u.width),u.hasOwnProperty("height")&&(v=u.height),this.jd=A,this.td=v,this.y0b=y,this.D0b=x,this.nA.set(y,x,this.uQ.z*this.dd.Yj()+w.min.z),this.nB.set(y+A,x,this.uQ.z*this.dd.Yj()+w.min.z),this.ina.set(y,x+v,this.uQ.z*this.dd.Yj()+w.min.z);else throw Error("Slice location is not set");}else u.hasOwnProperty("points")&&2<u.points.length&&(this.nA.copy(u.points[0]),this.nB.copy(u.points[1]),this.ina.copy(u.points[2]));
this.P8d(z);this.gg();this.updateMatrixWorld(!0);return this};d.prototype.ta=function(){var u=this.vR().ta();u.slicelocation=this.uQ;u.xstart=this.y0b;u.ystart=this.D0b;u.width=this.jd;u.height=this.td;u.points=[this.nA,this.nB,this.ina];return xb(u,fz.prototype.ta.call(this))};d.prototype.vR=function(){return this.vQ};d.prototype.fYa=function(){return this.uQ};d.prototype.GA=function(){return this.vQ.GA()};d.prototype.zIb=function(u){this.setOptions({overlay:u})};d.prototype.x8d=function(){if(null!=
this.en&&null!=this.en.geometry){if(null!=this.HRb){var u=Math.ceil(Math.log2(this.HRb));this.gVb=W.clamp(u,this.OW,this.IW);var w=this;this.vR().Igc(this.gVb,this.OW,this.IW).then(function(y){y&&(w.en.material=y);y=w.vQ.Efb();var z=w.vQ.Ffb();if(w.DHa!==y||w.EHa!==z)w.DHa=y,w.EHa=z,w.en.geometry.dispose(),w.en.geometry=w.Nyb(),w.en.geometry.r9d=!0,w.en.geometry.JKe=!0,w.gg()}).catch(function(y){rb(y)})}this.Ay=null}};var k=new gy,l=new gy,m=new gy,n=new gy,p=new Hp(-.5,-.5,0),q=new Hp(-.5,.5,0),
r=new Hp(.5,.5,0),t=new Hp(.5,.5,0);d.prototype.ui=function(u,w,y,z){u=this.vR();null!=this.Ay&&clearTimeout(this.Ay);z=new Ud;y.getSize(z);var x=1,C=1,A=y=0;p.set(y,A,0);q.set(y,C,0);r.set(x,C,0);t.set(x,A,0);p=this.localToWorld(p);q=this.localToWorld(q);r=this.localToWorld(r);t=this.localToWorld(t);hz.Fsa(p,w,z,k);hz.Fsa(q,w,z,l);hz.Fsa(r,w,z,m);hz.Fsa(t,w,z,n);w=l.distanceTo(m);z=k.distanceTo(n);y=k.distanceTo(m);A=k.distanceTo(l);C=m.distanceTo(n);x=l.distanceTo(n);this.HRb=Math.max(w,z,A,C,y,
x);this.Ay=setTimeout(this.hrd,b);w=u.ta();w.disposesurface&&u.SJa().forEach(function(v){v.userData.Fca&&(v.userData.yib=!1)});bc()!==this.uwc&&(u.yD(),this.uwc=bc())};d.prototype.n6=function(){var u=this.vR(),w=u.ta();w.disposesurface&&u.SJa().forEach(function(y){null!=y.userData.yib&&(y.map.image=null,delete y.userData.Fca,delete y.userData.yib)})};d.prototype.$X=function(){return this.dd};d.prototype.dispose=function(){hz.dispose(this.en);this.vQ&&this.vQ.dispose();this.dd=this.ina=this.nB=this.nA=
this.vQ=this.en=null;fz.prototype.dispose.call(this)};d.prototype.Nyb=function(){for(var u=new cv(1,1,this.DHa,this.EHa),w=0;w<u.index.count;w+=3)u.addGroup(w,3,Math.floor(w/6));return u};d.prototype.P8d=function(u){this.position.addVectors(this.nB,this.ina).multiplyScalar(.5);var w=this.dd.zxa();this.position.setZ(w.max.z-this.position.z+w.min.z);this.scale.setX(this.nB.distanceTo(this.nA));this.scale.setY(this.ina.distanceTo(this.nA));f.subVectors(this.nB,this.nA);g.subVectors(this.ina,this.nA);
f.cross(g);f.normalize();g.crossVectors(f,a);g.normalize();Wy.KDc(g,Math.acos(f.dot(a)),this.rotation);u?(this.rotation.y+=Math.PI,this.rotation.z+=Math.PI/2):this.rotation.x+=Math.PI;return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRTbGljZU1hdGVyaWFsIjoidlIiLCJnZXRTbGljZUxvY2F0aW9uIjoiZllhIiwiZ2V0T3ZlcmxheSI6IkdBIiwiYmVmb3JlUmVuZGVyIjoidWkiLCJhZnRlclJlbmRlciI6Im42IiwiZ2V0SW5kZXhDb29yZGluYXRlcyI6IiRYIn19fSAg");jA.mHb(CL.Pa(),dC);var DL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){fz.call(this);c=G(c,{displaymode:yy.Gg});this.i6=c.xy;this.dd=c.index;this.II=new fz;fz.prototype.add.call(this,this.II);this.name="SEISMICVOLUME";this.setOptions(c)}var a=new Hp,b=new uq;D(d,fz);L(d,"geotoolkit3d.scene.seismic.Volume");d.prototype.setOptions=function(c){if(null==c)return this;fz.prototype.setOptions.call(this,c);c=G(c,{displaymode:null!=this.Be?this.Be:yy.Gg});var e=new Hp;this.dd.zxa().getSize(e);e=e.divideScalar(2);e=Wy.Xaa(this.dd.zxa(),new uq(e.clone().negate(),
e));this.II.scale.set(1,1,1);this.II.rotation.set(0,0,0);this.II.position.set(0,0,0);this.II.updateMatrix();this.II.applyMatrix4(e);c.displaymode===yy.Gg?(this.dd.fha().getCenter(this.position),this.scale.set(1,1,1),this.rotation.set(0,0,0),(new XB(this.dd,this.i6)).rVa(this)):(this.dd.fha().getCenter(this.position),this.scale.set(1,1,1),this.rotation.set(0,0,0),e=c.displaymode===yy.N$b?1:-1,this.II.scale.x=this.II.scale.x*e*W.sign(this.dd.oi().x-this.dd.gia().x),this.II.scale.y*=W.sign(this.dd.oi().y-
this.dd.gia().y),this.II.position.x*=W.sign(this.II.scale.x),this.II.position.y*=W.sign(this.II.scale.y));this.updateMatrixWorld(!0);this.Be=c.displaymode;this.gg();return this};d.prototype.ta=function(){return xb({displaymode:this.Be},fz.prototype.ta.call(this))};d.prototype.$X=function(){return this.dd};d.prototype.q$b=function(){return this.i6};d.prototype.sEb=function(c){return this.i6.sEb(c)};d.prototype.add=function(c){return this.II.add(c)};d.prototype.remove=function(c){this.II.remove(c)};
d.prototype.QRc=function(){return this.II.children.filter(function(c){return c instanceof CL})};d.prototype.Psd=function(c){var e=this.$X(),f=this.q$b(),g=e.fha().getSize(a).divideScalar(2);b.set(g.clone().negate(),g);var h=Wy.Xaa(e.fha(),b);c.children.forEach(function(k){k.scale.set(1,1,1);k.rotation.set(0,0,0);k.position.set(0,0,0);k.updateMatrix();k.applyMatrix4(h)});c.position.copy(e.fha().getCenter(a));c.scale.set(1,1,1);c.rotation.set(0,0,0);(new XB(e,f)).rVa(c);c.updateMatrixWorld(!0);oc(c,
fz)&&c.gg()};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRJbmRleENvb3JkaW5hdGVzIjoiJFgiLCJnZXRYWUNvb3JkaW5hdGVzIjoicSRiIiwiaXNQb2ludEluc2lkZSI6InNFYiIsImdldFNsaWNlcyI6IlFSYyIsImFwcGx5TWF0cml4VG8iOiJQc2QifX19");var EL=/*#__PURE__*/function(){function d(b){b=G(b,{name:"SeismicSliderTool",snap:function(g,h){h=h.$X();null!=g.i?g.i=a(g.i-h.pE,h.z0b)+h.pE:null!=g.j?g.j=a(g.j-h.VF,h.E0b)+h.VF:null!=g.z&&(g.z=a(g.z,h.Yj()))},callback:function(g,h,k){g.setOptions({slicelocation:k})}});UB.call(this,b);var c=b.callback;this.sab=b.volume;var e=b.snap,f=this;this.p5c(function(g,h,k){var l=g.parent;if(l instanceof CL&&null!=l.parent&&l.parent.parent===f.sab){g=this.uc.KPc();null!=g&&g.length&&g.forEach(function(x){"OutlinePass"===
x.type&&x.enabled&&(x.Bbb(),x.Sab(l),f.uc.gg())});if(2>h.length())return!1;var m=h.x,n=h.y;h=l.fYa();var p=l.$X(),q=new Hp(this.uc.getSize().ca(),this.uc.getSize().da());g=p.fha();var r=0;k={};l.parent.updateMatrixWorld();var t=l.parent.matrixWorld,u=this.uc.project((new Hp).set(g.min.x,g.min.y,-g.min.z).applyMatrix4(t)),w=this.uc.project((new Hp).set(g.max.x,g.min.y,-g.min.z).applyMatrix4(t)),y=this.uc.project((new Hp).set(g.min.x,g.max.y,-g.min.z).applyMatrix4(t)),z=this.uc.project((new Hp).set(g.min.x,
g.min.y,-g.max.z).applyMatrix4(t));t=(new gy((u.x+1)/2,(-u.y+1)/2)).multiply(q);u=new Hp;g.getSize(u);null!=h.i?(w=(new gy(w.x+1,-w.y+1)).multiply(q).divideScalar(2),k.i=h.i,q=Math.abs(w.x-t.x),r=Math.abs(w.y-t.y),p=q>r?1-r/q:q/r,Math.abs(m)>Math.abs(n)?(n=t.x<w.x?1:-1,h.i+=u.x/q*m*n*p):(m=t.y<w.y?1:-1,h.i+=u.x/r*n*m*(1-p)),e(h,l),r=h.i-k.i,h.i=Math.min(Math.max(h.i,g.min.x),g.max.x)):null!=h.j?(w=(new gy(y.x+1,-y.y+1)).multiply(q).divideScalar(2),k.j=h.j,q=Math.abs(w.x-t.x),r=Math.abs(w.y-t.y),p=
q>r?1-r/q:q/r,Math.abs(m)>Math.abs(n)?(n=t.x<w.x?1:-1,h.j+=u.y/q*m*n*p):(m=t.y<w.y?1:-1,h.j+=u.y/r*n*m*(1-p)),e(h,l),r=h.j-k.j,h.j=Math.min(Math.max(h.j,g.min.y),g.max.y)):null!=h.z&&(m=(new gy(z.x+1,-z.y+1)).multiply(q).divideScalar(2),k.z=h.z,h.z+=n*(u.z/p.Yj())/Math.abs(m.y-t.y),e(h,l),r=h.z-k.z,h.z=Math.min(Math.max(h.z,0),(-g.min.z+g.max.z)/p.Yj()));if(0!==r)return c(l,k,h),!0}return!1})}function a(b,c){return 0<b?Math.ceil(b/c)*c:0}D(d,UB);L(d,"geotoolkit3d.tool.seismic.SeismicSliderTool");
d.prototype.setVolume=function(b){this.sab=b};return d}();var FL=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(g){this.mA=new Map;this.Atc=this.sab=null;null!=g&&this.setVolume(g)}var a="#000000",b=new Hp,c=new Xt,e=new uq,f=new st;L(d,"geotoolkit3d.util.Seismic");d.prototype.setVolume=function(g){this.sab=g;this.Atc=g.ta().displaymode};d.prototype.gJa=function(g,h,k){if(h instanceof fz){k=xb(k,{preservecolor:!0,linewidth:6,fillstyle:new rf("red")});h&&h.ta&&(k.preservecolor=null!=h.ta().colorprovider);var l=!1,m=!1;h.traverse(function(n){if(n.Pa)if("geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid"===
n.Pa())l=!0;else if(n instanceof fB||n instanceof BL)m=!0});l?this.xha(g,h,k):m?this.yha(g,h,k):hb("geotoolkit3d.util.seismic: does not support this type of object.")}else hb("geotoolkit3d.util.seismic: does not support this type of object.")};d.prototype.xha=function(g,h,k){var l=k.preservecolor,m=g.fYa(),n=m.hasOwnProperty("z"),p=g.children[0];null==p.geometry.boundingBox&&p.geometry.computeBoundingBox();var q=p.geometry.boundingBox.clone(),r=p.localToWorld(q.min.clone()),t=p.localToWorld(q.max.clone());
h.worldToLocal(r);h.worldToLocal(t);var u=g.ta().data.limits;m=[];var w=[];var y=this.ipa(p,h);y=this.$Jd(y,h,l,n);var z=y.coordinates;y=y.colors;var x=u.ca();u=u.da();if(n)for(c.copy(p.matrixWorld).invert(),n=0;n<z.length;++n){var C=[];var A=[];for(p=0;p<z[n].length;p+=3){var v=z[n];b.set(v[p],v[p+1],v[p+2]);b.applyMatrix4(h.matrixWorld);b.applyMatrix4(c);r=b.x/(q.max.x-q.min.x)-q.min.x;t=b.y/(q.max.y-q.min.y)-q.min.y;C.push(r*x);A.push((1-t)*u)}m.push(C);w.push(A)}else for(x=(q=Math.abs(t.x-r.x)>
Math.abs(t.y-r.y))?x/(t.x-r.x):x/(t.y-r.y),u=u/(t.z-r.z)/g.$X().Yj(),n=0;n<z.length;++n){C=[];A=[];for(p=0;p<z[n].length;p+=3)v=z[n],C.push((q?v[p+0]-r.x:v[p+1]-r.y)*x),A.push((t.z-v[p+2])*u);m.push(C);w.push(A)}w={coordinates:{x:m,y:w},fillstyle:k.fillstyle};if(l&&Array.isArray(y)&&0<y.length){k=h.ta().colorprovider;l=[];for(z=0;z<m.length;++z)r=new rf(k.mb(y[z])),l.push(r);w.fillstyle=l}else w.fillstyle=Array(m.length).fill(k.fillstyle);this.tk(w,g,h)};d.prototype.$Jd=function(g,h,k,l){function m(w,
y){for(var z=w.x,x=w.y,C=w.z,A=[],v=0;v<t.length;++v)f.start.set(z[t[v][0]],x[t[v][0]],C[t[v][0]]),f.end.set(z[t[v][1]],x[t[v][1]],C[t[v][1]]),y.intersectsLine(f)&&(y.intersectLine(f,b),A.push(b.x,b.y,b.z));q.push(A);k&&r.push(w.value)}var n=h.ta().data,p=n.B8b();p=p.Iec(g);var q=[],r=[],t=l?[[0,4],[0,2],[4,6],[2,6],[2,3],[6,7],[3,7],[1,3],[5,7],[1,5],[0,1],[4,5]]:[[0,2],[0,1],[2,3],[1,3],[1,5],[3,7],[5,7],[6,7],[4,5],[4,6],[2,6],[0,4]];for(l=0;l<p.length;++l){var u=p[l];u=n.Pya(u[0],u[1],u[2]);h.xUc(u)||
(u=n.CLc(u,e),e.intersectsPlane(g)&&m(u,g))}return{coordinates:q,colors:r}};d.prototype.yha=function(g,h,k){var l=k.preservecolor,m=g.fYa(),n=m.hasOwnProperty("z"),p=g.children[0];null==p.geometry.boundingBox&&p.geometry.computeBoundingBox();var q=p.geometry.boundingBox.clone(),r=p.localToWorld(q.min.clone()),t=p.localToWorld(q.max.clone());h.worldToLocal(r);h.worldToLocal(t);var u=g.ta().data.limits,w=[],y=[];if(n){var z=new Hp,x=new Hp;var C=p.geometry;var A=C.getAttribute("position");C=C.getIndex().getX(0);
p.localToWorld(z.set(A.getX(C),A.getY(C),A.getZ(C)));C=h.ta();if(Number.isFinite(C.zmin)&&Number.isFinite(C.zmax)&&(A=h.localToWorld(new Hp(0,0,C.zmin)).z,C=h.localToWorld(new Hp(0,0,C.zmax)).z,z.z<A||z.z>C)){this.RJ(g,h);return}C=this.e5b(z.z,h,l);var v=C.coordinates;A=C.colors;for(m=0;m<v.length;m++)x.set(v[m].x,v[m].y,z.z),p.worldToLocal(x),r=x.x/(q.max.x-q.min.x)-q.min.x,t=x.y/(q.max.y-q.min.y)-q.min.y,w.push(r*u.width),y.push((1-t)*u.height)}else{A=this.ipa(p,h);C=this.ALd(A,h,l);v=C.coordinates;
A=C.colors;p=u.ca();q=u.da();p=(u=Math.abs(t.x-r.x)>Math.abs(t.y-r.y))?p/(t.x-r.x):p/(t.y-r.y);q=q/(t.z-r.z)/g.$X().Yj();for(var B=0;B<v.length;B++){var E=v[B];w.push((u?E[0]-r.x:E[1]-r.y)*p);y.push((t.z-E[2])*q)}m.hasOwnProperty("j")&&this.Atc===yy.M$b&&w.reverse();u=[];for(v=0;v<w.length;v++)p=[w[v],y[v]],l&&p.push(A[v]),u.push(p);u.sort(function(H,F){return H[0]-F[0]});w=[];y=[];A=[];for(v=0;v<u.length;v++)z!==u[v][0]&&x!==u[v][1]&&(w.push(u[v][0]),y.push(u[v][1]),l&&A.push(u[v][2]),z=u[v][0],
x=u[v][1])}k={coordinates:{x:w,y:y},fillstyle:k.fillstyle,linewidth:k.linewidth};if(l&&void 0!==C.colors){l=[];for(y=0;y<w.length;y++)l.push([(w[y]-w[0])/(w[w.length-1]-w[0]),A[y]]);k.fillstyle=this.Zcb(l)}this.Um(k,g,h,n)};d.prototype.e5b=function(g,h,k){var l=[],m=h.ta().colorprovider,n,p=h.ta().data;null!=p&&null!=p.values?n=p.values:k=!1;var q=h.children[0].geometry,r=q.attributes.position,t=r.array;p=[];if(r instanceof Xs){var u=r.data.stride,w=r.offset;r=r.itemSize;for(var y=0;y<t.length;y++)y%
u<w||y%u>=w+r||p.push(t[y])}else p=t;t=[];u=q.index.array;q=q.getIndex();for(w=0;w<u.length;w+=3){y=3*u[w];var z=3*u[w+1];r=3*u[w+2];y=new Hp(p[y],p[y+1],p[y+2]);z=new Hp(p[z],p[z+1],p[z+2]);r=new Hp(p[r],p[r+1],p[r+2]);h.localToWorld(y);h.localToWorld(z);h.localToWorld(r);r=new vB([y.x,y.y,y.z],[z.x,z.y,z.z],[r.x,r.y,r.z],g);r.zac()&&r.pEb()&&(t.push(r.K7b(),r.j9b()),k&&(r=q.getX(w),r=m.mb(n[r]),r=r.um(),l.push(r,r)))}return g={coordinates:t,colors:l}};d.prototype.ALd=function(g,h,k){function l(v,
B,E,H,F){for(var I=0;I<t.length;I++){var J=t[I];v[J[0]]!==v[J[1]]&&(f.start.set(v[J[0]],B[J[0]],E[J[0]]),f.end.set(v[J[1]],B[J[1]],E[J[1]]),F.intersectsLine(f)&&(F.intersectLine(f,b),q.push([b.x,b.y,b.z]),k&&(J=(m[H[J[1]]]*(b.x-v[J[0]])+m[H[J[0]]]*(v[J[1]]-b.x))/(v[J[1]]-v[J[0]]),r.push(p.mb(J).um()))))}}var m,n=h.ta().data,p=h.ta().colorprovider;null!=n&&null!=n.values?m=n.values:k=!1;var q=[],r=[];n=h.children[0];h=n.geometry.getIndex();n=n.geometry.getAttribute("position");for(var t=[[0,1],[1,
2],[2,0]],u=0;u<h.count;u+=3){var w=h.getX(u),y=h.getY(u),z=h.getZ(u),x=[n.getX(w),n.getX(y),n.getX(z)],C=[n.getY(w),n.getY(y),n.getY(z)],A=[n.getZ(w),n.getZ(y),n.getZ(z)];w=[w,y,z];l(x,C,A,w,g)}return g={coordinates:q,colors:r}};d.prototype.Zcb=function(g){if(0===g.length)return null;for(var h=new og({startColor:g[0][1]||a,endColor:g[g.length-1][1]||a,startPoint:new N(0,0),endPoint:new N(1,0)}),k=1;k<g.length-1;k++)h.Mo(g[k][0],g[k][1]||a);return h};d.prototype.tk=function(g,h,k){var l=h.vR().GA();
null==l&&(l=new ni,h.setOptions({overlay:l}));var m=h.uuid+k.uuid;this.mA.has(m)&&this.RJ(h,k);this.mA.set(m,[]);k=g.coordinates.x;var n=g.coordinates.y,p=g.fillstyle;for(g=0;g<k.length;g++)if(!(3>k[g].length)){3<k[g].length&&W.ejc(k[g],n[g]);var q=new Um({x:k[g],y:n[g],fillstyle:p[g]});l.kL(q);this.mA.get(m).push(q)}h.vR().yD(null,null,!0)};d.prototype.Um=function(g,h,k,l){var m=h.vR().GA();null==m&&(m=new ni,h.setOptions({overlay:m}));var n=h.uuid+k.uuid;this.mA.has(n)&&this.RJ(h,k);this.mA.set(n,
[]);k=g.coordinates.x;var p=g.coordinates.y;if(l){var q=new go;for(l=0;l<k.length/2;l++){var r=2*l,t=2*l+1;q.add([k[r],k[t]],[p[r],p[t]])}q.qa(new Y({width:g.linewidth,fill:g.fillstyle}))}else q=new Yn({x:k,y:p,visible:!0,linestyle:new Y({width:g.linewidth,fill:g.fillstyle})});m.kL(q);this.mA.get(n).push(q);h.vR().yD(null,null,!0)};d.prototype.RJ=function(g,h){h=g.uuid+h.uuid;this.mA.has(h)&&(h=this.mA.get(h),g=g.vR().GA(),null!=g&&g.RJ(h))};d.prototype.pYd=function(){function g(l,m){var n=l.vR().GA();
null!=n&&m.forEach(function(p){n.RJ(p)})}var h=this.sab.QRc();if(null!=h){for(var k=0;k<h.length;k++)g(h[k],this.mA),h[k].vR().yD(null,null,!0);this.mA=new Map}};d.prototype.tLe=function(g){var h=new Hp,k=new Hp,l=new Hp,m=new av,n=g.geometry,p=n.getAttribute("position"),q=n.getIndex();n=q.getX(0);var r=q.getY(0);q=q.getZ(0);g.localToWorld(h.set(p.getX(n),p.getY(n),p.getZ(n)));g.localToWorld(k.set(p.getX(r),p.getY(r),p.getZ(r)));g.localToWorld(l.set(p.getX(q),p.getY(q),p.getZ(q)));m.setFromCoplanarPoints(h,
k,l);return m};d.prototype.ipa=function(g,h){var k=new Hp,l=new Hp,m=new Hp,n=new av,p=g.geometry,q=p.getAttribute("position"),r=p.getIndex();p=r.getX(0);var t=r.getY(0);r=r.getZ(0);g.localToWorld(k.set(q.getX(p),q.getY(p),q.getZ(p)));g.localToWorld(l.set(q.getX(t),q.getY(t),q.getZ(t)));g.localToWorld(m.set(q.getX(r),q.getY(r),q.getZ(r)));h.worldToLocal(k);h.worldToLocal(l);h.worldToLocal(m);n.setFromCoplanarPoints(k,l,m);return n};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZW5lcmF0ZUludGVyc2VjdGlvbiI6ImdKYSIsInJlbW92ZU92ZXJsYXkiOiJSSiIsInJlbW92ZU92ZXJsYXlGcm9tU2xpY2VzIjoicFlkIn19fSAg");var CY=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){this.Sq=[]}L(d,"geotoolkit3d.schematics.layout.AbstractAnnotationLayout");d.prototype.loa=function(a){this.Sq.push(a);this.zc()};d.prototype.nja=function(a){a=this.Sq.indexOf(a);-1!==a&&this.Sq.splice(a,1);this.zc()};d.prototype.dispose=function(){this.Sq.length=0};d.prototype.cTb=function(){return this.Sq};d.prototype.zc=Fb;d.prototype.jdb=function(){return Hg.zi(this.Sq)};d.prototype.SBd=function(){return this.Sq.length};d.prototype.fb=function(a){return this.Sq[a]};
return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJ6YyIsImdldEFubm90YXRpb25zIjoiamRiIiwiZ2V0QW5ub3RhdGlvbnNDb3VudCI6IlNCZCIsImdldEFubm90YXRpb24iOiJmYiJ9fX0g");var DY=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){CY.call(this)}D(d,CY);L(d,"geotoolkit3d.schematics.layout.DefaultAnnotationLayout");d.prototype.zc=function(){this.cTb().forEach(function(a){a.Nib(null)})};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJ6YyJ9fX0g");var EY=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){ZB.call(this);this.Sz("path",l);this.Sz("casing",k);this.Sz("tubing",h);this.Sz("cement",g);this.Sz("nipple",f);this.Sz("packer",e);this.Sz("valve",c);this.Sz("perforation",b);this.Sz("plug cement",a)}function a(K,M){K=r(K,M);K.colorprovider=M.data.colorprovider||H;K.annotation=M.data.annotation;q(M,K);return p(K,M)}function b(K,M){K=r(K,M);K.colorprovider=M.data.colorprovider||E;K.annotation=M.data.annotation;K.closed=!0;q(M,K);return p(K,M)}function c(K,M){K=r(K,M);
K.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:B;K.annotation=M.data.annotation;q(M,K);return p(K,M)}function e(K,M){var P=M.data.geometry.diameter.outer,R=M.data.geometry.depth.from,Q=M.data.geometry.depth.to,V=[];V.push({radius:3*P/4,depth:R});V.push({radius:3*P/4,depth:R+(Q-R)/9});V.push({radius:5*P/8,depth:R+(Q-R)/9+W.Tb});V.push({radius:5*P/8,depth:R+2*(Q-R)/9});V.push({radius:P,depth:R+(Q-R)/3});V.push({radius:P,depth:R+2*(Q-R)/3});V.push({radius:5*P/8,depth:R+7*(Q-R)/9});V.push({radius:5*
P/8,depth:R+8*(Q-R)/9});V.push({radius:3*P/4,depth:R+8*(Q-R)/9+W.Tb});V.push({radius:3*P/4,depth:Q});K=r(K,M,V);K.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:v;K.annotation=M.data.annotation;K.radiusmin=0;K.radiusmax=P/2;K.size=1;return p(K,M)}function f(K,M){K=r(K,M);K.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:A;K.annotation=M.data.annotation;q(M,K);return p(K,M)}function g(K,M){K=r(K,M);K.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:C;K.annotation=
M.data.annotation;q(M,K);return p(K,M)}function h(K,M){K=r(K,M);K.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:x;K.annotation=M.data.annotation;q(M,K);return p(K,M)}function k(K,M){var P=r(K,M);P.colorprovider=null!=M.data.colorprovider?M.data.colorprovider:z;q(M,P);K=new fz;!1===M.data.casing&&(P.tubevisible=!1);var R=p(P,M);K.add(R);null!=M.data.annotation&&(!1!==M.data.casingshoe&&1<P.data.x.length?(K.add(m(P,M)),P=R.ta().data.z,R.pZ(new UA(M.data.annotation),P[P.length-1])):R.pZ(new UA(M.data.annotation)));
return K}function l(K,M){K=r(K,M);var P={};null!=M.data.colorprovider?(K.colorprovider=M.data.colorprovider,K.colorprovider instanceof Mo?P.vertexColors=!0:P.color=K.colorprovider):P.color=x;M=new rt(new TC(K),new tt(P));M.position.set(K.data.origin.x,K.data.origin.y,K.data.origin.z);return M}function m(K,M){var P=M.data.casingshoesize||y,R=M.data.casingshoesize||y,Q=K.size/R;K.radius=R;K.offset=Q;R=[];var V=K.data.x,Z=K.data.y,aa=K.data.z;I.set(V[V.length-1],Z[Z.length-1],aa[aa.length-1]);for(var na=
!1,ya=0;ya<aa.length;ya++){F.set(V[ya],Z[ya],aa[ya]);var va=F.distanceTo(I);va<P?(na||(J.set(V[ya-1],Z[ya-1],aa[ya-1]),J.subVectors(J,F).normalize().multiplyScalar(P-va).add(F),Number.isNaN(J.x)||Number.isNaN(J.y)||Number.isNaN(J.z)||(V.splice(ya,0,J.x),Z.splice(ya,0,J.y),aa.splice(ya,0,J.z),R.push(0),ya++),na=!0),R.push(1-va/P)):R.push(0)}K.data.curvevalues1=R;P=new fz;P.add(n(K,M));K.offset=-Q;P.add(n(K,M));return P}function n(K,M){var P=new aD(K);P.position.set(K.data.origin.x,K.data.origin.y,
K.data.origin.z);null==M.data.side&&(M.data.side=Fr);null==M.data.opacity&&(M.data.opacity=.5);P.children[0].material.opacity=M.data.opacity;P.children[0].material.side=M.data.side;return P}function p(K,M){var P=new fD(K);P.position.set(K.data.origin.x,K.data.origin.y,K.data.origin.z);null==M.data.side&&(M.data.side=Fr);K.tubevisible&&(P.children[0].material.opacity=null!=M.data.opacity?M.data.opacity:.5,1>P.children[0].material.opacity&&M.data.side===Fr?(M=new fD(K),M.children[0].material.opacity=
P.children[0].material.opacity,P.children[0].material.side=ls,M.children[0].material.side=mq,P.children[0].material.transparent=M.children[0].material.transparent=!0,M.children[0].renderOrder=-K.size,P.children[0].renderOrder=K.size,P.add(M)):P.children[0].material.side=M.data.side);K.annotation&&P.pZ(new UA(K.annotation));!1===K.tubevisible&&P.remove(P.children[0]);return P}function q(K,M){M.size=w*K.radiusscaling;null!=K.data.geometry.diameter.outer?M.size=K.data.geometry.diameter.outer*K.radiusscaling:
null!=K.data.geometry.diameter.inner&&(M.size=K.data.geometry.diameter.inner*K.radiusscaling);M.size*=u}function r(K,M,P){var R={},Q=K.Gf(),V=K.vg();null!=M.data.geometry&&null!=M.data.geometry.depth&&(null!=M.data.geometry.depth.from&&(Q=M.data.geometry.depth.from),null!=M.data.geometry.depth.to&&(V=M.data.geometry.depth.to));R.data=K.gMc(Q,V,P);null!=M.data.value&&(R.data.values=K.$Sc(M.data.value,Q,V,P));return R}var t=null,u=.5,w=50,y=50,z="red",x="lightblue",C="lightgray",A="pink",v="yellow",
B="black",E="blue",H="gray",F=new Hp,I=new Hp,J=new Hp;D(d,ZB);L(d,"geotoolkit3d.schematics.factory.Trajectory");d.klb=function(K,M,P){var R=K.Gf();K=K.vg();null!=M.data.geometry&&null!=M.data.geometry.depth&&(null!=M.data.geometry.depth.from&&(M.data.geometry.depth.from<R&&(M.data.geometry.depth.from=R),M.data.geometry.depth.from>K&&(M.data.geometry.depth.from=K)),null!=M.data.geometry.depth.to&&(M.data.geometry.depth.to>K&&(M.data.geometry.depth.to=K),M.data.geometry.depth.to<R&&(M.data.geometry.depth.to=
R)));M.radiusscaling=P};d.ya=function(){t||(t=new d);return t};return d}(),2,"eyJnZXRJbnN0YW5jZSI6InlhIn0g");var FY=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(c){fz.call(this);c=G(c,{data:null,radiusscaling:1});this.bu=c.data;this.eYb=c.radiusscaling;this.Nea=c.components;null!=this.bu&&null!=this.bu.getX(0)&&null!=this.bu.getY(0)&&null!=this.bu.getZ(0)&&this.position.set(this.bu.getX(0),this.bu.getY(0),this.bu.getZ(0));this.n4a=[];this.ZV=[];this.xea=[];this.LPa=[];this.p4a=c.annotationlayout||new DY;this.Sq=[];this.sW=[];var e=this;this.nkc=function(f){e.klb(f);if(null==f["static"]||!0!==f["static"]){var g=e.getObjectById(f.id);
null==g?e.b3b(f):g.parameters!==JSON.stringify(f)&&e.j8d(f,g)}};this.Nea.Hs().forEach(function(f){e.b3b(f)});this.kyc=function(f,g,h){e.b3b(h)};this.Ryc=function(f,g,h){null!=h&&e.nkc(h)};this.Cyc=function(f,g,h){e.iec(h)};this.Nea.on(Eo.eP,this.kyc);this.Nea.on(Eo.hx,this.Ryc);this.Nea.on(Eo.CG,this.Cyc)}var a=new Hp,b=new Hp;D(d,fz);L(d,"geotoolkit3d.scene.schematics.SchematicsNode");d.prototype.dispose=function(){this.Nea.za(Eo.eP,this.kyc);this.Nea.za(Eo.hx,this.Ryc);this.Nea.za(Eo.CG,this.Cyc);
fz.prototype.dispose.call(this)};d.prototype.iec=function(c){var e=c;null==c.length&&(e=[c]);var f=[],g=this;e.forEach(function(h){if(null!==h.id){if(g.sW&&g.sW[h.id]){if(0<g.ZV.length)for(var k=g.sW[h.id],l=0;l<g.ZV.length;l++)f.includes(l)||k===g.ZV.x&&f.push(l);delete g.sW[h.id]}k=g.getObjectById(h.id);g.gec(k);g.remove(k);hz.dispose(k);h.id=null}});f.forEach(function(h){g.ckc(h)})};d.prototype.b3b=function(c){this.klb(c);if(null==c.id){var e=EY.ya().createElement(this.bu,c);null!=e&&(this.K0b(e),
this.add(e))}else{var f=this.getObjectById(c.id);f.parameters!==JSON.stringify(c)&&(e=EY.ya().createElement(this.bu,c),null!=e&&(this.K0b(e),this.add(e)),this.gec(f),this.remove(f),hz.dispose(f))}this.sFc(c)};d.prototype.j8d=function(c,e){this.klb(c);var f=EY.ya().t8d(this.bu,c,e);null!==f&&(null!=f&&(this.K0b(f),this.add(f)),this.gec(e),this.remove(e),hz.dispose(e));this.sFc(c)};d.prototype.klb=function(c){EY.klb(this.bu,c,this.eYb);return null};d.prototype.ui=function(){this.Nea.Hs().forEach(this.nkc)};
d.prototype.fb=function(){hb("SchematicsNode.getAnnotation was deprecated since 3.3, use SchematicsNode.getAnnotations instead");return this.Sq[0]};d.prototype.jdb=function(){return this.Sq};d.prototype.pZ=function(c,e){hb("SchematicsNode.setAnnotation was deprecated since 3.3, use SchematicsNode.setAnnotations instead");return this.d1c([c],[e])};d.prototype.d1c=function(c,e){var f=this;this.Sq.forEach(function(k){f.remove(k)});this.Sq.length=0;this.n4a.length=0;this.ZV.length=0;this.xea.length=0;
this.LPa.length=0;this.sW={};for(var g=0;g<c.length;g++){this.Sq.push(c[g]);var h=e&&e[g];this.lV(null!=h?h:.5*(this.bu.getZ(0)+this.bu.getZ(this.bu.count()-1)),g);this.add(c[g])}return this};d.prototype.ckc=function(c){var e=0,f;for(f in this.sW)e=Math.max(e,this.sW[f]);this.ZV[c]=this.ZV[c]||new Hp(0,0,1);this.ZV[c].setX(e).setY(e);this.xea[c]=this.xea[c]||new Ur;this.Sq[c].Wib(this.ZV[c],this.xea[c])};d.prototype.lV=function(c,e){c=W.findIndex(c,this.bu.vNd(),null,null,function(h,k){return k-h})||
1;0>c&&(c=~c);this.n4a[e]=this.n4a[e]||new Hp;this.n4a[e].set((this.bu.getX(c-1)+this.bu.getX(c))/2+this.bu.U1().x,(this.bu.getY(c-1)+this.bu.getY(c))/2+this.bu.U1().y,(this.bu.getZ(c-1)+this.bu.getZ(c))/2+this.bu.U1().z);this.LPa[e]=(this.bu.Ub(c-1)+this.bu.Ub(c))/2;var f=this,g=this.Nea.Hs();g.forEach(function(h){h.data.geometry&&h.data.geometry.depth.from<=f.LPa[e]&&h.data.geometry.depth.to>=f.LPa[e]&&(f.sW[h.id]=h.data.geometry.diameter.outer||h.data.geometry.diameter.inner)});this.ckc(e);a.set(this.bu.getX(c-
1),this.bu.getY(c-1),this.bu.getZ(c-1));a.set(this.bu.getX(c),this.bu.getY(c),this.bu.getZ(c));b.sub(a).normalize();a.set(-1,0,0);a.crossVectors(b,a).normalize();this.xea[e]=this.xea[e]||new Ur;this.xea[e]=Wy.scb(a,b,this.xea[e]);this.Sq[e].M_a(this.n4a[e]);this.Sq[e].Wib(this.ZV[e],this.xea[e]);return this};d.prototype.sFc=function(c){for(var e=this,f=[],g=0;g<this.Sq.length;g++)if(c.data.geometry&&c.data.geometry.depth&&c.data.diameter&&c.data.geometry.depth.from<=this.LPa[g]&&c.data.geometry.depth.to>=
this.LPa[g]){var h=c.data.geometry.diameter.outer||c.data.geometry.diameter.inner,k=!1;this.sW[c.id]!==h&&this.sW[c.id]===this.ZV[g].x&&(k=!0);h>this.ZV[g].x&&(this.ZV[g].setX(h).setY(h),this.Sq[g].Wib(this.ZV[g],this.xea[g]),k=!1);this.sW[c.id]=h;k&&f.push(g)}else this.sW[c.id]&&(this.sW[c.id]===this.ZV[g].x&&f.push(g),delete this.sW[c.id]);f.forEach(function(l){e.ckc(l)})};d.prototype.setOptions=function(c){if(null==c)return this;fz.prototype.setOptions.call(this,c);if(c.hasOwnProperty("radiusscaling")){this.eYb=
c.radiusscaling;var e=this;this.Nea.Hs().forEach(function(f){e.nkc(f)})}return this};d.prototype.ta=function(){return xb({radiusscaling:this.eYb},fz.prototype.ta.call(this))};d.prototype.X9b=function(){return this.bu};d.prototype.K0b=function(c){var e=this;c.traverse(function(f){f instanceof UA&&e.p4a.loa(f)})};d.prototype.gec=function(c){var e=this;c.traverse(function(f){f instanceof UA&&e.p4a.nja(f)})};d.prototype.N_a=function(c){var e=this.p4a.cTb();e.forEach(function(f){c.loa(f)});this.p4a.dispose();
this.p4a=c;this.gg();return this};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbm5vdGF0aW9uIjoiZmIiLCJnZXRBbm5vdGF0aW9ucyI6ImpkYiIsInNldEFubm90YXRpb24iOiJwWiIsInNldEFubm90YXRpb25zIjoiZDFjIiwiZ2V0T3B0aW9ucyI6InRhIiwiZ2V0VHJhamVjdG9yeURhdGEiOiJYOWIiLCJzZXRBbm5vdGF0aW9uTGF5b3V0IjoiTl9hIn19fSAg");var GY=/*#__PURE__*/ta(/*#__PURE__*/function(){function d(){CY.call(this)}var a=new uq,b=new Hp,c=new Hp;D(d,CY);L(d,"geotoolkit3d.schematics.layout.ExpandedAnnotationLayout");d.prototype.zc=function(){var e=this.cTb();if(0!==e.length){e.sort(function(k,l){var m=k.Gy(),n=l.Gy();null==m&&(a.makeEmpty(),a.expandByObject(k.parent),m=b,a.getCenter(m));null==n&&(a.makeEmpty(),a.expandByObject(l.parent),n=c,a.getCenter(n));return m.z-n.z});var f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY;e.forEach(function(k){f=Math.min(f,
k.Gy().z);g=Math.max(g,k.Gy().z)});if(1===e.length)e[0].Nib(new Hp(0,0,f));else{e[0].Nib(new Hp(0,0,f));for(var h=1;h<e.length-1;h++)e[h].Nib(new Hp(0,0,f+(g-f)*h/(e.length-1)));e[e.length-1].Nib(new Hp(0,0,g))}}};return d}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJ6YyJ9fX0g");export {oha,Fp,Gp,Hp,Ip,Jp,Kp,Lp,Mp,Np,Op,Pp,Qp,Rp,Sp,Tp,Up,Zp,$p,aq,bq,cq,dq,eq,fq,gq,hq,iq,jq,kq,lq,mq,nq,oq,pq,qq,rq,sq,tq,uq,vq,wq,xq,yq,zq,Aq,Bq,Cq,Dq,Eq,Fq,Gq,Hq,Iq,Jq,Kq,Lq,Mq,Nq,Oq,Pq,Qq,Rq,Sq,Tq,Uq,Vq,Wq,Xq,Yq,Zq,$q,ar,br,cr,dr,er,fr,gr,hr,ir,jr,kr,lr,mr,nr,or,pr,qr,rr,sr,tr,ur,vr,wr,xr,yr,zr,Ar,Br,Cr,Dr,Fr,Gr,Hr,Ir,Jr,Kr,Lr,Mr,Nr,Pr,Qr,Rr,Sr,Tr,Ur,Vr,Wr,Xr,Yr,Zr,$r,as,bs,cs,ds,es,fs,gs,hs,is,js,ks,ls,ms,ns,os,ps,qs,rs,ss,ts,us,vs,xs,ys,zs,As,Bs,Cs,Ds,Es,Fs,Gs,Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs,Rs,Ss,Ts,Us,Vs,Ws,Xs,Ys,Zs,$s,at,bt,ct,dt,et,ft,gt,ht,it,jt,kt,lt,mt,nt,ot,pt,qt,rt,st,tt,ut,vt,wt,xt,yt,zt,At,Bt,Ct,Dt,Et,Ft,Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,Qt,Rt,St,Tt,Ut,Vt,Wt,Xt,Yt,Zt,$t,au,bu,cu,du,eu,fu,gu,hu,iu,ju,ku,lu,mu,ou,pu,qu,ru,su,tu,uu,vu,wu,xu,yu,zu,Au,Bu,Cu,Du,Eu,Fu,Gu,Hu,Iu,Ju,Ku,Lu,Mu,Nu,Ou,Pu,Qu,Ru,Su,Tu,Uu,Vu,Wu,Xu,Yu,Zu,$u,av,bv,cv,dv,ev,fv,gv,hv,iv,jv,kv,lv,mv,nv,ov,pv,qv,rv,sv,uv,vv,wv,xv,yv,zv,Av,Bv,Cv,Dv,Ev,Fv,Gv,Hv,Iv,Jv,Kv,Lv,Mv,Nv,Ov,Pv,Qv,Rv,Sv,Tv,Uv,Vv,Wv,Xv,Yv,Zv,$v,aw,bw,cw,dw,ew,fw,gw,hw,iw,jw,kw,lw,mw,nw,ow,pw,qw,rw,sw,tw,uw,vw,ww,xw,yw,zw,Aw,Bw,Cw,Dw,Ew,Fw,Gw,Hw,Iw,Jw,Kw,Lw,Mw,Nw,Ow,Pw,Qw,Rw,Sw,Tw,Uw,Vw,Ww,Xw,Yw,Zw,$w,ax,bx,cx,dx,ex,fx,gx,hx,ix,jx,kx,lx,mx,nx,ox,px,qx,rx,sx,tx,ux,vx,wx,xx,yx,zx,Ax,Bx,Cx,Dx,Ex,Fx,Gx,Hx,Ix,Jx,Kx,Lx,Mx,Nx,Ox,Px,Qx,Rx,Sx,Tx,Ux,Vx,Wx,Xx,Yx,Zx,$x,ay,by,cy,dy,ey,fy,gy,hy,iy,jy,ky,ly,my,ny,oy,py,qy,ry,sy,ty,uy,vy,wy,xy,lha,mha,nha,yy,zy,Ay,By,Cy,Dy,Ey,Fy,Hy,Iy,Jy,Ky,Ly,My,Ny,Oy,Py,Qy,Ry,Sy,Ty,Uy,Wy,Xy,Yy,Zy,$y,az,bz,cz,dz,ez,fz,gz,hz,iz,jz,kz,lz,mz,oz,pz,qz,rz,sz,tz,uz,vz,wz,xz,yz,zz,Az,Bz,Cz,Dz,Ez,Fz,Gz,Hz,Iz,Jz,Kz,Lz,Mz,Nz,Oz,Pz,Qz,Rz,Sz,Tz,Uz,Vz,Wz,Xz,Yz,Zz,$z,aA,bA,cA,dA,eA,fA,gA,hA,iA,jA,kA,lA,mA,nA,oA,pA,qA,rA,sA,tA,uA,vA,wA,xA,yA,zA,AA,BA,CA,DA,EA,FA,GA,HA,IA,JA,KA,LA,MA,NA,OA,PA,RA,SA,TA,UA,nja,VA,WA,XA,YA,ZA,$A,aB,bB,cB,dB,eB,fB,gB,hB,iB,jB,pB,qB,rB,tB,uB,vB,wB,xB,yB,zB,AB,BB,CB,DB,EB,FB,Wja,GB,HB,IB,JB,KB,LB,MB,NB,OB,PB,QB,RB,SB,TB,UB,VB,WB,XB,YB,ZB,$B,aC,bC,cC,dC,eC,fC,gC,hC,iC,jC,kC,Aka,lC,mC,nC,oC,pC,qC,rC,Jka,sC,tC,uC,vC,wC,xC,yC,zC,AC,BC,CC,Wka,DC,EC,FC,GC,HC,IC,JC,KC,LC,MC,NC,OC,PC,QC,RC,SC,TC,UC,VC,WC,XC,YC,ZC,$C,aD,bD,cD,dD,eD,fD,Ala,gD,hD,iD,jD,kD,lD,mD,nD,oD,pD,qD,rD,sD,tD,vD,wD,yD,zD,AD,BD,DI,EI,FI,GI,HI,II,JI,KI,xL,yL,zL,AL,BL,csa,CL,DL,EL,FL,CY,DY,EY,FY,GY};